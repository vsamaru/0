(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8230],{8230:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return T}});var n=r(67294),s=r(55993),o=r(29539),i=r(36865),c=r(53368),l=r(50734),a=r(25875),d=r(97138),u=r(81260),p=r(84337),f=r(54480);const x="Your Library",m={id:x,name:x};var b=r(50449),h=r(85893);function g({inputValue:e,setInputValue:t}){return(0,h.jsx)("div",{className:"flex flex-col space-y-3",children:(0,h.jsx)("input",{type:"textbox",className:"rounded-lg bg-jellyfishBgcolor py-3.5 px-6 font-medium shadow-md focus:outline-none focus:ring-2 focus:ring-primaryAccent",onChange:e=>{t(e.target.value)},value:e})})}var y=r(59499),w=r(94184),j=r.n(w),v=r(27210),N=r(30573);function k({onClick:e,isPublic:t,workspaces:r,selectedWorkspaceId:n}){const{features:s}=(0,v.gJ)(r),o=r.length>1||s.user.library||s.recording.public,i=o?[...r,m].find((e=>e.id===n)).name:r[0].name,{icon:c,text:l}=((e,t,r)=>e?{text:"This replay can be viewed by anyone with the link",icon:"public"}:t===x?{text:"Only you can view this",icon:"person"}:{text:`Shared privately with ${r}`,icon:"groups"})(t,n,i);return(0,h.jsxs)("button",{className:j()(!o&&"cursor-default","flex w-full flex-row items-center justify-between hover:text-primaryAccent focus:text-primaryAccentHover focus:outline-none"),type:"button",onClick:o?e:void 0,style:{minHeight:"38px"},children:[(0,h.jsxs)("div",{className:"flex flex-row items-center space-x-2.5",children:[(0,h.jsx)("span",{className:"material-icons",style:{fontSize:"24px"},children:c}),(0,h.jsx)("div",{className:"font-medium",children:l})]}),o?(0,h.jsxs)("div",{className:"flex flex-row items-center space-x-2",children:[(0,h.jsx)("div",{className:"font-medium",children:"Edit"}),(0,h.jsx)("span",{className:"material-icons",style:{fontSize:"24px"},children:"edit"})]}):null]})}var O=r(91013),P=r(66220),_=r(92182),D=r(61753);const S=({selectedWorkspaceName:e})=>(0,h.jsxs)("div",{className:"relative w-full cursor-default rounded-md border border-textFieldBorder bg-jellyfishBgcolor py-1.5 pl-2.5 pr-8 text-left shadow-sm focus:border-primaryAccentHover focus:outline-none focus:ring-1 focus:ring-primaryAccent",children:[(0,h.jsx)("span",{className:"block truncate",children:e}),(0,h.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-1.5",children:(0,h.jsx)(O.Z,{className:"h-4 w-4 text-textFieldBorder","aria-hidden":"true"})})]});function C({workspaces:e,selectedWorkspaceId:t,handleWorkspaceSelect:r}){const s=(0,P.useGetUserInfo)(),{0:o,1:i}=(0,n.useState)(!1);let c=[...e].sort();s.features.library&&(c=[m,...c]);const l=(c.find((e=>e.id===t))||c[0]).name,a=(0,h.jsx)(S,{selectedWorkspaceName:l});return(0,h.jsx)(D.Z,{buttonContent:a,setExpanded:i,expanded:o,buttonStyle:"",distance:0,position:"bottom-right",children:(0,h.jsx)(_.Lt,{widthClass:"w-64",fontSizeClass:"text-base",children:(0,h.jsx)("div",{className:"max-h-48 overflow-auto",children:c.map((e=>(0,h.jsx)(_.hP,{onClick:()=>(e=>{r(e.id),i(!1)})(e),children:e.name||""},e.id)))})})})}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,y.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L({workspaces:e,selectedWorkspaceId:t,setSelectedWorkspaceId:r,isPublic:n,setIsPublic:s}){const o=c.Z.useUpdateDefaultWorkspace(),i=(0,v.Tj)(e,t);return(0,h.jsxs)("div",{className:"grid w-full grid-cols-2 gap-5 text-base",children:[(0,h.jsx)(C,{handleWorkspaceSelect:t=>{s(n&&!(0,v.Tj)(e,t)),r(t);o({variables:{workspaceId:t===x?null:t}})},selectedWorkspaceId:t,workspaces:e}),(0,h.jsxs)("div",{className:j()(i?"opacity-60":void 0,"flex w-full cursor-default select-none flex-row items-center justify-between space-x-2 rounded-md border border-textFieldBorder bg-jellyfishBgcolor px-2.5 py-1.5 text-left shadow-sm focus:border-primaryAccentHover focus:outline-none focus:ring-1 focus:ring-primaryAccent"),onClick:()=>!i&&s(!n),children:[(0,h.jsx)("div",{children:"Public Access"}),(0,h.jsx)(N.ZD,{enabled:n&&!i,setEnabled:i?()=>{}:s})]})]})}function Z(e){const{0:t,1:r}=(0,n.useState)(!1);return(0,h.jsx)("div",{className:"relative",children:t?(0,h.jsx)(L,B({},e)):(0,h.jsx)(k,B(B({},e),{},{onClick:()=>r(!t)}))})}var E=r(28984);function R({workspaces:e,selectedWorkspaceId:t}){const r=e.find((e=>e.id===t));if(!r)return null;const n=(0,u.NU)(r);return n>0&&!(0,u.sD)(r)?null:(0,h.jsx)(E.w,{expiresIn:n,color:"yellow",className:"absolute top-0 z-10 -translate-y-1/2 p-2 px-3"})}function W({url:e}){return(0,n.useEffect)((()=>{setTimeout((()=>{window.location.href=e}),1200)})),(0,h.jsx)("div",{className:"h-full w-full",children:(0,h.jsx)(i.ZP,{children:(0,h.jsxs)("div",{className:"relative flex flex-col items-center justify-between space-y-4 overflow-y-auto rounded-md bg-modalBgcolor p-9 text-base shadow-lg",style:{width:"400px"},children:[(0,h.jsx)(f.Z,{size:"sm"}),(0,h.jsx)("h2",{className:"text-2xl font-bold ",children:"Replay discarded"}),(0,h.jsx)("div",{className:"text-md space-y-2",children:(0,h.jsx)("div",{children:"Hang tight while we load your library..."})})]})})})}function A({onDiscard:e,status:t}){const r="saving"===t,s="deleting"===t,o=r||s,i=n.useRef(null);return(0,n.useEffect)((()=>{i.current?.focus()}),[]),(0,h.jsxs)("div",{className:"space-x-5",children:[(0,h.jsx)("button",{type:"button",onClick:e,disabled:o,className:"py-3.5 px-8 text-secondaryAccent hover:underline focus:underline focus:outline-none",children:s?"Discarding\u2026":"Discard"}),(0,h.jsx)("input",{type:"submit",disabled:o,value:r?"Uploading\u2026":"Save",ref:i,className:"mb-8 cursor-pointer rounded-xl bg-primaryAccent py-3.5 px-16 font-bold text-buttontextColor shadow-sm hover:bg-primaryAccentHover focus:border-primaryAccentHover focus:outline-none focus:ring focus:ring-primaryAccentHover"})]})}function H(){return(0,h.jsxs)("div",{className:"absolute bottom-2 right-2 flex place-content-center rounded-md bg-gray-500 p-2 text-xs text-white shadow-lg",children:[(0,h.jsx)(p.Z,{filename:"warning",size:"small",className:"bg-white"}),(0,h.jsx)("span",{className:"px-1",children:"Replays work best under 2 minutes"})]})}function z({screenData:e,showLimitWarning:t}){return(0,h.jsxs)("div",{className:"relative h-64 rounded-lg bg-jellyfishBgcolor px-6 pt-6 shadow-lg short:hidden",children:[t?(0,h.jsx)(H,{}):null,(0,h.jsx)("img",{src:e,className:"m-auto h-full"})]})}var G=function({recording:e,userSettings:t,onUpload:r}){const i=(0,l.useGetRecordingId)(),{screenData:p,loading:f}=c.Z.useGetRecordingPhoto(i),{workspaces:m,loading:y}=c.Z.useGetNonPendingWorkspaces(),{0:w,1:j}=(0,n.useState)(!1),{0:v,1:N}=(0,n.useState)(null),{0:k,1:O}=(0,n.useState)(e?.title||"Untitled"),{0:P,1:_}=(0,n.useState)(!1),{0:D,1:S}=(0,n.useState)(t?.defaultWorkspaceId||x),C=c.Z.useInitializeRecording(),I=c.Z.useUpdateIsPrivate(),B=c.Z.useDeleteRecording((()=>N("deleted")));return(0,n.useEffect)((()=>(window.onbeforeunload=()=>!0,()=>{window.onbeforeunload=null})),[]),f?(0,h.jsx)(s.Z,{fallbackMessage:"Loading recording metadata..."}):y?(0,h.jsx)(s.Z,{fallbackMessage:"Loading team info..."}):"deleted"===v?(0,h.jsx)(W,{url:"/"}):(0,h.jsx)(o.M,{children:(0,h.jsxs)("div",{className:"flex flex-col items-center",children:[(0,h.jsx)(R,{selectedWorkspaceId:D,workspaces:m}),(0,h.jsxs)("form",{className:"relative flex flex-col items-center overflow-auto",onSubmit:async e=>{e.preventDefault(),N("saving");const t=D==x?null:D;(0,d.L9)("upload.create_replay",{workspaceUuid:(0,u.VD)(t)}),await C({variables:{recordingId:i,title:k,workspaceId:t}}),I(i,!P),r()},children:[(0,h.jsxs)("div",{className:"mb-10 flex flex-row space-x-4 short:h-auto",children:[(0,h.jsxs)("div",{className:"relative flex flex-col overflow-hidden rounded-xl text-lg font-medium shadow-lg",style:{width:"620px"},children:[(0,h.jsx)("div",{className:"absolute h-full w-full bg-jellyfishBgcolor"}),(0,h.jsxs)("div",{className:"relative space-y-6 px-8 py-9",children:[(0,h.jsx)(g,{inputValue:k,setInputValue:O}),(0,h.jsx)(z,{screenData:p,showLimitWarning:(0,a.rO)(e)})]}),(0,h.jsxs)("div",{className:"relative space-y-6 border-t border-themeBorder px-8 py-9",children:[(0,h.jsx)(Z,{workspaces:m,selectedWorkspaceId:D,setSelectedWorkspaceId:S,isPublic:P,setIsPublic:_}),P&&e.operations?(0,h.jsx)("div",{className:"border focus:bg-red-500 focus:text-blue-800",children:(0,h.jsx)(b.r2,{showPrivacy:w,operations:e.operations,setShowPrivacy:j})}):null]})]}),w&&P?(0,h.jsx)("div",{className:"relative flex h-full overflow-hidden rounded-xl bg-themeBase-90 shadow-xl",style:{width:"440px"},children:(0,h.jsx)(b.PJ,{})}):null]}),(0,h.jsx)(A,{onDiscard:()=>{N("deleting"),(0,d.L9)("upload.discard"),window.onbeforeunload=null,B({variables:{recordingId:i}})},status:v})]})]})})},U=r(38409);var T=function({onUpload:e}){const t=(0,l.useGetRecordingId)(),{recording:r}=(0,l.useGetRecording)(t),{userSettings:i,loading:c}=(0,U.useGetUserSettings)();return(0,n.useEffect)((()=>{r?.isInitialized&&(window.onbeforeunload=null)})),c?(0,h.jsx)(s.Z,{fallbackMessage:"Loading settings..."}):r?(0,h.jsx)(G,{userSettings:i,recording:r,onUpload:e}):(0,h.jsx)(o.B,{})}},92182:function(e,t,r){"use strict";r.d(t,{Im:function(){return p},Lt:function(){return d},YV:function(){return f},hP:function(){return u}});var n=r(40414),s=r(94184),o=r.n(s),i=(r(67294),r(84337)),c=r(68925),l=r.n(c),a=r(85893);function d({children:e,menuItemsClassName:t,widthClass:r="w-56",fontSizeClass:s="text-sm"}){return(0,a.jsx)(n.v,{as:"div",className:"recording-options inline-block text-left shadow-lg",children:({open:i})=>(0,a.jsx)(n.v.Items,{static:!0,className:o()(t,r,s,"right-0 origin-top-right rounded-md border-modalBorder bg-menuBgcolor shadow-lg ring-1 ring-black ring-opacity-5 backdrop-blur-sm focus:outline-none"),children:(0,a.jsx)("div",{className:"py-1",children:e})})})}function u({children:e,onClick:t}){return(0,a.jsx)(n.v.Item,{children:({active:r})=>(0,a.jsx)("a",{href:"#",className:o()(r?"bg-menuHoverBgcolor text-menuHoverColor":"text-menuColor","block px-4 py-2"),onClick:t,children:e})})}function p({children:e,icon:t,selected:r}){return(0,a.jsxs)("div",{className:"flex flex-row space-x-4",children:[(0,a.jsx)("div",{className:o()("flex w-4 flex-row items-center"),children:(0,a.jsx)(i.Z,{filename:t,className:o()("group-hover:bg-primaryAccent",r?"bg-primaryAccent":"bg-gray-400")})}),(0,a.jsx)("span",{className:"overflow-hidden overflow-ellipsis whitespace-pre",children:e})]})}function f(){return(0,a.jsx)("div",{className:`w-full ${l().dropdownDivider}`})}},84337:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(59499),s=(r(67294),r(85893));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const c={custom:{},small:{height:"1rem",width:"1rem"},medium:{height:"1.25rem",width:"1.25rem"},large:{height:"1.5rem",width:"1.5rem"},"extra-large":{height:"2rem",width:"2rem"}};function l({filename:e,className:t="bg-gray-800",size:r="medium",style:n={}}){const o=c[r];return(0,s.jsx)("div",{className:`icon ${e} ${t}`,style:i(i({},o),n)})}},61753:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(59499),s=r(67294),o=r(73935),i=r(65036),c=r(6992),l=r(85893);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e){const t=(0,s.useRef)(null),{0:r,1:n}=(0,s.useState)(null),{buttonContent:a,children:u,position:p="bottom-left",buttonStyle:f="primary",style:x,expanded:m}=e,b=function(e,t,r){if(e.expanded&&t.current){const n=t.current.getBoundingClientRect(),s=document.body.getBoundingClientRect(),o=r?.getBoundingClientRect(),{left:i,right:c,top:l,bottom:a}=n,{width:d,height:u}=s,p=e.distance||5;let f=e.position||"bottom-left";switch(function(e,t){const r=[];if(!t)return[];e.bottom<t.bottom&&r.push("bottom");e.top>t.top&&r.push("top");return r}(s,o).forEach((e=>{f.includes(e)&&(f=function(e,t){const r={top:"bottom",bottom:"top"};return e.replace(t,r[t])}(f,e))})),f){case"top-right":return{bottom:u-l+p+"px",left:i+"px"};case"bottom-right":return{top:a+p+"px",left:i+"px"};case"top-left":return{bottom:u-l+p+"px",right:d-c+"px"};case"bottom-left":return{top:a+p+"px",right:d-c+"px"}}}return{}}(e,t,r),h=(0,c.CG)(i.getToolboxLayout);return(0,l.jsxs)("div",{className:"portal-dropdown-wrapper",children:[(0,l.jsx)("button",{type:"button",className:`expand-dropdown flex w-full ${f}`,disabled:e.disabled,id:"portal-dropdown-button","data-test-id":"consoleDockButton","data-test-state":h,onMouseDown:t=>{0===t.button&&(t.stopPropagation(),t.preventDefault(),e.setExpanded(!0))},ref:t,children:a}),m?(0,o.createPortal)((0,l.jsxs)("div",{className:"portal-dropdown-container",children:[(0,l.jsx)("div",{className:"mask",onClick:t=>{t.stopPropagation(),t.preventDefault(),e.setExpanded(!1)}}),(0,l.jsx)("div",{className:`content ${p}`,style:d(d({},x),b),ref:n,children:u})]}),document.body):null]})}},28984:function(e,t,r){"use strict";r.d(t,{w:function(){return c}});var n=r(94184),s=r.n(n),o=(r(67294),r(81217)),i=r(85893);function c({expiresIn:e,color:t="gray",className:r,onClick:n}){const c={backgroundColor:"yellow"===t?"#FFFB96":"#E9E9EB",cursor:n?"pointer":"default"};return e>=21?null:(0,i.jsxs)("div",{className:s()("flex flex-row items-center space-x-2 rounded-lg p-4 py-1",r),style:c,onClick:n,children:[(0,i.jsx)(o.Z,{iconSize:"xl",className:"text-gray-700",children:"timer"}),(0,i.jsx)("span",{className:"overflow-hidden overflow-ellipsis whitespace-pre text-gray-500",children:e>1?(0,i.jsxs)("span",{children:["Trial expires in ",e," days"]}):1==e?(0,i.jsx)("span",{children:"Trial expires in 1 day"}):(0,i.jsx)("span",{children:"Trial expired"})})]})}},27210:function(e,t,r){"use strict";r.d(t,{Q_:function(){return i},Tj:function(){return c},gJ:function(){return o}});var n=r(26870),s=r(43586);function o(e){return e.find((e=>e.isOrganization))?.settings||{features:{user:{library:!0,autoJoin:null},recording:{public:!0,allowList:[],blockList:[]}},motd:null}}function i(){const{workspaces:e,loading:t}=(0,n.useGetNonPendingWorkspaces)(),r=(0,s.Hv)();return!t&&!c(e,r)}function c(e,t){const r=e.find((e=>e.id===t)),n=e.some((e=>!1===e.settings?.features.recording.public));return!t&&n||!1===r?.settings?.features.recording.public}},68925:function(e){e.exports={libraryHeader:"Library_libraryHeader__Q6BUj",libraryWrapper:"Library_libraryWrapper__r3pJD",libraryRow:"Library_libraryRow__bJfe0",libraryRowSelected:"Library_libraryRowSelected__90gMl",teamRow:"Library_teamRow__YfBbJ",teamRowActive:"Library_teamRowActive__F8V2w",dropdownDivider:"Library_dropdownDivider__dG_PD",editButton:"Library_editButton__1jLbJ",recordingsBackground:"Library_recordingsBackground__tHlCM",navigation:"Library_navigation__GBDVP",workspaceName:"Library_workspaceName__zZEkn",runOverview:"Library_runOverview__L_KLG"}}}]);
//# sourceMappingURL=8230-b80a7616be007ece.js.map
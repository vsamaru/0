{"version":3,"file":"static/chunks/6953.8bef6e17d9fbda76.js","mappings":"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AAO,WACN,CACDhG,KAAM,6BACNgG,MAAO,kBACN,CACDhG,KAAM,sBACNgG,MAAO,WACN,CACDhG,KAAM,qBACNgG,MAAO,UACN,CACDhG,KAAM,yBACNgG,MAAO,cACN,CACDhG,KAAM,oBACNgG,MAAO,SACN,CACDhG,KAAM,yBACNgG,MAAO,cACN,CACDhG,KAAM,6BACNgG,MAAO,kBACN,CACDhG,KAAM,2BACNgG,MAAO,gBACN,CACDhG,KAAM,wBACNgG,MAAO,aACN,CACDhG,KAAM,uBACNgG,MAAO,YACN,CACDhG,KAAM,sBACNgG,MAAO,WACN,CACDhG,KAAM,oBACNgG,MAAO,SACN,CACDhG,KAAM,oBACNgG,MAAO,SACN,CACDhG,KAAM,sBACNgG,MAAO,WACN,CACDhG,KAAM,sBACNgG,MAAO,WACN,CACDhG,KAAM,6BACNgG,MAAO,kBACN,CACDhG,KAAM,yBACNgG,MAAO,cACN,CACDhG,KAAM,sBACNgG,MAAO,aAER,CACDF,SAAU,QACVC,OAAQ,CAAC,CACP/F,KAAM,uBACNgG,MAAO,YACN,CACDhG,KAAM,oBACNgG,MAAO,SACN,CACDhG,KAAM,uBACNgG,MAAO,YACN,CACDhG,KAAM,wBACNgG,MAAO,aACN,CACDhG,KAAM,sBACNgG,MAAO,WACN,CACDhG,KAAM,wBACNgG,MAAO,aACN,CACDhG,KAAM,wBACNgG,MAAO,aACN,CACDhG,KAAM,uBACNgG,MAAO,YACN,CACDhG,KAAM,yBACNgG,MAAO,cACN,CACDhG,KAAM,yBACNgG,MAAO,cACN,CACDhG,KAAM,yBACNgG,MAAO,cACN,CACDhG,KAAM,oBACNgG,MAAO,SACN,CACDhG,KAAM,0BACNgG,MAAO,iBAER,CACDF,SAAU,UACVC,OAAQ,CAAC,CACP/F,KAAM,4BACNgG,MAAO,eACN,CACDhG,KAAM,2BACNgG,MAAO,cACN,CACDhG,KAAM,6BACNgG,MAAO,gBACN,CACDhG,KAAM,6BACNgG,MAAO,gBACN,CACDhG,KAAM,4BACNgG,MAAO,eACN,CACDhG,KAAM,0BACNgG,MAAO,aACN,CACDhG,KAAM,4BACNgG,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","sources":["webpack://_N_E/./src/devtools/client/debugger/src/components/WelcomeBox.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Toggle.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/SourcemapToggle.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/SourcemapVisualizerLink.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Footer.tsx","webpack://_N_E/./src/ui/utils/storage.ts","webpack://_N_E/./src/ui/actions/contextMenus.ts","webpack://_N_E/./src/ui/components/ContextMenu/index.tsx","webpack://_N_E/./src/ui/components/ContextMenu/GutterContextMenu.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/src/contexts/ConsoleFiltersContext.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/src/constants.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/src/suspense/EventsCache.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/src/suspense/ExceptionsCache.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/src/utils/messages.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/src/suspense/MessagesCache.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/src/utils/loggables.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/LoggablesContext.tsx","webpack://_N_E/./src/ui/components/shared/Nags/Nags.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/SecondaryPanes/Breakpoints/TimeTooltip.tsx","webpack://_N_E/./src/ui/components/shared/PortalTooltip.tsx","webpack://_N_E/./src/ui/components/Timeline/UnloadedRegions.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/SecondaryPanes/Breakpoints/BreakpointTimelinePoint.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/SecondaryPanes/Breakpoints/BreakpointTimeline.tsx","webpack://_N_E/./packages/design/PrefixBadgePicker/Picker.tsx","webpack://_N_E/./packages/design/PrefixBadgePicker/index.tsx","webpack://_N_E/./src/ui/components/PrefixBadge.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/SecondaryPanes/Breakpoints/PanelStatus.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/SecondaryPanes/Breakpoints/BreakpointNavigation.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Breakpoints/Panel/FirstEditNag.tsx","webpack://_N_E/./src/ui/utils/autocomplete.ts","webpack://_N_E/./src/ui/components/shared/AppContainerPortal.tsx","webpack://_N_E/./src/ui/components/shared/CodeEditor/AutocompleteMatches.tsx","webpack://_N_E/./src/ui/components/shared/CodeEditor/ControlledCodeMirror.tsx","webpack://_N_E/./src/devtools/client/webconsole/utils/autocomplete-eager.ts","webpack://_N_E/./src/ui/components/shared/CodeEditor/useAutocomplete.tsx","webpack://_N_E/./src/ui/components/shared/CodeEditor/EditorWithAutocomplete.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Breakpoints/Panel/PanelInput.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Breakpoints/Panel/PanelEditor.tsx","webpack://_N_E/./packages/design/Icon/index.tsx","webpack://_N_E/./packages/design/AddCommentButton/index.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Breakpoints/Panel/PanelSummary/Popup.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Breakpoints/Panel/PanelSummary/SummaryExpression.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Breakpoints/Panel/PanelSummary/SummaryRow.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Breakpoints/Panel/PanelSummary/Condition.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Breakpoints/Panel/PanelSummary/Log.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Breakpoints/Panel/PanelSummary/index.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Breakpoints/Panel/Widget.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Breakpoints/Panel/Panel.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/ColumnBreakpoint.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/ColumnBreakpoints.tsx","webpack://_N_E/./src/devtools/client/debugger/src/utils/indentation.js","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/DebugLine.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/EditorLoadingBar.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/menus/editor.ts","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/EditorMenu.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/EmptyLines.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/StaticTooltip.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/LineNumberTooltip.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/shared/Popover.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/inspector/index.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/inspector/SourcePreviewInspector.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Preview/NewObjectInspector.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Preview/Popup.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Preview/PreviewHighlight.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Preview/index.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/ShortcutsContext.ts","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/SearchBar.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/src/utils/source.ts","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/ToggleWidgetButton.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Breakpoints/useBreakpoints.ts","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/useHighlightedLines.ts","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/useEditor.ts","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/useLineHitCounts.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/index.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/src/suspense/SyntaxParsingCache.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/Popup.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/PreviewPopup.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/hooks/useFontBasedListMeasurents.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/hooks/useClassListObserver.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/src/utils/string.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/hooks/useSearch.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/hooks/useSourceSearch.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/SourceSearchContext.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/CurrentLineHighlight.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/src/contexts/KeyboardModifiersContext.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/HoverButton.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/src/graphql/GraphQLClient.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/src/contexts/GraphQLClientContext.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/src/graphql/Comments.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/src/utils/points.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/AutoComplete/AutoCompleteListRow.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/AutoComplete/utils/findMatches.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/AutoComplete/AutoCompleteList.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/src/hooks/useCurrentPause.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/AutoComplete/AutoComplete.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/utils/getExpressionFromString.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/utils/getBadgeStyleVars.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/BadgePicker.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/CommentButton.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/utils/points.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/PointPanelTimeline.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/SyntaxHighlightedLine.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/PointPanel.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/SourceLineLoadingPlaceholder.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/utils/formatHitCount.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/SourceListRow.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/utils/getScrollbarWidth.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/SourceList.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/StreamingSourceLoadingProgressHeader.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/Source.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/utils/getExpressionForTokenElement.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/hooks/useSourceFileNameSearch.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/SourceFileNameSearchContext.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/SourceSearch.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/NewSourceAdapter.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/CommandPaletteButton.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Tab.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/Tabs.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/EditorPane.tsx","webpack://_N_E/./src/ui/utils/useWidthObserver.ts","webpack://_N_E/./src/ui/components/NetworkMonitor/FilterLayout.tsx","webpack://_N_E/./src/devtools/client/shared/components/PanelTabs.tsx","webpack://_N_E/./src/ui/components/NetworkMonitor/AddNetworkRequestCommentButton.tsx","webpack://_N_E/./src/ui/components/NetworkMonitor/BodyDownload.tsx","webpack://_N_E/./src/ui/components/NetworkMonitor/content.ts","webpack://_N_E/./src/ui/components/NetworkMonitor/HttpBody.tsx","webpack://_N_E/./src/ui/components/NetworkMonitor/RequestBody.tsx","webpack://_N_E/./src/ui/components/NetworkMonitor/ResponseBody.tsx","webpack://_N_E/./src/ui/components/NetworkMonitor/StackTrace.tsx","webpack://_N_E/./src/ui/components/NetworkMonitor/RequestDetails.tsx","webpack://_N_E/./src/ui/components/NetworkMonitor/ColumnsDropdown.tsx","webpack://_N_E/./src/ui/components/NetworkMonitor/HeaderGroups.tsx","webpack://_N_E/./src/ui/components/NetworkMonitor/RequestRow.tsx","webpack://_N_E/./src/ui/components/NetworkMonitor/RequestTable.tsx","webpack://_N_E/./src/ui/components/NetworkMonitor/Table.tsx","webpack://_N_E/./src/ui/components/NetworkMonitor/index.tsx","webpack://_N_E/./src/ui/utils/nodePicker.ts","webpack://_N_E/./src/ui/components/NodePicker.tsx","webpack://_N_E/./src/ui/components/shared/Loader.tsx","webpack://_N_E/./src/ui/components/WaitForReduxSlice.tsx","webpack://_N_E/./src/ui/components/SecondaryToolbox/getRecordingCapabilities.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/ConsoleContextMenuContext.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/src/hooks/useSearchDOM.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/hooks/useConsoleSearchDOM.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/ConsoleSearchContext.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/ConsoleSearch.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/ContextMenu.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/src/hooks/useModalDismissSignal.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/filters/FilterText.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/src/suspense/RecordingCache.ts","webpack://_N_E/./packages/design/Checkbox/index.tsx","webpack://_N_E/./packages/design/Badge/index.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/filters/EventType.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/filters/EventCategory.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/filters/EventsList.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/filters/FilterToggles.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/CurrentTimeIndicator.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/src/graphql/types.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/src/graphql/User.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/src/hooks/useDismissNag.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/MessageHoverButton.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/Source.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/renderers/EventLogRenderer.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/src/suspense/AnalysisCache.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/renderers/LogPointRenderer.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/StackRenderer.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/renderers/MessageRenderer.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/SyntaxHighlightedExpression.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/renderers/TerminalExpressionRenderer.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/renderers/UncaughtExceptionRenderer.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/MessagesList.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/ConsoleRoot.tsx","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/index.tsx","webpack://_N_E/./src/devtools/client/webconsole/components/Input/EagerEvalFooter.tsx","webpack://_N_E/./src/devtools/client/webconsole/components/Input/JSTerm.tsx","webpack://_N_E/./src/ui/components/SecondaryToolbox/NewConsole.tsx","webpack://_N_E/./src/ui/components/SecondaryToolbox/useTerminalHistory.ts","webpack://_N_E/./src/ui/utils/objectFetching.ts","webpack://_N_E/./src/ui/components/SecondaryToolbox/ReactDevTools.tsx","webpack://_N_E/./src/ui/components/SecondaryToolbox/ReduxDevTools.tsx","webpack://_N_E/./src/ui/components/SecondaryToolbox/SourcesTabLabel.tsx","webpack://_N_E/./src/ui/components/SecondaryToolbox/ToolboxButton.tsx","webpack://_N_E/./src/ui/components/SecondaryToolbox/ToolboxOptions.tsx","webpack://_N_E/./src/ui/components/SecondaryToolbox/index.tsx","webpack://_N_E/./src/devtools/client/debugger/src/components/A11yIntention.js","webpack://_N_E/./src/devtools/client/debugger/src/components/App.tsx","webpack://_N_E/./src/ui/components/Toolbox.tsx","webpack://_N_E/./src/ui/components/Viewer.tsx","webpack://_N_E/./src/ui/components/shared/LoadingProgressBar.tsx","webpack://_N_E/./src/ui/setup/dynamic/inspector.ts","webpack://_N_E/./packages/bvaughn-architecture-demo/components/Popup.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/SyntaxHighlightedExpression.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/ConsoleRoot.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/ConsoleSearch.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/ContextMenu.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/CurrentTimeIndicator.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/MessageHoverButton.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/MessagesList.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/Source.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/StackRenderer.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/filters/EventCategory.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/filters/EventType.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/filters/EventsList.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/filters/FilterText.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/filters/FilterToggles.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/console/renderers/shared.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/inspector/SourcePreviewInspector.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/AutoComplete/AutoComplete.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/AutoComplete/AutoCompleteList.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/AutoComplete/AutoCompleteListRow.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/BadgePicker.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/CommentButton.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/CurrentLineHighlight.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/PointPanel.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/PointPanelTimeline.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/PreviewPopup.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/Source.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/SourceLineLoadingPlaceholder.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/SourceList.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/SourceListRow.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/SourceSearch.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/StreamingSourceLoadingProgressHeader.module.css","webpack://_N_E/./packages/bvaughn-architecture-demo/components/sources/SyntaxHighlightedLine.module.css","webpack://_N_E/./packages/design/AddCommentButton/AddCommentButton.module.css","webpack://_N_E/./packages/design/Badge/Badge.module.css","webpack://_N_E/./packages/design/Checkbox/Checkbox.module.css","webpack://_N_E/./packages/design/PrefixBadgePicker/Picker.module.css","webpack://_N_E/./packages/design/PrefixBadgePicker/PrefixBadgePicker.module.css","webpack://_N_E/./src/devtools/client/debugger/src/components/Editor/LineHitCounts.module.css","webpack://_N_E/./src/devtools/client/debugger/src/components/shared/Popover.module.css","webpack://_N_E/./src/ui/components/NetworkMonitor/HttpBody.module.css","webpack://_N_E/./src/ui/components/NetworkMonitor/RequestDetails.module.css","webpack://_N_E/./src/ui/components/NetworkMonitor/RequestTable.module.css","webpack://_N_E/./src/ui/components/PrefixBadge.module.css","webpack://_N_E/./src/ui/components/SecondaryToolbox/NewConsole.module.css"],"sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at <http://mozilla.org/MPL/2.0/>. */\n\nimport React from \"react\";\n\nimport { setSelectedPrimaryPanel, toggleCommandPalette } from \"ui/actions/layout\";\nimport { useAppDispatch } from \"ui/setup/hooks\";\n\nimport { toggleQuickOpen } from \"../actions/quick-open\";\n\nexport default function WelcomeBox() {\n  const dispatch = useAppDispatch();\n  const openCommandPalette = () => {\n    dispatch(toggleCommandPalette());\n  };\n  const openQuickOpen = () => {\n    dispatch(toggleQuickOpen());\n  };\n  const openFullTextSearch = () => {\n    dispatch(setSelectedPrimaryPanel(\"search\"));\n  };\n\n  return (\n    <div className=\"flex h-full w-full flex-col items-center overflow-hidden\">\n      <div className=\"relative flex h-full w-full justify-center px-8 pt-24\">\n        <div className=\"relative flex h-full w-full flex-col items-center text-sm\">\n          <div className=\"flex w-full flex-col space-y-1 text-menuColor\">\n            <div\n              className=\"group flex flex-row space-x-4 hover:cursor-pointer hover:text-menuHoverColor\"\n              onClick={openCommandPalette}\n            >\n              <div className=\"w-full truncate pt-1 text-right\">Command palette</div>\n              <div className=\"flex w-full flex-row\">\n                <img src=\"/images/command.svg\" /> <img src=\"/images/k.svg\" />\n              </div>\n            </div>\n            <div\n              className=\"group flex flex-row space-x-4 hover:cursor-pointer hover:text-menuHoverColor\"\n              onClick={openQuickOpen}\n            >\n              <div className=\"w-full pt-1 text-right\">Go to file</div>\n              <div className=\"flex w-full flex-row\">\n                <img src=\"/images/command.svg\" /> <img src=\"/images/p.svg\" />\n              </div>\n            </div>\n            <div\n              className=\"group flex flex-row space-x-4 hover:cursor-pointer hover:text-menuHoverColor\"\n              onClick={openFullTextSearch}\n            >\n              <div className=\"w-full pt-1 text-right\">Find in file</div>\n              <div className=\"flex w-full flex-row\">\n                <img src=\"/images/command.svg\" /> <img src=\"/images/shift.svg\" />{\" \"}\n                <img src=\"/images/f.svg\" />\n              </div>\n            </div>\n          </div>\n          <div className=\"absolute bottom-16 flex w-full flex-row\">\n            <div className=\"left-0 w-full\">\n              <a href=\"https://docs.replay.io\" className=\"hover:underline\">\n                Docs\n              </a>\n            </div>\n            <div className=\"text-right hover:underline\">\n              <a href=\"https://replay.io/discord\">Discord</a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { Switch } from \"@headlessui/react\";\nimport classNames from \"classnames\";\nimport React, { Dispatch, SetStateAction } from \"react\";\n\nexport default function Toggle({\n  enabled,\n  setEnabled,\n  disabled,\n}: {\n  enabled: boolean;\n  setEnabled: (value: boolean) => void;\n  disabled?: boolean;\n}) {\n  const onChange = (value: boolean) => {\n    if (disabled) {\n      return;\n    }\n\n    setEnabled(value);\n  };\n\n  return (\n    <div className={classNames({ \"pointer-events-none\": disabled })}>\n      <Switch\n        checked={enabled}\n        onChange={onChange}\n        className={classNames(\n          enabled ? \"bg-primaryAccent\" : \"bg-themeToggleBgcolor\",\n          \"relative inline-flex h-4 w-7 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primaryAccent focus:ring-offset-2\"\n        )}\n      >\n        <span\n          aria-hidden=\"true\"\n          className={classNames(\n            enabled ? \"translate-x-3\" : \"translate-x-0\",\n            \"pointer-events-none inline-block h-3 w-3 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out\"\n          )}\n        />\n      </Switch>\n    </div>\n  );\n}\n","import React, { useContext } from \"react\";\n\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { setModal } from \"ui/actions/app\";\nimport { getSelectedSource } from \"ui/reducers/sources\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\n\nimport { showAlternateSource } from \"../../actions/sources/select\";\nimport { getSelectedFrameId } from \"../../reducers/pause\";\nimport { getAlternateSourceIdSuspense } from \"../../utils/sourceVisualizations\";\nimport { CursorPosition } from \"./Footer\";\nimport Toggle from \"./Toggle\";\n\nfunction SourcemapError({ why }: { why: \"no-sourcemap\" | \"not-unique\" | undefined }) {\n  const dispatch = useAppDispatch();\n\n  if (!why) {\n    return null;\n  }\n\n  if (why === \"no-sourcemap\") {\n    const onClick = () => {\n      dispatch(setModal(\"sourcemap-setup\"));\n    };\n    return (\n      <div className=\"flex items-center space-x-1\" onClick={onClick}>\n        <span>No sourcemaps found.</span>\n        <button className=\"underline\">Learn more</button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex items-center space-x-1\">\n      <span>The currently selected position is not mapped</span>\n    </div>\n  );\n}\n\nexport default function SourcemapToggleSuspends({\n  cursorPosition,\n}: {\n  cursorPosition: CursorPosition;\n}) {\n  const dispatch = useAppDispatch();\n  const client = useContext(ReplayClientContext);\n  const selectedSource = useAppSelector(getSelectedSource);\n  const selectedFrameId = useAppSelector(getSelectedFrameId);\n  const sourcesState = useAppSelector(state => state.sources);\n  const alternateSourceIdResult = getAlternateSourceIdSuspense(\n    client,\n    selectedSource,\n    selectedFrameId,\n    cursorPosition,\n    sourcesState\n  );\n\n  if (alternateSourceIdResult.why === \"no-source\") {\n    return null;\n  }\n\n  const setEnabled = () => {\n    if (selectedSource && alternateSourceIdResult.sourceId) {\n      dispatch(showAlternateSource(selectedSource.id, alternateSourceIdResult.sourceId));\n    }\n  };\n\n  const enabled = !!selectedSource?.isSourceMapped;\n\n  return (\n    <label\n      className=\"mapped-source flex items-center space-x-1 pt-0.5 pl-3\"\n      data-test-id=\"SourceMapToggle\"\n      data-test-state={enabled ? \"on\" : \"off\"}\n    >\n      <Toggle\n        enabled={enabled}\n        setEnabled={setEnabled}\n        disabled={!alternateSourceIdResult.sourceId}\n      />\n      <SourcemapError why={alternateSourceIdResult.why} />\n    </label>\n  );\n}\n","import React, { useContext } from \"react\";\n\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport Icon from \"ui/components/shared/Icon\";\nimport { getSelectedSource } from \"ui/reducers/sources\";\nimport { useAppSelector } from \"ui/setup/hooks\";\nimport { trackEvent } from \"ui/utils/telemetry\";\n\nimport { getSelectedFrameId } from \"../../reducers/pause\";\nimport { getSourcemapVisualizerURLSuspense } from \"../../utils/sourceVisualizations\";\nimport { CursorPosition } from \"./Footer\";\n\nexport default function SourcemapVisualizerLinkSuspends({\n  cursorPosition,\n}: {\n  cursorPosition: CursorPosition;\n}) {\n  const client = useContext(ReplayClientContext);\n  const selectedSource = useAppSelector(getSelectedSource);\n  const selectedFrameId = useAppSelector(getSelectedFrameId);\n  const sourcesState = useAppSelector(state => state.sources);\n  const visualizerURL = getSourcemapVisualizerURLSuspense(\n    selectedSource,\n    selectedFrameId,\n    sourcesState,\n    cursorPosition,\n    client\n  );\n  if (!visualizerURL) {\n    return null;\n  }\n\n  return (\n    <div className=\" flex items-center pl-2\">\n      <a\n        className=\"hover:underline\"\n        target=\"_blank\"\n        rel=\"noreferrer noopener\"\n        href={visualizerURL}\n        onClick={() => trackEvent(\"editor.open_sourcemap_visualizer\")}\n      >\n        <Icon\n          size=\"small\"\n          filename=\"external\"\n          className=\"mr-1 cursor-pointer bg-iconColor group-hover:bg-primaryAccent\"\n        />\n        Show Source Map\n      </a>\n    </div>\n  );\n}\n","import React, { Suspense, memo, useEffect, useLayoutEffect, useRef, useState } from \"react\";\n\nimport ErrorBoundary from \"ui/components/ErrorBoundary\";\nimport { getSelectedSource } from \"ui/reducers/sources\";\nimport { useAppSelector } from \"ui/setup/hooks\";\nimport { localStorageGetItem, localStorageSetItem } from \"ui/utils/storage\";\n\nimport SourcemapToggleSuspends from \"./SourcemapToggle\";\nimport SourcemapVisualizerLinkSuspends from \"./SourcemapVisualizerLink\";\n\nexport type CursorPosition = {\n  readonly column: number;\n  readonly line: number;\n};\n\ntype ScrollPosition = {\n  sourceId: string;\n  left: number;\n  top: number;\n};\n\nconst LOCAL_STORAGE_KEY = \"SourceFooter.scrollPosition\";\n\nfunction SourceFooter() {\n  const selectedSource = useAppSelector(getSelectedSource);\n  const [cursorPosition, setCursorPosition] = useState<CursorPosition>({\n    line: 0,\n    column: 0,\n  });\n\n  // On mount, restore the scroll position for the source we have selected.\n  // Only do this if it's the same source though.\n  //\n  // HACK:\n  // Note that we only do this for the most recently selected source.\n  // Trying to track and restore scroll positions for multiple sources was finicky;\n  // CodeMirror seems to have small scroll position discrepancies that were noticeable.\n  const selectedSourceOnMountRef = useRef(selectedSource);\n  useLayoutEffect(() => {\n    const selectedSourceOnMount = selectedSourceOnMountRef.current;\n    if (!selectedSourceOnMount) {\n      return;\n    }\n\n    const eventDoc = document.querySelector(\".editor-mount .CodeMirror\");\n    const codeMirror = (eventDoc as any)?.CodeMirror;\n    if (!codeMirror) {\n      return;\n    }\n\n    let timeoutId: NodeJS.Timeout | null = null;\n\n    try {\n      const scrollPosition = JSON.parse(localStorageGetItem(LOCAL_STORAGE_KEY));\n      if (scrollPosition != null && scrollPosition.sourceId === selectedSourceOnMount.id) {\n        // HACK:\n        // 1. CodeMirror's own CodeMirror.scrollIntoView() method should handle this but it doesn't work.\n        //    That method only scrolls up (not down) due to what looks like a logic bug in the internal implementation.\n        // 2. CodeMirror also sometimes requires an async delay before it works,\n        //    probably due to some internal initialization detail.\n        timeoutId = setTimeout(() => {\n          timeoutId = null;\n\n          codeMirror.display.scroller.scrollLeft = scrollPosition.left;\n          codeMirror.display.scroller.scrollTop = scrollPosition.top;\n        }, 1);\n      }\n\n      return () => {\n        if (timeoutId !== null) {\n          clearTimeout(timeoutId);\n        }\n      };\n    } catch (error) {}\n  }, []);\n\n  // Before unmounting, save scroll position info for this source so that it can be restored later.\n  useLayoutEffect(() => {\n    if (!selectedSource) {\n      return;\n    }\n\n    const eventDoc = document.querySelector(\".editor-mount .CodeMirror\");\n    const codeMirror = (eventDoc as any)?.CodeMirror;\n    if (!codeMirror) {\n      return;\n    }\n\n    return () => {\n      const scrollInfo = codeMirror.getScrollInfo();\n      if (scrollInfo) {\n        const newScrollPosition: ScrollPosition = {\n          sourceId: selectedSource.id,\n          left: scrollInfo.left,\n          top: scrollInfo.top,\n        };\n\n        localStorageSetItem(LOCAL_STORAGE_KEY, JSON.stringify(newScrollPosition));\n      }\n    };\n  });\n\n  useEffect(() => {\n    const eventDoc = document.querySelector(\".editor-mount .CodeMirror\");\n    const codeMirror = (eventDoc as any)?.CodeMirror;\n    if (codeMirror) {\n      const onCursorActivity = (event: any) => {\n        const { line, ch } = event.doc.getCursor();\n        setCursorPosition({ line, column: ch });\n      };\n\n      codeMirror.on(\"cursorActivity\", onCursorActivity);\n      return () => {\n        codeMirror.off(\"cursorActivity\", onCursorActivity);\n      };\n    }\n  });\n\n  let cursorPositionUI = null;\n  if (selectedSource) {\n    const { line, column } = cursorPosition;\n\n    const text = `(${line + 1}, ${column + 1})`;\n    // @ts-ignore\n    const title = `(Line ${line + 1}, column ${column + 1})`;\n\n    cursorPositionUI = (\n      <div className=\"cursor-position\" title={title}>\n        {text}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"source-footer\">\n      <ErrorBoundary>\n        <Suspense>\n          <SourcemapToggleSuspends cursorPosition={cursorPosition} />\n          <SourcemapVisualizerLinkSuspends cursorPosition={cursorPosition} />\n        </Suspense>\n      </ErrorBoundary>\n      <div className=\"source-footer-end\">{cursorPositionUI}</div>\n    </div>\n  );\n}\n\nexport default memo(SourceFooter);\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport function localStorageGetItem(key: string): any {\n  try {\n    return localStorage.getItem(key);\n  } catch (error) {\n    return null;\n  }\n}\n\nexport function localStorageRemoveItem(key: string): void {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {}\n}\n\nexport function localStorageSetItem(key: string, value: any): void {\n  try {\n    return localStorage.setItem(key, value);\n  } catch (error) {}\n}\n\nexport function sessionStorageGetItem(key: string): any {\n  try {\n    return sessionStorage.getItem(key);\n  } catch (error) {\n    return null;\n  }\n}\n\nexport function sessionStorageRemoveItem(key: string): void {\n  try {\n    sessionStorage.removeItem(key);\n  } catch (error) {}\n}\n\nexport function sessionStorageSetItem(key: string, value: any): void {\n  try {\n    return sessionStorage.setItem(key, value);\n  } catch (error) {}\n}\n","import { Action } from \"@reduxjs/toolkit\";\n\nexport interface GutterContextMenu {\n  column: number;\n  line: number;\n  location: number;\n  sourceId: string;\n  sourceUrl: string;\n}\n\nexport interface ContextMenu {\n  x: number;\n  y: number;\n  contextMenuItem: GutterContextMenu;\n}\n\ntype OpenContextMenu = Action<\"open_context_menu\"> & { contextMenu: ContextMenu };\ntype CloseContextMenu = Action<\"close_context_menu\">;\n\nexport function openContextMenu(contextMenu: ContextMenu): OpenContextMenu {\n  return { type: \"open_context_menu\", contextMenu };\n}\n\nexport function closeContextMenu(): CloseContextMenu {\n  return { type: \"close_context_menu\" };\n}\n\nexport type ContextMenusAction = OpenContextMenu | CloseContextMenu;\n","import React, { MutableRefObject, ReactNode, useRef } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport useModalDismissSignal from \"ui/hooks/useModalDismissSignal\";\n\nexport interface ContextMenuProps {\n  children: ReactNode;\n  close: () => void;\n  x: number;\n  y: number;\n}\n\nexport function ContextMenu({ close, children, x, y }: ContextMenuProps) {\n  const ref = useRef<HTMLDivElement>(null);\n\n  // Close the context menu if the user clicks outside of it or types \"Escape\"\n  useModalDismissSignal(ref as MutableRefObject<HTMLDivElement>, close);\n\n  return ReactDOM.createPortal(\n    <div className=\"portal-dropdown-container\">\n      <div className=\"absolute\" ref={ref} style={{ left: x, top: y, zIndex: 1001 }}>\n        {children}\n      </div>\n    </div>,\n    document.body\n  );\n}\n","import React from \"react\";\n\nimport { createFloatingCodeComment } from \"ui/actions/comments\";\nimport { ContextMenu as ContextMenuType } from \"ui/actions/contextMenus\";\nimport { useGetRecordingId } from \"ui/hooks/recordings\";\nimport { useAppDispatch } from \"ui/setup/hooks\";\nimport { trackEvent } from \"ui/utils/telemetry\";\nimport useAuth0 from \"ui/utils/useAuth0\";\n\nimport { Dropdown, DropdownItem } from \"../Library/LibraryDropdown\";\nimport { ContextMenu } from \"./index\";\n\nexport default function GutterContextMenu({\n  close,\n  contextMenu,\n}: {\n  close: () => void;\n  contextMenu: ContextMenuType;\n}) {\n  const recordingId = useGetRecordingId();\n  const { isAuthenticated } = useAuth0();\n  const dispatch = useAppDispatch();\n\n  const addComment = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    trackEvent(\"gutter.add_comment\");\n    dispatch(\n      createFloatingCodeComment(recordingId, {\n        location: contextMenu.contextMenuItem.location,\n      })\n    );\n    close();\n  };\n\n  // Un-authenticated users can't comment on Replays.\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return (\n    <ContextMenu close={close} x={contextMenu.x} y={contextMenu.y}>\n      <Dropdown>\n        <DropdownItem onClick={addComment}>Add comment</DropdownItem>\n      </Dropdown>\n    </ContextMenu>\n  );\n}\n","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutProperties from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"eventTypes\", \"filterByText\", \"showExceptions\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { createContext, useCallback, useContext, useMemo, useState, useTransition } from \"react\";\nimport useLocalStorage from \"bvaughn-architecture-demo/src/hooks/useLocalStorage\";\nimport { SessionContext } from \"./SessionContext\"; // Various boolean flags to types of console messages or attributes to show/hide.\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const ConsoleFiltersContext = /*#__PURE__*/createContext(null);\nexport function ConsoleFiltersContextRoot({\n  children\n}) {\n  const {\n    recordingId\n  } = useContext(SessionContext);\n  const togglesLocalStorageKey = `Replay:Toggles:${recordingId}`;\n  const [toggles, setToggles] = useLocalStorage(togglesLocalStorageKey, {\n    showErrors: true,\n    showLogs: true,\n    showNodeModules: false,\n    showTimestamps: false,\n    showWarnings: false\n  }); // Filter input changes quickly while a user types, but re-filtering can be slow.\n  // We can use the deferred value hook to allow React to update the visible filter text quickly (at a high priority)\n  // and then re-filter the list after a small delay (at a lower priority).\n\n  const {\n    0: filterByText,\n    1: setFilterByText\n  } = useState(\"\");\n  const {\n    0: deferredFilterByText,\n    1: setDeferredFilterByText\n  } = useState(\"\");\n  const {\n    0: eventTypes,\n    1: setEventTypes\n  } = useState({});\n  const {\n    0: deferredEventTypes,\n    1: setDeferredEventTypes\n  } = useState({});\n  const showExceptionsLocalStorageKey = `Replay:showExceptions:${recordingId}`;\n  const [showExceptions, setShowExceptions] = useLocalStorage(showExceptionsLocalStorageKey, false);\n  const {\n    0: deferredShowExceptions,\n    1: setDeferredShowExceptions\n  } = useState(showExceptions);\n  const update = useCallback(values => {\n    const {\n      eventTypes: newEventTypes,\n      filterByText: newFilterByText,\n      showExceptions: newShowExceptions\n    } = values,\n          newToggles = _objectWithoutProperties(values, _excluded);\n\n    setToggles(prevToggles => _objectSpread(_objectSpread({}, prevToggles), newToggles));\n\n    if (newShowExceptions != null) {\n      setShowExceptions(newShowExceptions);\n      startTransition(() => {\n        setDeferredShowExceptions(newShowExceptions);\n      });\n    }\n\n    if (newEventTypes != null) {\n      setEventTypes(prevEventTypes => _objectSpread(_objectSpread({}, prevEventTypes), newEventTypes));\n      startTransition(() => {\n        setDeferredEventTypes(prevEventTypes => _objectSpread(_objectSpread({}, prevEventTypes), newEventTypes));\n      });\n    }\n\n    if (newFilterByText != null) {\n      setFilterByText(newFilterByText);\n      startTransition(() => {\n        setDeferredFilterByText(newFilterByText);\n      });\n    }\n  }, [setShowExceptions, setToggles]); // Using a deferred values enables the filter input to update quickly,\n  // and the slower operation of filtering the messages in memory to be deferred.\n\n  const {\n    0: isTransitionPending,\n    1: startTransition\n  } = useTransition();\n  const consoleFiltersContext = useMemo(() => _objectSpread(_objectSpread({}, toggles), {}, {\n    eventTypes: deferredEventTypes,\n    eventTypesForDisplay: eventTypes,\n    filterByDisplayText: filterByText,\n    filterByText: deferredFilterByText,\n    isTransitionPending,\n    showExceptions: deferredShowExceptions,\n    showExceptionsForDisplay: showExceptions,\n    update\n  }), [deferredEventTypes, deferredFilterByText, deferredShowExceptions, eventTypes, filterByText, isTransitionPending, showExceptions, toggles, update]);\n  return /*#__PURE__*/_jsx(ConsoleFiltersContext.Provider, {\n    value: consoleFiltersContext,\n    children: children\n  });\n}","// Forked from src/devtools/server/actors/utils/event-breakpoints.js\nexport const STANDARD_EVENT_CATEGORIES = [{\n  category: \"Animation\",\n  events: [{\n    type: \"animationframe.request\",\n    label: \"requestAnimationFrame\"\n  }, {\n    type: \"animationframe.cancel\",\n    label: \"cancelAnimationFrame\"\n  }, {\n    type: \"animationframe.fire\",\n    label: \"requestAnimationFrameCallback\"\n  }]\n}, {\n  category: \"Clipboard\",\n  events: [{\n    type: \"event.clipboard.copy\",\n    label: \"copy\"\n  }, {\n    type: \"event.clipboard.cut\",\n    label: \"cut\"\n  }, {\n    type: \"event.clipboard.paste\",\n    label: \"paste\"\n  }, {\n    type: \"event.clipboard.beforecopy\",\n    label: \"beforecopy\"\n  }, {\n    type: \"event.clipboard.beforecut\",\n    label: \"beforecut\"\n  }, {\n    type: \"event.clipboard.beforepaste\",\n    label: \"beforepaste\"\n  }]\n}, {\n  category: \"Control\",\n  events: [{\n    type: \"event.control.resize\",\n    label: \"resize\"\n  }, {\n    type: \"event.control.scroll\",\n    label: \"scroll\"\n  }, {\n    type: \"event.control.zoom\",\n    label: \"zoom\"\n  }, {\n    type: \"event.control.focus\",\n    label: \"focus\"\n  }, {\n    type: \"event.control.blur\",\n    label: \"blur\"\n  }, {\n    type: \"event.control.select\",\n    label: \"select\"\n  }, {\n    type: \"event.control.change\",\n    label: \"change\"\n  }, {\n    type: \"event.control.submit\",\n    label: \"submit\"\n  }, {\n    type: \"event.control.reset\",\n    label: \"reset\"\n  }]\n}, {\n  category: \"DOM Mutation\",\n  events: [// Deprecated DOM events.\n  {\n    type: \"event.dom-mutation.DOMActivate\",\n    label: \"DOMActivate\"\n  }, {\n    type: \"event.dom-mutation.DOMFocusIn\",\n    label: \"DOMFocusIn\"\n  }, {\n    type: \"event.dom-mutation.DOMFocusOut\",\n    label: \"DOMFocusOut\"\n  }, // Standard DOM mutation events.\n  {\n    type: \"event.dom-mutation.DOMAttrModified\",\n    label: \"DOMAttrModified\"\n  }, {\n    type: \"event.dom-mutation.DOMCharacterDataModified\",\n    label: \"DOMCharacterDataModified\"\n  }, {\n    type: \"event.dom-mutation.DOMNodeInserted\",\n    label: \"DOMNodeInserted\"\n  }, {\n    type: \"event.dom-mutation.DOMNodeInsertedIntoDocument\",\n    label: \"DOMNodeInsertedIntoDocument\"\n  }, {\n    type: \"event.dom-mutation.DOMNodeRemoved\",\n    label: \"DOMNodeRemoved\"\n  }, {\n    type: \"event.dom-mutation.DOMNodeRemovedIntoDocument\",\n    label: \"DOMNodeRemovedIntoDocument\"\n  }, {\n    type: \"event.dom-mutation.DOMSubtreeModified\",\n    label: \"DOMSubtreeModified\"\n  }, // DOM load events.\n  {\n    type: \"event.dom-mutation.DOMContentLoaded\",\n    label: \"DOMContentLoaded\"\n  }]\n}, {\n  category: \"Device\",\n  events: [{\n    type: \"event.device.deviceorientation\",\n    label: \"deviceorientation\"\n  }, {\n    type: \"event.device.devicemotio\",\n    label: \"devicemotion\"\n  }]\n}, {\n  category: \"Drag and Drop\",\n  events: [{\n    type: \"event.drag-and-drop.drag\",\n    label: \"drag\"\n  }, {\n    type: \"event.drag-and-drop.dragstart\",\n    label: \"dragstart\"\n  }, {\n    type: \"event.drag-and-drop.dragend\",\n    label: \"dragend\"\n  }, {\n    type: \"event.drag-and-drop.dragenter\",\n    label: \"dragenter\"\n  }, {\n    type: \"event.drag-and-drop.dragover\",\n    label: \"dragover\"\n  }, {\n    type: \"event.drag-and-drop.dragleave\",\n    label: \"dragleave\"\n  }, {\n    type: \"event.drag-and-drop.drop\",\n    label: \"drop\"\n  }]\n}, {\n  category: \"Keyboard\",\n  events: [// TODO Check Services.prefs.getBoolPref(\"dom.input_events.beforeinput.enabled\")\n  {\n    type: \"event.keyboard.beforeinput\",\n    label: \"beforeinput\"\n  }, {\n    type: \"event.keyboard.input\",\n    label: \"input\"\n  }, {\n    type: \"event.keyboard.keydown\",\n    label: \"keydown\"\n  }, {\n    type: \"event.keyboard.keyup\",\n    label: \"keyup\"\n  }, {\n    type: \"event.keyboard.keypress\",\n    label: \"keypress\"\n  }]\n}, {\n  category: \"Load\",\n  events: [{\n    type: \"event.load.load\",\n    label: \"load\"\n  }, // TODO: Disabled pending fixes for bug 1569775.\n  // globalEvent(\"load\", \"beforeunload\"),\n  // globalEvent(\"load\", \"unload\"),\n  {\n    type: \"event.load.abort\",\n    label: \"abort\"\n  }, {\n    type: \"event.load.error\",\n    label: \"error\"\n  }, {\n    type: \"event.load.hashchange\",\n    label: \"hashchange\"\n  }, {\n    type: \"event.load.popstate\",\n    label: \"popstate\"\n  }]\n}, {\n  category: \"Media\",\n  events: [{\n    type: \"event.media.play\",\n    label: \"play\"\n  }, {\n    type: \"event.media.pause\",\n    label: \"pause\"\n  }, {\n    type: \"event.media.playing\",\n    label: \"playing\"\n  }, {\n    type: \"event.media.canplay\",\n    label: \"canplay\"\n  }, {\n    type: \"event.media.canplaythrough\",\n    label: \"canplaythrough\"\n  }, {\n    type: \"event.media.seeking\",\n    label: \"seeking\"\n  }, {\n    type: \"event.media.seeked\",\n    label: \"seeked\"\n  }, {\n    type: \"event.media.timeupdate\",\n    label: \"timeupdate\"\n  }, {\n    type: \"event.media.ended\",\n    label: \"ended\"\n  }, {\n    type: \"event.media.ratechange\",\n    label: \"ratechange\"\n  }, {\n    type: \"event.media.durationchange\",\n    label: \"durationchange\"\n  }, {\n    type: \"event.media.volumechange\",\n    label: \"volumechange\"\n  }, {\n    type: \"event.media.loadstart\",\n    label: \"loadstart\"\n  }, {\n    type: \"event.media.progress\",\n    label: \"progress\"\n  }, {\n    type: \"event.media.suspend\",\n    label: \"suspend\"\n  }, {\n    type: \"event.media.abort\",\n    label: \"abort\"\n  }, {\n    type: \"event.media.error\",\n    label: \"error\"\n  }, {\n    type: \"event.media.emptied\",\n    label: \"emptied\"\n  }, {\n    type: \"event.media.stalled\",\n    label: \"stalled\"\n  }, {\n    type: \"event.media.loadedmetadata\",\n    label: \"loadedmetadata\"\n  }, {\n    type: \"event.media.loadeddata\",\n    label: \"loadeddata\"\n  }, {\n    type: \"event.media.waiting\",\n    label: \"waiting\"\n  }]\n}, {\n  category: \"Mouse\",\n  events: [{\n    type: \"event.mouse.auxclick\",\n    label: \"auxclick\"\n  }, {\n    type: \"event.mouse.click\",\n    label: \"click\"\n  }, {\n    type: \"event.mouse.dblclick\",\n    label: \"dblclick\"\n  }, {\n    type: \"event.mouse.mousedown\",\n    label: \"mousedown\"\n  }, {\n    type: \"event.mouse.mouseup\",\n    label: \"mouseup\"\n  }, {\n    type: \"event.mouse.mouseover\",\n    label: \"mouseover\"\n  }, {\n    type: \"event.mouse.mousemove\",\n    label: \"mousemove\"\n  }, {\n    type: \"event.mouse.mouseout\",\n    label: \"mouseout\"\n  }, {\n    type: \"event.mouse.mouseenter\",\n    label: \"mouseenter\"\n  }, {\n    type: \"event.mouse.mouseleave\",\n    label: \"mouseleave\"\n  }, {\n    type: \"event.mouse.mousewheel\",\n    label: \"mousewheel\"\n  }, {\n    type: \"event.mouse.wheel\",\n    label: \"wheel\"\n  }, {\n    type: \"event.mouse.contextmenu\",\n    label: \"contextmenu\"\n  }]\n}, {\n  category: \"Pointer\",\n  events: [{\n    type: \"event.pointer.pointerover\",\n    label: \"pointerover\"\n  }, {\n    type: \"event.pointer.pointerout\",\n    label: \"pointerout\"\n  }, {\n    type: \"event.pointer.pointerenter\",\n    label: \"pointerenter\"\n  }, {\n    type: \"event.pointer.pointerleave\",\n    label: \"pointerleave\"\n  }, {\n    type: \"event.pointer.pointerdown\",\n    label: \"pointerdown\"\n  }, {\n    type: \"event.pointer.pointerup\",\n    label: \"pointerup\"\n  }, {\n    type: \"event.pointer.pointermove\",\n    label: \"pointermove\"\n  }, {\n    type: \"event.pointer.pointercancel\",\n    label: \"pointercancel\"\n  }, {\n    type: \"event.pointer.gotpointercapture\",\n    label: \"gotpointercapture\"\n  }, {\n    type: \"event.pointer.lostpointercapture\",\n    label: \"lostpointercapture\"\n  }]\n}, {\n  category: \"Timer\",\n  events: [{\n    type: \"timer.timeout.set\",\n    label: \"setTimeout\"\n  }, {\n    type: \"timer.timeout.clear\",\n    label: \"clearTimeout\"\n  }, {\n    type: \"timer.timeout.fire\",\n    label: \"setTimeoutCallback\"\n  }, {\n    type: \"timer.interval.set\",\n    label: \"setInterval\"\n  }, {\n    type: \"timer.interval.clear\",\n    label: \"clearInterval\"\n  }, {\n    type: \"timer.interval.fire\",\n    label: \"setIntervalCallback\"\n  }]\n}, {\n  category: \"Touch\",\n  events: [{\n    type: \"event.touch.touchstart\",\n    label: \"touchstart\"\n  }, {\n    type: \"event.touch.touchmove\",\n    label: \"touchmove\"\n  }, {\n    type: \"event.touch.touchend\",\n    label: \"touchend\"\n  }, {\n    type: \"event.touch.touchcancel\",\n    label: \"touchcancel\"\n  }]\n}, {\n  category: \"WebSocket\",\n  events: [{\n    type: \"event.websocket.open\",\n    label: \"open\"\n  }, {\n    type: \"event.websocket.message\",\n    label: \"message\"\n  }, {\n    type: \"event.websocket.error\",\n    label: \"error\"\n  }, {\n    type: \"event.websocket.close\",\n    label: \"close\"\n  }]\n}, {\n  category: \"Worker\",\n  events: [{\n    type: \"event.message\",\n    label: \"message\"\n  }, {\n    type: \"event.messageerror\",\n    label: \"messageerror\"\n  }, // Service Worker events.\n  {\n    type: \"event.serviceworker.fetch\",\n    label: \"fetch\"\n  }]\n}, {\n  category: \"XHR\",\n  events: [{\n    type: \"event.xhr.readystatechange\",\n    label: \"readystatechange\"\n  }, {\n    type: \"event.xhr.load\",\n    label: \"load\"\n  }, {\n    type: \"event.xhr.loadstart\",\n    label: \"loadstart\"\n  }, {\n    type: \"event.xhr.loadend\",\n    label: \"loadend\"\n  }, {\n    type: \"event.xhr.abort\",\n    label: \"abort\"\n  }, {\n    type: \"event.xhr.error\",\n    label: \"error\"\n  }, {\n    type: \"event.xhr.progress\",\n    label: \"progress\"\n  }, {\n    type: \"event.xhr.timeout\",\n    label: \"timeout\"\n  }]\n}];","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { STANDARD_EVENT_CATEGORIES } from \"../constants\";\nimport { createWakeable } from \"../utils/suspense\";\nimport { preCacheObjects } from \"./ObjectPreviews\";\nimport { STATUS_PENDING, STATUS_RESOLVED } from \"./types\";\nlet eventTypeToEntryPointMap = new Map();\nlet eventCategoryCounts = null;\nlet inProgressEventCategoryCountsWakeable = null;\nexport function getEventCategoryCountsSuspense(client) {\n  if (eventCategoryCounts !== null) {\n    return eventCategoryCounts;\n  }\n\n  if (inProgressEventCategoryCountsWakeable === null) {\n    inProgressEventCategoryCountsWakeable = createWakeable();\n    fetchEventCategoryCounts(client);\n  }\n\n  throw inProgressEventCategoryCountsWakeable;\n}\nexport function getEventTypeEntryPointsSuspense(client, eventType) {\n  let record = eventTypeToEntryPointMap.get(eventType);\n\n  if (record == null) {\n    record = {\n      status: STATUS_PENDING,\n      value: createWakeable()\n    };\n    eventTypeToEntryPointMap.set(eventType, record);\n    fetchEventTypeEntryPoints(client, eventType, record);\n  }\n\n  if (record.status === STATUS_RESOLVED) {\n    return record.value;\n  } else {\n    throw record.value;\n  }\n}\n\nasync function fetchEventCategoryCounts(client) {\n  const pendingEventCategoryCounts = [];\n  const allEvents = await client.getEventCountForTypes(Object.values(STANDARD_EVENT_CATEGORIES).map(c => c.events.map(e => e.type)).flat());\n  eventCategoryCounts = Object.values(STANDARD_EVENT_CATEGORIES).map(category => {\n    return _objectSpread(_objectSpread({}, category), {}, {\n      events: category.events.map(eventType => _objectSpread(_objectSpread({}, eventType), {}, {\n        count: allEvents[eventType.type]\n      }))\n    });\n  });\n  inProgressEventCategoryCountsWakeable.resolve(pendingEventCategoryCounts);\n  inProgressEventCategoryCountsWakeable = null;\n}\n\nasync function fetchEventTypeEntryPoints(client, eventType, record) {\n  const entryPoints = await client.runAnalysis({\n    effectful: false,\n    eventHandlerEntryPoints: [{\n      eventType\n    }],\n    mapper: MAPPER\n  }); // Pre-cache object previews that came back with our new analysis data.\n  // This will avoid us having to turn around and request them again when rendering the logs.\n\n  entryPoints.forEach(entryPoint => preCacheObjects(entryPoint.pauseId, entryPoint.data.objects));\n  const eventLogs = entryPoints.map(entryPoint => _objectSpread(_objectSpread({}, entryPoint), {}, {\n    type: \"EventLog\"\n  }));\n  const wakeable = record.value;\n  record.status = STATUS_RESOLVED;\n  record.value = eventLogs;\n  wakeable.resolve(eventLogs);\n}\n\nconst MAPPER = `\n  const finalData = { frames: [], scopes: [], objects: [] };\n  function addPauseData({ frames, scopes, objects }) {\n    finalData.frames.push(...(frames || []));\n    finalData.scopes.push(...(scopes || []));\n    finalData.objects.push(...(objects || []));\n  }\n  function getTopFrame() {\n    const { frame, data } = sendCommand(\"Pause.getTopFrame\");\n    addPauseData(data);\n    return finalData.frames.find((f) => f.frameId == frame);\n  }\n\n  const { time, pauseId, point } = input;\n  const { frameId, location } = getTopFrame();\n  const { result } = sendCommand(\"Pause.evaluateInFrame\", {\n    frameId,\n    expression: \"[...arguments]\",\n  });\n  const values = [];\n  addPauseData(result.data);\n  if (result.exception) {\n    values.push(result.exception);\n  } else {\n    {\n      const { object } = result.returned;\n      const { result: lengthResult } = sendCommand(\"Pause.getObjectProperty\", {\n        object,\n        name: \"length\",\n      });\n      addPauseData(lengthResult.data);\n      const length = lengthResult.returned.value;\n      for (let i = 0; i < length; i++) {\n        const { result: elementResult } = sendCommand(\"Pause.getObjectProperty\", {\n          object,\n          name: i.toString(),\n        });\n        values.push(elementResult.returned);\n        addPauseData(elementResult.data);\n      }\n    }\n  }\n  let frameworkListeners;\n\n  const { result: frameworkResult } = sendCommand(\"Pause.evaluateInFrame\", {\n    frameId,\n    expression: \"\",\n  });\n  addPauseData(frameworkResult.data);\n  frameworkListeners = frameworkResult.returned;\n\n  return [\n    {\n      key: point,\n      value: {\n        time,\n        pauseId,\n        point,\n        location,\n        values,\n        data: finalData,\n        frameworkListeners,\n      },\n    },\n  ];\n`;","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { ProtocolError, isCommandError } from \"shared/utils/error\";\nimport { createWakeable } from \"../utils/suspense\";\nimport { isRangeEqual, isRangeSubset } from \"../utils/time\";\nimport { preCacheObjects } from \"./ObjectPreviews\";\nconst EMPTY_ARRAY = [];\nlet inFlightFocusRange = null;\nlet inFlightWakeable = null;\nlet lastFetchDidFailTooManyPoints = false;\nlet lastFetchedFocusRange = null;\nlet lastFetchedExceptions = null;\nlet lastFilteredExceptions = null;\nlet lastFilteredFocusRange = null;\nconst tooManyPointsListeners = new Set();\nexport function getStatus() {\n  if (inFlightWakeable !== null) {\n    return \"request-in-progress\";\n  } else if (lastFetchDidFailTooManyPoints) {\n    return \"failed-too-many-points\";\n  } else if (lastFetchedExceptions !== null) {\n    return \"fetched\";\n  } else {\n    return \"uninitialized\";\n  }\n}\nexport function subscribeForStatus(callback) {\n  tooManyPointsListeners.add(callback);\n  return function unsubscribeFromStatus() {\n    tooManyPointsListeners.delete(callback);\n  };\n}\n\nfunction notifyStatusSubscribers() {\n  tooManyPointsListeners.forEach(callback => callback());\n}\n\nexport function getExceptionsSuspense(client, focusRange) {\n  if (focusRange !== null && focusRange.begin.point === focusRange.end.point) {\n    // Edge case scenario handling.\n    lastFetchedExceptions = lastFilteredExceptions = EMPTY_ARRAY;\n    lastFetchedFocusRange = lastFilteredFocusRange = focusRange;\n    notifyStatusSubscribers();\n    return EMPTY_ARRAY;\n  }\n\n  if (inFlightWakeable !== null && isRangeEqual(inFlightFocusRange, focusRange)) {\n    // If we're already fetching this data, rethrow the same Wakeable (for Suspense reasons).\n    throw inFlightWakeable;\n  }\n\n  let shouldFetch = false;\n\n  if (lastFetchedExceptions === null) {\n    // This is the first time we're fetching data.\n    shouldFetch = true;\n  } else {\n    if (!isRangeSubset(lastFetchedFocusRange, focusRange)) {\n      // The new range is bigger than the old range so we need to fetch again.\n      shouldFetch = true;\n    } else {\n      if (!isRangeEqual(lastFetchedFocusRange, focusRange)) {\n        // The new range is smaller than the old one\n        if (lastFetchDidFailTooManyPoints) {\n          // The last time we tried to fetch overflowed, so we should try again.\n          shouldFetch = true;\n        }\n      }\n    }\n  }\n\n  if (shouldFetch) {\n    inFlightFocusRange = focusRange;\n    inFlightWakeable = createWakeable();\n    fetchExceptions(client);\n    notifyStatusSubscribers();\n    throw inFlightWakeable;\n  }\n\n  if (focusRange === null) {\n    lastFilteredExceptions = lastFetchedExceptions;\n    lastFilteredFocusRange = focusRange;\n  } else if (!isRangeEqual(lastFilteredFocusRange, focusRange)) {\n    lastFilteredExceptions = lastFetchedExceptions.filter(exception => {\n      return exception.point >= focusRange.begin.point && exception.point <= focusRange.end.point;\n    });\n    lastFilteredFocusRange = focusRange;\n  }\n\n  return lastFilteredExceptions;\n}\n\nasync function fetchExceptions(client) {\n  const wakeable = inFlightWakeable;\n\n  try {\n    const results = await client.runAnalysis({\n      effectful: false,\n      exceptionPoints: true,\n      mapper: EXCEPTIONS_MAPPER,\n      range: inFlightFocusRange ? {\n        begin: inFlightFocusRange.begin.point,\n        end: inFlightFocusRange.end.point\n      } : undefined\n    }); // Cache Object preview data since we have it.\n    // This may save us from making unnecessary requests later.\n\n    results.forEach(result => {\n      if (result.data.objects) {\n        preCacheObjects(result.pauseId, result.data.objects);\n      }\n    });\n\n    if (wakeable === inFlightWakeable) {\n      lastFetchDidFailTooManyPoints = false;\n      lastFetchedExceptions = results.map(result => _objectSpread(_objectSpread({}, result), {}, {\n        type: \"UncaughtException\"\n      }));\n      lastFetchedFocusRange = inFlightFocusRange;\n    } // React doesn't use the resolved value.\n\n\n    wakeable.resolve(null);\n  } catch (error) {\n    if (wakeable === inFlightWakeable && isCommandError(error, ProtocolError.TooManyPoints)) {\n      lastFetchDidFailTooManyPoints = true;\n      lastFetchedExceptions = EMPTY_ARRAY;\n      lastFetchedFocusRange = inFlightFocusRange;\n    } else {\n      console.error(error);\n    } // React doesn't use the resolved value.\n\n\n    wakeable.resolve(null);\n  } finally {\n    if (wakeable === inFlightWakeable) {\n      inFlightFocusRange = null;\n      inFlightWakeable = null;\n      notifyStatusSubscribers();\n    }\n  }\n}\n\nconst EXCEPTIONS_MAPPER = `\n  const finalData = { frames: [], scopes: [], objects: [] };\n\n  function addPauseData({ frames, scopes, objects }) {\n    finalData.frames.push(...(frames || []));\n    finalData.scopes.push(...(scopes || []));\n    finalData.objects.push(...(objects || []));\n  }\n\n  function getTopFrame() {\n    const { data, frame: frameId } = sendCommand(\"Pause.getTopFrame\");\n\n    return (data.frames || []).find((f) => f.frameId == frameId);\n  }\n\n  const { pauseId, point, time } = input;\n  const { frameId, location } = getTopFrame();\n  const {\n    data: { objects, scopes },\n    exception,\n  } = sendCommand(\"Pause.getExceptionValue\");\n  const {\n    data: { frames },\n  } = sendCommand(\"Pause.getAllFrames\");\n\n  addPauseData({ frames, objects, scopes });\n\n  return [\n    {\n      key: time,\n      value: {\n        data: finalData,\n        location,\n        pauseId,\n        point,\n        time,\n        values: [exception],\n      },\n    },\n  ];\n`;","import { getSourceIfAlreadyLoaded } from \"bvaughn-architecture-demo/src/suspense/SourcesCache\"; // Messages with pages that match this expression are internal Firefox errors and we should not display them.\n\nconst FIREFOX_INTERNAL_REGEX = /resource:\\/\\/\\/modules\\/\\S+\\.jsm/;\nexport function isFirefoxInternalMessage(message) {\n  return message.source === \"PageError\" && message.text.match(FIREFOX_INTERNAL_REGEX) !== null;\n}\nconst messageToNodeModuleCache = new WeakMap();\nexport function isInNodeModules(message) {\n  if (messageToNodeModuleCache.has(message)) {\n    return messageToNodeModuleCache.get(message);\n  } else {\n    let topFrame = null;\n\n    if (message.stack?.length && message.data.frames?.length) {\n      topFrame = message.data.frames.find(frame => frame.frameId === message.stack[0]);\n    }\n\n    let returnValue = false;\n\n    if (topFrame) {\n      const sourceId = topFrame.location?.[0].sourceId;\n      const source = sourceId ? getSourceIfAlreadyLoaded(sourceId) : null;\n\n      if (source) {\n        returnValue = !!(source.url?.includes(\"node_modules\") || source.url?.includes(\"unpkg.com\")); // Only cache if we've been able to scan the source URLs.\n\n        messageToNodeModuleCache.set(message, returnValue);\n      }\n    }\n\n    return returnValue;\n  }\n}","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { isFirefoxInternalMessage } from \"../utils/messages\";\nimport { createWakeable } from \"../utils/suspense\";\nimport { isExecutionPointsGreaterThan, isExecutionPointsLessThan, isRangeEqual, isRangeSubset } from \"../utils/time\";\nimport { preCacheObjects } from \"./ObjectPreviews\";\nconst EMPTY_ARRAY = []; // TODO Should I use React's Suspense cache APIs here?\n// It's tempting to think that I don't need to, because the recording session data is global,\n// but could this cause problems if React wants to render a high-priority update while a lower one is suspended?\n\nlet inFlightWakeable = null;\nlet inFlightFocusRange = null;\nlet lastFetchDidOverflow = false;\nlet lastFetchError = null;\nlet lastFetchedFocusRange = null;\nlet lastFetchedMessages = null;\nlet lastFilteredCategoryCounts = null;\nlet lastFilteredCountAfter = 0;\nlet lastFilteredCountBefore = 0;\nlet lastFilteredFocusRange = null;\nlet lastFilteredMessages = null; // Synchronously returns an array of filtered Messages,\n// or throws a Wakeable to be resolved once messages have been fetched.\n//\n// This method is Suspense friendly; it is meant to be called from a React component during render.\n\nexport function getMessagesSuspense(client, focusRange) {\n  if (focusRange !== null && focusRange.begin.point === focusRange.end.point) {\n    // Edge case scenario handling.\n    // The backend throws if both points in a range are the same.\n    // Arguably it should handle this more gracefully by just returning an empty array but...\n    return {\n      countAfter: -1,\n      countBefore: -1,\n      didOverflow: false,\n      messages: EMPTY_ARRAY,\n      categoryCounts: {\n        errors: 0,\n        logs: 0,\n        warnings: 0\n      }\n    };\n  }\n\n  if (inFlightWakeable !== null) {\n    // If we're already fetching this data, rethrow the same Wakeable (for Suspense reasons).\n    // We check equality here rather than subset because it's possible a larger range might overflow.\n    if (isRangeEqual(inFlightFocusRange, focusRange)) {\n      throw inFlightWakeable;\n    }\n  } // We only need to refetch data if one of the following conditions is true.\n\n\n  let shouldFetch = false;\n\n  if (lastFetchError !== null) {\n    if (!isRangeEqual(lastFetchedFocusRange, focusRange)) {\n      shouldFetch = true;\n    }\n  } else {\n    if (lastFetchedMessages === null) {\n      // We have not yet fetched it at all.\n      shouldFetch = true;\n    } else if (lastFetchDidOverflow && !isRangeEqual(lastFetchedFocusRange, focusRange)) {\n      // The most recent time we fetched it \"overflowed\" (too many messages to send them all),\n      // and we're trying to fetch a different region.\n      //\n      // There are two things to note about this case.\n      // 1. When devtools is first opened, there is no focused region.\n      //    This is equivalent to focusing on the entire timeline, so we often won't need to refetch messages when focusing for the first time.\n      // 2. We shouldn't compare the new focus region to the most recent focus region,\n      //    but rather to the most recent focus region that we fetched messages for (the entire timeline in many cases).\n      //    If we don't need to refetch after zooming in, then we won't need to refetch after zooming back out either,\n      //    (unless our fetches have overflowed at some point).\n      shouldFetch = true;\n    } else if (!isRangeSubset(lastFetchedFocusRange, focusRange)) {\n      // The new focus region is outside of the most recent region we fetched messages for.\n      shouldFetch = true;\n    }\n  }\n\n  if (shouldFetch) {\n    inFlightFocusRange = focusRange;\n    const wakeable = inFlightWakeable = createWakeable();\n    fetchMessages(client, focusRange, wakeable);\n    throw inFlightWakeable;\n  }\n\n  if (lastFetchError) {\n    throw lastFetchError;\n  } // TODO (FE-533) Filter Firefox internal browser exceptions (see isFirefoxInternalMessage)\n  // At this point, messages have been fetched but we may still need to filter them.\n  // For performance reasons (both in this function and on things that consume the filtered list)\n  // it's best if we memoize this operation (by comparing ranges) to avoid recreating the filtered array.\n\n\n  if (lastFilteredMessages === null || !isRangeEqual(lastFilteredFocusRange, focusRange)) {\n    if (focusRange === null) {\n      lastFilteredFocusRange = null;\n      lastFilteredCountAfter = 0;\n      lastFilteredCountBefore = 0; // HACK\n      // Even if we aren't focused, the frontend needs to filter out Firefox internal messages.\n      // This is something the runtime should probably do.\n      // See BAC-2063\n\n      lastFilteredMessages = lastFetchedMessages.filter(message => !isFirefoxInternalMessage(message));\n    } else {\n      const beginPoint = focusRange.begin.point;\n      const endPoint = focusRange.end.point;\n      lastFilteredFocusRange = focusRange;\n      lastFilteredCountAfter = 0;\n      lastFilteredCountBefore = 0;\n      lastFilteredMessages = lastFetchedMessages.filter(message => {\n        // HACK See BAC-2063\n        if (isFirefoxInternalMessage(message)) {\n          return false;\n        }\n\n        const point = message.point.point;\n\n        if (isExecutionPointsLessThan(point, beginPoint)) {\n          lastFilteredCountBefore++;\n          return false;\n        } else if (isExecutionPointsGreaterThan(point, endPoint)) {\n          lastFilteredCountAfter++;\n          return false;\n        } else {\n          return true;\n        }\n      });\n    }\n\n    let errors = 0;\n    let logs = 0;\n    let warnings = 0;\n    lastFilteredMessages.forEach(message => {\n      switch (message.level) {\n        case \"assert\":\n        case \"info\":\n        case \"trace\":\n          logs++;\n          break;\n\n        case \"error\":\n          errors++;\n          break;\n\n        case \"warning\":\n          warnings++;\n          break;\n      }\n    });\n    lastFilteredCategoryCounts = {\n      errors,\n      logs,\n      warnings\n    };\n  } // Note that the only time when it's safe for us to specify the number of trimmed messages\n  // is when we are trimming from the complete set of messages (aka no focus region).\n  // Otherwise even if we do trim some messages locally, the number isn't meaningful.\n\n\n  return {\n    categoryCounts: lastFilteredCategoryCounts,\n    countAfter: lastFetchedFocusRange === null ? lastFilteredCountAfter : -1,\n    countBefore: lastFetchedFocusRange === null ? lastFilteredCountBefore : -1,\n    didOverflow: lastFetchDidOverflow,\n    messages: lastFilteredMessages\n  };\n}\n\nasync function fetchMessages(client, focusRange, wakeable) {\n  try {\n    const {\n      messages,\n      overflow\n    } = await client.findMessages(focusRange);\n    const protocolMessage = messages.map(message => _objectSpread(_objectSpread({}, message), {}, {\n      type: \"ProtocolMessage\"\n    })); // Only update cached values if this request hasn't been superceded by a newer one.\n    //\n    // TODO In the future we could merge new messages over time (assuming no overflow)\n    // to avoid re-fetching previously fetched ranges if a user scrubs around with the focus UI.\n    // We'd have to be careful though to only merge data from overlapping points,\n    // so that we didn't omit messages that happened between points.\n    // I'm still a little unclear on the exact relationship between time and point.\n\n    if (inFlightWakeable === wakeable) {\n      inFlightWakeable = null;\n      lastFetchDidOverflow = overflow;\n      lastFetchError = null;\n      lastFetchedFocusRange = focusRange;\n      lastFetchedMessages = protocolMessage; // Pre-cache ObjectPreview data for this Message (PauseId).\n      // This will avoid us having to turn around and request it again when rendering the logs.\n\n      messages.forEach(message => {\n        const objects = message.data.objects;\n\n        if (objects) {\n          preCacheObjects(message.pauseId, objects);\n        }\n      });\n    }\n\n    wakeable.resolve(protocolMessage);\n  } catch (error) {\n    inFlightFocusRange = null;\n    inFlightWakeable = null;\n    console.error(\"getMessage() Error for range\", printPointRange(focusRange), error);\n    lastFetchDidOverflow = false;\n    lastFetchError = error;\n    lastFetchedFocusRange = focusRange;\n    lastFetchedMessages = null;\n    wakeable.reject(error);\n  }\n}\n\nfunction printPointRange(focusRange) {\n  if (focusRange === null) {\n    return \"null\";\n  } else {\n    return `${focusRange.begin.time}:${focusRange.end.time} (${focusRange.begin.point}:${focusRange.end.point})`;\n  }\n}","import { compareExecutionPoints } from \"./time\";\nexport function isEventLog(loggable) {\n  return loggable.type === \"EventLog\";\n}\nexport function isPointInstance(loggable) {\n  return loggable.type === \"PointInstance\";\n}\nexport function isProtocolMessage(loggable) {\n  return loggable.type === \"ProtocolMessage\";\n}\nexport function isTerminalExpression(loggable) {\n  return loggable.type === \"TerminalExpression\";\n}\nexport function isUncaughtException(loggable) {\n  return loggable.type === \"UncaughtException\";\n}\nexport function getLoggableExecutionPoint(loggable) {\n  if (isEventLog(loggable)) {\n    return loggable.point;\n  } else if (isPointInstance(loggable)) {\n    return loggable.timeStampedHitPoint.point;\n  } else if (isProtocolMessage(loggable)) {\n    return loggable.point.point;\n  } else if (isTerminalExpression(loggable)) {\n    return loggable.point;\n  } else if (isUncaughtException(loggable)) {\n    return loggable.point;\n  } else {\n    throw Error(\"Unsupported loggable type\");\n  }\n}\nexport function getLoggableTime(loggable) {\n  if (isEventLog(loggable)) {\n    return loggable.time;\n  } else if (isPointInstance(loggable)) {\n    return loggable.timeStampedHitPoint.time;\n  } else if (isProtocolMessage(loggable)) {\n    return loggable.point.time;\n  } else if (isTerminalExpression(loggable)) {\n    return loggable.time;\n  } else if (isUncaughtException(loggable)) {\n    return loggable.time;\n  } else {\n    throw Error(\"Unsupported loggable type\");\n  }\n}\nexport function loggableSort(a, b) {\n  const aPoint = getLoggableExecutionPoint(a);\n  const bPoint = getLoggableExecutionPoint(b); // Terminal messages may be logged at the same point/time as other loggables.\n  // If this happens, TerminalExpressions should always come last.\n\n  if (aPoint === bPoint) {\n    const aIsTerminalExpression = isTerminalExpression(a);\n    const bIsTerminalExpression = isTerminalExpression(b);\n\n    if (aIsTerminalExpression && bIsTerminalExpression) {\n      // Two terminal messages at the same time can be sorted by the order they were added in.\n      return a.id - b.id;\n    } else if (aIsTerminalExpression) {\n      return 1;\n    } else if (bIsTerminalExpression) {\n      return -1;\n    }\n  }\n\n  return compareExecutionPoints(aPoint, bPoint);\n}","import { createContext, useContext, useLayoutEffect, useMemo } from \"react\";\nimport { ConsoleFiltersContext } from \"bvaughn-architecture-demo/src/contexts/ConsoleFiltersContext\";\nimport { FocusContext } from \"bvaughn-architecture-demo/src/contexts/FocusContext\";\nimport { PointsContext } from \"bvaughn-architecture-demo/src/contexts/PointsContext\";\nimport { TerminalContext } from \"bvaughn-architecture-demo/src/contexts/TerminalContext\";\nimport { getEventTypeEntryPointsSuspense } from \"bvaughn-architecture-demo/src/suspense/EventsCache\";\nimport { getExceptionsSuspense } from \"bvaughn-architecture-demo/src/suspense/ExceptionsCache\";\nimport { getMessagesSuspense } from \"bvaughn-architecture-demo/src/suspense/MessagesCache\";\nimport { getHitPointsForLocationSuspense } from \"bvaughn-architecture-demo/src/suspense/PointsCache\";\nimport { loggableSort } from \"bvaughn-architecture-demo/src/utils/loggables\";\nimport { isInNodeModules } from \"bvaughn-architecture-demo/src/utils/messages\";\nimport { suspendInParallel } from \"bvaughn-architecture-demo/src/utils/suspense\";\nimport { isExecutionPointsWithinRange } from \"bvaughn-architecture-demo/src/utils/time\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const LoggablesContext = /*#__PURE__*/createContext(null); // A \"loggable\" is anything that can be logged to the Console:\n// * Messages logged to the Console API (e.g. console.log) while a recording is in progress.\n// * Messages logged to the Replay Console terminal while viewing a recording.\n// * Log points (e.g. break points with logging behavior enabled).\n// * Events (e.g. \"click\") that have been toggled on by the user.\n\nconst EMPTY_ARRAY = [];\nexport function LoggablesContextRoot({\n  children,\n  messageListRef\n}) {\n  const client = useContext(ReplayClientContext);\n  const {\n    pointsForAnalysis: points\n  } = useContext(PointsContext);\n  const {\n    eventTypes,\n    filterByText,\n    showErrors,\n    showExceptions,\n    showLogs,\n    showNodeModules,\n    showWarnings\n  } = useContext(ConsoleFiltersContext);\n  const {\n    range: focusRange\n  } = useContext(FocusContext); // Find the set of event type handlers we should be displaying in the console.\n\n  const eventTypesToLoad = useMemo(() => {\n    const filteredEventHandlerTypes = [];\n\n    for (let [eventType, enabled] of Object.entries(eventTypes)) {\n      if (enabled) {\n        filteredEventHandlerTypes.push(eventType);\n      }\n    }\n\n    return filteredEventHandlerTypes;\n  }, [eventTypes]); // Load the event type data from the protocol and flatten into a single array (to be filtered and sorted below).\n\n  const eventLogs = useMemo(() => {\n    return suspendInParallel(...eventTypesToLoad.map(eventType => () => getEventTypeEntryPointsSuspense(client, eventType))).flat();\n  }, [client, eventTypesToLoad]);\n  const {\n    messages\n  } = getMessagesSuspense(client, focusRange); // Pre-filter in-focus messages by non text based search criteria.\n\n  const preFilteredMessages = useMemo(() => {\n    return messages.filter(message => {\n      switch (message.level) {\n        case \"warning\":\n          {\n            if (!showWarnings) {\n              return false;\n            }\n\n            break;\n          }\n\n        case \"error\":\n          {\n            if (!showErrors) {\n              return false;\n            }\n\n            break;\n          }\n\n        default:\n          {\n            if (!showLogs) {\n              return false;\n            }\n\n            break;\n          }\n      } // TODO This seems expensive; can we cache the message-to-node-modules relationship?\n\n\n      if (!showNodeModules) {\n        if (isInNodeModules(message)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }, [messages, showErrors, showLogs, showNodeModules, showWarnings]); // We may suspend based on this value, so let's this value changes at sync priority,\n\n  let exceptions = EMPTY_ARRAY;\n\n  if (showExceptions) {\n    exceptions = getExceptionsSuspense(client, focusRange);\n  } // Trim eventLogs and logPoints by focusRange.\n  // Messages will have already been filtered from the backend.\n\n\n  const focusedEventLogs = useMemo(() => {\n    if (focusRange === null) {\n      return eventLogs;\n    } else {\n      return eventLogs.filter(eventLog => isExecutionPointsWithinRange(eventLog.point, focusRange.begin.point, focusRange.end.point));\n    }\n  }, [eventLogs, focusRange]);\n  const pointInstances = useMemo(() => {\n    const pointInstances = [];\n    points.forEach(point => {\n      if (point.shouldLog) {\n        const [hitPoints, status] = getHitPointsForLocationSuspense(client, point.location, point.condition, focusRange);\n\n        switch (status) {\n          case \"too-many-points-to-find\":\n          case \"too-many-points-to-run-analysis\":\n            {\n              // Don't try to render log points if there are too many hits.\n              break;\n            }\n\n          default:\n            {\n              hitPoints.forEach(hitPoint => {\n                pointInstances.push({\n                  point,\n                  timeStampedHitPoint: hitPoint,\n                  type: \"PointInstance\"\n                });\n              });\n              break;\n            }\n        }\n      }\n    });\n    return pointInstances;\n  }, [client, focusRange, points]);\n  const {\n    messages: terminalExpressions\n  } = useContext(TerminalContext);\n  const sortedTerminalExpressions = useMemo(() => {\n    if (focusRange === null) {\n      return terminalExpressions;\n    } else {\n      return terminalExpressions.filter(terminalExpression => isExecutionPointsWithinRange(terminalExpression.point, focusRange.begin.point, focusRange.end.point));\n    }\n  }, [focusRange, terminalExpressions]);\n  const sortedLoggables = useMemo(() => {\n    const loggables = [...exceptions, ...focusedEventLogs, ...pointInstances, ...preFilteredMessages, ...sortedTerminalExpressions];\n    return loggables.sort(loggableSort);\n  }, [exceptions, focusedEventLogs, pointInstances, preFilteredMessages, sortedTerminalExpressions]);\n  const filterByLowerCaseText = filterByText.toLocaleLowerCase(); // We leverage the DOM for display text filtering because it more closely mimics the browser's built in find-in-page functionality.\n  // We could replace this by the search function from useConsoleSearch() and memoizing it, but it wouldn't work as well.\n\n  useLayoutEffect(() => {\n    const list = messageListRef.current;\n\n    if (list !== null) {\n      list.childNodes.forEach(node => {\n        const element = node;\n\n        if (element.hasAttribute(\"data-search-index\")) {\n          const textContent = element.textContent?.toLocaleLowerCase();\n          const matches = textContent?.includes(filterByLowerCaseText); // HACK Style must be compatible with the visibility check in useConsoleSearchDOM()\n\n          element.style.display = matches ? \"inherit\" : \"none\";\n        }\n      });\n    }\n  }, [filterByLowerCaseText, messageListRef, sortedLoggables]);\n  return /*#__PURE__*/_jsx(LoggablesContext.Provider, {\n    value: sortedLoggables,\n    children: children\n  });\n}","import classNames from \"classnames\";\nimport React, { useContext } from \"react\";\n\nimport { LoggablesContext } from \"bvaughn-architecture-demo/components/console/LoggablesContext\";\nimport hooks from \"ui/hooks\";\nimport { Nag } from \"ui/hooks/users\";\nimport { shouldShowNag } from \"ui/utils/user\";\n\nimport MaterialIcon from \"../MaterialIcon\";\n\n// This is very arbitrary but we need it to keep the editor\n// from running into overflow problems.\nexport const NAG_HEIGHT = \"40px\";\nexport const NAG_HAT_CLASS = \"nag-hat\";\n\nfunction NagHat({\n  mainText,\n  subText,\n  nagType,\n}: {\n  mainText?: string;\n  subText: string;\n  nagType: Nag;\n}) {\n  const { nags } = hooks.useGetUserInfo();\n\n  if (!shouldShowNag(nags, nagType)) {\n    return null;\n  }\n\n  return (\n    <div\n      className={classNames(\n        NAG_HAT_CLASS,\n        \"flex select-none items-center space-x-2 py-1 px-2 leading-tight text-white\"\n      )}\n      style={{\n        boxShadow: \"rgb(184 0 89 / 50%) 0px 0px 4px inset\",\n        background:\n          \"linear-gradient(116.71deg, #FF2F86 21.74%, #EC275D 83.58%), linear-gradient(133.71deg, #01ACFD 3.31%, #F155FF 106.39%, #F477F8 157.93%, #F33685 212.38%), #007AFF\",\n      }}\n    >\n      <MaterialIcon iconSize=\"xl\">auto_awesome</MaterialIcon>\n      <div className=\"flex flex-col overflow-hidden text-xs\">\n        {mainText ? (\n          <div className=\"overflow-hidden overflow-ellipsis whitespace-pre\">{mainText}</div>\n        ) : null}\n        <div className=\"overflow-hidden overflow-ellipsis whitespace-pre font-bold\">{subText}</div>\n      </div>\n    </div>\n  );\n}\n\nexport function EditorNag() {\n  const { nags } = hooks.useGetUserInfo();\n\n  if (!nags) {\n    return null;\n  }\n\n  return <NagHat subText=\"Next, hover on a line number\" nagType={Nag.FIRST_BREAKPOINT_ADD} />;\n}\n\nexport function ConsoleNag() {\n  const loggables = useContext(LoggablesContext);\n\n  // Don't show the console nag that directs the user to click on one of the console messages\n  // if there aren't any console messages to begin with.\n  if (!loggables.length) {\n    return null;\n  }\n\n  return (\n    <NagHat\n      mainText=\"How to time travel, step one:\"\n      subText=\"Fast-forward or rewind by hovering on a line in the console\"\n      nagType={Nag.FIRST_CONSOLE_NAVIGATE}\n    />\n  );\n}\n","import React from \"react\";\n\nexport default function TimeTooltip({ time }: { time: number | null }) {\n  if (!time) {\n    return null;\n  }\n\n  const date = new Date(time || 0);\n  const seconds = date.getSeconds().toString().padStart(2, \"0\");\n  const minutes = date.getMinutes();\n\n  return (\n    <div className=\"time-tooltip bottom-1 rounded-md border border-splitter p-1 py-0.5 text-xs\">\n      {`${minutes}:${seconds}`}\n    </div>\n  );\n}\n","import React, { ReactNode, useRef, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nexport interface TargetCoordinates {\n  x: number;\n  y: number;\n}\n\ninterface PortalTooltipProps {\n  tooltip: ReactNode;\n  children: ReactNode;\n  followX?: boolean;\n}\n\nexport default function PortalTooltip({ children, tooltip, followX = false }: PortalTooltipProps) {\n  const [hoveredCoordinates, setHoveredCoordinates] = useState<TargetCoordinates | null>(null);\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const onMouseMove = (e: React.MouseEvent) => {\n    setHoveredCoordinates({ x: e.clientX, y: e.clientY });\n  };\n  const onMouseLeave = (e: React.MouseEvent) => {\n    setHoveredCoordinates(null);\n  };\n\n  return (\n    <>\n      <div\n        className=\"h-full w-full leading-3\"\n        onMouseMove={onMouseMove}\n        onMouseLeave={onMouseLeave}\n        ref={containerRef}\n      >\n        {children}\n      </div>\n      {hoveredCoordinates && containerRef.current\n        ? createPortal(\n            <PortalChild\n              hoveredCoordinates={hoveredCoordinates}\n              containerRect={containerRef.current.getBoundingClientRect()}\n              followX={followX}\n            >\n              {tooltip}\n            </PortalChild>,\n            document.body\n          )\n        : null}\n    </>\n  );\n}\n\nfunction PortalChild({\n  hoveredCoordinates,\n  containerRect,\n  followX,\n  children,\n}: {\n  hoveredCoordinates: TargetCoordinates;\n  containerRect: DOMRect;\n  followX: boolean;\n  children: ReactNode;\n}) {\n  const hoveredX = hoveredCoordinates.x;\n  const targetX = containerRect.x;\n\n  return (\n    <div\n      className=\"animate absolute z-50 -translate-x-1/2 -translate-y-full transform\"\n      style={{\n        left: followX ? hoveredX : targetX,\n        top: containerRect.y,\n      }}\n    >\n      {children}\n    </div>\n  );\n}\n","import { TimeStampedPointRange } from \"@replayio/protocol\";\nimport clamp from \"lodash/clamp\";\nimport { FC } from \"react\";\n\nimport { getLoadedRegions } from \"ui/reducers/app\";\nimport { getFocusRegion, getZoomRegion } from \"ui/reducers/timeline\";\nimport { useAppSelector } from \"ui/setup/hooks\";\nimport { getVisiblePosition, overlap } from \"ui/utils/timeline\";\n\nexport const UnloadedRegions: FC = () => {\n  const loadedRegions = useAppSelector(getLoadedRegions);\n  const zoomRegion = useAppSelector(getZoomRegion);\n  const focusRegion = useAppSelector(getFocusRegion);\n\n  // Check loadedRegions to keep typescript happy.\n  if (!loadedRegions) {\n    return null;\n  }\n\n  // An empty loadedRegions array after we've finished loading regions means that\n  // the whole recording has been unloaded.\n  if (loadedRegions.loaded.length === 0) {\n    return <div className=\"unloaded-regions w-full\" />;\n  }\n\n  const { begin, end } = loadedRegions.loaded[0];\n  let beginTime = begin.time;\n  let endTime = end.time;\n  if (focusRegion) {\n    // Even though we technically focus on the nearest points,\n    // We should only show the user a range defining their specified times.\n    const userVisibleTimeStampedPointRange: TimeStampedPointRange = {\n      begin: {\n        point: focusRegion.begin.point,\n        time: focusRegion.beginTime,\n      },\n      end: {\n        point: focusRegion.end.point,\n        time: focusRegion.endTime,\n      },\n    };\n\n    const overlappingRegions = overlap([userVisibleTimeStampedPointRange], loadedRegions.loading);\n    if (overlappingRegions.length > 0) {\n      const focusedAndLoaded = overlappingRegions[0];\n      beginTime = focusedAndLoaded.begin.time;\n      endTime = focusedAndLoaded.end.time;\n    }\n  }\n  const { endTime: recordingEndTime } = zoomRegion;\n  const loadedRegionStart = getVisiblePosition({ time: beginTime, zoom: zoomRegion }) * 100;\n  const loadedRegionEnd =\n    getVisiblePosition({ time: recordingEndTime - endTime, zoom: zoomRegion }) * 100;\n\n  return (\n    <>\n      <div\n        className=\"unloaded-regions start\"\n        style={{ width: `${clamp(loadedRegionStart, 0, 100)}%` }}\n      />\n      <div\n        className=\"unloaded-regions end\"\n        style={{ width: `${clamp(loadedRegionEnd, 0, 100)}%` }}\n      />\n    </>\n  );\n};\n","import { PointDescription, TimeStampedPoint } from \"@replayio/protocol\";\nimport classnames from \"classnames\";\nimport { MouseEvent, memo } from \"react\";\nimport { ConnectedProps, connect } from \"react-redux\";\n\nimport { getExecutionPoint } from \"devtools/client/debugger/src/reducers/pause\";\nimport { inBreakpointPanel } from \"devtools/client/debugger/src/utils/editor\";\nimport { Point } from \"shared/client/types\";\nimport { actions } from \"ui/actions\";\nimport { Circle } from \"ui/components/Timeline/Marker\";\nimport { timelineMarkerWidth as pointWidth } from \"ui/constants\";\nimport { selectors } from \"ui/reducers\";\nimport type { UIState } from \"ui/state\";\nimport { HoveredItem } from \"ui/state/timeline\";\n\nfunction toBigInt(num?: string | null) {\n  return num ? BigInt(num) : undefined;\n}\n\nfunction hasPrimaryHighlight({\n  hoveredItem,\n  point,\n}: {\n  hoveredItem: HoveredItem | null;\n  point?: PointDescription;\n}) {\n  return hoveredItem?.point === point?.point;\n}\n\nconst connector = connect(\n  (state: UIState) => ({\n    executionPoint: getExecutionPoint(state),\n    zoomRegion: selectors.getZoomRegion(state),\n  }),\n  {\n    seek: actions.seek,\n    setHoveredItem: actions.setHoveredItem,\n    clearHoveredItem: actions.clearHoveredItem,\n  }\n);\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\ntype BTPProps = PropsFromRedux & {\n  breakpoint: Point;\n  point: PointDescription;\n  index: number;\n  hitPoints: TimeStampedPoint[];\n  hoveredItem: HoveredItem | null;\n};\n\nfunction BreakpointTimelinePoint({\n  breakpoint,\n  point,\n  index,\n  executionPoint,\n  zoomRegion,\n  seek,\n  hitPoints,\n  hoveredItem,\n  setHoveredItem,\n  clearHoveredItem,\n}: BTPProps) {\n  const onMouseEnter = () =>\n    setHoveredItem({\n      target: \"widget\",\n      point: point.point,\n      time: point.time,\n      location: breakpoint.location,\n    });\n\n  const onMouseLeave = (event: MouseEvent<HTMLDivElement>) => {\n    if (!inBreakpointPanel(event)) {\n      clearHoveredItem();\n    }\n  };\n  const onClick = (event: MouseEvent) => {\n    event.stopPropagation();\n    seek(point.point, point.time, true);\n  };\n\n  const { beginTime, endTime } = zoomRegion;\n  const leftPercentOffset = ((point.time - beginTime) / (endTime - beginTime)) * 100;\n\n  const pointInt = toBigInt(point.point)!;\n  const executionInt = toBigInt(executionPoint)!;\n\n  return (\n    <div\n      className={classnames(\"breakpoint-navigation-timeline-point\", {\n        past: pointInt < executionInt,\n        future: pointInt > executionInt,\n        pause: pointInt == executionInt,\n        \"primary-highlight\": hasPrimaryHighlight({ hoveredItem, point }),\n      })}\n      title={`${index + 1}/${hitPoints.length}`}\n      onClick={onClick}\n      style={{ left: `calc(${leftPercentOffset}% - ${pointWidth / 2}px)` }}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      <Circle />\n    </div>\n  );\n}\n\nconst MemoizedBreakpointTimelinePoint = memo(BreakpointTimelinePoint, (prevProps, nextProps) => {\n  function selectorChanged(selector: (props: BTPProps) => any) {\n    return selector(nextProps) !== selector(prevProps);\n  }\n\n  function hasChanged(key: keyof BTPProps) {\n    return nextProps[key] !== prevProps[key];\n  }\n\n  if (\n    selectorChanged(hasPrimaryHighlight) ||\n    hasChanged(\"zoomRegion\") ||\n    hasChanged(\"executionPoint\") ||\n    hasChanged(\"hitPoints\")\n  ) {\n    return false;\n  }\n\n  return true;\n});\nMemoizedBreakpointTimelinePoint.displayName = \"BreakpointTimelinePoint\";\n\nexport default connector(MemoizedBreakpointTimelinePoint);\n","import { PointDescription, TimeStampedPoint } from \"@replayio/protocol\";\nimport classnames from \"classnames\";\nimport React, { MouseEvent, useMemo, useRef, useState } from \"react\";\nimport { ConnectedProps, connect } from \"react-redux\";\n\nimport TimeTooltip from \"devtools/client/debugger/src/components/SecondaryPanes/Breakpoints/TimeTooltip\";\nimport { getExecutionPoint } from \"devtools/client/debugger/src/reducers/pause\";\nimport { mostRecentPaintOrMouseEvent } from \"protocol/graphics\";\nimport { HitPointStatus } from \"shared/client/types\";\nimport { actions as UIActions } from \"ui/actions\";\nimport PortalTooltip from \"ui/components/shared/PortalTooltip\";\nimport { UnloadedRegions } from \"ui/components/Timeline/UnloadedRegions\";\nimport { timelineMarkerWidth as pointWidth } from \"ui/constants\";\nimport { selectors } from \"ui/reducers\";\nimport { useAppSelector } from \"ui/setup/hooks\";\nimport { UIState } from \"ui/state\";\nimport { HoveredItem } from \"ui/state/timeline\";\nimport { getVisiblePosition } from \"ui/utils/timeline\";\n\nimport BreakpointTimelinePoint from \"./BreakpointTimelinePoint\";\n\nfunction Points({\n  breakpoint,\n  hitPoints,\n  hoveredItem,\n}: {\n  breakpoint: any;\n  hitPoints: TimeStampedPoint[];\n  hoveredItem: HoveredItem | null;\n}) {\n  const executionPoint = useAppSelector(getExecutionPoint);\n  const duration = useAppSelector(selectors.getRecordingDuration);\n  const displayedPoints = useMemo(() => {\n    if (!duration) {\n      // We haven't loaded yet, bailing early\n      return [];\n    }\n    let previousDisplayed: PointDescription;\n    return hitPoints.filter(p => {\n      if (\n        !previousDisplayed ||\n        executionPoint === p.point ||\n        p.time - previousDisplayed.time > duration * 0.01\n      ) {\n        previousDisplayed = p;\n        return true;\n      }\n      return false;\n    });\n  }, [duration, executionPoint, hitPoints]);\n\n  return (\n    <>\n      {displayedPoints?.map((p, i) => (\n        <BreakpointTimelinePoint\n          breakpoint={breakpoint}\n          point={p}\n          key={i}\n          index={i}\n          hitPoints={hitPoints}\n          hoveredItem={hoveredItem}\n        />\n      ))}\n    </>\n  );\n}\n\ntype BreakpointTimelineProps = PropsFromRedux & {\n  breakpoint: any;\n  hitPoints: TimeStampedPoint[];\n  hitPointStatus: HitPointStatus;\n};\n\nfunction BreakpointTimeline({\n  breakpoint,\n  currentTime,\n  hitPoints,\n  hitPointStatus,\n  hoveredItem,\n  seek,\n  zoomRegion,\n}: BreakpointTimelineProps) {\n  const [hoveredTime, setHoveredTime] = useState<number | null>(null);\n  const timelineRef = useRef<HTMLDivElement | null>(null);\n  const onClick = () => {\n    if (!hoveredTime) {\n      return;\n    }\n\n    const event = mostRecentPaintOrMouseEvent(hoveredTime);\n    if (event && event.point) {\n      seek(event.point, hoveredTime, false);\n    }\n  };\n  const onMouseMove = (event: MouseEvent) => {\n    const { beginTime, endTime } = zoomRegion;\n    const { left, width } = event.currentTarget.getBoundingClientRect();\n    const clickLeft = event.clientX;\n\n    const clickPosition = Math.max((clickLeft - left) / width, 0);\n    const time = Math.ceil(beginTime + (endTime - beginTime) * clickPosition);\n    setHoveredTime(time);\n  };\n  const onMouseLeave = () => setHoveredTime(null);\n\n  const hoverPercent = `${getVisiblePosition({ time: hoveredTime, zoom: zoomRegion }) * 100}%`;\n  const percent = getVisiblePosition({ time: currentTime, zoom: zoomRegion }) * 100;\n\n  return (\n    <div className=\"breakpoint-navigation-timeline-container relative\">\n      <PortalTooltip tooltip={<TimeTooltip time={hoveredTime} />} followX={true}>\n        <div\n          className={classnames(\"breakpoint-navigation-timeline relative cursor-pointer\")}\n          onMouseMove={onMouseMove}\n          onMouseLeave={onMouseLeave}\n          onClick={onClick}\n          ref={timelineRef}\n          style={{ height: `${pointWidth + 2}px` }} // 2px to account for the 1px top+bottom border\n        >\n          <div className=\"progress-line full\" />\n          <div className=\"progress-line preview-min\" style={{ width: hoverPercent }} />\n          <div className=\"progress-line\" style={{ width: `${percent}%` }} />\n          <UnloadedRegions />\n          {hitPointStatus !== \"too-many-points-to-find\" ? (\n            <Points breakpoint={breakpoint} hitPoints={hitPoints} hoveredItem={hoveredItem} />\n          ) : null}\n        </div>\n      </PortalTooltip>\n    </div>\n  );\n}\n\nconst connector = connect(\n  (state: UIState) => ({\n    currentTime: selectors.getCurrentTime(state),\n    hoveredItem: selectors.getHoveredItem(state),\n    zoomRegion: selectors.getZoomRegion(state),\n  }),\n  {\n    seek: UIActions.seek,\n  }\n);\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nexport default connector(BreakpointTimeline);\n","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutProperties from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"value\", \"onChange\", \"children\", \"backgroundColor\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport classNames from \"classnames\";\nimport { motion } from \"framer-motion\";\nimport { Children, cloneElement, isValidElement, useRef, useState } from \"react\";\nimport styles from \"./Picker.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function Picker(_ref) {\n  let {\n    value,\n    onChange,\n    children,\n    backgroundColor\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  const previousId = useRef(null);\n  const transitioning = useRef(false);\n  const {\n    0: isActive,\n    1: setIsActive\n  } = useState(false);\n  const {\n    0: isOpen,\n    1: setIsOpen\n  } = useState(false);\n  const transition = {\n    duration: isOpen ? 0.16 : 0.2,\n    opacity: {\n      duration: isOpen ? 0.1 : 0.04\n    }\n  };\n  return /*#__PURE__*/_jsxs(motion.div, _objectSpread(_objectSpread({}, props), {}, {\n    \"data-open\": isOpen,\n    className: classNames(styles.Picker, props.className),\n    title: isOpen ? undefined : \"Select a prefix badge\",\n    initial: isOpen ? \"opened\" : \"closed\",\n    animate: isOpen ? \"opened\" : \"closed\",\n    onMouseEnter: () => setIsActive(true),\n    onMouseLeave: () => !isOpen && !transitioning.current && setIsActive(false),\n    variants: {\n      opened: {\n        transition: {\n          staggerChildren: 0.02\n        }\n      },\n      closed: {\n        transition: {\n          staggerChildren: 0.02\n        }\n      }\n    },\n    children: [/*#__PURE__*/_jsx(motion.div, {\n      layout: true,\n      transition: transition,\n      className: styles.PickerFill,\n      style: {\n        borderRadius: 32,\n        backgroundColor: isActive ? \"var(--badge-background--active)\" : \"var(--badge-background)\"\n      }\n    }), Children.toArray(children).map(child => {\n      if (! /*#__PURE__*/isValidElement(child)) {\n        throw Error(\"Picker children must be a valid React element.\");\n      }\n\n      if (!child.props.id) {\n        const name = typeof child.type === \"string\" ? child.type : child.type.name;\n        throw Error(`Immediate Picker child \"${name}\" must pass an \"id\" prop.`);\n      }\n\n      const isToggle = child.props.id === \"toggle\";\n      const showToggle = value === undefined && isToggle;\n      const isChildActive = value === child.props.id || showToggle;\n      const wasChildActive = previousId.current === child.props.id;\n      const childVariants = child.props.variants || {};\n\n      const onSelect = () => {\n        const nextIsOpen = !isOpen;\n        setIsOpen(nextIsOpen);\n\n        if (nextIsOpen) {\n          setIsActive(true);\n        } else {\n          /** Wait until the fill is finished animating before removing the active background color. */\n          setTimeout(() => {\n            setIsActive(false);\n            transitioning.current = false;\n          }, transition.duration * 1000);\n          transitioning.current = true;\n        }\n\n        const nextActiveId = isToggle ? undefined : child.props.id;\n        previousId.current = isChildActive ? child.props.id : undefined;\n        onChange(nextActiveId);\n      };\n\n      return /*#__PURE__*/cloneElement(child, {\n        disabled: !isOpen && !isChildActive,\n        layout: \"position\",\n        variants: {\n          opened: _objectSpread(_objectSpread({}, childVariants.opened), {}, {\n            opacity: 1\n          }),\n          closed: _objectSpread(_objectSpread({}, childVariants.closed), {}, {\n            scale: isChildActive ? 1 : childVariants.closed?.scale,\n            opacity: isChildActive ? 1 : 0\n          })\n        },\n        transition: _objectSpread(_objectSpread({}, transition), child.props.transition),\n        style: _objectSpread({\n          zIndex: isChildActive || wasChildActive ? 10 : 1,\n          gridColumn: isOpen ? undefined : 1,\n          gridRow: 1\n        }, child.props.style),\n        onClick: onSelect,\n        \"data-is-active\": isChildActive,\n        \"data-was-active\": wasChildActive\n      });\n    })]\n  }));\n}","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport classNames from \"classnames\";\nimport { motion } from \"framer-motion\";\nimport * as React from \"react\";\nimport { Picker } from \"./Picker\";\nimport styles from \"./PrefixBadgePicker.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const badges = [\"unicorn\", \"green\", \"yellow\", \"orange\", \"purple\"];\n/**\n * Allows picking a prefix badge for identifying console messages more easily.\n * Used in PanelEditor when a log point is being added.\n */\n\nexport function PrefixBadgePicker({\n  initialValue,\n  onSelect\n}) {\n  const [activeBadge, setActiveBadge] = React.useState(initialValue);\n\n  const handleSelect = prefixBadgeName => {\n    setActiveBadge(prefixBadgeName);\n    onSelect?.(prefixBadgeName);\n  };\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: \"z-10 flex\",\n    style: {\n      width: 26,\n      height: 26\n    },\n    children: /*#__PURE__*/_jsxs(Picker, {\n      value: activeBadge || undefined,\n      onChange: handleSelect,\n      className: styles.PrefixBadgePicker,\n      children: [/*#__PURE__*/_jsx(ToggleButton, {\n        id: \"toggle\"\n      }), badges.map(badge => /*#__PURE__*/_jsx(motion.button, {\n        id: badge,\n        variants: {\n          active: {\n            scale: 1\n          },\n          opened: {\n            scale: 1\n          },\n          closed: {\n            scale: 0.82\n          }\n        },\n        className: styles.PrefixBadge,\n        children: /*#__PURE__*/_jsx(motion.div, {\n          className: badge === \"unicorn\" ? styles.UnicornBadge : classNames(styles.ColorBadge, styles[badge])\n        })\n      }, badge))]\n    })\n  });\n}\n\nfunction ToggleButton(props) {\n  return /*#__PURE__*/_jsx(motion.button, _objectSpread(_objectSpread({}, props), {}, {\n    className: classNames(styles.PrefixBadge, props.className),\n    children: /*#__PURE__*/_jsx(motion.span, {\n      layout: true,\n      variants: {\n        opened: {\n          width: \"0.5rem\",\n          height: \"0.1rem\"\n        },\n        closed: {\n          width: \"0.3rem\",\n          height: \"0.3rem\"\n        }\n      },\n      transition: {\n        duration: 0.16\n      },\n      className: styles.DefaultBadge\n    })\n  }));\n}","import React, { useCallback, useContext } from \"react\";\n\nimport { PointsContext } from \"bvaughn-architecture-demo/src/contexts/PointsContext\";\nimport { PrefixBadgePicker } from \"design\";\nimport { Badge, Point } from \"shared/client/types\";\n\nimport styles from \"./PrefixBadge.module.css\";\n\n// Rendered in log point PanelEditor, when a log point is being edited.\n// Clicking this item will show the PrefixBadgePicker.\nexport default function PrefixBadgeButton({ point }: { point: Point }) {\n  const { editPoint } = useContext(PointsContext);\n\n  const { id } = point;\n  const onSelect = useCallback(\n    (newBadge: Badge | undefined) => {\n      editPoint(id, { badge: newBadge || null });\n    },\n    [editPoint, id]\n  );\n\n  return <PrefixBadgePicker initialValue={point.badge || undefined} onSelect={onSelect} />;\n}\n\n// Helper method used by the log point PanelEditor, when a log point is being viewed.\n// This ensures the point count has a background color that matches the selected badge.\nexport function getPrefixBadgeBackgroundColorClassName(prefixBadge?: Badge) {\n  return prefixBadge === \"unicorn\"\n    ? styles.unicorn\n    : prefixBadge == null\n    ? \"\"\n    : styles[prefixBadge];\n}\n","import { TimeStampedPoint } from \"@replayio/protocol\";\nimport sortedLastIndex from \"lodash/sortedLastIndex\";\n\nimport { Badge, HitPointStatus } from \"shared/client/types\";\nimport { getPrefixBadgeBackgroundColorClassName } from \"ui/components/PrefixBadge\";\nimport { getCurrentTime } from \"ui/reducers/timeline\";\nimport { useAppSelector } from \"ui/setup/hooks\";\n\nconst numberStatus = (current: number | undefined, total: number | undefined): string => {\n  return `${current ?? \"?\"}/${total ?? \"?\"}`;\n};\n\nconst maxStatusLength = (total: number | undefined): number => {\n  const numberLength = numberStatus(total, total).length;\n  return Math.max(\"Loading\".length, numberLength);\n};\n\nexport function PanelStatus({\n  hitPoints,\n  hitPointStatus,\n  prefixBadge,\n}: {\n  hitPoints: TimeStampedPoint[] | null;\n  hitPointStatus: HitPointStatus | null;\n  prefixBadge: Badge;\n}) {\n  const time = useAppSelector(getCurrentTime);\n  const hitPointsLength = hitPoints === null ? 0 : hitPoints.length;\n\n  let status = null;\n  switch (hitPointStatus) {\n    case \"too-many-points-to-find\":\n      status = \"10k+ hits\";\n      break;\n    case \"too-many-points-to-run-analysis\":\n      break;\n    default:\n      if (hitPoints === null) {\n        status = \"Loading\";\n      } else if (hitPointsLength === 0) {\n        status = \"No hits\";\n      } else {\n        const previousTimeIndex = sortedLastIndex(\n          hitPoints!.map(p => p.time),\n          time\n        );\n        status = numberStatus(previousTimeIndex, hitPointsLength);\n      }\n      break;\n  }\n\n  return (\n    <div className=\"breakpoint-navigation-status-container\">\n      <div\n        className={`rounded-2xl bg-breakpointStatusBG px-3 py-0.5 text-breakpointStatus ${getPrefixBadgeBackgroundColorClassName(\n          prefixBadge\n        )}`}\n        data-test-name=\"LogpointPanel-BreakpointStatus\"\n      >\n        <div\n          className=\"text-center\"\n          style={{ width: `${maxStatusLength(hitPointsLength)}ch` }}\n        ></div>\n        {status}\n      </div>\n    </div>\n  );\n}\n","import { PointDescription, TimeStampedPoint } from \"@replayio/protocol\";\nimport classnames from \"classnames\";\nimport findLast from \"lodash/findLast\";\nimport React, { Suspense, useEffect } from \"react\";\nimport { ConnectedProps, connect } from \"react-redux\";\n\nimport { getExecutionPoint } from \"devtools/client/debugger/src/selectors\";\nimport { compareNumericStrings } from \"protocol/utils\";\nimport { HitPointStatus, Point } from \"shared/client/types\";\nimport { actions } from \"ui/actions\";\nimport Icon from \"ui/components/shared/Icon\";\nimport type { UIState } from \"ui/state\";\nimport { trackEvent } from \"ui/utils/telemetry\";\n\nimport BreakpointTimeline from \"./BreakpointTimeline\";\nimport { PanelStatus } from \"./PanelStatus\";\n\ntype ExternalProps = {\n  breakpoint: Point;\n  editing: boolean;\n  hitPoints: TimeStampedPoint[] | null;\n  hitPointStatus: HitPointStatus | null;\n  showCondition: boolean;\n  isTransitionPending: boolean;\n  setShowCondition: (showCondition: boolean) => void;\n};\n\nconst connector = connect(\n  (state: UIState) => ({\n    executionPoint: getExecutionPoint(state),\n  }),\n  {\n    seek: actions.seek,\n  }\n);\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nfunction BreakpointNavigation({\n  breakpoint,\n  editing,\n  executionPoint,\n  hitPoints,\n  hitPointStatus,\n  isTransitionPending,\n  seek,\n  setShowCondition,\n  showCondition,\n}: PropsFromRedux & ExternalProps) {\n  const error = hitPointStatus === \"too-many-points-to-find\";\n  const isEmpty = hitPoints === null || hitPoints.length === 0;\n\n  const navigateToPoint = (point?: PointDescription) => {\n    trackEvent(\"breakpoint.navigate\");\n    if (point) {\n      seek(point.point, point.time, true);\n    }\n  };\n\n  let next, prev;\n\n  if (executionPoint && !error && !isEmpty) {\n    prev = findLast(hitPoints, p => compareNumericStrings(p.point, executionPoint) < 0);\n    next = hitPoints.find(p => compareNumericStrings(p.point, executionPoint) > 0);\n  }\n\n  useEffect(() => {\n    if (!error && hitPoints !== null) {\n      trackEvent(hitPoints.length > 0 ? \"breakpoint.has_hits\" : \"breakpoint.no_hits\", {\n        hits: hitPoints.length,\n      });\n    }\n  }, [error, hitPoints]);\n\n  if (editing) {\n    return (\n      <div className=\"breakpoint-navigation justify-end space-x-1 p-1.5 py-2\">\n        <button\n          data-test-name=\"EditLogpointConditionButton\"\n          onClick={() => setShowCondition(!showCondition)}\n        >\n          <Icon\n            filename=\"filter\"\n            className={classnames(showCondition ? \"bg-primaryAccent\" : \"bg-gray-400\")}\n          />\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={classnames(\"breakpoint-navigation justify-between p-1.5 pr-4 pt-2\", {\n        empty: isEmpty,\n        \"bp-nav-pending\": isTransitionPending,\n      })}\n    >\n      <BreakpointNavigationCommands prev={prev} next={next} navigateToPoint={navigateToPoint} />\n      {!error && hitPoints ? (\n        <BreakpointTimeline\n          breakpoint={breakpoint}\n          hitPoints={hitPoints}\n          hitPointStatus={hitPointStatus!}\n        />\n      ) : (\n        <div className=\"flex-grow\" />\n      )}\n      <div className=\"text-center\">\n        <PanelStatus\n          hitPoints={hitPoints}\n          hitPointStatus={hitPointStatus}\n          prefixBadge={breakpoint.badge!}\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction BreakpointNavigationCommands({\n  prev,\n  next,\n  navigateToPoint,\n}: {\n  prev?: PointDescription;\n  next?: PointDescription;\n  navigateToPoint: (point?: PointDescription) => void;\n}) {\n  const prevDisabled = !prev;\n  const nextDisabled = !next;\n  return (\n    <div className=\"breakpoint-navigation-commands\">\n      <button\n        className={`breakpoint-navigation-command-prev ${prevDisabled ? \" disabled\" : \"\"}`}\n        title={prev ? \"Jump Back (to previous hit)\" : \"No previous hit to jump to\"}\n        disabled={prevDisabled}\n        onClick={() => navigateToPoint(prev)}\n      >\n        <div className=\"img rewind-rounded\" />\n      </button>\n      <button\n        className={`breakpoint-navigation-command-next ${nextDisabled || !next ? \" disabled\" : \"\"}`}\n        title={next ? \"Jump Forward (to next hit)\" : \"No next hit to jump to\"}\n        disabled={nextDisabled}\n        onClick={() => navigateToPoint(next)}\n      >\n        <div className=\"img rewind-rounded\" style={{ transform: \"rotate(180deg)\" }} />\n      </button>\n    </div>\n  );\n}\n\nconst ConnectedBreakpointNavigation = connector(BreakpointNavigation);\n\nfunction Loader() {\n  return <div className=\"breakpoint-navigation empty justify-between p-1.5\">Loading</div>;\n}\n\nexport default function SuspendingBreakpointNavigation(props: ExternalProps) {\n  return (\n    <Suspense fallback={<Loader />}>\n      <ConnectedBreakpointNavigation {...props} />\n    </Suspense>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\n\nimport MaterialIcon from \"ui/components/shared/MaterialIcon\";\nimport hooks from \"ui/hooks\";\nimport { Nag } from \"ui/hooks/users\";\nimport { shouldShowNag } from \"ui/utils/user\";\n\nconst TEXT = {\n  editPrompt: \"Click below to edit your first print statement\",\n  savePrompt: \"Click save and the console will time travel!\",\n  success: (\n    <>\n      <span className=\"flex\">\n        Check the console for your print statements. You just time traveled! 🎉\n      </span>\n\n      <span className=\"flex grow justify-end\">\n        <a\n          href=\"https://www.notion.so/replayio/Print-statements-1dcf7c3a8414423aab122ea7c4a41661\"\n          target=\"_blank\"\n          rel=\"noreferrer noopener\"\n        >\n          Learn more\n        </a>\n      </span>\n    </>\n  ),\n};\n\ntype Step = keyof typeof TEXT;\n\n// TODO [jaril] Fix react-hooks/exhaustive-deps\nexport default function FirstEditNag({ editing }: { editing: boolean }) {\n  const [step, setStep] = useState<Step | null>(null);\n  const { nags } = hooks.useGetUserInfo();\n\n  useEffect(() => {\n    if (shouldShowNag(nags, Nag.FIRST_BREAKPOINT_EDIT)) {\n      setStep(\"editPrompt\");\n    } else if (editing && shouldShowNag(nags, Nag.FIRST_BREAKPOINT_SAVE)) {\n      setStep(\"savePrompt\");\n    }\n\n    // Show the user the success state if they've just finished saving the breakpoint.\n    if (step === \"savePrompt\" && !shouldShowNag(nags, Nag.FIRST_BREAKPOINT_SAVE)) {\n      setStep(\"success\");\n    }\n  }, [nags, editing]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (!step) {\n    return null;\n  }\n\n  return (\n    <div\n      className=\"flex items-center space-x-2 rounded-t-md bg-secondaryAccent py-1 px-2 font-sans leading-tight text-white\"\n      style={{\n        background:\n          \"linear-gradient(116.71deg, #FF2F86 21.74%, #EC275D 83.58%), linear-gradient(133.71deg, #01ACFD 3.31%, #F155FF 106.39%, #F477F8 157.93%, #F33685 212.38%), #007AFF\",\n      }}\n    >\n      <MaterialIcon iconSize=\"xl\">auto_awesome</MaterialIcon>\n      <div className=\"flex grow text-xs font-bold\">{TEXT[step]}</div>\n    </div>\n  );\n}\n","import generate from \"@babel/generator\";\nimport { parseExpression } from \"@babel/parser\";\nimport {\n  CallExpression,\n  Identifier,\n  StringLiteral,\n  isCallExpression as _isCallExpression,\n  isIdentifier as _isIdentifier,\n  isMemberExpression as _isMemberExpression,\n  isStringLiteral as _isStringLiteral,\n} from \"@babel/types\";\nimport { Object as ProtocolObject, Scope as ProtocolScope } from \"@replayio/protocol\";\nimport { filter } from \"fuzzaldrin-plus\";\n\ntype PropertyExpression = {\n  left: string;\n  right: string;\n  computed: boolean;\n};\n\nexport type ObjectFetcher = (objectId: string) => Promise<ProtocolObject>;\n\n// This is used as a property name placeholder for what they user could\n//  be trying to type or find the autocomplete match to.\nconst PROPERTY_PLACEHOLDER = \"fakeProperty\";\n\nfunction escapeRegex(string: string) {\n  return string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n}\n\n// Trims quotation marks from the string. This allows us to match\n// bracket notation properties regardless of whether the user has quotation\n// marks or not. i.e., `foo[\"ba` vs `foo[ba` will both show \"bar\" as\n// an autocomplete match.\nexport function normalizeString(str: string) {\n  return str.toLowerCase().replace(/['\"`]+/g, \"\");\n}\nexport function fuzzyFilter(candidates: string[], query: string): string[] {\n  if (normalizeString(query) === \"\") {\n    return candidates;\n  }\n  return filter(candidates, query);\n}\n\nfunction isIdentifier(expression: string) {\n  try {\n    return _isIdentifier(parseExpression(expression));\n  } catch (e) {\n    return false;\n  }\n}\nfunction isMemberExpression(expression: string) {\n  try {\n    return _isMemberExpression(parseExpression(expression));\n  } catch (e) {\n    return false;\n  }\n}\nfunction isCallExpression(expression: string) {\n  try {\n    return _isCallExpression(parseExpression(expression));\n  } catch (e) {\n    return false;\n  }\n}\n\n// Try out to all possible bracket notation endings and see if\n// that produces a valid member expression.\nfunction tryToAutocompleteComputedProperty(str: string) {\n  const endings = [`]`, `\"]`, `\"\"]`, `']`, `'']`];\n  const ending = endings.find(e => isMemberExpression(str + e));\n\n  return ending ? str + ending : \"\";\n}\nexport function isBracketNotation(str: string) {\n  return !!tryToAutocompleteComputedProperty(str);\n}\nexport function isDotNotation(str: string) {\n  return isMemberExpression(str + PROPERTY_PLACEHOLDER);\n}\n\nconst OBJECT_PROTOTYPE_PROPERTIES = Object.getOwnPropertyNames(Object.prototype);\nconst ARRAY_PROTOTYPE_PROPERTIES = Object.getOwnPropertyNames(Array.prototype);\n\nexport async function getPropertiesForObject(\n  objectId: string,\n  fetchObjectWithPreview: ObjectFetcher,\n  maxDepth = Infinity\n): Promise<string[]> {\n  const properties = [];\n\n  if (!objectId) {\n    return [];\n  }\n\n  const object = await fetchObjectWithPreview(objectId);\n  // We _should_ have a preview because `fetchObjectWithPreview`\n  // asked the object cache to retrieve one\n  if (object.preview) {\n    const objectProperties = object.preview.properties?.map(b => b.name) ?? [];\n    properties.unshift(...objectProperties);\n  } else {\n    if ([\"Object\", \"Array\"].includes(object.className)) {\n      properties.unshift(...OBJECT_PROTOTYPE_PROPERTIES);\n    }\n\n    if (object.className === \"Array\") {\n      properties.unshift(...ARRAY_PROTOTYPE_PROPERTIES);\n    }\n  }\n\n  const prototypeId = object.preview?.prototypeId;\n\n  // Recursively gather the properties through the prototype chain.\n  if (prototypeId && maxDepth > 0) {\n    const prototypeProperties = await getPropertiesForObject(\n      prototypeId,\n      fetchObjectWithPreview,\n      maxDepth - 1\n    );\n\n    properties.push(...prototypeProperties);\n  }\n\n  return properties;\n}\n\nfunction shouldVariableAutocomplete(input: string) {\n  return isIdentifier(input);\n}\n\n// Looks for the \"global object\" (ie `window`) and returns its properties\nasync function getGlobalVariables(scopes: ProtocolScope[], fetchObject: ObjectFetcher) {\n  // Scopes are ordered nearest to broadest.\n  // _If_ there is a global object, it will be the last scope in the list.\n  const [lastScope] = scopes.slice(-1);\n\n  const globalScopeObjectId = lastScope?.object;\n  if (!globalScopeObjectId) {\n    return [];\n  }\n\n  const globalObjectProperties = await getPropertiesForObject(globalScopeObjectId, fetchObject, 1);\n\n  return globalObjectProperties;\n}\n\nfunction getPropertyValue(property: StringLiteral | Identifier) {\n  if (_isStringLiteral(property)) {\n    return property.value;\n  }\n\n  return property.name;\n}\nexport function getPropertyExpression(str: string): PropertyExpression | null {\n  if (isDotNotation(str)) {\n    const parsed = parseExpression(str + PROPERTY_PLACEHOLDER);\n\n    // To make ts happy.\n    if (!_isMemberExpression(parsed) || !_isIdentifier(parsed.property)) {\n      return null;\n    }\n\n    return {\n      left: generate(parsed.object).code,\n      right: parsed.property.name.slice(0, -PROPERTY_PLACEHOLDER.length),\n      computed: false,\n    };\n  } else if (isBracketNotation(str)) {\n    const placeholderStr = tryToAutocompleteComputedProperty(str);\n    const parsed = parseExpression(placeholderStr);\n\n    // To make ts happy.\n    if (\n      !_isMemberExpression(parsed) ||\n      !(_isStringLiteral(parsed.property) || _isIdentifier(parsed.property))\n    ) {\n      return null;\n    }\n\n    return {\n      left: generate(parsed.object).code,\n      right: getPropertyValue(parsed.property),\n      computed: true,\n    };\n  }\n\n  return null;\n}\n\n// Used to figure out the earliest cursor position of the current autocomplete target.\nexport function getCursorIndex(value: string, isArgument: boolean) {\n  const propertyExpression = getPropertyExpression(isArgument ? getLastExpression(value) : value);\n  let index;\n\n  if (propertyExpression) {\n    // +1 to account for the `.` or `[`\n    index = propertyExpression.left.length + 1;\n  } else {\n    index = 0;\n  }\n\n  return isArgument ? value.length - getLastExpression(value).length + index : index;\n}\nexport function insertAutocompleteMatch(value: string, match: string, isArgument: boolean = false) {\n  const propertyExpression = getPropertyExpression(isArgument ? getLastExpression(value) : value);\n  let autocompletedExpression: string;\n\n  if (propertyExpression) {\n    const { left, computed } = propertyExpression;\n\n    if (computed) {\n      autocompletedExpression = `${left}[\"${match}\"]`;\n    } else {\n      autocompletedExpression = `${left}.${match}`;\n    }\n  } else {\n    // For variable autocomplete.\n    autocompletedExpression = match;\n  }\n\n  return isArgument\n    ? autocompleteLastArgument(value, autocompletedExpression)\n    : autocompletedExpression;\n}\nexport async function getAutocompleteMatches(\n  input: string,\n  scopes: ProtocolScope[],\n  fetchObjectWithPreview: ObjectFetcher\n) {\n  const currentScope = scopes[0];\n  if (!currentScope) {\n    return [];\n  }\n  const propertyExpression = getPropertyExpression(input);\n\n  if (propertyExpression) {\n    const properties: string[] = [];\n    const { left, right } = propertyExpression;\n\n    // TODO This only handles top-level variables because of `=== left`.\n    // TODO Rework this to handle nested field lookups.\n    // TODO This also only looks in the _current_ scope.\n    const matchingBinding = currentScope.bindings?.find(b => b.name === left);\n\n    if (matchingBinding?.object) {\n      // Assuming this variable name represents an object,\n      // fetch its property names up to 1 prototype level deep\n      const prototypeProperties = await getPropertiesForObject(\n        matchingBinding.object,\n        fetchObjectWithPreview,\n        1\n      );\n      properties.push(...prototypeProperties);\n    }\n\n    properties.sort();\n\n    return fuzzyFilter(properties, normalizeString(right));\n  } else if (shouldVariableAutocomplete(input)) {\n    // TODO this only looks in the _current_ scope\n    const bindingNames = currentScope.bindings?.map(b => b.name) ?? [];\n    const globalVariables = await getGlobalVariables(scopes, fetchObjectWithPreview);\n\n    const variableNames = [...bindingNames, ...globalVariables];\n    variableNames.sort();\n\n    return fuzzyFilter(variableNames, normalizeString(input));\n  }\n\n  return [];\n}\nexport function getRemainingCompletedTextAfterCursor(value: string, match: string) {\n  const propertyExpression = getPropertyExpression(value);\n\n  if (\n    !propertyExpression ||\n    match.slice(0, propertyExpression.right.length) !== propertyExpression.right\n  ) {\n    return null;\n  }\n\n  return match.slice(propertyExpression.right.length);\n}\nexport function autocompleteLastArgument(expression: string, newLastArg: string) {\n  const partialLastArg = getLastExpression(expression);\n  return expression.replace(new RegExp(`${escapeRegex(partialLastArg)}$`), newLastArg);\n}\nexport function getLastExpression(exp: string) {\n  const expression = `console.log(${exp}${PROPERTY_PLACEHOLDER})`;\n\n  if (isCallExpression(expression)) {\n    const parsed = parseExpression(expression) as CallExpression;\n    const lastArgNode = parsed.arguments[parsed.arguments.length - 1] as Identifier;\n    return expression.slice(lastArgNode.start!, lastArgNode.end! - PROPERTY_PLACEHOLDER.length);\n  }\n\n  return exp;\n}\n","import { ReactNode } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nexport default function AppContainerPortal({ children }: { children: ReactNode }) {\n  const containerNode = document.querySelector(\"#app-container\")!;\n  return createPortal(children, containerNode);\n}\n","import classNames from \"classnames\";\nimport React, { useEffect, useLayoutEffect, useMemo, useRef } from \"react\";\nimport { FixedSizeList as List } from \"react-window\";\n\nimport AppContainerPortal from \"../AppContainerPortal\";\n\ntype ItemData = {\n  matches: string[];\n  onMatchClick: (match: string) => void;\n  selectedIndex: number;\n};\n\nexport type AutocompleteMatchesOptions = {\n  minLeft: number;\n  isArgument: boolean;\n};\n\nfunction Match({\n  label,\n  isSelected,\n  onClick,\n  style,\n}: {\n  label: string;\n  isSelected: boolean;\n  onClick: (match: string) => void;\n  style: React.CSSProperties;\n}) {\n  const buttonNode = useRef<HTMLButtonElement>(null);\n\n  useEffect(() => {\n    if (isSelected) {\n      buttonNode.current?.scrollIntoView({ block: \"nearest\", inline: \"end\" });\n    }\n  }, [isSelected]);\n\n  return (\n    <button\n      className={classNames(\n        \"w-full cursor-default px-1 text-left\",\n        isSelected ? \"bg-primaryAccent text-white\" : \"hover:bg-toolbarBackgroundAlt\"\n      )}\n      style={{\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        ...style,\n      }}\n      ref={buttonNode}\n      onClick={() => onClick(label)}\n    >\n      {label}\n    </button>\n  );\n}\n\nexport default function AutocompleteMatches({\n  containerRect,\n  leftOffset,\n  matches,\n  selectedIndex,\n  onMatchClick,\n  options,\n}: {\n  containerRect: DOMRect;\n  leftOffset: number;\n  matches: string[];\n  selectedIndex: number;\n  onMatchClick: (match: string) => void;\n  options: AutocompleteMatchesOptions;\n}) {\n  const { top, left } = containerRect;\n\n  const itemData: ItemData = useMemo(\n    () => ({\n      matches,\n      onMatchClick,\n      selectedIndex,\n    }),\n    [matches, onMatchClick, selectedIndex]\n  );\n\n  const listRef = useRef<List>(null);\n  const lastSelectedIndexRef = useRef(selectedIndex);\n  useLayoutEffect(() => {\n    if (selectedIndex !== lastSelectedIndexRef.current) {\n      lastSelectedIndexRef.current = selectedIndex;\n\n      listRef.current!.scrollToItem(selectedIndex);\n    }\n  }, [selectedIndex]);\n\n  return (\n    <AppContainerPortal>\n      <div className=\"absolute z-10 -translate-y-full transform\" style={{ top, left }}>\n        <div\n          className=\"autocomplete-matches flex flex-col overflow-y-auto overflow-x-hidden border border-splitter bg-menuBgcolor py-1 font-mono text-menuColor shadow-sm\"\n          style={{\n            fontSize: \"var(--theme-code-font-size)\",\n            marginLeft: `max(${options.minLeft}px, ${leftOffset}ch)`,\n          }}\n        >\n          <List\n            height={160}\n            itemCount={matches.length}\n            itemData={itemData}\n            itemSize={13}\n            ref={listRef}\n            width={200}\n          >\n            {MatchRow}\n          </List>\n        </div>\n      </div>\n    </AppContainerPortal>\n  );\n}\n\nfunction MatchRow({\n  data,\n  index,\n  style,\n}: {\n  data: ItemData;\n  index: number;\n  style: React.CSSProperties;\n}) {\n  const { matches, onMatchClick, selectedIndex } = data;\n  const match = matches[index];\n\n  return (\n    <Match\n      label={match}\n      isSelected={index === selectedIndex}\n      onClick={() => onMatchClick(match)}\n      style={style}\n    />\n  );\n}\n","import \"codemirror/mode/javascript/javascript\";\nimport { Editor, EditorChange } from \"codemirror\";\nimport React, { FC, useRef } from \"react\";\nimport { Controlled as CodeMirror } from \"react-codemirror2\";\n\nexport type ControlledCodeMirrorOptions = {\n  autofocus: boolean;\n};\nconst DEFAULT_OPTIONS = {\n  autofocus: false,\n};\n\n// CodeMirror does not refresh its event handlers once it's initialized,\n// making it difficult to work with using React functional components\n// whose function references change on each render cycle.\n\n// This wrapper works around that by passing in callbacks that reference\n// refs, so that CodeMirror always ends up using the latest callback.\n\nconst ControlledCodeMirror: FC<{\n  value: string;\n  onKeyPress: (e: KeyboardEvent, editor: Editor) => void;\n  setValue: (value: string) => void;\n  onSelection: (obj: any) => void;\n  onEditorMount: (editor: Editor) => void;\n  options?: ControlledCodeMirrorOptions;\n}> = ({ value, onKeyPress, setValue, onSelection, onEditorMount, options = DEFAULT_OPTIONS }) => {\n  const codemirrorOptions = {\n    autofocus: options.autofocus,\n    enableCodeFolding: false,\n    lineNumbers: false,\n    lineWrapping: true,\n    mode: {\n      name: \"javascript\",\n      globalVars: true,\n    },\n    theme: \"mozilla\",\n    styleActiveLine: false,\n    tabIndex: \"0\",\n    readOnly: false,\n    viewportMargin: Infinity,\n    disableSearchAddon: true,\n  } as const;\n\n  const onKeyPressRef = useRef(onKeyPress);\n  onKeyPressRef.current = onKeyPress;\n  const setValueRef = useRef(setValue);\n  setValueRef.current = setValue;\n  const onSelectionRef = useRef(onSelection);\n  onSelectionRef.current = onSelection;\n  const onEditorMountRef = useRef(onEditorMount);\n  onEditorMountRef.current = onEditorMount;\n\n  const _onKeyPress = (editor: Editor, event: any) => {\n    onKeyPressRef.current(event, editor);\n  };\n  const _onBeforeChange = (_: Editor, __: EditorChange, value: string) => {\n    setValueRef.current(value);\n  };\n  const _onSelection = (_: Editor, obj: any) => {\n    onSelectionRef.current(obj);\n  };\n  const _onEditorMount = (editor: Editor) => onEditorMountRef.current(editor);\n\n  return (\n    <CodeMirror\n      className=\"w-full\"\n      options={codemirrorOptions}\n      value={value}\n      editorDidMount={_onEditorMount}\n      onBeforeChange={_onBeforeChange}\n      onKeyDown={_onKeyPress}\n      onSelection={_onSelection}\n    />\n  );\n};\n\nexport default ControlledCodeMirror;\n","import { PauseId, Value } from \"@replayio/protocol\";\nimport { useMemo } from \"react\";\n\nimport { getSelectedFrameId } from \"devtools/client/debugger/src/selectors\";\nimport { ThreadFront } from \"protocol/thread\";\nimport { useAppSelector } from \"ui/setup/hooks\";\nimport { ObjectFetcher, getPropertiesForObject } from \"ui/utils/autocomplete\";\n\n// Use eager eval to get the properties of the last complete object in the expression.\n// TODO I'm not sure how this is different than the scopes / properties parsing\nexport async function getEvaluatedProperties(\n  expression: string,\n  pauseId: PauseId,\n  frameId: string | undefined,\n  fetchObject: ObjectFetcher\n): Promise<string[]> {\n  try {\n    const { returned, exception } = await ThreadFront.evaluateNew({\n      pauseId,\n      frameId,\n      text: expression,\n      pure: true,\n    });\n    if (returned?.object && !exception) {\n      const properties = await getPropertiesForObject(returned.object, fetchObject, 1);\n      return properties;\n    }\n  } catch (err: any) {\n    let msg = \"Error: Eager Evaluation failed\";\n    if (err.message) {\n      msg += ` - ${err.message}`;\n    }\n    console.error(msg);\n  }\n\n  return [];\n}\n\nasync function eagerEvaluateExpression(\n  expression: string,\n  pauseId: PauseId,\n  frameId?: string\n): Promise<Value | null> {\n  try {\n    const { returned, exception } = await ThreadFront.evaluateNew({\n      pauseId,\n      frameId,\n      text: expression,\n      pure: true,\n    });\n    if (returned && !exception) {\n      return returned;\n    }\n  } catch (err: any) {\n    let msg = \"Error: Eager Evaluation failed\";\n    if (err.message) {\n      msg += ` - ${err.message}`;\n    }\n    console.error(msg);\n  }\n\n  return null;\n}\n\nexport function useEagerEvaluateExpression() {\n  const selectedFrameId = useAppSelector(getSelectedFrameId);\n  const callback = useMemo(\n    // eslint-disable-next-line react/display-name\n    () => (expression: string) => {\n      if (!selectedFrameId) {\n        return null;\n      }\n      return eagerEvaluateExpression(expression, selectedFrameId.pauseId, selectedFrameId.frameId);\n    },\n    [selectedFrameId]\n  );\n\n  return callback;\n}\n","import uniq from \"lodash/uniq\";\nimport { useCallback, useContext, useEffect, useRef, useState } from \"react\";\n\nimport { getObjectWithPreviewHelper } from \"bvaughn-architecture-demo/src/suspense/ObjectPreviews\";\nimport {\n  PauseAndFrameId,\n  getPauseId,\n  getSelectedFrameId,\n} from \"devtools/client/debugger/src/reducers/pause\";\nimport { getEvaluatedProperties } from \"devtools/client/webconsole/utils/autocomplete-eager\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { getPreferredGeneratedSources } from \"ui/reducers/sources\";\nimport { useAppSelector } from \"ui/setup/hooks\";\nimport { getFramesAsync } from \"ui/suspense/frameCache\";\nimport { PickedScopes, getScopesAsync, pickScopes } from \"ui/suspense/scopeCache\";\nimport {\n  ObjectFetcher,\n  fuzzyFilter,\n  getAutocompleteMatches,\n  getLastExpression,\n  getPropertyExpression,\n  insertAutocompleteMatch,\n  normalizeString,\n} from \"ui/utils/autocomplete\";\n\n// turns an async getMatches function into a hook\nfunction useGetAsyncMatches(\n  expression: string,\n  getMatches: (expression: string) => Promise<string[] | null>\n): string[] {\n  const [matches, setMatches] = useState<string[]>([]);\n  const expressionRef = useRef(expression);\n  useEffect(() => {\n    expressionRef.current = expression;\n\n    async function updateMatches() {\n      setMatches([]);\n      const matches = await getMatches(expression);\n      if (matches && expressionRef.current === expression) {\n        setMatches(matches);\n      }\n    }\n\n    updateMatches();\n  }, [expression, getMatches]);\n\n  return matches;\n}\n\nasync function getScopeMatches(\n  expression: string,\n  frameScope: PickedScopes,\n  fetchObject: ObjectFetcher\n): Promise<string[] | null> {\n  if (!expression || !frameScope?.scopes.length) {\n    return [];\n  }\n  return await getAutocompleteMatches(expression, frameScope.scopes, fetchObject);\n}\n\nfunction useGetScopeMatches(expression: string) {\n  const pauseId = useAppSelector(getPauseId);\n  const preferredGeneratedSources = useAppSelector(getPreferredGeneratedSources);\n  const replayClient = useContext(ReplayClientContext);\n\n  const getScopeMatchesForFrameScope = useCallback(\n    async (expression: string): Promise<string[] | null> => {\n      if (!pauseId) {\n        return [];\n      }\n      const topFrame = (await getFramesAsync(pauseId))?.[0];\n      if (!topFrame) {\n        return [];\n      }\n      const frameScopes = pickScopes(\n        await getScopesAsync(pauseId, topFrame.frameId),\n        preferredGeneratedSources\n      );\n      if (!frameScopes) {\n        return [];\n      }\n      const fetchObject = (objectId: string) => {\n        return getObjectWithPreviewHelper(replayClient, pauseId, objectId);\n      };\n      return getScopeMatches(expression, frameScopes, fetchObject);\n    },\n    [pauseId, preferredGeneratedSources, replayClient]\n  );\n\n  return useGetAsyncMatches(expression, getScopeMatchesForFrameScope);\n}\n\nasync function getEvalMatches(\n  expression: string,\n  pauseAndFrameId: PauseAndFrameId | null,\n  fetchObject: ObjectFetcher\n): Promise<string[] | null> {\n  if (!pauseAndFrameId) {\n    return null;\n  }\n  const propertyExpression = getPropertyExpression(expression);\n  if (!propertyExpression) {\n    return null;\n  }\n  const evaluatedProperties = await getEvaluatedProperties(\n    propertyExpression.left,\n    pauseAndFrameId.pauseId,\n    pauseAndFrameId.frameId,\n    fetchObject\n  );\n  if (!evaluatedProperties) {\n    return null;\n  }\n  return fuzzyFilter(evaluatedProperties, normalizeString(propertyExpression.right));\n}\n\n// This tries to autocomplete the property of the current expression.\nfunction useGetEvalMatches(expression: string) {\n  const selectedFrameId = useAppSelector(getSelectedFrameId);\n  const replayClient = useContext(ReplayClientContext);\n\n  const getEvalMatchesForSelectedFrame = useCallback(\n    async (expression: string) => {\n      if (!selectedFrameId) {\n        return null;\n      }\n      const fetchObject = async (objectId: string) => {\n        return getObjectWithPreviewHelper(replayClient, selectedFrameId.pauseId, objectId);\n      };\n      return getEvalMatches(expression, selectedFrameId, fetchObject);\n    },\n    [selectedFrameId, replayClient]\n  );\n  return useGetAsyncMatches(expression, getEvalMatchesForSelectedFrame);\n}\n\nfunction useGetMatches(expression: string, isArgument: boolean) {\n  const actualExpression = isArgument ? getLastExpression(expression) : expression;\n  const scopeMatches = useGetScopeMatches(actualExpression);\n  const evalMatches = useGetEvalMatches(actualExpression);\n\n  return uniq([...scopeMatches, ...evalMatches]).sort();\n}\n\nfunction getShouldShowAutocomplete(\n  expression: string,\n  hideAutocomplete: boolean,\n  matches: string[]\n) {\n  const matchCount = matches.length;\n\n  // Bail if the only suggested autocomplete option has already been applied to the input.\n  if (matchCount === 1 && insertAutocompleteMatch(expression, matches[0]) === expression) {\n    return false;\n  }\n\n  return !hideAutocomplete && !!matchCount;\n}\n\nexport default function useAutocomplete(\n  expression: string,\n  onPreviewAvailable: (val: string | null) => void,\n  isArgument: boolean = false\n) {\n  const [isHidden, setIsHidden] = useState(true);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const matches = useGetMatches(expression, !!isArgument);\n\n  const moveAutocompleteCursor = (difference: number) => {\n    const matchesCount = matches.length;\n    const newIndex = (matchesCount + selectedIndex - difference) % matchesCount;\n    setSelectedIndex(newIndex);\n  };\n  const applySelectedMatch = () => {\n    const match = matches[selectedIndex];\n    return applyMatch(match);\n  };\n  const applyMatch = (match: string) => {\n    return insertAutocompleteMatch(expression, match, isArgument);\n  };\n\n  useEffect(() => {\n    // This is not optimal.\n    onPreviewAvailable(applySelectedMatch());\n  });\n\n  return {\n    autocompleteIndex: selectedIndex,\n    matches,\n    shouldShowAutocomplete: getShouldShowAutocomplete(expression, isHidden, matches),\n    applyMatch,\n    applySelectedMatch,\n    moveAutocompleteCursor,\n    resetAutocompleteIndex: () => setSelectedIndex(0),\n    setHideAutocomplete: setIsHidden,\n  };\n}\n","import { Editor } from \"codemirror\";\nimport React, { useRef } from \"react\";\n\nimport { getCursorIndex, getRemainingCompletedTextAfterCursor } from \"ui/utils/autocomplete\";\nimport { isTest } from \"ui/utils/environment\";\n\nimport AutocompleteMatches, { AutocompleteMatchesOptions } from \"./AutocompleteMatches\";\nimport ControlledCodeMirror, { ControlledCodeMirrorOptions } from \"./ControlledCodeMirror\";\nimport useAutocomplete from \"./useAutocomplete\";\n\nexport enum Keys {\n  BACKSPACE = \"Backspace\",\n  ENTER = \"Enter\",\n  ESCAPE = \"Escape\",\n  TAB = \"Tab\",\n  ARROW_DOWN = \"ArrowDown\",\n  ARROW_UP = \"ArrowUp\",\n  ARROW_RIGHT = \"ArrowRight\",\n  ARROW_LEFT = \"ArrowLeft\",\n}\n\nconst DISMISS_KEYS = [\n  Keys.BACKSPACE,\n  Keys.ENTER,\n  Keys.TAB,\n  Keys.ESCAPE,\n  Keys.ARROW_RIGHT,\n  Keys.ARROW_LEFT,\n];\n\nconst DEFAULT_OPTIONS = {\n  minLeft: 0,\n  autofocus: false,\n  isArgument: false,\n};\n\ntype EditorWithAutocompleteOptions = AutocompleteMatchesOptions | ControlledCodeMirrorOptions;\n\nexport function EditorWithAutocomplete({\n  onEditorMount,\n  onRegularKeyPress,\n  onPreviewAvailable,\n  setValue,\n  opts,\n  value,\n  disableAutocomplete,\n}: {\n  onEditorMount: (editor: Editor, showAutocomplete?: (show: boolean) => void) => void;\n  onRegularKeyPress: (e: KeyboardEvent, editor: Editor) => void;\n  onPreviewAvailable: (value: string | null) => void;\n  setValue: (newValue: string) => void;\n  // For minor adjustments to the autocomplete menu position.\n  opts?: EditorWithAutocompleteOptions;\n  value: string;\n  disableAutocomplete?: boolean;\n}) {\n  const options = { ...DEFAULT_OPTIONS, ...opts };\n  const containerNode = useRef<HTMLDivElement | null>(null);\n  const {\n    autocompleteIndex,\n    matches,\n    shouldShowAutocomplete,\n    applyMatch,\n    applySelectedMatch,\n    moveAutocompleteCursor,\n    resetAutocompleteIndex,\n    setHideAutocomplete,\n  } = useAutocomplete(value, onPreviewAvailable, options.isArgument);\n\n  const autocomplete = (match: string) => {\n    setValue(applyMatch(match));\n  };\n  const onSelection = (obj?: any) => {\n    const cursorMoved = obj?.origin && [\"*mouse\", \"+move\"].includes(obj.origin);\n\n    if (cursorMoved) {\n      setHideAutocomplete(true);\n    }\n  };\n  // for use in e2e tests\n  const showAutocomplete = isTest()\n    ? (show: boolean) => {\n        setHideAutocomplete(!show);\n        if (show) {\n          resetAutocompleteIndex();\n        }\n      }\n    : undefined;\n  const onAutocompleteKeyPress = (e: KeyboardEvent) => {\n    if ((e.key === Keys.ENTER && !e.shiftKey) || e.key === Keys.TAB || e.key === Keys.ARROW_RIGHT) {\n      e.preventDefault();\n      setValue(applySelectedMatch());\n    } else if (e.key === Keys.ARROW_DOWN) {\n      e.preventDefault();\n      moveAutocompleteCursor(-1);\n    } else if (e.key === Keys.ARROW_UP) {\n      e.preventDefault();\n      moveAutocompleteCursor(1);\n    }\n\n    if ((DISMISS_KEYS as string[]).includes(e.key)) {\n      setHideAutocomplete(true);\n    }\n  };\n  const onKeyPress = (e: KeyboardEvent, editor: Editor) => {\n    if (shouldShowAutocomplete) {\n      onAutocompleteKeyPress(e);\n    } else {\n      onRegularKeyPress(e, editor);\n    }\n\n    if (\n      ![\n        Keys.ARROW_DOWN,\n        Keys.ARROW_UP,\n        Keys.ESCAPE,\n        Keys.ENTER,\n        Keys.TAB,\n        Keys.ARROW_RIGHT,\n      ].includes(e.key as Keys)\n    ) {\n      setHideAutocomplete(false);\n      resetAutocompleteIndex();\n    }\n  };\n\n  if (disableAutocomplete) {\n    return (\n      <div className=\"relative flex w-full items-center\">\n        <ControlledCodeMirror\n          onKeyPress={onKeyPress}\n          value={value}\n          onSelection={onSelection}\n          setValue={setValue}\n          onEditorMount={(editor: Editor) => onEditorMount(editor, showAutocomplete)}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"relative flex w-full items-center\" ref={containerNode}>\n      <ControlledCodeMirror\n        onKeyPress={onKeyPress}\n        value={value}\n        onSelection={onSelection}\n        setValue={setValue}\n        onEditorMount={(editor: Editor) => onEditorMount(editor, showAutocomplete)}\n        options={{ autofocus: options.autofocus }}\n      />\n      {shouldShowAutocomplete ? (\n        <div className=\"absolute ml-1 opacity-50\" style={{ left: `${value.length}ch` }}>\n          {getRemainingCompletedTextAfterCursor(value, matches[autocompleteIndex])}\n        </div>\n      ) : null}\n      {shouldShowAutocomplete && (\n        <AutocompleteMatches\n          options={options}\n          containerRect={containerNode.current!.getBoundingClientRect()}\n          leftOffset={getCursorIndex(value, options.isArgument)}\n          matches={matches}\n          selectedIndex={autocompleteIndex}\n          onMatchClick={autocomplete}\n        />\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport {\n  EditorWithAutocomplete,\n  Keys,\n} from \"ui/components/shared/CodeEditor/EditorWithAutocomplete\";\n\nexport function PanelInput({\n  autofocus,\n  value,\n  onChange,\n  onEnter,\n  onEscape,\n}: {\n  autofocus: boolean;\n  value: string;\n  onChange: (value: string) => void;\n  onEnter: () => void;\n  onEscape: () => void;\n}) {\n  const onKeyPress = (e: KeyboardEvent) => {\n    if (e.key === Keys.ENTER && !e.shiftKey) {\n      e.preventDefault();\n      onEnter();\n    } else if (e.key === Keys.ESCAPE) {\n      onEscape();\n    }\n  };\n\n  // Adding a minimum left value here to keep the autocomplete menu from colliding with any of the\n  // gutter popups that also rely on createPortal, e.g. LineNumberTooltip, ToggleWidgetButton\n  const options = { minLeft: 24, autofocus, isArgument: true };\n\n  return (\n    <div className=\"jsterm-input-container w-full\">\n      <EditorWithAutocomplete\n        onEditorMount={() => {}}\n        onPreviewAvailable={() => {}}\n        value={value}\n        setValue={onChange}\n        onRegularKeyPress={onKeyPress}\n        opts={options}\n      />\n    </div>\n  );\n}\n","import classnames from \"classnames\";\nimport { useContext, useState } from \"react\";\n\nimport { PointsContext } from \"bvaughn-architecture-demo/src/contexts/PointsContext\";\nimport { parser } from \"devtools/client/debugger/src/utils/bootstrap\";\nimport { Point } from \"shared/client/types\";\nimport { trackEvent } from \"ui/utils/telemetry\";\n\nimport { PanelInput } from \"./PanelInput\";\n\nexport default function PanelEditor({\n  inputToFocus,\n  point,\n  showCondition,\n  toggleEditingOff,\n}: {\n  inputToFocus: \"condition\" | \"content\";\n  point: Point;\n  showCondition: boolean;\n  toggleEditingOff: () => void;\n}) {\n  const [content, setContent] = useState(point.content);\n  const [condition, setCondition] = useState(point.condition || \"\");\n  const [logSyntaxError, setLogSyntaxError] = useState<string | null>(null);\n  const [conditionSyntaxError, setConditionSyntaxError] = useState<string | null>(null);\n\n  const { editPoint } = useContext(PointsContext);\n\n  const hasError = logSyntaxError !== null || conditionSyntaxError !== null;\n\n  const savePoint = () => {\n    if (hasError) {\n      return;\n    }\n\n    if (!showCondition && condition !== \"\") {\n      setCondition(\"\");\n    }\n\n    editPoint(point.id, {\n      condition: showCondition ? condition : null,\n      content,\n    });\n\n    toggleEditingOff();\n  };\n\n  const onContentChange = async (value: string) => {\n    trackEvent(\"breakpoint.set_log\");\n    setContent(value);\n    const error = await parser.hasSyntaxError(value);\n    setLogSyntaxError(error || null);\n  };\n\n  const onConditionChange = async (value: string) => {\n    setCondition(value);\n    trackEvent(\"breakpoint.set_condition\");\n    if (value === \"\") {\n      setConditionSyntaxError(null);\n    } else {\n      const error = await parser.hasSyntaxError(value);\n      setConditionSyntaxError(error || null);\n    }\n  };\n\n  return (\n    <div\n      className={classnames(\"panel-editor flex flex-row items-center gap-1 rounded-sm\", {\n        conditional: showCondition,\n      })}\n    >\n      <form className=\"relative flex flex-grow flex-col space-y-0.5\">\n        {showCondition ? (\n          <div className=\"form-row\">\n            <div className=\"mr-1 w-6 flex-shrink-0\">if</div>\n            <PanelInput\n              autofocus={inputToFocus == \"condition\"}\n              value={condition}\n              onChange={(value: string) => onConditionChange(value)}\n              onEnter={savePoint}\n              onEscape={toggleEditingOff}\n            />\n          </div>\n        ) : null}\n        <div className=\"form-row\">\n          {showCondition ? <div className=\"mr-1 w-6 flex-shrink-0\">log</div> : null}\n          <PanelInput\n            autofocus={inputToFocus == \"content\"}\n            value={content}\n            onChange={(value: string) => onContentChange(value)}\n            onEnter={savePoint}\n            onEscape={toggleEditingOff}\n          />\n        </div>\n      </form>\n      <button\n        type=\"button\"\n        disabled={hasError}\n        onClick={savePoint}\n        title={hasError ? \"Syntax error\" : \"Save expression\"}\n        className={classnames(\n          \"inline-flex flex-shrink-0 items-center rounded-full border border-transparent p-1 px-2 font-sans text-xs font-medium leading-4 text-white shadow-sm outline-none focus-visible:ring-2 focus-visible:ring-primaryAccent focus-visible:ring-offset-2\",\n          hasError ? \"cursor-default bg-gray-400\" : \"bg-primaryAccent hover:bg-primaryAccentHover\"\n        )}\n      >\n        Save\n      </button>\n    </div>\n  );\n}\n","import iconSprite from \"./sprite.svg\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport function Icon({\n  name,\n  size = 20,\n  className\n}) {\n  return /*#__PURE__*/_jsx(\"svg\", {\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\",\n    className: className,\n    children: /*#__PURE__*/_jsx(\"use\", {\n      href: `${iconSprite}#${name}`\n    })\n  });\n}","import classNames from \"classnames\";\nimport { forwardRef, useRef, useState } from \"react\";\nimport mergeRefs from \"react-merge-refs\";\nimport { Transition } from \"react-transition-group\";\nimport { Icon } from \"design/Icon\";\nimport styles from \"./AddCommentButton.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\n/**\n * Initiate adding a comment from a button.\n */\nexport const AddCommentButton = /*#__PURE__*/forwardRef(function AddCommentButton({\n  type,\n  isPausedOnHit = false,\n  onClick,\n  className\n}, ref) {\n  const localRef = useRef(null);\n  const mergedRefs = mergeRefs([localRef, ref]);\n  const {\n    0: isHovered,\n    1: setIsHovered\n  } = useState(false);\n  const hoverRef = useRef(null);\n\n  const maybeHover = () => {\n    hoverRef.current = setTimeout(() => setIsHovered(true), 300);\n  };\n\n  const clearHover = () => {\n    hoverRef.current && clearTimeout(hoverRef.current);\n    setIsHovered(false);\n  };\n\n  const buttonClassnames = classNames(\"font-sans font-medium outline-none focus-visible:ring-2 focus-visible:ring-primaryAccent focus-visible:ring-offset-2\", styles.AddCommentButton, {\n    [styles.isOpened]: isHovered,\n    [styles.isPausedOnHit]: isPausedOnHit\n  }, className);\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: styles.Root,\n    children: /*#__PURE__*/_jsxs(\"button\", {\n      ref: mergedRefs,\n      type: type,\n      \"aria-label\": \"Add comment\",\n      onClick: onClick,\n      onMouseEnter: maybeHover,\n      onMouseLeave: clearHover,\n      className: buttonClassnames,\n      children: [/*#__PURE__*/_jsx(Icon, {\n        name: \"comment-plus\",\n        className: styles.Icon\n      }), /*#__PURE__*/_jsx(TextFade, {\n        visible: isHovered,\n        children: \"Add Comment\"\n      })]\n    })\n  });\n}); // Duration must match `transition` rule in module.css file\n\nconst duration = 100;\nconst states = {\n  entering: {\n    opacity: 0,\n    transform: \"scale(0.98)\"\n  },\n  entered: {\n    opacity: 1,\n    transform: \"scale(1)\"\n  },\n  exiting: {\n    opacity: 0,\n    transform: \"scale(0.98)\"\n  },\n  exited: {\n    display: \"none\",\n    opacity: 0,\n    transform: \"scale(0.98)\"\n  },\n  unmounted: {\n    display: \"none\",\n    opacity: 0,\n    transform: \"scale(0.98)\"\n  }\n};\n\nconst TextFade = ({\n  children,\n  visible\n}) => /*#__PURE__*/_jsx(Transition, {\n  in: visible,\n  timeout: duration,\n  children: state => /*#__PURE__*/_jsx(\"span\", {\n    className: styles.TextFade,\n    style: states[state],\n    children: children\n  })\n});","import React from \"react\";\nimport ReactPopup from \"reactjs-popup\";\n\ninterface PopupProps {\n  trigger?: JSX.Element | ((isOpen: boolean) => JSX.Element);\n  children: React.ReactNode;\n}\n\nexport default function Popup({ trigger, children }: PopupProps) {\n  return (\n    <ReactPopup\n      trigger={<>{trigger}</>}\n      on=\"hover\"\n      position=\"right center\"\n      mouseEnterDelay={200}\n      mouseLeaveDelay={200}\n    >\n      {children}\n    </ReactPopup>\n  );\n}\n","import classNames from \"classnames\";\nimport escapeHtml from \"escape-html\";\nimport React from \"react\";\n\nimport { MAX_POINTS_FOR_FULL_ANALYSIS } from \"protocol/thread/analysis\";\nimport MaterialIcon from \"ui/components/shared/MaterialIcon\";\nimport hooks from \"ui/hooks\";\n\nimport Popup from \"./Popup\";\n\nconst { getCodeMirror } = require(\"devtools/client/debugger/src/utils/editor/create-editor\");\n\nexport interface SummaryExpressionProps {\n  value: string;\n  isEditable: boolean;\n}\n\nfunction getSyntaxHighlightedMarkup(string: string) {\n  let markup = \"\";\n\n  getCodeMirror().runMode(string, \"javascript\", (text: string, className: string | null) => {\n    const openingTag = className ? `<span class=\"cm-${className}\">` : \"<span>\";\n    markup += `${openingTag}${escapeHtml(text)}</span>`;\n  });\n\n  return markup;\n}\n\nfunction Expression({ value }: { value: string }) {\n  return (\n    <div className={classNames({ expression: true })}>\n      <div\n        className=\"cm-s-mozilla overflow-hidden whitespace-pre\"\n        dangerouslySetInnerHTML={{ __html: getSyntaxHighlightedMarkup(value || \"\") }}\n      />\n    </div>\n  );\n}\n\nexport function SummaryExpression({ isEditable, value }: SummaryExpressionProps & {}) {\n  const { isTeamDeveloper } = hooks.useIsTeamDeveloper();\n\n  return isEditable ? (\n    <div className=\"group flex flex-1 space-x-1 pr-1\" data-test-name=\"LogpointContentSummary\">\n      <Expression value={value} />\n      <MaterialIcon className=\"pencil\" iconSize=\"xs\">\n        edit\n      </MaterialIcon>\n    </div>\n  ) : (\n    <div className=\"rounded-sm px-2\">\n      <Popup trigger={<Expression value={value} />}>\n        {isTeamDeveloper ? (\n          <>\n            This log cannot be edited because <br />\n            it was hit {MAX_POINTS_FOR_FULL_ANALYSIS}+ times\n          </>\n        ) : (\n          \"Editing logpoints is available for Developers in the Team plan\"\n        )}\n      </Popup>\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport default function SummaryRow({\n  children,\n  label,\n  onClick,\n}: {\n  children: React.ReactElement;\n  label: string | null;\n  onClick: () => void;\n}) {\n  return (\n    <div onClick={onClick} className=\"statement flex flex-grow\">\n      {label ? <div className=\"w-6\">{label}</div> : null}\n      {children}\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport { SummaryExpression, SummaryExpressionProps } from \"./SummaryExpression\";\nimport SummaryRow from \"./SummaryRow\";\n\ntype ConditionProps = SummaryExpressionProps & {\n  onClick: () => void;\n};\n\nexport default function Condition({ onClick, ...rest }: ConditionProps) {\n  return (\n    <SummaryRow onClick={onClick} label={\"if\"}>\n      <SummaryExpression {...rest} />\n    </SummaryRow>\n  );\n}\n","import React from \"react\";\n\nimport { SummaryExpression, SummaryExpressionProps } from \"./SummaryExpression\";\nimport SummaryRow from \"./SummaryRow\";\n\ntype LogProps = SummaryExpressionProps & { hasCondition: boolean; onClick: () => void };\n\nexport default function Log({ hasCondition, onClick, ...rest }: LogProps) {\n  return (\n    <SummaryRow onClick={onClick} label={hasCondition ? \"log\" : null}>\n      <SummaryExpression {...rest} />\n    </SummaryRow>\n  );\n}\n","import \"reactjs-popup/dist/index.css\";\nimport { TimeStampedPoint } from \"@replayio/protocol\";\nimport classNames from \"classnames\";\nimport React, { Dispatch, SetStateAction } from \"react\";\n\nimport { AddCommentButton } from \"design\";\nimport { MAX_POINTS_FOR_FULL_ANALYSIS } from \"protocol/thread/analysis\";\nimport { createFloatingCodeComment, createFrameComment } from \"ui/actions/comments\";\nimport { enterFocusMode } from \"ui/actions/timeline\";\nimport MaterialIcon from \"ui/components/shared/MaterialIcon\";\nimport hooks from \"ui/hooks\";\nimport { useGetRecordingId } from \"ui/hooks/recordings\";\nimport { useAppDispatch } from \"ui/setup/hooks\";\nimport { trackEvent } from \"ui/utils/telemetry\";\nimport useAuth0 from \"ui/utils/useAuth0\";\n\nimport Condition from \"./Condition\";\nimport Log from \"./Log\";\nimport Popup from \"./Popup\";\n\nexport type Input = \"condition\" | \"content\";\n\ntype PanelSummaryProps = {\n  breakpoint: any;\n  executionPoint: any;\n  hitPoints: TimeStampedPoint[] | null;\n  isHot: boolean;\n  pausedOnHit: boolean;\n  setInputToFocus: Dispatch<SetStateAction<Input>>;\n  toggleEditingOn: () => void;\n};\n\nexport default function PanelSummary({\n  breakpoint,\n  hitPoints,\n  isHot,\n  pausedOnHit,\n  setInputToFocus,\n  toggleEditingOn,\n}: PanelSummaryProps) {\n  const { isTeamDeveloper } = hooks.useIsTeamDeveloper();\n  const recordingId = useGetRecordingId();\n  const conditionValue = breakpoint.condition;\n  const logValue = breakpoint.content;\n\n  const dispatch = useAppDispatch();\n  const { isAuthenticated } = useAuth0();\n\n  const isLoaded = !isHot;\n  const isEditable = isLoaded && isTeamDeveloper;\n\n  const focusInput = (input: Input) => {\n    if (isEditable) {\n      trackEvent(\"breakpoint.start_edit\", {\n        input,\n        hitsCount: hitPoints?.length || null,\n      });\n      toggleEditingOn();\n      setInputToFocus(input);\n    }\n  };\n\n  const addComment = (e: React.MouseEvent) => {\n    e.stopPropagation();\n\n    // Un-authenticated users can't comment on Replays.\n    if (!isAuthenticated) {\n      return null;\n    }\n\n    trackEvent(\"breakpoint.add_comment\");\n\n    if (pausedOnHit) {\n      dispatch(createFrameComment(null, recordingId, breakpoint));\n    } else {\n      dispatch(createFloatingCodeComment(recordingId, breakpoint));\n    }\n  };\n\n  if (isHot) {\n    trackEvent(\"breakpoint.too_many_points\");\n    return (\n      <div className=\"summary flex items-center rounded-t bg-errorBgcolor text-errorColor\">\n        <Popup\n          trigger={\n            <div className=\"flex items-center space-x-2 overflow-hidden pl-2\">\n              <MaterialIcon className=\"text-xl\">error</MaterialIcon>\n              <span\n                className=\"cursor-pointer overflow-hidden overflow-ellipsis whitespace-pre\"\n                onClick={() => dispatch(enterFocusMode())}\n              >\n                Use Focus Mode to reduce the number of hits.\n              </span>\n            </div>\n          }\n        >\n          This log cannot be edited because <br />\n          it was hit {MAX_POINTS_FOR_FULL_ANALYSIS}+ times\n        </Popup>\n\n        {isAuthenticated && <AddCommentButton onClick={addComment} isPausedOnHit={pausedOnHit} />}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={classNames(\"summary flex items-center gap-2 text-gray-500\", { enabled: isLoaded })}\n    >\n      <div className=\"statements-container flex flex-grow flex-col\">\n        {conditionValue && (\n          <Condition\n            isEditable={isEditable}\n            onClick={() => focusInput(\"condition\")}\n            value={conditionValue}\n          />\n        )}\n        <Log\n          hasCondition={!!conditionValue}\n          isEditable={isEditable}\n          onClick={() => focusInput(\"content\")}\n          value={logValue}\n        />\n        {!isTeamDeveloper ? (\n          <Popup\n            trigger={<span className=\"material-icons cursor-default text-gray-400\">lock</span>}\n          >\n            Editing logpoints is available for Developers in the Team plan\n          </Popup>\n        ) : null}\n      </div>\n      {isAuthenticated && <AddCommentButton onClick={addComment} isPausedOnHit={pausedOnHit} />}\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { prefs } from \"ui/utils/prefs\";\n\ninterface WidgetProps {\n  location: any;\n  editor: any;\n  children: JSX.Element;\n  insertAt: number;\n}\n\nexport default function Widget({ location, children, editor, insertAt }: WidgetProps) {\n  const [node, setNode] = useState<HTMLDivElement | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (loading) {\n      const _node = document.createElement(\"div\");\n      setNode(_node);\n      setLoading(false);\n      return;\n    }\n    const lineIndex = location.line != null ? location.line - 1 : 0;\n    const _widget = editor.codeMirror.addLineWidget(lineIndex, node, {\n      above: prefs.showPanelAbove,\n      insertAt,\n    });\n\n    // We are clearing the widget here because not\n    // doing so causes breakpoints to show up on the\n    // wrong line number when clicking in the gutter.\n    return () => _widget.clear();\n  }, [loading, node, editor.codeMirror, insertAt, location.line]);\n\n  if (!node) {\n    return null;\n  }\n\n  return ReactDOM.createPortal(children, node);\n}\n","import classnames from \"classnames\";\nimport React, { Suspense, useContext, useDeferredValue, useEffect, useMemo, useState } from \"react\";\nimport { ConnectedProps, connect } from \"react-redux\";\n\nimport { getHitPointsForLocationSuspense } from \"bvaughn-architecture-demo/src/suspense/PointsCache\";\nimport BreakpointNavigation from \"devtools/client/debugger/src/components/SecondaryPanes/Breakpoints/BreakpointNavigation\";\nimport { getExecutionPoint } from \"devtools/client/debugger/src/reducers/pause\";\nimport { inBreakpointPanel } from \"devtools/client/debugger/src/utils/editor\";\nimport type { SourceEditor } from \"devtools/client/debugger/src/utils/editor/source-editor\";\nimport { MAX_POINTS_FOR_FULL_ANALYSIS } from \"protocol/thread/analysis\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { Point } from \"shared/client/types\";\nimport { actions } from \"ui/actions\";\nimport PrefixBadgeButton from \"ui/components/PrefixBadge\";\nimport hooks from \"ui/hooks\";\nimport { Nag } from \"ui/hooks/users\";\nimport { selectors } from \"ui/reducers\";\nimport { getFocusRegion } from \"ui/reducers/timeline\";\nimport type { UIState } from \"ui/state\";\n\nimport FirstEditNag from \"./FirstEditNag\";\nimport PanelEditor from \"./PanelEditor\";\nimport PanelSummary from \"./PanelSummary\";\nimport Widget from \"./Widget\";\n\nconst gutterOffset = 37;\n\nfunction getPanelWidth({ editor }: SourceEditor) {\n  return editor.getScrollInfo().clientWidth - gutterOffset;\n}\n\nconst connector = connect(\n  (state: UIState) => ({\n    currentTime: selectors.getCurrentTime(state),\n    executionPoint: getExecutionPoint(state),\n    focusRegion: getFocusRegion(state),\n  }),\n  {\n    setHoveredItem: actions.setHoveredItem,\n    clearHoveredItem: actions.clearHoveredItem,\n  }\n);\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\ntype ExternalProps = {\n  breakpoint: Point;\n  editor: SourceEditor;\n  insertAt: number;\n};\n\ntype PanelProps = PropsFromRedux & ExternalProps;\n\nfunction Panel({\n  breakpoint,\n  clearHoveredItem,\n  currentTime,\n  editor,\n  executionPoint,\n  focusRegion,\n  insertAt,\n  setHoveredItem,\n}: PanelProps) {\n  const [editing, setEditing] = useState(false);\n  const [showCondition, setShowCondition] = useState(!!breakpoint.condition);\n  const [inputToFocus, setInputToFocus] = useState<\"condition\" | \"content\">(\"content\");\n  const dismissNag = hooks.useDismissNag();\n\n  // WARNING\n  // React components should not suspend during a synchronous update.\n  // Breakpoint state is in Redux and might get updated at synchronous/default priority.\n  // To avoid unintentionally suspending in result to such an update, we use a deferred value.\n  // Deferred values automatically lag slightly behind synchronous updates.\n  const replayClient = useContext(ReplayClientContext);\n  const breakpointForSuspense = useDeferredValue(breakpoint);\n  const focusRegionForSuspense = useDeferredValue(focusRegion);\n  const [hitPoints, hitPointStatus] =\n    breakpointForSuspense != null\n      ? getHitPointsForLocationSuspense(\n          replayClient,\n          breakpointForSuspense.location,\n          breakpointForSuspense.condition,\n          focusRegionForSuspense\n        )\n      : [null, null];\n\n  // If we were fully using concurrent APIs, updates to something like focus range or breakpoint would be done in a transition,\n  // which would expose an \"is pending\" flag that we could use to show e.g. \"Loading...\" while we're updating breakpoints.\n  // In this case, since we're using the deferred API for this, we have to calculate the \"is pending\" flag ourselves.\n  const isPending = focusRegion !== focusRegionForSuspense || breakpoint !== breakpointForSuspense;\n\n  // HACK\n  // The TimeStampedPoints within the focus region are always at least as large as (often larger than) the user-defined time range.\n  // Because of this, hit points may be returned that fall outside of the user's selection.\n  // We should filter these out before passing them to the BreakpointNavigation component.\n  const filteredHitPoints = useMemo(() => {\n    if (focusRegionForSuspense == null) {\n      return hitPoints;\n    } else {\n      return hitPoints\n        ? hitPoints.filter(hitPoint => {\n            return (\n              hitPoint.time >= focusRegionForSuspense.beginTime &&\n              hitPoint.time <= focusRegionForSuspense.endTime\n            );\n          })\n        : null;\n    }\n  }, [hitPoints, focusRegionForSuspense]);\n\n  const pausedOnHit = !!hitPoints?.some(\n    ({ point, time }) => point == executionPoint && time == currentTime\n  );\n\n  const isHot =\n    hitPointStatus === \"too-many-points-to-find\" ||\n    (hitPoints?.length || 0) > MAX_POINTS_FOR_FULL_ANALYSIS;\n\n  useEffect(() => {\n    dismissNag(Nag.FIRST_BREAKPOINT_ADD);\n  }, [dismissNag]);\n\n  const toggleEditingOn = () => {\n    dismissNag(Nag.FIRST_BREAKPOINT_EDIT);\n    setEditing(true);\n  };\n\n  const toggleEditingOff = () => {\n    dismissNag(Nag.FIRST_BREAKPOINT_SAVE);\n    setEditing(false);\n  };\n\n  const onMouseEnter = () => {\n    const hoveredItem = {\n      location: breakpoint.location,\n      target: \"widget\",\n    };\n\n    // @ts-expect-error hovered item mismatch\n    setHoveredItem(hoveredItem);\n  };\n\n  const onMouseLeave = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (!inBreakpointPanel(e)) {\n      clearHoveredItem();\n    }\n  };\n\n  return (\n    <Widget location={breakpoint.location} editor={editor} insertAt={insertAt}>\n      <div\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        style={{\n          position: \"sticky\",\n          left: \"var(--codemirror-gutter-width)\",\n          maxWidth: \"var(--print-statement-max-width)\",\n        }}\n      >\n        <FirstEditNag editing={editing} />\n        <div className={classnames(\"breakpoint-panel\", { editing })}>\n          <div className=\"flex items-center space-x-0.5 pt-2 pl-1 pr-4\">\n            <PrefixBadgeButton point={breakpoint} />\n            <div className=\"min-w-0 flex-1\">\n              {editing ? (\n                <PanelEditor\n                  point={breakpoint}\n                  toggleEditingOff={toggleEditingOff}\n                  inputToFocus={inputToFocus}\n                  showCondition={showCondition}\n                />\n              ) : (\n                <PanelSummary\n                  breakpoint={breakpoint}\n                  executionPoint={executionPoint}\n                  hitPoints={filteredHitPoints}\n                  isHot={isHot}\n                  pausedOnHit={pausedOnHit}\n                  setInputToFocus={setInputToFocus}\n                  toggleEditingOn={toggleEditingOn}\n                />\n              )}\n            </div>\n          </div>\n          <BreakpointNavigation\n            key={breakpoint?.id}\n            breakpoint={breakpoint}\n            editing={editing}\n            hitPoints={filteredHitPoints}\n            hitPointStatus={hitPointStatus}\n            isTransitionPending={isPending}\n            showCondition={showCondition}\n            setShowCondition={setShowCondition}\n          />\n        </div>\n      </div>\n    </Widget>\n  );\n}\n\nconst ConnectedPanel = connector(Panel);\n\nexport default function ToggleWidgetButtonSuspenseWrapper(props: ExternalProps) {\n  return (\n    <Suspense fallback={null}>\n      <ConnectedPanel {...props} />\n    </Suspense>\n  );\n}\n","import classnames from \"classnames\";\nimport { useContext, useLayoutEffect } from \"react\";\n\nimport { PointsContext } from \"bvaughn-architecture-demo/src/contexts/PointsContext\";\nimport { getDocument } from \"devtools/client/debugger/src/utils/editor/source-documents\";\nimport SourceEditor from \"devtools/client/debugger/src/utils/editor/source-editor\";\nimport { Point } from \"shared/client/types\";\nimport { features } from \"ui/utils/prefs\";\n\nimport Panel from \"./Breakpoints/Panel/Panel\";\n\nconst { columnBreakpoints } = features;\n\nconst pointButton = document.createElement(\"button\");\npointButton.innerHTML =\n  '<svg viewBox=\"0 0 11 13\" width=\"11\" height=\"13\"><path d=\"M5.07.5H1.5c-.54 0-1 .46-1 1v10c0 .54.46 1 1 1h3.57c.58 0 1.15-.26 1.53-.7l3.7-5.3-3.7-5.3C6.22.76 5.65.5 5.07.5z\"/></svg>';\n\nexport default function ColumnBreakpoint({\n  editor,\n  insertAt,\n  point,\n}: {\n  editor: SourceEditor;\n  insertAt: number;\n  point: Point;\n}) {\n  const { deletePoints, editPoint } = useContext(PointsContext);\n\n  useLayoutEffect(() => {\n    if (!columnBreakpoints) {\n      return;\n    }\n\n    const doc = getDocument(point.location.sourceId);\n    if (!doc) {\n      return;\n    }\n\n    // TODO We should revisit this behavior; it's not clear what the user is asking for here IMO.\n    let title;\n    if (point.shouldLog) {\n      title = \"Remove point\";\n    } else {\n      title = \"Enabling logging\";\n    }\n\n    const onClick = (event: MouseEvent) => {\n      event.stopPropagation();\n      event.preventDefault();\n\n      // TODO We should revisit this behavior; it's not clear what the user is asking for here IMO.\n      if (point.shouldLog) {\n        deletePoints(point.id);\n      } else {\n        editPoint(point.id, {\n          shouldLog: true,\n        });\n      }\n    };\n\n    const onContextMenu = (event: MouseEvent) => {\n      event.preventDefault();\n      event.stopPropagation();\n    };\n\n    const widget = makeBookmark({\n      isActive: true,\n      onClick,\n      onContextMenu,\n      title,\n    });\n\n    const bookmark = doc.setBookmark(\n      { line: point.location.line, ch: point.location.column },\n      { widget }\n    );\n\n    return () => {\n      bookmark.clear();\n    };\n  }, [deletePoints, editPoint, point]);\n\n  // Only render the log point panel if we have a logging-enabled Point at this column.\n  // Otherwise this component just renders a clickable \"bookmark\" in Code Mirror.\n  if (!point.shouldLog) {\n    return null;\n  }\n\n  return <Panel breakpoint={point} editor={editor} insertAt={insertAt} />;\n}\n\nfunction makeBookmark({\n  isActive,\n  onClick,\n  onContextMenu,\n  title,\n}: {\n  isActive: boolean;\n  onClick: (e: any) => void;\n  onContextMenu: (e: any) => void;\n  title: string;\n}) {\n  const bp = pointButton.cloneNode(true) as HTMLButtonElement;\n  bp.className = classnames(\"column-breakpoint\", {\n    active: isActive,\n  });\n  bp.setAttribute(\"title\", title);\n  bp.addEventListener(\"click\", onClick);\n  bp.addEventListener(\"contextmenu\", onContextMenu);\n\n  return bp;\n}\n","import { SameLineSourceLocations } from \"@replayio/protocol\";\nimport { useContext, useEffect, useMemo } from \"react\";\n\nimport { PointsContext } from \"bvaughn-architecture-demo/src/contexts/PointsContext\";\nimport { SourcesContext } from \"bvaughn-architecture-demo/src/contexts/SourcesContext\";\nimport { getBreakpointPositionsSuspense } from \"bvaughn-architecture-demo/src/suspense/SourcesCache\";\nimport type { SourceEditor } from \"devtools/client/debugger/src/utils/editor/source-editor\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { Point } from \"shared/client/types\";\nimport { useStringPref } from \"ui/hooks/settings\";\n\nimport ColumnBreakpoint from \"./ColumnBreakpoint\";\n\nexport default function ColumnBreakpoints({ editor }: { editor: SourceEditor }) {\n  const { focusedSourceId, visibleLines } = useContext(SourcesContext);\n\n  const { value: hitCountsMode } = useStringPref(\"hitCounts\");\n\n  useEffect(() => {\n    const updateWidth = () => {\n      const editorElement = editor.editor.getWrapperElement();\n      const gutter = editor.editor.getGutterElement();\n\n      const gutterWidth = gutter.getBoundingClientRect().width;\n      const scrollWidth = editorElement.getBoundingClientRect().width;\n\n      // Magic formula to determine scrollbar width: https://stackoverflow.com/a/60008044/62937\n      let scrollbarWidth = window.innerWidth - document.body.clientWidth;\n\n      // Fill the _visible_ width of the editor, minus scrollbar, minus a small bit of padding\n      const newWidth = scrollWidth - gutterWidth - scrollbarWidth - 10;\n\n      let root = document.documentElement;\n      root.style.setProperty(\"--print-statement-max-width\", newWidth + \"px\");\n      root.style.setProperty(\"--codemirror-gutter-width\", gutterWidth + \"px\");\n    };\n\n    editor.editor.on(\"refresh\", updateWidth);\n\n    updateWidth();\n\n    return () => {\n      editor.editor.off(\"refresh\", updateWidth);\n    };\n  }, [editor, hitCountsMode]);\n\n  const { points } = useContext(PointsContext);\n  const pointsByLine = useMemo(() => {\n    const map = points.reduce((map: Map<number, Point[]>, point) => {\n      if (!point.shouldLog) {\n        return map;\n      }\n\n      const lineNumber = point.location.line;\n\n      if (visibleLines !== null) {\n        if (lineNumber < visibleLines.start.line || lineNumber > visibleLines.end.line) {\n          return map;\n        }\n      }\n\n      if (!map.has(lineNumber)) {\n        map.set(lineNumber, [point]);\n      } else {\n        map.get(lineNumber)!.push(point);\n      }\n\n      return map;\n    }, new Map());\n\n    return Array.from(map.entries());\n  }, [points, visibleLines]);\n\n  const replayClient = useContext(ReplayClientContext);\n\n  if (!focusedSourceId || points.length === 0) {\n    return null;\n  }\n\n  const [, breakpointPositionsByLine] = getBreakpointPositionsSuspense(\n    replayClient,\n    focusedSourceId\n  );\n\n  return (\n    <div>\n      {pointsByLine.map(([lineNumber, points]) => (\n        <PointsForRow\n          key={lineNumber}\n          breakpoints={breakpointPositionsByLine}\n          editor={editor}\n          points={points}\n        />\n      ))}\n    </div>\n  );\n}\n\nfunction PointsForRow({\n  breakpoints,\n  editor,\n  points,\n}: {\n  breakpoints: Map<number, SameLineSourceLocations>;\n  editor: SourceEditor;\n  points: Point[];\n}) {\n  const line = points[0]!.location.line;\n\n  const breakpointsForLine = breakpoints.get(line);\n\n  if (!breakpointsForLine) {\n    return null;\n  }\n\n  return breakpointsForLine.columns.map((column, index) => {\n    const point = points.find(point => point.location.column === column);\n    if (point == null) {\n      return null;\n    }\n\n    return <ColumnBreakpoint key={index} editor={editor} insertAt={index} point={point} />;\n  }) as any;\n}\n","/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at <http://mozilla.org/MPL/2.0/>. */\n\n//\n\nexport function getIndentation(line) {\n  if (!line) {\n    return 0;\n  }\n\n  const lineMatch = line.match(/^\\s*/);\n  if (!lineMatch) {\n    return 0;\n  }\n\n  return lineMatch[0].length;\n}\n\nfunction getMaxIndentation(lines) {\n  const firstLine = lines[0];\n  const secondLine = lines[1];\n  const lastLine = lines[lines.length - 1];\n\n  const indentations = [\n    getIndentation(firstLine),\n    getIndentation(secondLine),\n    getIndentation(lastLine),\n  ];\n\n  return Math.max(...indentations);\n}\n\nexport function correctIndentation(text) {\n  const lines = text.trim().split(\"\\n\");\n  const indentation = getMaxIndentation(lines);\n  const formattedLines = lines.map(_line =>\n    _line.replace(new RegExp(`^\\\\s{0,${indentation - 1}}`), \"\")\n  );\n\n  return formattedLines.join(\"\\n\");\n}\n","/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at <http://mozilla.org/MPL/2.0/>. */\n\nimport { Location } from \"@replayio/protocol\";\n//\nimport { PureComponent, Suspense } from \"react\";\n\nimport { useAppSelector } from \"ui/setup/hooks\";\n\nimport { getDebugLineLocationSuspense } from \"../../selectors\";\nimport {\n  endOperation,\n  getDocument,\n  getTokenEnd,\n  startOperation,\n  toEditorColumn,\n} from \"../../utils/editor\";\nimport { getIndentation } from \"../../utils/indentation\";\n\nconst lineClass = \"new-debug-line\";\n\ninterface DebugLineProps {\n  location: Location;\n}\n\nclass DebugLineRenderer extends PureComponent<DebugLineProps> {\n  debugExpression: any;\n\n  componentDidMount() {\n    const { location } = this.props;\n    this.setDebugLine(location);\n  }\n\n  componentWillUnmount() {\n    const { location } = this.props;\n    this.clearDebugLine(location);\n  }\n\n  componentDidUpdate(prevProps: DebugLineProps) {\n    const { location } = this.props;\n\n    startOperation();\n    this.clearDebugLine(prevProps.location);\n    this.setDebugLine(location);\n    endOperation();\n  }\n\n  setDebugLine(location: Location) {\n    if (!location) {\n      return;\n    }\n    const { sourceId } = location;\n    const doc = getDocument(sourceId);\n    if (!doc) {\n      return;\n    }\n\n    const lineIndex = location.line - 1;\n    // @ts-expect-error method doesn't exist on Doc\n    doc.addLineClass(lineIndex, \"line\", lineClass);\n\n    const lineText = doc.getLine(lineIndex);\n    let column = toEditorColumn(lineText, location.column);\n    column = Math.max(column, getIndentation(lineText));\n\n    // If component updates because user clicks on\n    // another source tab, codeMirror will be null.\n    // @ts-expect-error doc.cm doesn't exist\n    const columnEnd = doc.cm ? getTokenEnd(doc.cm, lineIndex, column) : null;\n\n    let markTextClass = \"debug-expression\";\n    if (columnEnd === null) {\n      markTextClass += \" to-line-end\";\n    }\n\n    this.debugExpression = doc.markText(\n      { ch: column, line: lineIndex },\n      { ch: columnEnd!, line: lineIndex },\n      { className: markTextClass }\n    );\n  }\n\n  clearDebugLine(location: Location) {\n    if (!location) {\n      return;\n    }\n\n    if (this.debugExpression) {\n      this.debugExpression.clear();\n    }\n\n    const lineIndex = location.line - 1;\n    const doc = getDocument(location.sourceId);\n    if (!doc) {\n      return;\n    }\n    // @ts-expect-error method doesn't exist on Doc\n    doc.removeLineClass(lineIndex, \"line\", lineClass);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nfunction DebugLine() {\n  const location = useAppSelector(getDebugLineLocationSuspense);\n  if (!location) {\n    return null;\n  }\n  return <DebugLineRenderer location={location} />;\n}\n\nexport default function DebugLineSuspenseWrapper() {\n  return (\n    <Suspense>\n      <DebugLine />\n    </Suspense>\n  );\n}\n","import React from \"react\";\nimport { createPortal } from \"react-dom\";\n\nimport LoadingProgressBar from \"ui/components/shared/LoadingProgressBar\";\n\nexport default function EditorLoadingBar() {\n  const portalNode = document.querySelector(\".CodeMirror-sizer\");\n  if (!portalNode) {\n    return null;\n  }\n\n  return createPortal(<LoadingProgressBar initialProgress={Math.random() * 10} />, portalNode);\n}\n","/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at <http://mozilla.org/MPL/2.0/>. */\n\n//\nimport { bindActionCreators } from \"@reduxjs/toolkit\";\nimport { PauseId } from \"@replayio/protocol\";\n\nimport type { Context, PauseAndFrameId } from \"devtools/client/debugger/src/reducers/pause\";\nimport type { SourceDetails, SourcesState } from \"ui/reducers/sources\";\nimport type { AppDispatch } from \"ui/setup/store\";\n\nimport actions from \"../../../actions\";\nimport { copyToTheClipboard } from \"../../../utils/clipboard\";\nimport { getRawSourceURL } from \"../../../utils/source\";\nimport { getSourcemapVisualizerURLSuspense } from \"../../../utils/sourceVisualizations\";\n\ntype EditorActions = ReturnType<typeof editorItemActions>;\n\n// menu items\n\nconst copySourceUri2Item = (selectedSource: SourceDetails) => ({\n  id: \"node-menu-copy-source-url\",\n  label: \"Copy source URI\",\n  accesskey: \"u\",\n  disabled: !selectedSource.url,\n  click: () => copyToTheClipboard(getRawSourceURL(selectedSource.url)),\n});\n\nconst showSourceMenuItem = (\n  cx: Context,\n  selectedSource: SourceDetails,\n  editorActions: EditorActions\n) => ({\n  id: \"node-menu-show-source\",\n  label: \"Reveal in tree\",\n  accesskey: \"r\",\n  disabled: !selectedSource.url,\n  click: () => editorActions.showSource(cx, selectedSource.id),\n});\n\nconst sourceMapItem = (\n  pauseId: PauseId | undefined,\n  selectedSource: SourceDetails,\n  selectedFrameId: PauseAndFrameId | null,\n  sourcesState: SourcesState\n) => {\n  let visualizerURL: string | null = null;\n  if (pauseId) {\n    try {\n      visualizerURL = getSourcemapVisualizerURLSuspense(\n        selectedSource,\n        selectedFrameId,\n        sourcesState\n      );\n    } catch {}\n  }\n\n  return {\n    id: \"node-menu-source-map\",\n    label: \"Visualize source map\",\n    accesskey: \"B\",\n    disabled: !visualizerURL,\n    click: () => {\n      if (visualizerURL) {\n        window.open(visualizerURL, \"_blank\");\n      }\n    },\n  };\n};\n\nexport function editorMenuItems({\n  cx,\n  editorActions,\n  pauseId,\n  selectedSource,\n  selectedFrameId,\n  sourcesState,\n}: {\n  cx: Context;\n  editorActions: EditorActions;\n  pauseId: PauseId | undefined;\n  selectedSource: SourceDetails;\n  selectedFrameId: PauseAndFrameId | null;\n  sourcesState: SourcesState;\n}) {\n  const items = [];\n\n  items.push(\n    copySourceUri2Item(selectedSource),\n    { type: \"separator\" },\n    showSourceMenuItem(cx, selectedSource, editorActions),\n    sourceMapItem(pauseId, selectedSource, selectedFrameId, sourcesState)\n  );\n\n  return items;\n}\n\nexport function editorItemActions(dispatch: AppDispatch) {\n  return bindActionCreators(\n    {\n      flashLineRange: actions.flashLineRange,\n      showSource: actions.showSource,\n    },\n    dispatch\n  );\n}\n","/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at <http://mozilla.org/MPL/2.0/>. */\n\n//\n\nimport { Component } from \"react\";\nimport { ConnectedProps, connect } from \"react-redux\";\n\nimport { showMenu } from \"devtools/shared/contextmenu\";\nimport { SourceDetails } from \"ui/reducers/sources\";\nimport type { AppDispatch } from \"ui/setup/store\";\nimport type { UIState } from \"ui/state\";\n\nimport { getPauseId, getSelectedFrameId, getThreadContext } from \"../../selectors\";\nimport { editorItemActions, editorMenuItems } from \"./menus/editor\";\n\ninterface EditorMenuProps {\n  selectedSource: SourceDetails;\n  clearContextMenu: () => void;\n  contextMenu: Event | null;\n  editor: any;\n}\n\nconst mapStateToProps = (state: UIState, props: EditorMenuProps) => ({\n  cx: getThreadContext(state),\n  pauseId: getPauseId(state),\n  selectedFrameId: getSelectedFrameId(state),\n  sourcesState: state.sources,\n});\n\nconst connector = connect(mapStateToProps, dispatch => ({\n  editorActions: editorItemActions(dispatch as AppDispatch),\n}));\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\ntype FinalEMProps = EditorMenuProps & PropsFromRedux;\n\nclass EditorMenu extends Component<FinalEMProps> {\n  UNSAFE_componentWillUpdate(nextProps: FinalEMProps) {\n    this.props.clearContextMenu();\n    if (nextProps.contextMenu) {\n      this.showMenu(nextProps);\n    }\n  }\n\n  showMenu(props: FinalEMProps) {\n    const {\n      cx,\n      pauseId,\n      selectedSource,\n      selectedFrameId,\n      editorActions,\n      sourcesState,\n      contextMenu: event,\n    } = props;\n\n    showMenu(\n      event,\n      editorMenuItems({\n        cx,\n        editorActions,\n        pauseId,\n        selectedSource,\n        selectedFrameId,\n        sourcesState,\n      })\n    );\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default connector(EditorMenu);\n","import { SourceId } from \"@replayio/protocol\";\nimport { useContext, useEffect, useRef } from \"react\";\n\nimport { SourcesContext } from \"bvaughn-architecture-demo/src/contexts/SourcesContext\";\nimport { getBreakpointPositionsAsync } from \"bvaughn-architecture-demo/src/suspense/SourcesCache\";\nimport type { SourceEditor } from \"devtools/client/debugger/src/utils/editor/source-editor\";\nimport { replayClient } from \"shared/client/ReplayClientContext\";\n\ninterface ELProps {\n  editor: SourceEditor;\n}\n\nexport default function EmptyLines({ editor }: ELProps) {\n  const { focusedSourceId: sourceId, visibleLines } = useContext(SourcesContext);\n\n  const memoizedDrawnLinesRef = useRef<{\n    drawnLinesSet: Set<number>;\n    sourceId: SourceId | null;\n  }>({\n    drawnLinesSet: new Set(),\n    sourceId: null,\n  });\n\n  useEffect(() => {\n    let animationFrameId: number | null = null;\n\n    const memoizedDrawnLines = memoizedDrawnLinesRef.current;\n\n    function disableEmptyLinesRaf() {\n      if (animationFrameId) {\n        cancelAnimationFrame(animationFrameId);\n      }\n\n      animationFrameId = requestAnimationFrame(() => {\n        animationFrameId = null;\n        disableEmptyLines();\n      });\n    }\n\n    async function disableEmptyLines() {\n      if (visibleLines === null || sourceId === null) {\n        return;\n      }\n\n      const [, breakpointPositionsByLine] = await getBreakpointPositionsAsync(\n        replayClient,\n        sourceId\n      );\n\n      // For performance reasons, we should only modify lines (chunks of lines in this case) once.\n      // However if the breakpoint positions change, we need to re-draw things.\n      if (memoizedDrawnLines.sourceId !== sourceId) {\n        memoizedDrawnLines.drawnLinesSet = new Set();\n        memoizedDrawnLines.sourceId = sourceId;\n      }\n\n      const lower = visibleLines.start.line;\n      const upper = visibleLines.end.line;\n\n      if (!memoizedDrawnLines.drawnLinesSet.has(lower)) {\n        // We only need to update each bucket of 100 lines a single time\n        memoizedDrawnLines.drawnLinesSet.add(lower);\n\n        editor.codeMirror.operation(() => {\n          editor.codeMirror.eachLine(lower, upper, lineHandle => {\n            // Mark lines with no breakable positions as \"empty\" to dim them visually and disable interactions\n            const line = editor.codeMirror.getLineNumber(lineHandle)! + 1;\n            if (breakpointPositionsByLine.has(line)) {\n              editor.codeMirror.removeLineClass(lineHandle, \"line\", \"empty-line\");\n            } else {\n              editor.codeMirror.addLineClass(lineHandle, \"line\", \"empty-line\");\n            }\n          });\n        });\n      }\n    }\n\n    editor.editor.on(\"scroll\", disableEmptyLinesRaf);\n    editor.editor.on(\"change\", disableEmptyLinesRaf);\n    editor.editor.on(\"swapDoc\", disableEmptyLinesRaf);\n\n    disableEmptyLinesRaf();\n\n    return () => {\n      if (animationFrameId) {\n        cancelAnimationFrame(animationFrameId);\n      }\n\n      editor.editor.off(\"scroll\", disableEmptyLinesRaf);\n      editor.editor.off(\"change\", disableEmptyLinesRaf);\n      editor.editor.off(\"swapDoc\", disableEmptyLinesRaf);\n    };\n\n    // ESLint thinks ReplayClient isn't necessary because it's used in an async function.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editor, replayClient, sourceId, visibleLines]);\n\n  return null;\n}\n","import classNames from \"classnames\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { useFeature } from \"ui/hooks/settings\";\n\ntype StaticTooltipProps = {\n  targetNode: HTMLElement;\n  children: JSX.Element | string;\n  className?: string;\n};\n\nexport default function StaticTooltip({ targetNode, children }: StaticTooltipProps) {\n  const { value: enableLargeText } = useFeature(\"enableLargeText\");\n\n  return ReactDOM.createPortal(\n    <div\n      className={classNames(\n        \"pointer-events-none absolute bottom-4 z-50 mb-0.5 flex translate-x-full transform flex-row space-x-px\",\n        enableLargeText && \"bottom-6\"\n      )}\n      style={{ right: \"var(--print-statement-right-offset)\" }}\n    >\n      {children}\n    </div>,\n    targetNode\n  );\n}\n","import React, { ReactNode, Suspense, useContext, useEffect } from \"react\";\n\nimport ErrorBoundary from \"bvaughn-architecture-demo/components/ErrorBoundary\";\nimport { FocusContext } from \"bvaughn-architecture-demo/src/contexts/FocusContext\";\nimport { SourcesContext } from \"bvaughn-architecture-demo/src/contexts/SourcesContext\";\nimport { getSourceHitCountsSuspense } from \"bvaughn-architecture-demo/src/suspense/SourcesCache\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { KeyModifiers } from \"ui/components/KeyModifiers\";\nimport MaterialIcon from \"ui/components/shared/MaterialIcon\";\nimport hooks from \"ui/hooks\";\nimport { Nag } from \"ui/hooks/users\";\nimport { getSelectedSource } from \"ui/reducers/sources\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\nimport { trackEvent } from \"ui/utils/telemetry\";\nimport { shouldShowNag } from \"ui/utils/user\";\n\nimport StaticTooltip from \"./StaticTooltip\";\n\nexport const AWESOME_BACKGROUND = `linear-gradient(116.71deg, #FF2F86 21.74%, #EC275D 83.58%), linear-gradient(133.71deg, #01ACFD 3.31%, #F155FF 106.39%, #F477F8 157.93%, #F33685 212.38%), #007AFF`;\n\nfunction Wrapper({\n  children,\n  loading,\n  showWarning,\n}: {\n  children: ReactNode;\n  loading?: boolean;\n  showWarning?: boolean;\n}) {\n  const { nags } = hooks.useGetUserInfo();\n  const showNag = shouldShowNag(nags, Nag.FIRST_BREAKPOINT_ADD);\n\n  if (showWarning) {\n    return (\n      <div className=\"static-tooltip-content space-x-2 bg-red-700\">\n        <MaterialIcon>warning_amber</MaterialIcon>\n        <div>{children}</div>\n      </div>\n    );\n  } else if (showNag) {\n    return (\n      <div className=\"static-tooltip-content space-x-2\" style={{ background: AWESOME_BACKGROUND }}>\n        <MaterialIcon iconSize=\"xl\">auto_awesome</MaterialIcon>\n        <div className=\"flex flex-col items-start\">\n          {!loading ? <div className=\"font-bold\">Click to add a print statement</div> : null}\n          <div>{children}</div>\n        </div>\n      </div>\n    );\n  }\n\n  return <div className=\"static-tooltip-content bg-gray-700\">{children}</div>;\n}\n\ntype Props = {\n  keyModifiers: KeyModifiers;\n};\n\nfunction LineNumberTooltipSuspends({ keyModifiers }: Props) {\n  const isMetaActive = keyModifiers.meta;\n  const source = useAppSelector(getSelectedSource)!;\n\n  const { hoveredLineIndex, hoveredLineNode, visibleLines } = useContext(SourcesContext);\n\n  const replayClient = useContext(ReplayClientContext);\n  const { range: focusRange } = useContext(FocusContext);\n\n  const hitCountsForAllLines =\n    source && visibleLines\n      ? getSourceHitCountsSuspense(replayClient, source.id, visibleLines, focusRange)\n      : null;\n\n  let hitsForHoveredLine: number | null = null;\n  if (hoveredLineIndex != null && hitCountsForAllLines != null) {\n    const hoveredLineNumber = hoveredLineIndex + 1;\n    const lineHits = hitCountsForAllLines.get(hoveredLineNumber);\n    if (lineHits) {\n      // If there are multiple columns with hits for a line, show the first one.\n      hitsForHoveredLine = lineHits.count;\n    }\n  }\n\n  useEffect(() => {\n    trackEvent(hitsForHoveredLine ? \"breakpoint.preview_has_hits\" : \"breakpoint.preview_no_hits\");\n    trackEvent(\"breakpoint.preview_hits\", { hitsCount: hitsForHoveredLine });\n  }, [hitsForHoveredLine]);\n\n  if (isMetaActive) {\n    return null;\n  } else if (hoveredLineIndex === null || hoveredLineNode === null) {\n    return null;\n  } else if (hitCountsForAllLines == null) {\n    return <Loading hoveredLineNode={hoveredLineNode} />;\n  } else if (hitsForHoveredLine == null) {\n    return null;\n  }\n\n  return (\n    <StaticTooltip targetNode={hoveredLineNode}>\n      <Wrapper showWarning={hitsForHoveredLine! > 200}>\n        {hitsForHoveredLine} hit{hitsForHoveredLine == 1 ? \"\" : \"s\"}\n      </Wrapper>\n    </StaticTooltip>\n  );\n}\n\nfunction Loading({ hoveredLineNode }: { hoveredLineNode: HTMLElement }) {\n  return (\n    <StaticTooltip targetNode={hoveredLineNode}>\n      <Wrapper loading>Loading…</Wrapper>\n    </StaticTooltip>\n  );\n}\n\nexport default function LineNumberTooltip({ keyModifiers }: Props) {\n  const { hoveredLineNode } = useContext(SourcesContext);\n  if (hoveredLineNode === null) {\n    return null;\n  }\n\n  return (\n    <ErrorBoundary>\n      <Suspense fallback={<Loading hoveredLineNode={hoveredLineNode} />}>\n        <LineNumberTooltipSuspends keyModifiers={keyModifiers} />\n      </Suspense>\n    </ErrorBoundary>\n  );\n}\n","import { MouseEvent, ReactNode, RefObject, useLayoutEffect, useRef } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nimport styles from \"./Popover.module.css\";\n\nexport default function Popover({\n  children,\n  containerRef,\n  onMouseLeave,\n  showTail,\n  target,\n}: {\n  children: ReactNode;\n  containerRef: RefObject<HTMLElement>;\n  onMouseLeave?: () => void;\n  showTail: boolean;\n  target: HTMLElement;\n}) {\n  const arrowRef = useRef<SVGElement>(null);\n  const popoverRef = useRef<HTMLDivElement>(null);\n\n  useLayoutEffect(() => {\n    const arrow = arrowRef.current!;\n    const container = containerRef.current!;\n    const popover = popoverRef.current!;\n\n    let ignoreMouseLeaveEventTimeout: NodeJS.Timeout | null = null;\n\n    const onMouseLeaveWrapper = () => {\n      if (ignoreMouseLeaveEventTimeout === null) {\n        if (onMouseLeave != null) {\n          onMouseLeave();\n        }\n      }\n    };\n\n    const reposition = () => {\n      arrow.style.setProperty(\"display\", showTail ? \"block\" : \"none\");\n\n      const containerRect = container.getBoundingClientRect();\n      const popoverRect = popover.getBoundingClientRect();\n      const targetRect = target.getBoundingClientRect();\n\n      let arrowUp = true;\n\n      // Vertical alignment: Determined entirely by the target location within the parent container.\n      // Targets in the top half of the container have popups displayed beneath them,\n      // and targets in the bottom half of the container have popups displayed above them.\n      //\n      // The reason we do this, rather than based on the size of the content in the popup,\n      // is that the popup content sizes may change as the user interacts (e.g. clicks to expand and inspect a node)\n      // and it's jarring for the popup to jump around the screen in response to a user action.\n      if (targetRect.top + targetRect.height / 2 < containerRect.top + containerRect.height / 2) {\n        const popoverTop = targetRect.top + targetRect.height;\n        popover.style.setProperty(\"top\", `${popoverTop}px`);\n\n        arrow.setAttribute(\"class\", styles.UpArrow);\n      } else {\n        const popoverTop = targetRect.top - popoverRect.height;\n        popover.style.setProperty(\"top\", `${popoverTop}px`);\n\n        arrow.setAttribute(\"class\", styles.DownArrow);\n\n        arrowUp = false;\n      }\n\n      // Horizontal alignment: Prefer horizontally centered around the target\n      // But don't go outside of the bounds of the container.\n      const popoverLeftMin = containerRect.left;\n      const popoverLeftMax = containerRect.left + containerRect.width - popoverRect.width;\n      const popoverLeftPreferred = targetRect.left + targetRect.width / 2 - popoverRect.width / 2;\n      const popoverLeft = Math.max(popoverLeftMin, Math.min(popoverLeftMax, popoverLeftPreferred));\n      popover.style.setProperty(\"left\", `${popoverLeft}px`);\n\n      // Arrow alignment: Prefer horizontally centered around the target\n      // But keep away from the extreme edges of the popover to account for rounded corners.\n      const arrowRect = arrow.getBoundingClientRect();\n      const arrowLeftMin = targetRect.left;\n      const arrowLeftMax = targetRect.left + targetRect.width - arrowRect.width;\n      const arrowLeftPreferred = targetRect.left + targetRect.width / 2 - arrowRect.width / 2;\n      const arrowLeft = Math.max(arrowLeftMin, Math.min(arrowLeftMax, arrowLeftPreferred));\n      arrow.style.setProperty(\"margin-left\", `${arrowLeft - popoverLeft}px`);\n\n      // Ignore \"mouseleave\" events that occur right after resize.\n      // They may be false positives, caused by the popover content moving.\n      if (ignoreMouseLeaveEventTimeout !== null) {\n        clearTimeout(ignoreMouseLeaveEventTimeout);\n      }\n      ignoreMouseLeaveEventTimeout = setTimeout(() => {\n        ignoreMouseLeaveEventTimeout = null;\n      }, 100);\n    };\n\n    container.addEventListener(\"scroll\", reposition);\n    popover.addEventListener(\"mouseleave\", onMouseLeaveWrapper);\n\n    const observer = new ResizeObserver(reposition);\n    observer.observe(container);\n    observer.observe(popover);\n    observer.observe(target);\n\n    return () => {\n      container.removeEventListener(\"scroll\", reposition);\n      popover.removeEventListener(\"mouseleave\", onMouseLeaveWrapper);\n\n      observer.unobserve(container);\n      observer.unobserve(popover);\n      observer.unobserve(target);\n      observer.disconnect();\n\n      if (ignoreMouseLeaveEventTimeout !== null) {\n        clearTimeout(ignoreMouseLeaveEventTimeout);\n      }\n    };\n  }, [containerRef, onMouseLeave, showTail, target]);\n\n  const blockEvent = (event: MouseEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  return createPortal(\n    <div\n      className={styles.Popover}\n      data-test-name=\"Popover\"\n      onClick={blockEvent}\n      onMouseDown={blockEvent}\n      onMouseUp={blockEvent}\n      ref={popoverRef}\n    >\n      <svg ref={arrowRef as any} viewBox=\"0 0 16 8\" preserveAspectRatio=\"none\">\n        <polygon className={styles.ArrowBackground} points=\"8,0 16,8 0,8\"></polygon>\n        <polygon className={styles.ArrowForeground} points=\"8,1 15,8 1,8\"></polygon>\n      </svg>\n      <div className={styles.Children}>{children}</div>\n    </div>,\n    document.body\n  );\n}\n","import Inspector from \"./Inspector\";\nexport default Inspector;","import { Suspense, forwardRef, useContext } from \"react\";\nimport Inspector from \"bvaughn-architecture-demo/components/inspector\";\nimport Loader from \"bvaughn-architecture-demo/components/Loader\";\nimport { getObjectWithPreviewSuspense } from \"bvaughn-architecture-demo/src/suspense/ObjectPreviews\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport PropertiesRenderer from \"./PropertiesRenderer\";\nimport useClientValue from \"./useClientValue\";\nimport styles from \"./SourcePreviewInspector.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default /*#__PURE__*/forwardRef(function SourcePreviewInspector({\n  className = \"\",\n  pauseId,\n  protocolValue\n}, ref) {\n  const clientValue = useClientValue(protocolValue, pauseId);\n\n  switch (clientValue.type) {\n    case \"array\":\n    case \"function\":\n    case \"html-element\":\n    case \"html-text\":\n    case \"map\":\n    case \"object\":\n    case \"regexp\":\n    case \"set\":\n      {\n        return /*#__PURE__*/_jsx(\"div\", {\n          className: `${styles.SourcePreviewInspector} ${className}`,\n          \"data-test-name\": \"SourcePreviewInspector\",\n          ref: ref,\n          children: /*#__PURE__*/_jsx(ObjectWrapper, {\n            pauseId: pauseId,\n            protocolValue: protocolValue\n          })\n        });\n      }\n\n    default:\n      {\n        return /*#__PURE__*/_jsx(\"div\", {\n          className: `${styles.SourcePreviewInspector} ${className}`,\n          \"data-test-name\": \"SourcePreviewInspector\",\n          ref: ref,\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: styles.InspectorWrapper,\n            children: /*#__PURE__*/_jsx(Suspense, {\n              fallback: /*#__PURE__*/_jsx(Loader, {}),\n              children: /*#__PURE__*/_jsx(Inspector, {\n                className: styles.Inspector,\n                context: \"default\",\n                expandByDefault: true,\n                pauseId: pauseId,\n                protocolValue: protocolValue\n              })\n            })\n          })\n        });\n      }\n  }\n});\n\nfunction ObjectWrapper({\n  pauseId,\n  protocolValue\n}) {\n  const client = useContext(ReplayClientContext);\n  const clientValue = useClientValue(protocolValue, pauseId);\n  const {\n    name,\n    objectId,\n    type\n  } = clientValue;\n  const objectWithPreview = getObjectWithPreviewSuspense(client, pauseId, objectId);\n\n  if (objectWithPreview == null) {\n    throw Error(`Could not find object with ID \"${objectId}\"`);\n  }\n\n  const {\n    className,\n    preview\n  } = objectWithPreview;\n  let header = null;\n\n  switch (type) {\n    case \"array\":\n      const lengthValue = preview?.properties?.find(({\n        name\n      }) => name === \"length\") || preview?.getterValues?.find(({\n        name\n      }) => name === \"length\");\n      const length = lengthValue?.value || 0;\n      header = `${className}(${length})`;\n      break;\n\n    case \"function\":\n      // TODO It would be nice if Replay differentiated between classes and functions but it doesn't seem to.\n      header = name ? `ƒ ${name}()` : \"ƒ()\";\n      break;\n\n    case \"html-element\":\n      const tagName = (preview?.node?.nodeName || \"unknown\").toLowerCase();\n      header = tagName || className;\n      break;\n\n    case \"html-text\":\n      header = \"#text\";\n      break;\n\n    case \"map\":\n    case \"set\":\n      const sizeValue = preview?.properties?.find(({\n        name\n      }) => name === \"size\") || preview?.getterValues?.find(({\n        name\n      }) => name === \"size\");\n      const size = sizeValue?.value || 0;\n      header = `${className}(${size})`;\n      break;\n\n    case \"regexp\":\n      header = preview?.regexpString || className;\n      break;\n\n    default:\n      header = className;\n      break;\n  }\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: styles.HeaderWrapper,\n      \"data-test-name\": \"SourcePreviewInspectorHeader\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: styles.Header,\n        children: header\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.FixedSizeInspectorWrapper,\n      children: /*#__PURE__*/_jsx(Suspense, {\n        fallback: /*#__PURE__*/_jsx(Loader, {}),\n        children: /*#__PURE__*/_jsx(PropertiesRenderer, {\n          object: objectWithPreview,\n          pauseId: pauseId\n        })\n      })\n    })]\n  });\n}","import \"bvaughn-architecture-demo/pages/variables.css\";\nimport { Value as ProtocolValue } from \"@replayio/protocol\";\n\nimport ErrorBoundary from \"bvaughn-architecture-demo/components/ErrorBoundary\";\nimport SourcePreviewInspector from \"bvaughn-architecture-demo/components/inspector/SourcePreviewInspector\";\nimport { useAppSelector } from \"ui/setup/hooks\";\n\nexport default function NewObjectInspector({ protocolValue }: { protocolValue: ProtocolValue }) {\n  const pauseId = useAppSelector(state => state.pause.id);\n  if (pauseId == null || protocolValue === null) {\n    return null;\n  }\n\n  return (\n    <ErrorBoundary>\n      <div className=\"preview-popup\">\n        <SourcePreviewInspector pauseId={pauseId} protocolValue={protocolValue} />\n      </div>\n    </ErrorBoundary>\n  );\n}\n","import { RefObject, useCallback } from \"react\";\n\nimport Popover from \"devtools/client/debugger/src/components/shared/Popover\";\nimport { previewCleared } from \"devtools/client/debugger/src/reducers/preview\";\nimport type { PreviewState } from \"devtools/client/debugger/src/reducers/preview\";\nimport { getThreadContext } from \"devtools/client/debugger/src/selectors\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\n\nimport NewObjectInspector from \"./NewObjectInspector\";\n\ninterface PopupProps {\n  containerRef: RefObject<HTMLDivElement>;\n  preview: PreviewState;\n  target: HTMLElement;\n}\n\nexport function Popup({ containerRef, target, preview }: PopupProps) {\n  const dispatch = useAppDispatch();\n  const cx = useAppSelector(getThreadContext);\n\n  let previewId: string | null = null;\n  let value = null;\n  if (preview !== null) {\n    previewId = preview.previewId;\n    value = preview.value;\n  }\n\n  const onMouseLeave = useCallback(() => {\n    if (previewId !== null) {\n      dispatch(previewCleared({ cx, previewId }));\n    }\n  }, [cx, dispatch, previewId]);\n\n  if (value === null) {\n    return null;\n  }\n\n  return (\n    <Popover\n      containerRef={containerRef}\n      onMouseLeave={onMouseLeave}\n      showTail={true}\n      target={target}\n    >\n      <NewObjectInspector protocolValue={value} />\n    </Popover>\n  );\n}\n\nexport default Popup;\n","import { useEffect } from \"react\";\n\nfunction addHighlightToToken(target: HTMLElement) {\n  target.classList.add(\"preview-token\");\n}\n\nfunction removeHighlightFromToken(target: HTMLElement) {\n  target.classList.remove(\"preview-token\");\n}\n\nfunction addHighlightToTargetSiblings(target: HTMLElement, expression: string) {\n  // This function searches for related tokens that should also be highlighted when previewed.\n  // Here is the process:\n  // It conducts a search on the target's next siblings and then another search for the previous siblings.\n  // If a sibling is not an element node (nodeType === 1), the highlight is not added and the search is short-circuited.\n  // If the element sibling is the same token type as the target, and is also found in the preview expression, the highlight class is added.\n\n  const tokenType = target.classList.item(0);\n  const previewExpression = expression;\n\n  if (tokenType && previewExpression && target.innerHTML !== previewExpression) {\n    let nextElementSibling = target.nextElementSibling;\n    // Note: Declaring previous/next ELEMENT siblings as well because\n    // properties like innerHTML can't be checked on nextSibling\n    // without creating a flow error even if the node is an element type.\n    while (\n      nextElementSibling?.className.includes(tokenType) &&\n      previewExpression.includes(nextElementSibling.innerHTML)\n    ) {\n      // All checks passed, add highlight and continue the search.\n      nextElementSibling.classList.add(\"preview-token\");\n\n      nextElementSibling = nextElementSibling.nextElementSibling;\n    }\n\n    let previousElementSibling = target.previousElementSibling;\n\n    while (\n      previousElementSibling?.className.includes(tokenType) &&\n      previewExpression?.includes(previousElementSibling.innerHTML)\n    ) {\n      // All checks passed, add highlight and continue the search.\n      previousElementSibling.classList.add(\"preview-token\");\n      previousElementSibling = previousElementSibling.previousElementSibling;\n    }\n  }\n}\n\nfunction removeHighlightForTargetSiblings(target: HTMLElement) {\n  // Look at target's previous and next token siblings.\n  // If they also have the highlight class 'preview-token',\n  // remove that class.\n  let nextSibling = target.nextElementSibling;\n  while (nextSibling?.className.includes(\"preview-token\")) {\n    nextSibling.classList.remove(\"preview-token\");\n    nextSibling = nextSibling.nextElementSibling;\n  }\n  let previousSibling = target.previousElementSibling;\n  while (previousSibling?.className.includes(\"preview-token\")) {\n    previousSibling.classList.remove(\"preview-token\");\n    previousSibling = previousSibling.previousElementSibling;\n  }\n}\n\ntype PropTypes = {\n  expression: string;\n  target: HTMLElement;\n};\n\n// this could probably be a hook, but it's used in a Class Component at the moment\nexport const PreviewHighlight = ({ expression, target }: PropTypes) => {\n  useEffect(() => {\n    addHighlightToToken(target);\n    return () => removeHighlightFromToken(target);\n  }, [target]);\n\n  useEffect(() => {\n    addHighlightToTargetSiblings(target, expression);\n    return () => removeHighlightForTargetSiblings(target);\n  }, [expression, target]);\n\n  return null;\n};\n","import type { SourceLocation } from \"@replayio/protocol\";\nimport debounce from \"lodash/debounce\";\nimport { PureComponent, RefObject } from \"react\";\nimport { ConnectedProps, connect } from \"react-redux\";\n\nimport { updatePreview } from \"devtools/client/debugger/src/actions/preview\";\nimport { previewCleared } from \"devtools/client/debugger/src/reducers/preview\";\nimport { getPreview, getThreadContext } from \"devtools/client/debugger/src/selectors\";\nimport SourceEditor from \"devtools/client/debugger/src/utils/editor/source-editor\";\nimport type { UIState } from \"ui/state\";\n\nimport Popup from \"./Popup\";\nimport { PreviewHighlight } from \"./PreviewHighlight\";\n\nconst mapStateToProps = (state: UIState) => {\n  return {\n    cx: getThreadContext(state),\n    preview: getPreview(state),\n  };\n};\n\nconst connector = connect(mapStateToProps, {\n  previewCleared,\n  updatePreview,\n});\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\ntype PreviewProps = PropsFromRedux & {\n  editor: SourceEditor;\n  containerRef: RefObject<HTMLDivElement>;\n};\n\ntype PreviewState = {\n  selecting: boolean;\n  hoveredTarget: HTMLElement | null;\n};\n\nclass Preview extends PureComponent<PreviewProps, PreviewState> {\n  state = { selecting: false, hoveredTarget: null };\n\n  componentDidMount() {\n    this.updateListeners();\n  }\n\n  componentDidUpdate(prevProps: PreviewProps) {\n    // Reset state on preview dismissal\n    if (!this.props.preview && prevProps.preview && this.state.hoveredTarget) {\n      this.setState({ hoveredTarget: null });\n    }\n  }\n\n  componentWillUnmount() {\n    const { codeMirror } = this.props.editor;\n    const codeMirrorWrapper = codeMirror.getWrapperElement();\n\n    // @ts-ignore This is our custom event type; arguably we should expected CodeMirror defs to include it\n    codeMirror.off(\"tokenenter\", this.onTokenEnter);\n    // @ts-ignore This is our custom event type; arguably we should expected CodeMirror defs to include it\n    codeMirror.off(\"tokenleave\", this.onTokenLeave);\n    codeMirror.off(\"scroll\", this.onScroll);\n    codeMirrorWrapper.removeEventListener(\"mouseup\", this.onMouseUp);\n    codeMirrorWrapper.removeEventListener(\"mousedown\", this.onMouseDown);\n  }\n\n  updateListeners() {\n    const { codeMirror } = this.props.editor;\n    const codeMirrorWrapper = codeMirror.getWrapperElement();\n\n    // @ts-ignore This is our custom event type; arguably we should expected CodeMirror defs to include it\n    codeMirror.on(\"tokenenter\", this.onTokenEnter);\n    // @ts-ignore This is our custom event type; arguably we should expected CodeMirror defs to include it\n    codeMirror.on(\"tokenleave\", this.onTokenLeave);\n    codeMirror.on(\"scroll\", this.onScroll);\n    codeMirrorWrapper.addEventListener(\"mouseup\", this.onMouseUp);\n    codeMirrorWrapper.addEventListener(\"mousedown\", this.onMouseDown);\n  }\n\n  onTokenEnter = ({ target, tokenPos }: { target: HTMLElement; tokenPos: SourceLocation }) => {\n    const { cx } = this.props;\n\n    if (cx?.isPaused && !this.state.selecting) {\n      this.startPreview(target, tokenPos);\n    }\n  };\n\n  startPreview = debounce((target: HTMLElement, tokenPos: SourceLocation) => {\n    const { cx, editor, updatePreview } = this.props;\n\n    // Double-check status after timer runs\n    if (cx?.isPaused && !this.state.selecting) {\n      this.setState({ hoveredTarget: target });\n      updatePreview(cx, target, tokenPos, editor.codeMirror);\n    }\n  }, 100);\n\n  onTokenLeave = () => {\n    this.startPreview.cancel();\n  };\n\n  onMouseUp = () => {\n    if (this.props.cx?.isPaused) {\n      this.setState({ selecting: false });\n      return true;\n    }\n  };\n\n  onMouseDown = () => {\n    if (this.props.cx?.isPaused) {\n      this.setState({ selecting: true });\n      return true;\n    }\n  };\n\n  onScroll = () => {\n    const { previewCleared, cx, preview } = this.props;\n    if (cx?.isPaused && preview) {\n      previewCleared({ cx, previewId: preview.previewId });\n    }\n  };\n\n  render() {\n    const { containerRef, preview } = this.props;\n    const { selecting, hoveredTarget } = this.state;\n\n    return (\n      <>\n        {!selecting && preview && hoveredTarget && (\n          <PreviewHighlight expression={preview.expression} target={hoveredTarget!} />\n        )}\n        {!selecting && preview?.value && hoveredTarget && (\n          <Popup containerRef={containerRef} preview={preview} target={hoveredTarget!} />\n        )}\n      </>\n    );\n  }\n}\n\nexport default connector(Preview);\n","import { createContext } from \"react\";\n\nimport KeyShortcuts from \"devtools/client/shared/key-shortcuts\";\n\nconst ShortcutsContext = createContext<KeyShortcuts | null>(null);\n\nexport default ShortcutsContext;\n","/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at <http://mozilla.org/MPL/2.0/>. */\n\n//\n\nimport classnames from \"classnames\";\nimport debounce from \"lodash/debounce\";\nimport PropTypes from \"prop-types\";\nimport React, { Component, ContextType } from \"react\";\nimport { ConnectedProps, connect } from \"react-redux\";\n\nimport type { Modifiers } from \"devtools/client/debugger/src/reducers/file-search\";\nimport type { Context } from \"devtools/client/debugger/src/reducers/pause\";\nimport { getSelectedSource, getSourceContent, isFulfilled } from \"ui/reducers/sources\";\nimport type { UIState } from \"ui/state\";\n\nimport actions from \"../../actions\";\nimport {\n  getActiveSearch,\n  getContext,\n  getFileSearchModifiers,\n  getFileSearchQuery,\n  getFileSearchResults,\n} from \"../../selectors\";\nimport { removeOverlay } from \"../../utils/editor\";\nimport { scrollList } from \"../../utils/result-list\";\nimport AccessibleImage from \"../shared/AccessibleImage\";\nimport { CloseButton } from \"../shared/Button\";\nimport SearchInput from \"../shared/SearchInput\";\nimport ShortcutsContext from \"./ShortcutsContext\";\n\nfunction getShortcuts() {\n  const searchAgainKey = \"Cmd+G\";\n  const searchAgainPrevKey = \"Cmd+Shift+G\";\n  const searchKey = \"CmdOrCtrl+F\";\n\n  return {\n    shiftSearchAgainShortcut: searchAgainPrevKey,\n    searchAgainShortcut: searchAgainKey,\n    searchShortcut: searchKey,\n  };\n}\n\ninterface SMBProps {\n  modifiers: Modifiers;\n  className: string;\n  modVal: keyof Modifiers;\n  svgName: string;\n  tooltip: string;\n  toggleFileSearchModifier: (cx: Context, modVal: keyof Modifiers) => void;\n  doSearch: (query: string) => void;\n  query: string;\n  cx: Context;\n}\n\nfunction SearchModBtn({\n  modifiers,\n  modVal,\n  className,\n  svgName,\n  tooltip,\n  toggleFileSearchModifier,\n  doSearch,\n  query,\n  cx,\n}: SMBProps) {\n  const preppedClass = classnames(className, {\n    active: modifiers && modifiers[modVal],\n  });\n  return (\n    <button\n      className={preppedClass}\n      onMouseDown={() => {\n        toggleFileSearchModifier(cx, modVal);\n        doSearch(query);\n      }}\n      onKeyDown={e => {\n        if (e.key === \"Enter\") {\n          toggleFileSearchModifier(cx, modVal);\n          doSearch(query);\n        }\n      }}\n      title={tooltip}\n    >\n      <AccessibleImage className={svgName} />\n    </button>\n  );\n}\n\nconst mapStateToProps = (state: UIState) => {\n  const selectedSource = getSelectedSource(state);\n\n  return {\n    cx: getContext(state),\n    searchOn: getActiveSearch(state) === \"file\",\n    selectedSource,\n    selectedContentLoaded: selectedSource\n      ? isFulfilled(getSourceContent(state, selectedSource.id))\n      : false,\n    query: getFileSearchQuery(state),\n    modifiers: getFileSearchModifiers(state),\n    searchResults: getFileSearchResults(state),\n  };\n};\n\nconst connector = connect(mapStateToProps, {\n  toggleFileSearchModifier: actions.toggleFileSearchModifier,\n  setFileSearchQuery: actions.setFileSearchQuery,\n  setActiveSearch: actions.setActiveSearch,\n  closeFileSearch: actions.closeFileSearch,\n  doSearch: actions.doSearch,\n  traverseResults: actions.traverseResults,\n});\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\ninterface SBProps {\n  editor: any;\n  showClose?: boolean;\n  size?: string;\n}\n\ntype FinalSBProps = PropsFromRedux & SBProps;\n\ninterface SBState {\n  query: string;\n  selectedResultIndex: number;\n  count: number;\n  index: number;\n  inputFocused: boolean;\n}\n\nclass SearchBar extends Component<FinalSBProps, SBState> {\n  static contextType = ShortcutsContext;\n  context!: ContextType<typeof ShortcutsContext>;\n\n  constructor(props: FinalSBProps) {\n    super(props);\n    this.state = {\n      query: props.query,\n      selectedResultIndex: 0,\n      count: 0,\n      index: -1,\n      inputFocused: false,\n    };\n  }\n\n  componentWillUnmount() {\n    const shortcuts = this.context!;\n    const { searchShortcut, searchAgainShortcut, shiftSearchAgainShortcut } = getShortcuts();\n\n    shortcuts.off(searchShortcut);\n    shortcuts.off(\"Escape\");\n    shortcuts.off(searchAgainShortcut);\n    shortcuts.off(shiftSearchAgainShortcut);\n  }\n\n  componentDidMount() {\n    // overwrite this.doSearch with debounced version to\n    // reduce frequency of queries\n    this.doSearch = debounce(this.doSearch, 100);\n    const shortcuts = this.context!;\n    const { searchShortcut, searchAgainShortcut, shiftSearchAgainShortcut } = getShortcuts();\n\n    // Not actually React events but whatever\n    shortcuts.on(searchShortcut, (e: React.KeyboardEvent) => this.toggleSearch(e));\n    shortcuts.on(\"Escape\", (e: React.KeyboardEvent) => this.onEscape(e));\n\n    shortcuts.on(shiftSearchAgainShortcut, (e: React.KeyboardEvent) =>\n      this.traverseResults(e, true)\n    );\n\n    shortcuts.on(searchAgainShortcut, (e: React.KeyboardEvent) => this.traverseResults(e, false));\n  }\n\n  componentDidUpdate() {\n    // @ts-expect-error string refs ugh!\n    if (this.refs.resultList && this.refs.resultList.refs) {\n      // @ts-expect-error string refs ugh!\n      scrollList(this.refs.resultList.refs, this.state.selectedResultIndex);\n    }\n  }\n\n  onEscape = (e: React.KeyboardEvent) => {\n    this.closeSearch(e);\n  };\n\n  clearSearch = () => {\n    const { editor: ed, query } = this.props;\n    if (ed) {\n      const ctx = { ed, cm: ed.codeMirror };\n      removeOverlay(ctx, query);\n    }\n  };\n\n  closeSearch = (e: React.KeyboardEvent) => {\n    const { cx, closeFileSearch, editor, searchOn, query } = this.props;\n    this.clearSearch();\n    if (editor && searchOn) {\n      closeFileSearch(cx, editor);\n      e.stopPropagation();\n      e.preventDefault();\n    }\n    this.setState({ query, inputFocused: false });\n  };\n\n  toggleSearch = (e: React.KeyboardEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    const { editor, searchOn, setActiveSearch } = this.props;\n\n    // Set inputFocused to false, so that search query is highlighted whenever search shortcut is used, even if the input already has focus.\n    this.setState({ inputFocused: false });\n\n    if (!searchOn) {\n      setActiveSearch(\"file\");\n    }\n\n    if (this.props.searchOn && editor) {\n      const query = editor.codeMirror.getSelection() || this.state.query;\n\n      if (query !== \"\") {\n        this.setState({ query, inputFocused: true });\n        this.doSearch(query);\n      } else {\n        this.setState({ query: \"\", inputFocused: true });\n      }\n    }\n  };\n\n  doSearch = (query: string) => {\n    const { cx, selectedSource, selectedContentLoaded } = this.props;\n    if (!selectedSource || !selectedContentLoaded) {\n      return;\n    }\n\n    this.props.doSearch(cx, query, this.props.editor);\n  };\n\n  traverseResults = (e: React.KeyboardEvent, reverse: boolean) => {\n    e.stopPropagation();\n    e.preventDefault();\n    const editor = this.props.editor;\n\n    if (!editor) {\n      return;\n    }\n    this.props.traverseResults(this.props.cx, reverse, editor);\n  };\n\n  // Handlers\n\n  onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ query: e.target.value });\n\n    return this.doSearch(e.target.value);\n  };\n\n  onFocus = (e: React.KeyboardEvent) => {\n    this.setState({ inputFocused: true });\n  };\n\n  onBlur = (e: React.KeyboardEvent) => {\n    this.setState({ inputFocused: false });\n  };\n\n  onKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key !== \"Enter\" && e.key !== \"F3\") {\n      return;\n    }\n\n    this.traverseResults(e, e.shiftKey);\n    e.preventDefault();\n    return this.doSearch((e.target as HTMLInputElement).value);\n  };\n\n  onHistoryScroll = (query: string) => {\n    this.setState({ query });\n    this.doSearch(query);\n  };\n\n  // Renderers\n  buildSummaryMsg() {\n    const {\n      searchResults: { matchIndex, count, index },\n      query,\n    } = this.props;\n\n    if (query.trim() == \"\") {\n      return \"\";\n    }\n\n    if (count == 0) {\n      return \"No results found\";\n    }\n\n    if (index == -1) {\n      return `${count} result${count === 1 ? \"\" : \"s\"}`;\n    }\n\n    return `${matchIndex + 1} of ${count} result${count === 1 ? \"\" : \"s\"}`;\n  }\n\n  renderSearchModifiers = () => {\n    const { cx, modifiers, toggleFileSearchModifier, query } = this.props;\n    const { doSearch } = this;\n\n    const commonProps = {\n      cx,\n      modifiers,\n      toggleFileSearchModifier,\n      query,\n      doSearch,\n    };\n\n    return (\n      <div className=\"search-modifiers\">\n        <span className=\"pipe-divider\" />\n        <span className=\"search-type-name\">{\"Modifiers:\"}</span>\n        <SearchModBtn\n          {...commonProps}\n          modVal=\"regexMatch\"\n          className=\"regex-match-btn\"\n          svgName=\"regex-match\"\n          tooltip={\"Regex\"}\n        />\n        <SearchModBtn\n          {...commonProps}\n          modVal=\"caseSensitive\"\n          className=\"case-sensitive-btn\"\n          svgName=\"case-match\"\n          tooltip={\"Case sensitive\"}\n        />\n        <SearchModBtn\n          {...commonProps}\n          modVal=\"wholeWord\"\n          className=\"whole-word-btn\"\n          svgName=\"whole-word-match\"\n          tooltip={\"Whole word\"}\n        />\n      </div>\n    );\n  };\n\n  shouldShowErrorEmoji() {\n    const {\n      query,\n      searchResults: { count },\n    } = this.props;\n    return !!query && !count;\n  }\n\n  render() {\n    const {\n      searchResults: { count },\n      searchOn,\n      showClose = true,\n      size = \"big\",\n    } = this.props;\n\n    if (!searchOn) {\n      return <div />;\n    }\n\n    return (\n      <div className=\"search-bar\">\n        <SearchInput\n          query={this.state.query}\n          count={count}\n          placeholder={\"Find in file…\"}\n          summaryMsg={this.buildSummaryMsg()}\n          isLoading={false}\n          onChange={this.onChange}\n          onFocus={this.onFocus}\n          onBlur={this.onBlur}\n          showErrorEmoji={this.shouldShowErrorEmoji()}\n          onKeyDown={this.onKeyDown}\n          onHistoryScroll={this.onHistoryScroll}\n          handleNext={(e: React.KeyboardEvent) => this.traverseResults(e, false)}\n          handlePrev={(e: React.KeyboardEvent) => this.traverseResults(e, true)}\n          shouldFocus={this.state.inputFocused}\n          showClose={false}\n        />\n        <div className=\"search-bottom-bar\">\n          {this.renderSearchModifiers()}\n          {showClose && (\n            <React.Fragment>\n              <span className=\"pipe-divider\" />\n              <CloseButton handleClick={this.closeSearch} buttonClass={size} tooltip=\"\" />\n            </React.Fragment>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connector(SearchBar);\n","import { isIndexedSource } from \"../suspense/SourcesCache\";\nexport function getSourceFileName(source, appendIndex = false) {\n  const {\n    url\n  } = source;\n\n  if (!url) {\n    return null;\n  }\n\n  let fileName = getSourceFileNameFromUrl(url);\n\n  if (appendIndex) {\n    if (isIndexedSource(source)) {\n      const {\n        contentHashIndex,\n        doesContentHashChange\n      } = source;\n\n      if (doesContentHashChange) {\n        fileName = `${fileName} (${contentHashIndex + 1})`;\n      }\n    }\n  }\n\n  return fileName;\n}\n\nfunction getSourceFileNameFromUrl(url) {\n  const fileName = url.split(\"/\")?.pop();\n  return fileName || null;\n}","import { PointDescription, SourceId, TimeStampedPointRange } from \"@replayio/protocol\";\nimport classNames from \"classnames\";\nimport findLast from \"lodash/findLast\";\nimport React, {\n  FC,\n  MouseEvent,\n  MouseEventHandler,\n  ReactNode,\n  Suspense,\n  useContext,\n  useEffect,\n  useState,\n} from \"react\";\nimport { createPortal } from \"react-dom\";\n\nimport { FocusContext } from \"bvaughn-architecture-demo/src/contexts/FocusContext\";\nimport { PointsContext } from \"bvaughn-architecture-demo/src/contexts/PointsContext\";\nimport { SourcesContext } from \"bvaughn-architecture-demo/src/contexts/SourcesContext\";\nimport { getHitPointsForLocationSuspense } from \"bvaughn-architecture-demo/src/suspense/PointsCache\";\nimport {\n  getSource,\n  getSourceHitCountsSuspense,\n} from \"bvaughn-architecture-demo/src/suspense/SourcesCache\";\nimport { getSourceFileName } from \"bvaughn-architecture-demo/src/utils/source\";\nimport { getExecutionPoint, getSymbols } from \"devtools/client/debugger/src/selectors\";\nimport { findClosestFunction } from \"devtools/client/debugger/src/utils/ast\";\nimport { compareNumericStrings } from \"protocol/utils\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { Point } from \"shared/client/types\";\nimport { seek } from \"ui/actions/timeline\";\nimport { KeyModifiers, KeyModifiersContext } from \"ui/components/KeyModifiers\";\nimport MaterialIcon from \"ui/components/shared/MaterialIcon\";\nimport hooks from \"ui/hooks\";\nimport { useFeature } from \"ui/hooks/settings\";\nimport { Nag } from \"ui/hooks/users\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\nimport { shouldShowNag } from \"ui/utils/user\";\n\nimport { AWESOME_BACKGROUND } from \"./LineNumberTooltip\";\n\nconst QuickActionButton: FC<{\n  children: ReactNode;\n  dataTestId?: string;\n  disabled?: boolean;\n  onClick: () => void;\n  showNag: boolean;\n}> = ({ children, dataTestId, disabled, onClick, showNag }) => {\n  return (\n    <button\n      className={classNames(\n        \"toggle-widget\",\n        \"flex rounded-md p-px leading-3 text-buttontextColor shadow-lg transition hover:scale-125\",\n        `${disabled ? \"bg-gray-600\" : \"bg-primaryAccent\"}`\n      )}\n      data-test-id={dataTestId}\n      onClick={disabled ? undefined : onClick}\n      style={{ background: showNag ? AWESOME_BACKGROUND : \"\" }}\n    >\n      {children}\n    </button>\n  );\n};\n\nconst ContinueToPrevious: FC<{ showNag: boolean; onClick: () => void; disabled: boolean }> = ({\n  showNag,\n  onClick,\n  disabled,\n}) => (\n  <QuickActionButton\n    dataTestId=\"ContinueToPreviousButton\"\n    showNag={showNag}\n    onClick={onClick}\n    disabled={disabled}\n  >\n    <MaterialIcon>navigate_before</MaterialIcon>\n  </QuickActionButton>\n);\n\nconst ContinueToNext: FC<{ showNag: boolean; onClick: () => void; disabled: boolean }> = ({\n  showNag,\n  onClick,\n  disabled,\n}) => (\n  <QuickActionButton\n    dataTestId=\"ContinueToNextButton\"\n    showNag={showNag}\n    onClick={onClick}\n    disabled={disabled}\n  >\n    <MaterialIcon>navigate_next</MaterialIcon>\n  </QuickActionButton>\n);\n\nconst ToggleLogPoint: FC<{ showNag: boolean; onClick: () => void; point?: Point }> = ({\n  showNag,\n  onClick,\n  point,\n}) => {\n  const icon = point?.shouldLog ? \"remove\" : \"add\";\n\n  return (\n    <QuickActionButton dataTestId=\"ToggleLogpointButton\" showNag={showNag} onClick={onClick}>\n      <MaterialIcon>{icon}</MaterialIcon>\n    </QuickActionButton>\n  );\n};\n\nfunction QuickActions({\n  columnIndex,\n  focusRange,\n  lineIndex,\n  keyModifiers,\n  onMouseDown,\n  point,\n  sourceId,\n  targetNode,\n}: {\n  columnIndex: number;\n  focusRange: TimeStampedPointRange | null;\n  lineIndex: number;\n  keyModifiers: KeyModifiers;\n  onMouseDown: MouseEventHandler;\n  point?: Point;\n  sourceId: SourceId;\n  targetNode: HTMLElement;\n}) {\n  const [height, setHeight] = useState(18);\n  useEffect(() => {\n    const animationFrameId = requestAnimationFrame(() =>\n      setHeight(targetNode.getBoundingClientRect().height)\n    );\n\n    return () => cancelAnimationFrame(animationFrameId);\n  }, [targetNode]);\n\n  const isMetaActive = keyModifiers.meta;\n  const isShiftActive = keyModifiers.shift;\n  const dispatch = useAppDispatch();\n  const executionPoint = useAppSelector(getExecutionPoint);\n  const { nags } = hooks.useGetUserInfo();\n  const showNag = shouldShowNag(nags, Nag.FIRST_BREAKPOINT_ADD);\n  const { value: enableLargeText } = useFeature(\"enableLargeText\");\n\n  const replayClient = useContext(ReplayClientContext);\n  const { addPoint, deletePoints, editPoint } = useContext(PointsContext);\n  const source = getSource(replayClient, sourceId);\n  const fileName = source ? getSourceFileName(source) : null;\n\n  const lineNumber = lineIndex + 1;\n\n  const [hitPoints, hitPointStatus] = getHitPointsForLocationSuspense(\n    replayClient,\n    {\n      sourceId,\n      column: columnIndex,\n      line: lineNumber,\n    },\n    null,\n    focusRange\n  );\n\n  const symbols = useAppSelector(state =>\n    source ? getSymbols(state, { id: source.sourceId, url: source.url }) : null\n  );\n\n  const onToggleLogPoint = () => {\n    if (point) {\n      if (point.shouldLog) {\n        if (point.shouldBreak) {\n          editPoint(point.id, { shouldLog: false });\n        } else {\n          deletePoints(point.id);\n        }\n      } else {\n        const closestFunction = symbols\n          ? findClosestFunction(symbols, { column: columnIndex, line: lineNumber })\n          : null;\n        let content = closestFunction\n          ? `\"${closestFunction.name}\", ${lineNumber}`\n          : `\"${fileName!}\", ${lineNumber}`;\n\n        editPoint(point.id, {\n          content,\n          shouldLog: true,\n        });\n      }\n    } else {\n      const closestFunction = symbols\n        ? findClosestFunction(symbols, { column: columnIndex, line: lineNumber })\n        : null;\n      let content = closestFunction\n        ? `\"${closestFunction.name}\", ${lineNumber}`\n        : `\"${fileName!}\", ${lineNumber}`;\n\n      addPoint(\n        {\n          content,\n          shouldLog: true,\n        },\n        {\n          column: columnIndex,\n          line: lineNumber,\n          sourceId,\n        }\n      );\n    }\n  };\n\n  let next: PointDescription | undefined, prev: PointDescription | undefined;\n\n  const error = hitPointStatus === \"too-many-points-to-find\";\n\n  if (!error && executionPoint) {\n    prev = findLast(hitPoints, p => compareNumericStrings(p.point, executionPoint) < 0);\n    next = hitPoints.find(p => compareNumericStrings(p.point, executionPoint) > 0);\n  }\n\n  const onContinueToNext = () => {\n    if (next) {\n      dispatch(seek(next.point, next.time, true));\n    }\n  };\n  const onContinueToPrevious = () => {\n    if (prev) {\n      dispatch(seek(prev.point, prev.time, true));\n    }\n  };\n\n  let button;\n\n  if (isMetaActive && isShiftActive) {\n    button = (\n      <ContinueToPrevious showNag={showNag} onClick={onContinueToPrevious} disabled={!prev} />\n    );\n  } else if (isMetaActive) {\n    button = <ContinueToNext showNag={showNag} onClick={onContinueToNext} disabled={!next} />;\n  } else if (hitPoints.length > 0) {\n    button = <ToggleLogPoint point={point} showNag={showNag} onClick={onToggleLogPoint} />;\n  }\n\n  return (\n    <div\n      className={classNames(\n        \"line-action-button absolute z-50 flex translate-x-full transform flex-row space-x-px\",\n        enableLargeText && \"bottom-0.5\"\n      )}\n      // This is necessary so that we don't move the CodeMirror cursor while clicking.\n      onMouseDown={onMouseDown}\n      style={{\n        top: `-${(1 / 2) * (18 - height)}px`,\n        right: \"var(--print-statement-right-offset)\",\n      }}\n    >\n      {button}\n    </div>\n  );\n}\n\nfunction ToggleWidgetButton() {\n  const { points } = useContext(PointsContext);\n  const { focusedSourceId, hoveredLineIndex, hoveredLineNode, visibleLines } =\n    useContext(SourcesContext);\n\n  const replayClient = useContext(ReplayClientContext);\n\n  const { range: focusRange } = useContext(FocusContext);\n\n  if (!focusedSourceId || !visibleLines || !hoveredLineNode || hoveredLineIndex === null) {\n    return null;\n  }\n\n  const lineNumber = hoveredLineIndex + 1;\n\n  const point = points.find((b: any) => b.location.line === lineNumber);\n\n  const onMouseDown = (event: MouseEvent) => {\n    // This keeps the cursor in CodeMirror from moving after clicking on the button.\n    event.stopPropagation();\n  };\n\n  // This widget floats to the left, beside the line number gutter.\n  // It should always add a new Point for the left-most column, regardless of the column breakpoints setting.\n  let firstBreakableColumnIndex: number | null = null;\n\n  const hitCounts = getSourceHitCountsSuspense(\n    replayClient,\n    focusedSourceId,\n    visibleLines,\n    focusRange\n  );\n  const hitCountsForLine = hitCounts.get(lineNumber)!;\n  if (hitCountsForLine) {\n    firstBreakableColumnIndex = hitCountsForLine.firstBreakableColumnIndex;\n  }\n\n  if (firstBreakableColumnIndex === null) {\n    return null;\n  }\n\n  return createPortal(\n    <KeyModifiersContext.Consumer>\n      {keyModifiers => (\n        <QuickActions\n          columnIndex={firstBreakableColumnIndex!}\n          focusRange={focusRange}\n          lineIndex={hoveredLineIndex}\n          onMouseDown={onMouseDown}\n          point={point}\n          sourceId={focusedSourceId}\n          targetNode={hoveredLineNode}\n          keyModifiers={keyModifiers}\n        />\n      )}\n    </KeyModifiersContext.Consumer>,\n    hoveredLineNode\n  );\n}\n\nexport default function ToggleWidgetButtonSuspenseWrapper() {\n  return (\n    <Suspense fallback={null}>\n      <ToggleWidgetButton />\n    </Suspense>\n  );\n}\n","import classNames from \"classnames\";\nimport { useContext, useEffect } from \"react\";\n\nimport { PointsContext } from \"bvaughn-architecture-demo/src/contexts/PointsContext\";\nimport { getDocument, resizeBreakpointGutter } from \"devtools/client/debugger/src/utils/editor\";\nimport type { SourceEditor } from \"devtools/client/debugger/src/utils/editor/source-editor\";\nimport { features } from \"devtools/client/debugger/src/utils/prefs\";\nimport { getSelectedSource } from \"ui/reducers/sources\";\nimport { useAppSelector } from \"ui/setup/hooks\";\n\nconst { codeFolding } = features;\n\nexport default function useEditorBreakpoints(sourceEditor: SourceEditor | null) {\n  const selectedSource = useAppSelector(getSelectedSource);\n\n  const { deletePoints, editPoint, points } = useContext(PointsContext);\n\n  useEffect(() => {\n    if (!points || !selectedSource || !sourceEditor) {\n      return;\n    }\n\n    const { editor } = sourceEditor;\n\n    const doc = getDocument(selectedSource.id);\n    if (!doc) {\n      return;\n    }\n\n    // We only need to render one gutter breakpoint per line.\n    // This Set is used to track which lines we've already rendered.\n    const renderedLines = new Set();\n\n    points.forEach(point => {\n      if (!point.shouldBreak) {\n        return;\n      }\n\n      const lineNumber = point.location.line;\n      if (renderedLines.has(lineNumber)) {\n        return;\n      }\n\n      renderedLines.add(lineNumber);\n\n      const marker = makeMarker();\n      marker.addEventListener(\"click\", event => {\n        if ((event.ctrlKey && event.button === 0) || event.button === 2) {\n          // Ignore right clicks\n          return;\n        }\n\n        event.stopPropagation();\n        event.preventDefault();\n\n        if (point.shouldLog) {\n          editPoint(point.id, { shouldBreak: false });\n        } else {\n          deletePoints(\n            ...points\n              .filter(({ location }) => location.line === point.location.line)\n              .map(({ id }) => id)\n          );\n        }\n      });\n      marker.addEventListener(\"contextmenu\", event => {\n        event.stopPropagation();\n        event.preventDefault();\n      });\n\n      const lineIndex = lineNumber - 1;\n      editor.setGutterMarker(lineIndex, \"breakpoints\", marker);\n      editor.addLineClass(lineIndex, \"line\", \"new-breakpoint\");\n      editor.removeLineClass(lineIndex, \"line\", \"breakpoint-disabled\");\n\n      if (!point.shouldBreak) {\n        editor.addLineClass(lineIndex, \"line\", \"breakpoint-disabled\");\n      }\n    });\n\n    resizeBreakpointGutter(editor);\n\n    return () => {\n      points.forEach(point => {\n        if (!point.shouldBreak) {\n          return;\n        }\n\n        const lineNumber = point.location.line;\n        const lineIndex = lineNumber - 1;\n        editor.setGutterMarker(lineIndex, \"breakpoints\", null);\n        editor.removeLineClass(lineIndex, \"line\", \"new-breakpoint\");\n        editor.removeLineClass(lineIndex, \"line\", \"breakpoint-disabled\");\n      });\n    };\n  }, [deletePoints, editPoint, points, selectedSource, sourceEditor]);\n}\n\nconst BREAKPOINT = document.createElement(\"div\");\nBREAKPOINT.innerHTML =\n  '<svg viewBox=\"0 0 60 15\" width=\"60\" height=\"15\"><path d=\"M53.07.5H1.5c-.54 0-1 .46-1 1v12c0 .54.46 1 1 1h51.57c.58 0 1.15-.26 1.53-.7l4.7-6.3-4.7-6.3c-.38-.44-.95-.7-1.53-.7z\"/></svg>';\n\nfunction makeMarker(): HTMLDivElement {\n  const marker = BREAKPOINT.cloneNode(true) as HTMLDivElement;\n  marker.className = classNames(\"editor new-breakpoint\", {\n    \"folding-enabled\": codeFolding,\n  });\n\n  return marker;\n}\n","import { Doc } from \"codemirror\";\nimport isEmpty from \"lodash/isEmpty\";\nimport range from \"lodash/range\";\nimport { useLayoutEffect, useRef } from \"react\";\n\nimport { PartialLocation } from \"devtools/client/debugger/src/actions/sources\";\nimport {\n  HighlightedRange,\n  PauseFrame,\n  getHighlightedLineRange,\n  getSelectedFrameSuspense,\n} from \"devtools/client/debugger/src/selectors\";\nimport { endOperation, startOperation } from \"devtools/client/debugger/src/utils/editor\";\nimport {\n  getDocument,\n  hasDocument,\n} from \"devtools/client/debugger/src/utils/editor/source-documents\";\nimport SourceEditor from \"devtools/client/debugger/src/utils/editor/source-editor\";\nimport {\n  SourceContent,\n  getSelectedLocation,\n  getSelectedSourceWithContent,\n} from \"ui/reducers/sources\";\nimport { useAppSelector } from \"ui/setup/hooks\";\n\ntype PrevProps = {\n  highlightedLineRange: HighlightedRange | null;\n  lineIndex: number | null;\n  selectedLocation: PartialLocation | null;\n  selectedSource: SourceContent | null;\n};\n\n// This hook combines legacy HighlightLine and HighlightLines \"headless\" components.\nexport default function useHighlightedLines(editor: SourceEditor | null) {\n  const selectedFrame = useAppSelector(getSelectedFrameSuspense);\n  const selectedLocation = useAppSelector(getSelectedLocation);\n  const selectedSource = useAppSelector(getSelectedSourceWithContent) || null;\n  const highlightedLineRange = useAppSelector(getHighlightedLineRange) || null;\n\n  const prevPropsRef = useRef<PrevProps>({\n    highlightedLineRange: null,\n    lineIndex: null,\n    selectedLocation: null,\n    selectedSource: null,\n  });\n\n  // Update highlighted line when selected location changes\n  useLayoutEffect(() => {\n    if (editor === null) {\n      // This hook only uses prev props when there's an Editor.\n      // If the hook is called without an Editor (as part of mounting/remounting) we can bail out early.\n      return;\n    }\n\n    const prevProps = prevPropsRef.current;\n\n    const lineIndex = selectedLocation?.line ? selectedLocation.line - 1 : null;\n    const prevLineIndex = prevProps.selectedLocation?.line\n      ? prevProps.selectedLocation.line - 1\n      : null;\n    if (lineIndex !== prevLineIndex) {\n      return;\n    }\n\n    startOperation();\n\n    // Clear highlighted for previous line\n    if (prevLineIndex != null) {\n      if (isDocumentReady(prevProps.selectedSource, prevProps.selectedLocation!)) {\n        const { sourceId: prevSourceId } = prevProps.selectedLocation!;\n        const doc = getDocument(prevSourceId);\n\n        // @ts-expect-error method doesn't exist\n        doc.removeLineClass(prevLineIndex, \"line\", \"highlight-line\");\n      }\n    }\n\n    // Highlight new line\n    if (lineIndex != null && selectedLocation != null) {\n      const { sourceId } = selectedLocation;\n      if (\n        shouldSetHighlightLine(selectedSource, selectedLocation, lineIndex, prevProps.lineIndex)\n      ) {\n        if (isDebugLine(selectedFrame, selectedLocation!)) {\n          const doc = getDocument(sourceId);\n          // @ts-expect-error method doesn't exist\n          doc.addLineClass(lineIndex, \"line\", \"highlight-line\");\n          resetHighlightLine(doc, lineIndex);\n        }\n      }\n    }\n\n    endOperation();\n\n    // Update prev props for next render\n    prevProps.lineIndex = lineIndex;\n    prevProps.selectedLocation = selectedLocation;\n    prevProps.selectedSource = selectedSource;\n  }, [editor, selectedFrame, selectedLocation, selectedSource]);\n\n  // Update highlighted line range when selected location changes\n  useLayoutEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    const { codeMirror } = editor;\n    const { highlightedLineRange: prevHighlightedLineRange } = prevPropsRef.current;\n\n    // Clear previously highlighted line range\n    if (prevHighlightedLineRange !== null && isEmpty(prevHighlightedLineRange)) {\n      const { start, end } = prevHighlightedLineRange;\n      codeMirror.operation(() => {\n        range(start! - 1, end).forEach(line => {\n          codeMirror.removeLineClass(line, \"line\", \"highlight-lines\");\n        });\n      });\n    }\n\n    // Highlight new line range\n    if (highlightedLineRange !== null && !isEmpty(highlightedLineRange)) {\n      const { start, end } = highlightedLineRange;\n      codeMirror.operation(() => {\n        editor.alignLine(start!);\n        range(start! - 1, end).forEach(line => {\n          codeMirror.addLineClass(line, \"line\", \"highlight-lines\");\n        });\n      });\n    }\n\n    // Update prev props for next render\n    prevPropsRef.current.highlightedLineRange = highlightedLineRange;\n  }, [editor, highlightedLineRange]);\n}\n\nfunction isDebugLine(selectedFrame: PauseFrame | null, selectedLocation: PartialLocation) {\n  if (!selectedFrame) {\n    return;\n  }\n\n  return (\n    selectedLocation &&\n    selectedFrame.location.sourceId == selectedLocation.sourceId &&\n    selectedFrame.location.line == selectedLocation.line\n  );\n}\n\nfunction isDocumentReady(\n  selectedSource?: SourceContent | null,\n  selectedLocation?: PartialLocation\n) {\n  return (\n    selectedLocation &&\n    selectedSource &&\n    selectedSource.value &&\n    hasDocument(selectedLocation.sourceId)\n  );\n}\n\nfunction resetHighlightLine(doc: Doc | null, lineIndex: number) {\n  const editorWrapper = document.querySelector(\".editor-wrapper\");\n  if (editorWrapper === null) {\n    return;\n  }\n\n  const duration = parseInt(\n    getComputedStyle(editorWrapper).getPropertyValue(\"--highlight-line-duration\"),\n    10\n  );\n\n  if (doc) {\n    setTimeout(() => {\n      // @ts-ignore\n      doc.removeLineClass(lineIndex, \"line\", \"highlight-line\");\n    }, duration);\n  }\n}\n\nfunction shouldSetHighlightLine(\n  selectedSource: SourceContent | null,\n  selectedLocation: PartialLocation,\n  lineIndex: number | null,\n  prevLineIndex: number | null\n) {\n  if (!isDocumentReady(selectedSource, selectedLocation)) {\n    return false;\n  } else if (lineIndex === prevLineIndex) {\n    return false;\n  } else {\n    return true;\n  }\n}\n","import { Location } from \"@replayio/protocol\";\nimport debounce from \"lodash/debounce\";\nimport { RefObject, useContext, useLayoutEffect, useRef, useState } from \"react\";\n\nimport { PointsContext } from \"bvaughn-architecture-demo/src/contexts/PointsContext\";\nimport { SourcesContext } from \"bvaughn-architecture-demo/src/contexts/SourcesContext\";\nimport { getBreakpointPositionsAsync } from \"bvaughn-architecture-demo/src/suspense/SourcesCache\";\nimport { PartialLocation } from \"devtools/client/debugger/src/actions/sources\";\nimport { updateCursorPosition, updateViewport } from \"devtools/client/debugger/src/actions/ui\";\nimport {\n  SymbolEntry,\n  ThreadContext,\n  getSymbols,\n  getThreadContext,\n} from \"devtools/client/debugger/src/selectors\";\nimport {\n  clearDocuments,\n  clearEditor,\n  endOperation,\n  getDocument,\n  getEditor,\n  getSourceLocationFromMouseEvent,\n  hasDocument,\n  lineAtHeight,\n  onLineMouseOver,\n  onMouseScroll,\n  onTokenMouseOver,\n  scrollToColumn,\n  showErrorMessage,\n  showLoading,\n  showSourceText,\n  startOperation,\n  toEditorColumn,\n} from \"devtools/client/debugger/src/utils/editor\";\nimport type {\n  EditorWithDoc,\n  SourceEditor,\n} from \"devtools/client/debugger/src/utils/editor/source-editor\";\nimport { getIndentation } from \"devtools/client/debugger/src/utils/indentation\";\nimport { resizeBreakpointGutter, resizeToggleButton } from \"devtools/client/debugger/src/utils/ui\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { Point } from \"shared/client/types\";\nimport {\n  SourceContent,\n  SourceDetails,\n  getSelectedLocation,\n  getSelectedSource,\n  getSelectedSourceWithContent,\n} from \"ui/reducers/sources\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\nimport { isFirefox } from \"ui/utils/environment\";\nimport { LoadingStatus } from \"ui/utils/LoadingStatus\";\n\nimport useEditorBreakpoints from \"./Breakpoints/useBreakpoints\";\nimport useHighlightedLines from \"./useHighlightedLines\";\nimport useLineHitCounts from \"./useLineHitCounts\";\n\ntype InstanceProps = {\n  cx: ThreadContext;\n  lastClientX: number;\n  lastClientY: number;\n  points: Point[];\n  selectedLocation: PartialLocation | null;\n  selectedSource: SourceDetails | null;\n  selectedSourceContent: SourceContent | null;\n  symbols: SymbolEntry | null;\n};\n\ntype PrevProps = Partial<Omit<InstanceProps, \"cx\" | \"lastClientX\" | \"lastClientY\">>;\n\nexport default function useEditor(\n  containerRef: RefObject<HTMLDivElement>,\n  setContextMenu: (event: MouseEvent | null) => void\n): SourceEditor | null {\n  const dispatch = useAppDispatch();\n\n  const cx = useAppSelector(getThreadContext);\n  const selectedLocation = useAppSelector(getSelectedLocation);\n  const selectedSource = useAppSelector(getSelectedSource) || null;\n  const selectedSourceContent = useAppSelector(getSelectedSourceWithContent) || null;\n  const symbols = useAppSelector(state => getSymbols(state, selectedSource as any));\n\n  const replayClient = useContext(ReplayClientContext);\n  const { addPoint, deletePoints, editPoint, points } = useContext(PointsContext);\n  const { setHoveredLocation, setVisibleLines } = useContext(SourcesContext);\n\n  const instancePropsRef = useRef<InstanceProps>({\n    cx,\n    lastClientX: 0,\n    lastClientY: 0,\n    points: [],\n    selectedLocation,\n    selectedSource,\n    selectedSourceContent,\n    symbols,\n  });\n  const prevPropsRef = useRef<PrevProps>({\n    selectedLocation: null,\n    selectedSource: null,\n    selectedSourceContent: null,\n    symbols: null,\n  });\n\n  const [editor, setEditor] = useState<SourceEditor | null>(null);\n\n  // Create and destroy the SourceEditor on mount/unmount.\n  // This effect should come before the others because it (re)creates the Editor instance the others reference.\n  //\n  // Only stable values should be used as dependencies (e.g. React refs, state updater functions, Redux dispatch)\n  useLayoutEffect(() => {\n    const editor = getEditor();\n\n    setEditor(editor);\n\n    const container = containerRef.current!;\n\n    // disables the default search shortcuts\n    // @ts-expect-error initShortcuts doesn't exist\n    editor._initShortcuts = () => {};\n\n    // HACK\n    // Code Mirror 5 does not properly handle remounting by the Offscreen API\n    // so we have to manually clean up the DOM in between.\n    if (container instanceof HTMLElement) {\n      const editorMount: HTMLElement = container.querySelector(\".editor-mount\")!;\n      while (editorMount.firstChild) {\n        editorMount.removeChild(editorMount.firstChild);\n      }\n      editor.appendToLocalElement(editorMount);\n    }\n\n    // Set code editor wrapper to be focusable\n    const codeMirrorWrapper = editor.codeMirror.getWrapperElement();\n    codeMirrorWrapper.tabIndex = 0;\n\n    // Destroy the editor on unmount\n    return () => {\n      editor.destroy();\n\n      setEditor(null);\n\n      clearDocuments();\n    };\n  }, [containerRef]);\n\n  // Update \"instance\" props after each commit;\n  // This simplifies the layout effects below that attach event listeners,\n  // since it allows them to only run on-mount rather than after every update.\n  //\n  // This hook should run before other event handler effects to ensure \"instance\" props are updated first.\n  useLayoutEffect(() => {\n    const instanceProps = instancePropsRef.current;\n    instanceProps.cx = cx;\n    instanceProps.points = points;\n    instanceProps.selectedLocation = selectedLocation;\n    instanceProps.selectedSource = selectedSource;\n    instanceProps.selectedSourceContent = selectedSourceContent;\n    instanceProps.symbols = symbols;\n  });\n\n  // Update editor and/or react to changed props after props render\n  useLayoutEffect(() => {\n    if (editor === null) {\n      // This hook only uses prev props when there's an Editor.\n      // If the hook is called without an Editor (as part of mounting/remounting) we can bail out early.\n      return;\n    }\n\n    const nextProps = instancePropsRef.current;\n    const prevProps = prevPropsRef.current;\n\n    const { selectedSource, selectedSourceContent, selectedLocation, symbols } = nextProps;\n    const { selectedSource: prevSelectedSource } = prevProps;\n\n    startOperation();\n    setTextHelper(editor, prevPropsRef.current, nextProps);\n    scrollToLocationHelper(editor, prevPropsRef.current, nextProps);\n    endOperation();\n\n    if (selectedSource != prevSelectedSource) {\n      dispatch(updateViewport);\n\n      resizeBreakpointGutter(editor.codeMirror);\n      resizeToggleButton(editor.codeMirror);\n    }\n\n    prevProps.selectedLocation = selectedLocation;\n    prevProps.selectedSource = selectedSource;\n    prevProps.selectedSourceContent = selectedSourceContent;\n    prevProps.symbols = symbols;\n  }, [dispatch, editor, selectedLocation, selectedSource, selectedSourceContent, symbols]);\n\n  // Add event listeners to SourceEditor\n  // Only stable values should be used as dependencies (e.g. React refs, state updater functions, Redux dispatch)\n  // The Editor instance is an exception; ideally it would be stable as well but Code Mirror 5 doesn't handle remounting\n  useLayoutEffect(() => {\n    if (editor === null) {\n      return;\n    }\n\n    const { codeMirror } = editor;\n\n    const openMenuHelper = (event: MouseEvent) => {\n      event.stopPropagation();\n      event.preventDefault();\n\n      const { selectedSource } = instancePropsRef.current;\n      if (!selectedSource) {\n        return;\n      }\n\n      const target = event.target;\n      const line = lineAtHeight(editor, event);\n      if (typeof line != \"number\") {\n        return;\n      } else if ((target as HTMLElement).getAttribute(\"id\") === \"columnmarker\") {\n        return;\n      }\n\n      setContextMenu(event);\n    };\n\n    const onCodeMirrorClick = (event: MouseEvent) => {\n      const { selectedSource } = instancePropsRef.current;\n      if (selectedSource) {\n        dispatch(\n          updateCursorPosition(getSourceLocationFromMouseEvent(editor, selectedSource, event))\n        );\n      }\n    };\n\n    const onCodeMirrorContextMenu = (_: any, __: number, ___: any, event: MouseEvent) => {};\n\n    const onCodeMirrorGutterClick = async (\n      cm: any,\n      lineIndex: number,\n      gutter: any,\n      clickEvent: MouseEvent\n    ) => {\n      if (editor == null || selectedSource == null) {\n        return;\n      }\n\n      if (typeof lineIndex !== \"number\") {\n        return;\n      }\n\n      // ignore right clicks in the gutter\n      if ((clickEvent.ctrlKey && clickEvent.button === 0) || clickEvent.button === 2) {\n        return;\n      }\n\n      // Don't add a breakpoint if the user clicked on something other than the gutter line number,\n      // e.g., the blank gutter space caused by adding a CodeMirror widget.\n      if (!(clickEvent.target as HTMLElement).classList.contains(\"CodeMirror-linenumber\")) {\n        return;\n      }\n\n      const line = lineIndex + 1;\n      const [, breakpointPositionsByLine] = await getBreakpointPositionsAsync(\n        replayClient,\n        selectedSource.id\n      );\n      if (breakpointPositionsByLine.size === 0) {\n        return;\n      }\n      const breakpointsForLine = breakpointPositionsByLine.get(line);\n      if (breakpointsForLine == null || breakpointsForLine.columns.length === 0) {\n        return;\n      }\n\n      const firstBreakableColumn = breakpointsForLine.columns[0];\n\n      const location: Location = {\n        column: firstBreakableColumn,\n        line,\n        sourceId: selectedSource.id,\n      };\n\n      const points = instancePropsRef.current.points;\n      const existingPoint = points.find(\n        point =>\n          point.location.sourceId === location.sourceId &&\n          point.location.line === location.line &&\n          point.location.column === location.column\n      );\n\n      if (existingPoint != null) {\n        if (existingPoint.shouldBreak) {\n          if (existingPoint.shouldLog) {\n            editPoint(existingPoint.id, { shouldBreak: false });\n          } else {\n            deletePoints(existingPoint.id);\n          }\n        } else {\n          editPoint(existingPoint.id, { shouldBreak: true });\n        }\n      } else {\n        addPoint({ shouldBreak: true }, location);\n      }\n    };\n\n    const onCodeMirrorKeyDown = (event: KeyboardEvent) => {\n      const { key, target } = event;\n      const codeWrapper = codeMirror.getWrapperElement();\n      const textArea = codeWrapper.querySelector(\"textArea\");\n\n      if (key === \"ArrowRight\" || key === \"ArrowLeft\") {\n        event.preventDefault();\n      } else if (key === \"Escape\" && target == textArea) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        codeWrapper.focus();\n      } else if (key === \"Enter\" && target == codeWrapper) {\n        event.preventDefault();\n\n        // Focus into editor's text area\n        (textArea as HTMLElement)!.focus();\n      }\n    };\n\n    const onCodeMirrorScrollDebounced = debounce(() => {\n      const { lastClientX, lastClientY } = instancePropsRef.current;\n      dispatch(updateViewport());\n      onMouseScroll(codeMirror, lastClientX, lastClientY);\n\n      const { viewFrom, viewTo } = editor.editor.display;\n      setVisibleLines(viewFrom, viewTo);\n    }, 75);\n\n    const onDocumentMouseMove = (event: MouseEvent) => {\n      // Store mouse coords so we can use them during a CodeMirror \"scroll\" event.\n      const instanceProps = instancePropsRef.current;\n      instanceProps.lastClientX = event.clientX;\n      instanceProps.lastClientY = event.clientY;\n    };\n\n    const onCodeMirrorLineMouseEnter = ({\n      columnIndex,\n      lineIndex,\n      lineNumberNode,\n    }: {\n      columnIndex: number;\n      lineIndex: number;\n      lineNumberNode: HTMLElement;\n    }) => {\n      onCodeMirrorLineMouseLeaveDebounced.cancel();\n\n      setHoveredLocation(lineIndex, lineNumberNode);\n    };\n\n    const onCodeMirrorLineMouseLeaveDebounced = debounce(() => {\n      setHoveredLocation(null, null);\n    }, 50);\n\n    const onCodeMirrorMouseOverToken = onTokenMouseOver(codeMirror);\n    const onCodeMirrorMouseOverLine = onLineMouseOver(codeMirror);\n\n    document.addEventListener(\"mousemove\", onDocumentMouseMove);\n\n    // @ts-expect-error Unknown \"gutterClick\" event type\n    codeMirror.on(\"gutterClick\", onCodeMirrorGutterClick);\n    // @ts-expect-error Unknown \"lineMouseEnter\" event type\n    codeMirror.on(\"lineMouseEnter\", onCodeMirrorLineMouseEnter);\n    // @ts-expect-error Unknown \"lineMouseLeave\" event type\n    codeMirror.on(\"lineMouseLeave\", onCodeMirrorLineMouseLeaveDebounced);\n    codeMirror.on(\"scroll\", onCodeMirrorScrollDebounced);\n\n    const codeMirrorWrapper = codeMirror.getWrapperElement();\n    codeMirrorWrapper.addEventListener(\"keydown\", onCodeMirrorKeyDown);\n    codeMirrorWrapper.addEventListener(\"click\", onCodeMirrorClick);\n    codeMirrorWrapper.addEventListener(\"mouseover\", onCodeMirrorMouseOverToken);\n    codeMirrorWrapper.addEventListener(\"mouseover\", onCodeMirrorMouseOverLine);\n\n    let onCodeMirrorGutterContextMenu: Function = null as any;\n    if (!isFirefox()) {\n      onCodeMirrorGutterContextMenu = (_: EditorWithDoc, event: MouseEvent) => {\n        openMenuHelper(event);\n      };\n\n      // @ts-expect-error Handler param types mismatch\n      codeMirror.on(\"contextmenu\", onCodeMirrorContextMenu);\n      // @ts-expect-error Handler param types mismatch\n      codeMirror.on(\"gutterContextMenu\", onCodeMirrorGutterContextMenu);\n    } else {\n      onCodeMirrorGutterContextMenu = (event: MouseEvent) => {\n        openMenuHelper(event);\n      };\n\n      // @ts-expect-error Handler param types mismatch\n      codeMirrorWrapper.addEventListener(\"contextmenu\", onCodeMirrorGutterContextMenu);\n    }\n\n    // Always call once after mounting to handle initial coordinates.\n    onCodeMirrorScrollDebounced();\n\n    return () => {\n      document.removeEventListener(\"mousemove\", onDocumentMouseMove);\n\n      // @ts-expect-error Handler param types mismatch\n      codeMirror.off(\"contextmenu\", onCodeMirrorContextMenu);\n      // @ts-expect-error Unknown \"gutterClick\" event type\n      codeMirror.off(\"gutterClick\", onCodeMirrorGutterClick);\n      // @ts-expect-error Handler param types mismatch\n      codeMirror.off(\"gutterContextMenu\", onCodeMirrorGutterContextMenu);\n      // @ts-expect-error Handler param types mismatch\n      codeMirror.off(\"lineMouseEnter\", onCodeMirrorLineMouseEnter);\n      // @ts-expect-error Handler param types mismatch\n      codeMirror.off(\"lineMouseLeave\", onCodeMirrorLineMouseLeaveDebounced);\n      codeMirror.off(\"scroll\", onCodeMirrorScrollDebounced);\n\n      codeMirrorWrapper.removeEventListener(\"click\", onCodeMirrorClick);\n      codeMirrorWrapper.removeEventListener(\"keydown\", onCodeMirrorKeyDown);\n      codeMirrorWrapper.removeEventListener(\"mouseover\", onCodeMirrorMouseOverToken);\n      codeMirrorWrapper.removeEventListener(\"mouseover\", onCodeMirrorMouseOverLine);\n    };\n  }, [\n    addPoint,\n    deletePoints,\n    editPoint,\n    dispatch,\n    editor,\n    replayClient,\n    selectedSource,\n    // We could use the source content bundled along in the \"Instance Props\" ref,\n    // but it's important for this effect to re-run when the source content changes–\n    // so that things like the visible lines range are re-initialized.\n    selectedSourceContent,\n    setContextMenu,\n    setHoveredLocation,\n    setVisibleLines,\n  ]);\n\n  useHighlightedLines(editor);\n  useLineHitCounts(editor);\n  useEditorBreakpoints(editor);\n\n  return editor;\n}\n\nfunction scrollToLocationHelper(\n  editor: SourceEditor,\n  prevProps: PrevProps,\n  nextProps: InstanceProps\n) {\n  const { selectedLocation, selectedSource, selectedSourceContent, symbols } = nextProps;\n  const {\n    selectedLocation: prevSelectedLocation,\n    selectedSourceContent: prevSelectedSourceContent,\n    symbols: prevSymbols,\n  } = prevProps;\n\n  if (selectedLocation) {\n    let shouldScrollToLocation = false;\n    if (\n      selectedSource &&\n      selectedSourceContent &&\n      // Intentionally bail out if line is 0\n      selectedLocation?.line &&\n      selectedSourceContent?.value\n    ) {\n      const isFirstLoad = prevSelectedSourceContent?.value == null;\n      const locationChanged = prevSelectedLocation !== selectedLocation;\n      const symbolsChanged = prevSymbols !== symbols;\n\n      shouldScrollToLocation = isFirstLoad || locationChanged || symbolsChanged;\n    }\n\n    if (shouldScrollToLocation) {\n      const lineIndex = selectedLocation.line! - 1;\n\n      let column = 0;\n      if (hasDocument(selectedSource!.id)) {\n        const doc = getDocument(selectedSource!.id);\n        const lineText = doc.getLine(lineIndex);\n\n        column = toEditorColumn(lineText, selectedLocation.column || 0);\n        column = Math.max(column, getIndentation(lineText));\n      }\n\n      scrollToColumn(editor.codeMirror, lineIndex, column);\n    }\n  }\n}\n\nfunction setTextHelper(editor: SourceEditor, prevProps: PrevProps, nextProps: InstanceProps): void {\n  const {\n    selectedSource: prevSelectedSource,\n    selectedSourceContent: prevSelectedSourceContent,\n    symbols: prevSymbols,\n  } = prevProps;\n  const { selectedSource, selectedSourceContent, symbols } = nextProps;\n\n  if (!selectedSource || !selectedSourceContent) {\n    clearEditor(editor);\n  } else if (!selectedSourceContent.value) {\n    showLoading(editor);\n  } else if (selectedSourceContent.status === LoadingStatus.ERRORED) {\n    let { value } = selectedSourceContent.value;\n    if (typeof value !== \"string\") {\n      value = \"Unexpected source error\";\n    }\n    showErrorMessage(editor, value);\n  } else if (\n    prevSelectedSource !== selectedSource ||\n    prevSelectedSourceContent !== selectedSourceContent ||\n    prevSymbols !== symbols\n  ) {\n    showSourceText(editor, selectedSource, selectedSourceContent.value, symbols as any);\n  }\n}\n","import { useContext, useEffect, useLayoutEffect, useMemo, useRef } from \"react\";\n\nimport { FocusContext } from \"bvaughn-architecture-demo/src/contexts/FocusContext\";\nimport { SourcesContext } from \"bvaughn-architecture-demo/src/contexts/SourcesContext\";\nimport {\n  getCachedMinMaxSourceHitCounts,\n  getSourceHitCountsSuspense,\n} from \"bvaughn-architecture-demo/src/suspense/SourcesCache\";\nimport type { SourceEditor } from \"devtools/client/debugger/src/utils/editor/source-editor\";\nimport { resizeBreakpointGutter } from \"devtools/client/debugger/src/utils/ui\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { LineNumberToHitCountMap } from \"shared/client/types\";\nimport { useFeature, useStringPref } from \"ui/hooks/settings\";\nimport { getFocusRegion } from \"ui/reducers/timeline\";\nimport { useAppSelector } from \"ui/setup/hooks\";\nimport { FocusRegion } from \"ui/state/timeline\";\n\nimport styles from \"./LineHitCounts.module.css\";\n\nexport default function useLineHitCounts(sourceEditor: SourceEditor | null) {\n  const { value: disableUnHitLines } = useFeature(\"disableUnHitLines\");\n  const { value: hitCountsEnabled } = useFeature(\"hitCounts\");\n  const { value: hitCountsMode, update: updateHitCountsMode } = useStringPref(\"hitCounts\");\n\n  const { focusedSourceId: sourceId, hoveredLineIndex, visibleLines } = useContext(SourcesContext);\n\n  const replayClient = useContext(ReplayClientContext);\n  const { range: focusRange } = useContext(FocusContext);\n  const hitCounts =\n    sourceId && visibleLines\n      ? getSourceHitCountsSuspense(replayClient, sourceId, visibleLines, focusRange)\n      : null;\n\n  // Min/max hit counts are used to determine heat map color.\n  const [minHitCount, maxHitCount] = sourceId\n    ? getCachedMinMaxSourceHitCounts(sourceId, focusRange)\n    : [null, null];\n\n  const focusRegion = useAppSelector(getFocusRegion);\n\n  const previousFocusRegion = useRef<FocusRegion | null>(null);\n  const previousHitCounts = useRef<LineNumberToHitCountMap | null>(null);\n\n  const isCollapsed = hitCountsMode == \"hide-counts\";\n\n  const isCurrentLineNumberValid = hoveredLineIndex != null;\n\n  const lower = visibleLines ? visibleLines.start.line : null;\n  const upper = visibleLines ? visibleLines.end.line : null;\n\n  // Make sure we have enough room to fit large hit count numbers in the gutter markers\n  const numCharsToFit = useMemo(() => {\n    if (maxHitCount === null) {\n      return 0;\n    }\n\n    const numCharsToFit =\n      maxHitCount < 1000\n        ? Math.max(2, maxHitCount.toString().length)\n        : `${(maxHitCount / 1000).toFixed(1)}k`.length;\n    return numCharsToFit;\n  }, [maxHitCount]);\n\n  const gutterWidth = isCollapsed ? \"5px\" : `${numCharsToFit + 1}ch`;\n\n  // Save `isCollapsed` in a ref so we only create `marker.onClick` callbacks once\n  // TODO Candidate for the eventual `useEvent` hook?\n  const isCollapsedRef = useRef(isCollapsed);\n\n  useLayoutEffect(() => {\n    isCollapsedRef.current = isCollapsed;\n  }, [isCollapsed]);\n\n  useLayoutEffect(() => {\n    if (!sourceEditor) {\n      return;\n    }\n\n    const { editor } = sourceEditor;\n\n    // Tell CodeMirror to actually create a gutter column for hit counts\n    editor.setOption(\"gutters\", [\n      \"breakpoints\",\n      \"CodeMirror-linenumbers\",\n      { className: \"hit-markers\", style: `width: ${gutterWidth}` },\n    ]);\n    resizeBreakpointGutter(editor);\n\n    // HACK\n    // When hit counts are shown, the hover button (to add a log point) should not overlap with the gutter.\n    // That component doesn't know about hit counts though, so we can inform its position via a CSS variable.\n    const gutterElement = sourceEditor.codeMirror.getGutterElement() as HTMLElement;\n\n    gutterElement.parentElement!.style.setProperty(\"--hit-count-gutter-width\", `-${gutterWidth}`);\n\n    // If hit counts are shown, the button should not overlap with the gutter.\n    // The gutter size changes though based on the number of hits, so we use a CSS variable.\n    gutterElement.parentElement!.style.setProperty(\n      \"--print-statement-right-offset\",\n      hitCountsMode === \"show-counts\"\n        ? \"calc(var(--hit-count-gutter-width) - 6px)\"\n        : hitCountsMode === \"hide-counts\"\n        ? \"-10px\"\n        : \"0px\"\n    );\n\n    return () => {\n      try {\n        editor.setOption(\"gutters\", [\"breakpoints\", \"CodeMirror-linenumbers\"]);\n      } catch (e) {\n        console.warn(e);\n      }\n      resizeBreakpointGutter(editor);\n    };\n  }, [gutterWidth, sourceEditor, isCollapsed, hitCountsMode]);\n\n  useLayoutEffect(() => {\n    if (!hitCountsEnabled) {\n      return;\n    }\n\n    if (sourceEditor === null) {\n      return;\n    }\n\n    const { editor } = sourceEditor;\n\n    const drawLines = () => {\n      if (lower === null || upper === null) {\n        return;\n      }\n\n      editor.operation(() => {\n        editor.eachLine(lower, upper, lineHandle => {\n          const currentCMLineNumber = editor.getLineNumber(lineHandle);\n          if (currentCMLineNumber === null) {\n            return;\n          }\n\n          // CM uses 0-based indexing. Our hit counts are 1-indexed.\n          let oneIndexedLineNumber = currentCMLineNumber + 1;\n\n          const lineHitCounts = hitCounts?.get(oneIndexedLineNumber);\n\n          // If there are multiple hits for this line, only display the first one.\n          const hits = lineHitCounts ? lineHitCounts.count : 0;\n\n          // We use a gradient to indicate the \"heat\" (the number of hits).\n          // This absolute hit count values are relative, per file.\n          // Cubed root prevents high hit counts from lumping all other values together.\n          const NUM_GRADIENT_COLORS = 3;\n          let className = styles.HitsBadge0;\n          let index = NUM_GRADIENT_COLORS - 1;\n          if (hits > 0 && minHitCount !== null && maxHitCount !== null) {\n            if (minHitCount !== maxHitCount) {\n              index = Math.min(\n                NUM_GRADIENT_COLORS - 1,\n                Math.round(\n                  ((hits - minHitCount) / (maxHitCount - minHitCount)) * NUM_GRADIENT_COLORS\n                )\n              );\n            }\n            className = styles[`HitsBadge${index + 1}`];\n          }\n\n          if (disableUnHitLines) {\n            if (hits > 0) {\n              sourceEditor.codeMirror.removeLineClass(lineHandle, \"line\", \"empty-line\");\n            } else {\n              // If this line wasn't hit any, dim the line number,\n              // even if it's a line that's technically reachable.\n              sourceEditor.codeMirror.addLineClass(lineHandle, \"line\", \"empty-line\");\n            }\n          }\n\n          const info = editor.lineInfo(lineHandle);\n\n          let markerNode: HTMLDivElement;\n          if (info?.gutterMarkers?.[\"hit-markers\"]) {\n            // Retrieve the marker DOM node we already created\n            markerNode = info.gutterMarkers[\"hit-markers\"];\n          } else {\n            markerNode = document.createElement(\"div\");\n            markerNode.onclick = () =>\n              updateHitCountsMode(isCollapsedRef.current ? \"show-counts\" : \"hide-counts\");\n\n            editor.setGutterMarker(lineHandle, \"hit-markers\", markerNode);\n          }\n\n          markerNode.className = className;\n          if (!isCollapsed) {\n            let hitsLabel = \"\";\n            if (hits > 0) {\n              hitsLabel = hits < 1000 ? `${hits}` : `${(hits / 1000).toFixed(1)}k`;\n            }\n            markerNode.textContent = hitsLabel;\n          }\n          markerNode.title = `${hits} hits`;\n        });\n      });\n    };\n\n    let animationFrameId: number | null = 0;\n    const drawLinesRaf = () => {\n      animationFrameId = requestAnimationFrame(drawLines);\n    };\n\n    editor.on(\"change\", drawLinesRaf);\n    editor.on(\"swapDoc\", drawLinesRaf);\n    editor.on(\"scroll\", drawLinesRaf);\n\n    drawLines();\n\n    return () => {\n      if (animationFrameId !== null) {\n        cancelAnimationFrame(animationFrameId);\n      }\n      editor.off(\"change\", drawLinesRaf);\n      editor.off(\"swapDoc\", drawLinesRaf);\n      editor.off(\"scroll\", drawLinesRaf);\n    };\n  }, [\n    disableUnHitLines,\n    hitCountsEnabled,\n    hitCounts,\n    isCollapsed,\n    isCurrentLineNumberValid,\n    focusRegion,\n    lower,\n    maxHitCount,\n    minHitCount,\n    sourceEditor,\n    sourceId,\n    updateHitCountsMode,\n    upper,\n  ]);\n\n  useEffect(() => {\n    // Save the previous references for comparison in `drawLines`\n    previousFocusRegion.current = focusRegion;\n    previousHitCounts.current = hitCounts;\n  }, [focusRegion, hitCounts]);\n}\n","import classnames from \"classnames\";\nimport { RefObject, useEffect, useMemo, useRef, useState } from \"react\";\n\nimport { closeTab } from \"devtools/client/debugger/src/actions/tabs\";\nimport { getActiveSearch, getThreadContext } from \"devtools/client/debugger/src/selectors\";\nimport { getDocument } from \"devtools/client/debugger/src/utils/editor\";\nimport type { SourceEditor } from \"devtools/client/debugger/src/utils/editor/source-editor\";\nimport KeyShortcuts from \"devtools/client/shared/key-shortcuts\";\nimport { ContextMenu, closeContextMenu } from \"ui/actions/contextMenus\";\nimport GutterContextMenu from \"ui/components/ContextMenu/GutterContextMenu\";\nimport { KeyModifiersContext } from \"ui/components/KeyModifiers\";\nimport { EditorNag, NAG_HEIGHT } from \"ui/components/shared/Nags/Nags\";\nimport { getContextMenu } from \"ui/reducers/contextMenus\";\nimport { SourceDetails, getSelectedSource } from \"ui/reducers/sources\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\n\nimport ColumnBreakpoints from \"./ColumnBreakpoints\";\nimport DebugLine from \"./DebugLine\";\nimport EditorLoadingBar from \"./EditorLoadingBar\";\nimport EditorMenu from \"./EditorMenu\";\nimport EmptyLines from \"./EmptyLines\";\nimport LineNumberTooltip from \"./LineNumberTooltip\";\nimport Preview from \"./Preview\";\nimport SearchBar from \"./SearchBar\";\nimport ShortcutsContext from \"./ShortcutsContext\";\nimport ToggleWidgetButton from \"./ToggleWidgetButton\";\nimport useEditor from \"./useEditor\";\n\nconst SEARCH_BAR_HEIGHT_CSS_VAR = \"var(--editor-searchbar-height)\";\n\nexport default function EditorOuter() {\n  const dispatch = useAppDispatch();\n\n  const cx = useAppSelector(getThreadContext);\n  const gutterContextMenu = useAppSelector(getContextMenu);\n  const searchOn = useAppSelector(getActiveSearch) === \"file\";\n  const selectedSource = useAppSelector(getSelectedSource) || null;\n\n  const [contextMenu, setContextMenu] = useState<MouseEvent | null>(null);\n\n  const shortcuts = useMemo(() => new KeyShortcuts({ window, target: document }), []);\n\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const editor = useEditor(containerRef, setContextMenu);\n\n  // Register shortcuts event handlers\n  useEffect(() => {\n    if (editor == null || !selectedSource) {\n      return;\n    }\n\n    const onClosePress = (event: MouseEvent) => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      dispatch(closeTab(cx, selectedSource));\n    };\n\n    // The default Esc command is overridden in the CodeMirror key-map\n    // to allow the Esc keypress event to be caught by the toolbox\n    // and trigger the split console.\n    // Restore it here, but preventDefault if and only if there is a multi-selection.\n    const onEscape = (event: KeyboardEvent) => {\n      const { codeMirror } = editor;\n      if (codeMirror.listSelections().length > 1) {\n        event.preventDefault();\n\n        codeMirror.execCommand(\"singleSelection\");\n      }\n    };\n\n    shortcuts.on(\"CmdOrCtrl+W\", onClosePress);\n    shortcuts.on(\"Esc\", onEscape);\n\n    return () => {\n      shortcuts.off(\"CmdOrCtrl+W\", onClosePress);\n      shortcuts.off(\"Esc\", onEscape);\n    };\n  }, [cx, dispatch, editor, selectedSource, shortcuts]);\n\n  return (\n    <ShortcutsContext.Provider value={shortcuts}>\n      <div\n        className={classnames(\"editor-wrapper\", {\n          showLineHits: true,\n        })}\n        ref={containerRef}\n      >\n        <EditorNag />\n        <div\n          className=\"editor-mount devtools-monospace\"\n          style={{\n            height: `calc(100% - ${searchOn ? SEARCH_BAR_HEIGHT_CSS_VAR : \"0px\"} - ${\n              containerRef.current?.querySelector(\".nag-hat\") ? NAG_HEIGHT : \"0px\"\n            })`,\n          }}\n        />\n        {selectedSource ? <SearchBar editor={editor} /> : null}\n        <EditorInner\n          containerRef={containerRef}\n          contextMenu={contextMenu}\n          editor={editor}\n          gutterContextMenu={gutterContextMenu}\n          selectedSource={selectedSource}\n          setContextMenu={setContextMenu}\n        />\n      </div>\n    </ShortcutsContext.Provider>\n  );\n}\n\nfunction EditorInner({\n  containerRef,\n  contextMenu,\n  editor,\n  gutterContextMenu,\n  selectedSource,\n  setContextMenu,\n}: {\n  containerRef: RefObject<HTMLDivElement>;\n  contextMenu: MouseEvent | null;\n  editor: SourceEditor | null;\n  gutterContextMenu: ContextMenu | null;\n  selectedSource: SourceDetails | null;\n  setContextMenu: (event: MouseEvent | null) => void;\n}) {\n  const dispatch = useAppDispatch();\n\n  if (!selectedSource || !editor) {\n    return null;\n  }\n\n  if (!getDocument(selectedSource.id)) {\n    return <EditorLoadingBar />;\n  }\n\n  return (\n    <div>\n      {gutterContextMenu && (\n        <GutterContextMenu\n          contextMenu={gutterContextMenu}\n          close={() => dispatch(closeContextMenu)}\n        />\n      )}\n      <DebugLine />\n      <EmptyLines editor={editor} />\n      <Preview containerRef={containerRef} editor={editor} />\n      <KeyModifiersContext.Consumer>\n        {keyModifiers => <LineNumberTooltip keyModifiers={keyModifiers} />}\n      </KeyModifiersContext.Consumer>\n      <EditorMenu\n        clearContextMenu={() => setContextMenu(null)}\n        contextMenu={contextMenu}\n        editor={editor}\n        selectedSource={selectedSource}\n      />\n      <ColumnBreakpoints editor={editor} />\n      <ToggleWidgetButton />\n    </div>\n  );\n}\n","import { htmlLanguage } from \"@codemirror/lang-html\";\nimport { javascriptLanguage, jsxLanguage, tsxLanguage, typescriptLanguage } from \"@codemirror/lang-javascript\";\nimport { jsonLanguage } from \"@codemirror/lang-json\";\nimport { ensureSyntaxTree } from \"@codemirror/language\";\nimport { EditorState } from \"@codemirror/state\";\nimport { classHighlighter, highlightTree } from \"@lezer/highlight\";\nimport { createGenericCache } from \"./createGenericCache\";\nexport const DEFAULT_MAX_CHARACTERS = 500000;\nexport const DEFAULT_MAX_TIME = 5000;\nexport const {\n  getValueSuspense: parse\n} = createGenericCache(highlighter, identity);\nexport const {\n  getValueSuspense: parseStreaming,\n  getValueAsync: parseStreamingAsync\n} = createGenericCache(streamingSourceContentsToStreamingParser, identity);\nlet cachedElement = null;\n\nasync function streamingSourceContentsToStreamingParser(source, maxCharacters = DEFAULT_MAX_CHARACTERS, maxTime = DEFAULT_MAX_TIME) {\n  const subscribers = new Set(); // TODO [source viewer]\n  // Incrementally parse (more than just the first chunk)\n\n  let parsed = false;\n  const streamingParser = {\n    parsedLines: [],\n    parsedProgress: 0,\n    rawLines: [],\n    rawProgress: 0,\n\n    subscribe(subscriber) {\n      subscribers.add(subscriber);\n      return () => {\n        subscribers.delete(subscriber);\n      };\n    }\n\n  };\n  let sourceIndex = 0;\n\n  const processChunk = () => {\n    if (source.contents !== null) {\n      if (streamingParser.rawLines.length === 0) {\n        streamingParser.rawLines = streamingParser.rawLines.concat(source.contents.split(\"\\n\"));\n      } else {\n        const lastLine = streamingParser.rawLines[streamingParser.rawLines.length - 1];\n        const newLines = source.contents.substring(sourceIndex).split(\"\\n\");\n        newLines[0] = lastLine + newLines[0];\n        streamingParser.rawLines = streamingParser.rawLines.slice(0, streamingParser.rawLines.length - 1).concat(newLines);\n      }\n\n      sourceIndex = source.contents.length;\n      streamingParser.rawProgress = source.contents.length / source.codeUnitCount;\n\n      if (!parsed) {\n        if (streamingParser.rawProgress === 1 || source.contents.length >= maxCharacters) {\n          parsed = true;\n          const parser = incrementalParser(undefined, source.contentType);\n          parser.parseChunk(source.contents, source.complete, maxCharacters, maxTime); // TODO [source viewer]\n          // Handle the case where the last line wasn't fully processed.\n          // We could do a partial line, but that might be slow for long lines.\n\n          streamingParser.parsedLines = parser.isComplete() ? parser.parsedLines : parser.parsedLines.slice(0, parser.parsedLines.length - 1);\n          streamingParser.parsedProgress = streamingParser.rawProgress;\n        }\n      }\n\n      subscribers.forEach(subscriber => subscriber());\n    }\n  };\n\n  source.subscribe(processChunk);\n\n  if (source.lineCount !== null) {\n    processChunk();\n  }\n\n  return streamingParser;\n}\n\nfunction incrementalParser(fileName, contentType) {\n  let complete = false;\n  const parsedLines = [];\n  let inProgressHTMLString = \"\";\n  let parsedCharacterIndex = 0;\n\n  function parseChunk(code, isCodeComplete, maxCharacters = DEFAULT_MAX_CHARACTERS, maxTime = DEFAULT_MAX_TIME) {\n    let codeToParse = code.slice(parsedCharacterIndex); // The logic below to trim code sections only works with \"\\n\"\n\n    codeToParse = codeToParse.replace(/\\r\\n?|\\n|\\u2028|\\u2029/g, \"\\n\");\n\n    if (codeToParse.length > maxCharacters || !isCodeComplete) {\n      let index = maxCharacters - 1;\n\n      while (index > 0 && codeToParse.charAt(index) !== \"\\n\") {\n        index--;\n      }\n\n      if (index === 0) {\n        while (index < codeToParse.length && codeToParse.charAt(index) !== \"\\n\") {\n          index++;\n        }\n      }\n\n      codeToParse = codeToParse.slice(0, index + 1);\n    }\n\n    let language = javascriptLanguage;\n\n    if (contentType) {\n      language = contentTypeToLanguage(contentType);\n    } else if (fileName) {\n      language = urlToLanguage(fileName);\n    }\n\n    const state = EditorState.create({\n      doc: codeToParse,\n      extensions: [language.extension]\n    });\n    const tree = ensureSyntaxTree(state, maxCharacters, maxTime);\n\n    if (tree === null) {\n      return;\n    }\n\n    let characterIndex = 0;\n    highlightTree(tree, classHighlighter, (from, to, classes) => {\n      if (from > characterIndex) {\n        // No style applied to the token between position and from.\n        // This typically indicates white space or newline characters.\n        inProgressHTMLString = processSection(inProgressHTMLString, parsedLines, codeToParse.slice(characterIndex, from), \"\");\n      }\n\n      inProgressHTMLString = processSection(inProgressHTMLString, parsedLines, codeToParse.slice(from, to), classes);\n      characterIndex = to;\n    });\n    const maxPosition = codeToParse.length - 1;\n\n    if (characterIndex < maxPosition) {\n      // No style applied on the trailing text.\n      // This typically indicates white space or newline characters.\n      inProgressHTMLString = processSection(inProgressHTMLString, parsedLines, codeToParse.slice(characterIndex, maxPosition), \"\");\n    }\n\n    if (inProgressHTMLString !== \"\") {\n      parsedLines.push(inProgressHTMLString);\n    }\n\n    parsedCharacterIndex += characterIndex + 1;\n    complete = isCodeComplete && parsedCharacterIndex >= code.length; // Anything that's left should de-opt to plain text.\n\n    if (parsedCharacterIndex < codeToParse.length) {\n      let nextIndex = codeToParse.indexOf(\"\\n\", parsedCharacterIndex);\n\n      while (true) {\n        if (nextIndex === -1) {\n          const line = codeToParse.substring(parsedCharacterIndex);\n          inProgressHTMLString += line;\n          break;\n        } else if (nextIndex !== parsedCharacterIndex) {\n          const line = nextIndex >= 0 ? codeToParse.substring(parsedCharacterIndex, nextIndex) : codeToParse.substring(parsedCharacterIndex);\n          inProgressHTMLString += line;\n        }\n\n        if (nextIndex >= 0) {\n          parsedLines.push(inProgressHTMLString);\n          inProgressHTMLString = \"\";\n        }\n\n        parsedCharacterIndex = nextIndex + 1;\n        nextIndex = codeToParse.indexOf(\"\\n\", parsedCharacterIndex);\n      }\n\n      if (inProgressHTMLString !== \"\") {\n        parsedLines.push(inProgressHTMLString);\n      }\n    }\n\n    inProgressHTMLString = \"\";\n  }\n\n  return {\n    isComplete: () => complete,\n    parsedLines,\n    parseChunk\n  };\n}\n\nasync function highlighter(code, fileName) {\n  const parser = await incrementalParser(fileName);\n\n  if (parser === null) {\n    return null;\n  }\n\n  parser.parseChunk(code, true);\n  return parser.parsedLines;\n}\n\nfunction identity(any) {\n  return any;\n}\n\nfunction contentTypeToLanguage(contentType) {\n  switch (contentType) {\n    case \"text/html\":\n      return htmlLanguage;\n\n    case \"text/javascript\":\n      return javascriptLanguage;\n\n    default:\n      console.error(`Unknown content-type: \"${contentType}\"`);\n      return javascriptLanguage;\n  }\n}\n\nfunction urlToLanguage(fileName) {\n  const extension = fileName.split(\".\").pop().split(\"?\").shift();\n\n  switch (extension) {\n    case \"js\":\n      return javascriptLanguage;\n\n    case \"jsx\":\n      return jsxLanguage;\n\n    case \"ts\":\n      return typescriptLanguage;\n\n    case \"tsx\":\n      return tsxLanguage;\n\n    case \"json\":\n      return jsonLanguage;\n\n    case \"html\":\n      return htmlLanguage;\n\n    default:\n      console.error(`Unknown file extension: \"${extension}\"`);\n      return javascriptLanguage;\n  }\n}\n\nfunction processSection(inProgressHTMLString, parsedLines, section, className) {\n  if (cachedElement === null) {\n    cachedElement = document.createElement(\"span\");\n  } else {\n    cachedElement.innerHTML = \"\";\n  }\n\n  let index = 0;\n  let nextIndex = section.indexOf(\"\\n\");\n\n  while (true) {\n    if (nextIndex === -1) {\n      const subsection = section.substring(index);\n      cachedElement.className = className;\n      cachedElement.textContent = subsection;\n      inProgressHTMLString += cachedElement.outerHTML;\n      break;\n    } else if (nextIndex !== index) {\n      const subsection = nextIndex >= 0 ? section.substring(index, nextIndex) : section.substring(index);\n      cachedElement.className = className;\n      cachedElement.textContent = subsection;\n      inProgressHTMLString += cachedElement.outerHTML;\n    }\n\n    if (nextIndex >= 0) {\n      parsedLines.push(inProgressHTMLString);\n      inProgressHTMLString = \"\";\n      cachedElement.innerHTML = \"\";\n    }\n\n    index = nextIndex + 1;\n    nextIndex = section.indexOf(\"\\n\", index);\n  }\n\n  return inProgressHTMLString;\n}","import { useLayoutEffect, useRef } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styles from \"./Popup.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst MOUSE_LEAVE_DEBOUNCE_TIMER = 250;\nconst RESIZE_DEBOUNCE_TIMER = 100;\nexport default function Popup({\n  children,\n  containerRef = null,\n  dataTestId,\n  dataTestName = \"Popup\",\n  dismiss,\n  dismissOnMouseLeave = false,\n  showTail = false,\n  target\n}) {\n  const arrowRef = useRef(null);\n  const popoverRef = useRef(null);\n  const dismissStateRef = useRef({\n    dismiss: dismiss || null,\n    dismissOnMouseLeave\n  });\n  useLayoutEffect(() => {\n    const dismissState = dismissStateRef.current;\n    dismissState.dismiss = dismiss;\n    dismissState.dismissOnMouseLeave = dismissOnMouseLeave;\n  }, [dismiss, dismissOnMouseLeave]);\n  useLayoutEffect(() => {\n    const arrow = arrowRef.current;\n    const container = containerRef?.current || document.body;\n    const popover = popoverRef.current;\n    let ignoreMouseLeaveEvents = false;\n    let ignoreMouseLeaveEventTimeout = null;\n\n    const clearMouseLeaveTimeout = () => {\n      if (ignoreMouseLeaveEventTimeout) {\n        clearTimeout(ignoreMouseLeaveEventTimeout);\n      }\n\n      ignoreMouseLeaveEventTimeout = null;\n    };\n\n    const onMouseLeave = () => {\n      if (ignoreMouseLeaveEvents) {\n        return;\n      }\n\n      const {\n        dismiss,\n        dismissOnMouseLeave\n      } = dismissStateRef.current;\n\n      if (dismissOnMouseLeave) {\n        clearMouseLeaveTimeout();\n        ignoreMouseLeaveEventTimeout = setTimeout(() => {\n          ignoreMouseLeaveEventTimeout = null;\n          dismiss();\n        }, MOUSE_LEAVE_DEBOUNCE_TIMER);\n      }\n    };\n\n    const onScroll = () => {\n      const {\n        dismiss\n      } = dismissStateRef.current;\n      dismiss();\n    };\n\n    const reposition = () => {\n      arrow.style.setProperty(\"display\", showTail ? \"block\" : \"none\");\n      const containerRect = container.getBoundingClientRect();\n      const popoverRect = popover.getBoundingClientRect();\n      const targetRect = target.getBoundingClientRect();\n      let arrowUp = true; // Vertical alignment: Determined entirely by the target location within the parent container.\n      // Targets in the top half of the container have popups displayed beneath them,\n      // and targets in the bottom half of the container have popups displayed above them.\n      //\n      // The reason we do this, rather than based on the size of the content in the popup,\n      // is that the popup content sizes may change as the user interacts (e.g. clicks to expand and inspect a node)\n      // and it's jarring for the popup to jump around the screen in response to a user action.\n\n      if (targetRect.top + targetRect.height / 2 < containerRect.top + containerRect.height / 2) {\n        const popoverTop = targetRect.top + targetRect.height;\n        popover.style.setProperty(\"top\", `${popoverTop}px`);\n        arrow.setAttribute(\"class\", styles.UpArrow);\n      } else {\n        const popoverTop = targetRect.top - popoverRect.height;\n        popover.style.setProperty(\"top\", `${popoverTop}px`);\n        arrow.setAttribute(\"class\", styles.DownArrow);\n        arrowUp = false;\n      } // TODO\n      // Handle horizontal positioning edge case if popup is outside of scroll area when rendered initially.\n      // Horizontal alignment: Prefer horizontally centered around the target\n      // But don't go outside of the bounds of the container.\n\n\n      const popoverLeftMin = containerRect.left;\n      const popoverLeftMax = containerRect.left + containerRect.width - popoverRect.width;\n      const popoverLeftPreferred = targetRect.left + targetRect.width / 2 - popoverRect.width / 2;\n      const popoverLeft = Math.max(popoverLeftMin, Math.min(popoverLeftMax, popoverLeftPreferred));\n      popover.style.setProperty(\"left\", `${popoverLeft}px`); // Arrow alignment: Prefer horizontally centered around the target\n      // But keep away from the extreme edges of the popover to account for rounded corners.\n\n      const arrowRect = arrow.getBoundingClientRect();\n      const arrowLeftMin = targetRect.left;\n      const arrowLeftMax = targetRect.left + targetRect.width - arrowRect.width;\n      const arrowLeftPreferred = targetRect.left + targetRect.width / 2 - arrowRect.width / 2;\n      const arrowLeft = Math.max(arrowLeftMin, Math.min(arrowLeftMax, arrowLeftPreferred));\n      arrow.style.setProperty(\"margin-left\", `${arrowLeft - popoverLeft}px`); // Ignore \"mouseleave\" events that occur right after resize.\n      // They may be false positives, caused by the popover content moving.\n\n      clearMouseLeaveTimeout();\n      ignoreMouseLeaveEvents = true;\n      ignoreMouseLeaveEventTimeout = setTimeout(() => {\n        ignoreMouseLeaveEvents = false;\n        ignoreMouseLeaveEventTimeout = null;\n      }, RESIZE_DEBOUNCE_TIMER);\n    };\n\n    const onMouseEnter = () => {\n      clearMouseLeaveTimeout();\n    }; // Any scrolling should hide the popup.\n    // We could try to reposition but it's probably a better experience to just hide on scroll.\n\n\n    const scrollTargets = [];\n    let currentTarget = target;\n\n    while (currentTarget != null) {\n      scrollTargets.push(currentTarget);\n      currentTarget.addEventListener(\"scroll\", onScroll);\n      currentTarget = currentTarget.parentElement || null;\n    }\n\n    popover.addEventListener(\"mouseenter\", onMouseEnter);\n    popover.addEventListener(\"mouseleave\", onMouseLeave);\n    const observer = new ResizeObserver(reposition);\n    observer.observe(container);\n    observer.observe(popover);\n    observer.observe(target);\n    return () => {\n      scrollTargets.forEach(target => {\n        target.removeEventListener(\"scroll\", onScroll);\n      });\n      popover.removeEventListener(\"mouseenter\", onMouseEnter);\n      popover.removeEventListener(\"mouseleave\", onMouseLeave);\n      observer.unobserve(container);\n      observer.unobserve(popover);\n      observer.unobserve(target);\n      observer.disconnect();\n      clearMouseLeaveTimeout();\n    };\n  }, [containerRef, showTail, target]);\n\n  const blockEvent = event => {\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  return /*#__PURE__*/createPortal( /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.Popup,\n    \"data-test-id\": dataTestId,\n    \"data-test-name\": dataTestName,\n    onClick: blockEvent,\n    ref: popoverRef,\n    children: [/*#__PURE__*/_jsxs(\"svg\", {\n      ref: arrowRef,\n      viewBox: \"0 0 16 8\",\n      preserveAspectRatio: \"none\",\n      children: [/*#__PURE__*/_jsx(\"polygon\", {\n        className: styles.ArrowBackground,\n        points: \"8,0 16,8 0,8\"\n      }), /*#__PURE__*/_jsx(\"polygon\", {\n        className: styles.ArrowForeground,\n        points: \"8,1 15,8 1,8\"\n      })]\n    }), children]\n  }), document.body);\n}","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { Suspense, useContext, useEffect, useRef } from \"react\";\nimport { SelectedFrameContext } from \"bvaughn-architecture-demo/src/contexts/SelectedFrameContext\";\nimport { evaluateSuspense } from \"bvaughn-architecture-demo/src/suspense/PauseCache\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport SourcePreviewInspector from \"../inspector/SourcePreviewInspector\";\nimport Popup from \"../Popup\";\nimport styles from \"./PreviewPopup.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function PreviewPopup(props) {\n  return /*#__PURE__*/_jsx(Suspense, {\n    fallback: null,\n    children: /*#__PURE__*/_jsx(SuspendingPreviewPopup, _objectSpread({}, props))\n  });\n}\n\nfunction SuspendingPreviewPopup({\n  containerRef,\n  dismiss,\n  expression,\n  target\n}) {\n  const client = useContext(ReplayClientContext);\n  const popupRef = useRef(null);\n  const {\n    selectedPauseAndFrameId\n  } = useContext(SelectedFrameContext);\n  const frameId = selectedPauseAndFrameId?.frameId ?? null;\n  const pauseId = selectedPauseAndFrameId?.pauseId ?? null;\n  let value = null;\n\n  if (frameId !== null && pauseId !== null) {\n    const result = evaluateSuspense(client, pauseId, frameId, expression);\n    value = result.returned || null;\n  }\n\n  useEffect(() => {\n    const onClick = ({\n      target\n    }) => {\n      const popupElement = popupRef.current;\n\n      if (popupElement && target) {\n        if (popupElement !== target && !popupElement.contains(target)) {\n          dismiss();\n        }\n      }\n    };\n\n    document.body.addEventListener(\"click\", onClick);\n    return () => {\n      document.body.removeEventListener(\"click\", onClick);\n    };\n  });\n\n  if (pauseId !== null && value !== null) {\n    return /*#__PURE__*/_jsx(Popup, {\n      containerRef: containerRef,\n      dismiss: dismiss,\n      target: target,\n      showTail: true,\n      children: /*#__PURE__*/_jsx(SourcePreviewInspector, {\n        className: styles.Popup,\n        pauseId: pauseId,\n        protocolValue: value,\n        ref: popupRef\n      })\n    });\n  } else {\n    return null;\n  }\n}","import { useState } from \"react\";\nimport useClassListObserver from \"./useClassListObserver\";\nconst REGULAR_SIZE = {\n  conditionalPointPanelHeight: 130,\n  pointPanelHeight: 90,\n  lineHeight: 15,\n  lineHeightWithPoint: 15 + 90,\n  lineHeightWithConditionalPoint: 15 + 130\n};\nconst LARGE_SIZE = {\n  conditionalPointPanelHeight: 156,\n  pointPanelHeight: 108,\n  lineHeight: 16,\n  lineHeightWithPoint: 16 + 108,\n  lineHeightWithConditionalPoint: 16 + 156\n}; // HACK\n// We could swap this out for something that lazily measures row height.\n// There are only a small number of variations though, so this is more efficient.\n\nexport default function useFontBasedListMeasurents(listRef) {\n  const {\n    0: sizes,\n    1: setSizes\n  } = useState(REGULAR_SIZE); // Listen for font-size changes.\n\n  useClassListObserver(document.body.parentElement, classList => {\n    const prefersLargeFontSize = classList.contains(\"prefers-large-font-size\");\n\n    if (prefersLargeFontSize) {\n      setSizes(LARGE_SIZE);\n    } else {\n      setSizes(REGULAR_SIZE);\n    }\n\n    const list = listRef.current;\n\n    if (list) {\n      list.resetAfterIndex(0);\n    }\n  });\n  return sizes;\n}","import { useLayoutEffect, useRef } from \"react\";\nexport default function useClassListObserver(htmlElement, callback) {\n  const callbackRef = useRef(callback);\n  useLayoutEffect(() => {\n    callbackRef.current = callback;\n  });\n  useLayoutEffect(() => {\n    const observer = new MutationObserver(mutations => {\n      mutations.forEach(mutation => {\n        if (mutation.type === \"attributes\" && mutation.attributeName === \"class\") {\n          const callback = callbackRef.current;\n          callback(htmlElement.classList);\n        }\n      });\n    });\n    observer.observe(htmlElement, {\n      attributes: true\n    });\n    const callback = callbackRef.current;\n    callback(htmlElement.classList);\n    return () => {\n      observer.disconnect();\n    };\n  }, [htmlElement]);\n}","export const NEW_LINE_REGEX = /\\r\\n?|\\n|\\u2028|\\u2029/;\nexport function compareNumericStrings(a, b) {\n  return a.length < b.length ? -1 : a.length > b.length ? 1 : a < b ? -1 : a > b ? 1 : 0;\n} // Convenience function to JSON-stringify values that may contain circular references.\n\nexport function stringify(value, space) {\n  const cache = [];\n  return JSON.stringify(value, (key, value) => {\n    if (typeof value === \"object\" && value !== null) {\n      if (cache.includes(value)) {\n        return \"[Circular]\";\n      }\n\n      cache.push(value);\n    }\n\n    return value;\n  }, space);\n}","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { useDeferredValue, useMemo, useReducer } from \"react\";\nconst EMPTY_ARRAY = [];\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"disable\":\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          enabled: false\n        });\n      }\n\n    case \"enable\":\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          enabled: true\n        });\n      }\n\n    case \"increment\":\n      {\n        const {\n          by\n        } = action;\n        const {\n          currentScopeId,\n          index,\n          results\n        } = state;\n        let newIndex = index;\n\n        if (by > 0) {\n          newIndex = index + by < results.length ? index + by : 0;\n        } else {\n          newIndex = index + by >= 0 ? index + by : results.length - 1;\n        }\n\n        const cachedScopes = state.cachedScopes;\n\n        if (currentScopeId !== null) {\n          const currentScope = cachedScopes[currentScopeId];\n\n          if (currentScope != null && currentScope.index !== newIndex) {\n            return _objectSpread(_objectSpread({}, state), {}, {\n              cachedScopes: _objectSpread(_objectSpread({}, cachedScopes), {}, {\n                [currentScopeId]: _objectSpread(_objectSpread({}, currentScope), {}, {\n                  index: newIndex\n                })\n              }),\n              pendingUpdateForScope: currentScopeId,\n              index: newIndex\n            });\n          }\n        }\n\n        return state;\n      }\n\n    case \"markUpdateProcessed\":\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          pendingUpdateForScope: null\n        });\n      }\n\n    case \"updateCurrentScopeId\":\n      {\n        const {\n          scopeId\n        } = action;\n        const {\n          currentScopeId\n        } = state;\n\n        if (scopeId === null) {\n          return _objectSpread(_objectSpread({}, state), {}, {\n            currentScopeId: null,\n            index: -1,\n            results: EMPTY_ARRAY\n          });\n        } else if (scopeId === currentScopeId) {\n          return state;\n        }\n\n        const cachedScopes = state.cachedScopes;\n        let cachedScope = cachedScopes[scopeId];\n\n        if (cachedScope == null) {\n          cachedScope = {\n            index: -1,\n            items: EMPTY_ARRAY,\n            query: \"\",\n            queryData: null,\n            results: EMPTY_ARRAY\n          };\n        }\n\n        return _objectSpread(_objectSpread({}, state), {}, {\n          cachedScopes: _objectSpread(_objectSpread({}, cachedScopes), {}, {\n            [scopeId]: cachedScope\n          }),\n          currentScopeId: scopeId,\n          index: cachedScope.index,\n          pendingUpdateForScope: null,\n          results: cachedScope.results\n        });\n      }\n\n    case \"updateItems\":\n      {\n        const {\n          items\n        } = action;\n        const {\n          currentScopeId\n        } = state;\n        const cachedScopes = state.cachedScopes;\n\n        if (currentScopeId !== null) {\n          const currentScope = cachedScopes[currentScopeId];\n\n          if (currentScope != null && currentScope.items !== items) {\n            return _objectSpread(_objectSpread({}, state), {}, {\n              cachedScopes: _objectSpread(_objectSpread({}, cachedScopes), {}, {\n                [currentScopeId]: _objectSpread(_objectSpread({}, currentScope), {}, {\n                  items\n                })\n              })\n            });\n          }\n        }\n\n        return state;\n      }\n\n    case \"updateQuery\":\n      {\n        const {\n          query,\n          queryData\n        } = action; // This should only update the global query;\n        // per-scope query should only be updated along with results\n\n        if (query !== state.query || queryData !== state.queryData) {\n          return _objectSpread(_objectSpread({}, state), {}, {\n            query,\n            queryData\n          });\n        } else {\n          return state;\n        }\n      }\n\n    case \"updateResults\":\n      {\n        const {\n          index,\n          results\n        } = action;\n        const {\n          currentScopeId,\n          query,\n          queryData\n        } = state;\n        const cachedScopes = state.cachedScopes;\n\n        if (currentScopeId !== null) {\n          const currentScope = cachedScopes[currentScopeId];\n\n          if (currentScope != null && currentScope.results !== results) {\n            return _objectSpread(_objectSpread({}, state), {}, {\n              cachedScopes: _objectSpread(_objectSpread({}, cachedScopes), {}, {\n                [currentScopeId]: _objectSpread(_objectSpread({}, currentScope), {}, {\n                  index,\n                  query,\n                  queryData,\n                  results\n                })\n              }),\n              index,\n              pendingUpdateForScope: currentScopeId,\n              results\n            });\n          }\n        }\n\n        return state;\n      }\n  }\n}\n\nexport default function useSearch(items, stableSearch, scopeId) {\n  if (scopeId == null) {\n    scopeId = \"default\";\n  }\n\n  const {\n    0: state,\n    1: dispatch\n  } = useReducer(reducer, {\n    cachedScopes: {},\n    currentScopeId: null,\n    enabled: false,\n    index: -1,\n    pendingUpdateForScope: null,\n    query: \"\",\n    queryData: null,\n    results: []\n  });\n  const {\n    cachedScopes,\n    currentScopeId,\n    query,\n    queryData\n  } = state; // Let React update search text at high priority and results at lower priority;\n  // this keeps the search text input updating quick and feeling responsive to user input.\n\n  const deferredQuery = useDeferredValue(query);\n  const deferredQueryData = useDeferredValue(queryData);\n  const currentScope = scopeId !== null ? cachedScopes[scopeId] : null;\n  const prevResults = currentScope != null ? currentScope.results : EMPTY_ARRAY;\n  const itemsChanged = currentScope == null || currentScope.items !== items;\n  const queryChanged = currentScope == null || currentScope.query !== deferredQuery;\n  const queryDataChanged = currentScope == null || currentScope.queryData !== deferredQueryData;\n  const scopeIdChanged = currentScopeId !== scopeId; // State will not update within the scope of the rest of this function,\n  // so don't read any more values from it after dispatch.\n\n  if (scopeIdChanged) {\n    dispatch({\n      type: \"updateCurrentScopeId\",\n      scopeId\n    });\n  } // Any time our search inputs change, re-run the search function.\n\n\n  if (itemsChanged || queryChanged || queryDataChanged) {\n    if (itemsChanged) {\n      dispatch({\n        type: \"updateItems\",\n        items\n      });\n    }\n\n    if (queryChanged || queryDataChanged) {\n      dispatch({\n        type: \"updateQuery\",\n        query: deferredQuery,\n        queryData: deferredQueryData\n      });\n    }\n\n    const results = deferredQuery ? stableSearch(deferredQuery, items, deferredQueryData) : EMPTY_ARRAY;\n    let prevIndex = currentScope?.index ?? -1;\n    let index = -1; // Update the selected index based on the new results.\n\n    if (results.length > 0) {\n      const prevItem = prevIndex >= 0 && prevIndex < prevResults.length ? prevResults[prevIndex] : null;\n\n      if (prevItem) {\n        index = results.indexOf(prevItem);\n      }\n\n      if (index < 0) {\n        index = 0;\n      }\n    }\n\n    dispatch({\n      type: \"updateResults\",\n      index,\n      results\n    });\n\n    if (scopeIdChanged) {\n      // Don't schedule a pending update if results were updated as the result of a scope change.\n      dispatch({\n        type: \"markUpdateProcessed\"\n      });\n    }\n  }\n\n  const actions = useMemo(() => ({\n    disable: () => dispatch({\n      type: \"disable\"\n    }),\n    enable: () => dispatch({\n      type: \"enable\"\n    }),\n    markUpdateProcessed: () => dispatch({\n      type: \"markUpdateProcessed\"\n    }),\n    goToNext: () => dispatch({\n      type: \"increment\",\n      by: 1\n    }),\n    goToPrevious: () => dispatch({\n      type: \"increment\",\n      by: -1\n    }),\n    search: (query, queryData) => dispatch({\n      type: \"updateQuery\",\n      query,\n      queryData: queryData || null\n    })\n  }), []);\n  const externalState = useMemo(() => state, [state]);\n  return [externalState, actions];\n}","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport escapeRegExp from \"lodash/escapeRegExp\";\nimport isEqual from \"lodash/isEqual\";\nimport { useMemo, useState } from \"react\";\nimport { NEW_LINE_REGEX } from \"bvaughn-architecture-demo/src/utils/string\";\nimport useSearch from \"./useSearch\";\n\nfunction search(query, lines, modifiers = null) {\n  const {\n    caseSensitive = false,\n    regex = false,\n    wholeWord = false\n  } = modifiers || {};\n  const results = [];\n  let flags;\n\n  if (!caseSensitive) {\n    flags = \"i\";\n  }\n\n  if (!regex) {\n    query = escapeRegExp(query);\n  }\n\n  if (wholeWord) {\n    query = `\\\\b${query}\\\\b`;\n  }\n\n  const regExp = new RegExp(query, flags);\n  lines.forEach((line, index) => {\n    if (line.match(regExp)) {\n      results.push(index);\n    }\n  });\n  return results;\n}\n\nexport default function useSourceSearch() {\n  const {\n    0: scope,\n    1: setScope\n  } = useState({\n    code: \"\",\n    sourceId: null\n  });\n  const {\n    0: modifiers,\n    1: setModifiers\n  } = useState({\n    caseSensitive: false,\n    regex: false,\n    wholeWord: false\n  });\n  const lines = useMemo(() => scope.code.split(NEW_LINE_REGEX), [scope.code]);\n  const [state, dispatch] = useSearch(lines, search, scope.sourceId);\n  const memoizedActions = useMemo(() => _objectSpread(_objectSpread({}, dispatch), {}, {\n    search: query => dispatch.search(query, modifiers),\n    setModifiers: newModifiers => {\n      if (isEqual(modifiers, newModifiers)) {\n        return;\n      }\n\n      setModifiers(newModifiers);\n      dispatch.search(state.query, newModifiers);\n    },\n    setScope: (sourceId, code) => setScope({\n      code,\n      sourceId\n    })\n  }), [dispatch, modifiers, state.query]);\n  const memoizedState = useMemo(() => _objectSpread(_objectSpread({}, state), {}, {\n    modifiers\n  }), [state, modifiers]);\n  return [memoizedState, memoizedActions];\n}","import { createContext, useContext, useEffect, useMemo } from \"react\";\nimport { SourcesContext } from \"bvaughn-architecture-demo/src/contexts/SourcesContext\";\nimport { getStreamingSourceContentsHelper } from \"bvaughn-architecture-demo/src/suspense/SourcesCache\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport useSourceSearch from \"./hooks/useSourceSearch\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const SourceSearchContext = /*#__PURE__*/createContext(null);\nexport function SourceSearchContextRoot({\n  children\n}) {\n  const client = useContext(ReplayClientContext);\n  const {\n    focusedSourceId\n  } = useContext(SourcesContext);\n  const [state, dispatch] = useSourceSearch();\n  const context = useMemo(() => [state, dispatch], [dispatch, state]); // Keep source search state in sync with the focused source.\n\n  useEffect(() => {\n    async function updateSourceContents(focusedSourceId, setScope) {\n      if (focusedSourceId) {\n        const {\n          resolver\n        } = await getStreamingSourceContentsHelper(client, focusedSourceId);\n        const {\n          contents: code\n        } = await resolver;\n        setScope(focusedSourceId, code || \"\");\n      } else {\n        setScope(null, \"\");\n      }\n    }\n\n    updateSourceContents(focusedSourceId, dispatch.setScope);\n  }, [client, dispatch.setScope, focusedSourceId]);\n  return /*#__PURE__*/_jsx(SourceSearchContext.Provider, {\n    value: context,\n    children: children\n  });\n}","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { Suspense, memo, useContext } from \"react\";\nimport { getPauseDataSuspense } from \"bvaughn-architecture-demo/src/suspense/PauseCache\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { SelectedFrameContext } from \"../../src/contexts/SelectedFrameContext\";\nimport { SourceSearchContext } from \"./SourceSearchContext\";\nimport styles from \"./CurrentLineHighlight.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default /*#__PURE__*/memo(function CurrentLineHighlight(props) {\n  return /*#__PURE__*/_jsx(Suspense, {\n    children: /*#__PURE__*/_jsx(CurrentLineHighlightSuspends, _objectSpread({}, props))\n  });\n});\n\nfunction CurrentLineHighlightSuspends({\n  lineNumber,\n  sourceId\n}) {\n  const client = useContext(ReplayClientContext);\n  const {\n    0: sourceSearchState\n  } = useContext(SourceSearchContext);\n  const {\n    selectedPauseAndFrameId\n  } = useContext(SelectedFrameContext);\n  const frameId = selectedPauseAndFrameId?.frameId || null;\n  const pauseId = selectedPauseAndFrameId?.pauseId || null;\n\n  if (pauseId !== null && frameId !== null) {\n    const pauseData = getPauseDataSuspense(client, pauseId);\n\n    if (pauseData !== null && pauseData.frames) {\n      const correspondingSourceIds = client.getCorrespondingSourceIds(sourceId);\n      const selectedFrame = pauseData.frames.find(frame => frame.frameId === frameId);\n\n      if (selectedFrame) {\n        if (selectedFrame.location.find(location => {\n          if (correspondingSourceIds.includes(location.sourceId)) {\n            const correspondingLocations = client.getCorrespondingLocations(location);\n            return correspondingLocations.findIndex(correspondingLocation => correspondingLocation.line === lineNumber && correspondingLocation.sourceId === sourceId) >= 0;\n          }\n        })) {\n          return /*#__PURE__*/_jsx(\"div\", {\n            className: styles.CurrentExecutionPoint,\n            \"data-test-name\": \"CurrentExecutionPointLineHighlight\"\n          });\n        }\n      }\n    }\n  }\n\n  const searchLineIndex = sourceSearchState.index < sourceSearchState.results.length ? sourceSearchState.results[sourceSearchState.index] : null;\n\n  if (sourceSearchState.currentScopeId === sourceId && searchLineIndex === lineNumber - 1) {\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: styles.CurrentSearchResult,\n      \"data-test-name\": \"CurrentSearchResultHighlight\"\n    });\n  }\n\n  return null;\n}","import { createContext, useEffect, useMemo, useState, useTransition } from \"react\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const KeyboardModifiersContext = /*#__PURE__*/createContext(null);\nexport function KeyboardModifiersContextRoot({\n  children\n}) {\n  const {\n    0: isMetaKeyActive,\n    1: setIsMetaKeyActive\n  } = useState(false);\n  const {\n    0: isShiftKeyActive,\n    1: setIsShiftKeyActive\n  } = useState(false);\n  const {\n    0: isPending,\n    1: startTransition\n  } = useTransition();\n  useEffect(() => {\n    const onKeyDown = event => {\n      switch (event.key) {\n        case \"Meta\":\n        case \"Cmd\":\n        case \"Control\":\n          startTransition(() => {\n            setIsMetaKeyActive(true);\n          });\n          break;\n\n        case \"Shift\":\n          startTransition(() => {\n            setIsShiftKeyActive(true);\n          });\n          break;\n      }\n    };\n\n    const onKeyUp = event => {\n      switch (event.key) {\n        case \"Meta\":\n        case \"Cmd\":\n        case \"Control\":\n          startTransition(() => {\n            setIsMetaKeyActive(false);\n          });\n          break;\n\n        case \"Shift\":\n          startTransition(() => {\n            setIsShiftKeyActive(false);\n          });\n          break;\n      }\n    };\n\n    const onMouseMove = event => {\n      const nextMetaKeyActive = event.metaKey;\n      const nextShiftKeyActive = event.shiftKey;\n\n      if (nextMetaKeyActive !== isMetaKeyActive || nextShiftKeyActive !== isShiftKeyActive) {\n        startTransition(() => {\n          setIsMetaKeyActive(nextMetaKeyActive);\n          setIsShiftKeyActive(nextShiftKeyActive);\n        });\n      }\n    };\n\n    document.body.addEventListener(\"keydown\", onKeyDown);\n    document.body.addEventListener(\"keyup\", onKeyUp);\n    document.body.addEventListener(\"mousemove\", onMouseMove);\n    return () => {\n      document.body.removeEventListener(\"keydown\", onKeyDown);\n      document.body.removeEventListener(\"keyup\", onKeyUp);\n      document.body.removeEventListener(\"mousemove\", onMouseMove);\n    };\n  }, [isMetaKeyActive, isShiftKeyActive]);\n  const context = useMemo(() => ({\n    isMetaKeyActive,\n    isPending,\n    isShiftKeyActive\n  }), [isMetaKeyActive, isPending, isShiftKeyActive]);\n  return /*#__PURE__*/_jsx(KeyboardModifiersContext.Provider, {\n    value: context,\n    children: children\n  });\n}","import findLast from \"lodash/findLast\";\nimport { useContext } from \"react\";\nimport Icon from \"bvaughn-architecture-demo/components/Icon\";\nimport { FocusContext } from \"bvaughn-architecture-demo/src/contexts/FocusContext\";\nimport { KeyboardModifiersContext } from \"bvaughn-architecture-demo/src/contexts/KeyboardModifiersContext\";\nimport { SessionContext } from \"bvaughn-architecture-demo/src/contexts/SessionContext\";\nimport { SourcesContext } from \"bvaughn-architecture-demo/src/contexts/SourcesContext\";\nimport { TimelineContext } from \"bvaughn-architecture-demo/src/contexts/TimelineContext\";\nimport { getHitPointsForLocationSuspense } from \"bvaughn-architecture-demo/src/suspense/PointsCache\";\nimport { compareExecutionPoints, isExecutionPointsGreaterThan, isExecutionPointsLessThan } from \"bvaughn-architecture-demo/src/utils/time\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { TOO_MANY_POINTS_TO_FIND } from \"shared/constants\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function HoverButton({\n  addPoint,\n  buttonClassName,\n  deletePoints,\n  editPoint,\n  iconClassName,\n  lineHitCounts,\n  lineNumber,\n  point,\n  source\n}) {\n  const {\n    range: focusRange\n  } = useContext(FocusContext);\n  const {\n    isMetaKeyActive,\n    isShiftKeyActive\n  } = useContext(KeyboardModifiersContext);\n  const client = useContext(ReplayClientContext);\n  const {\n    executionPoint,\n    update\n  } = useContext(TimelineContext);\n  const {\n    findClosestFunctionName\n  } = useContext(SourcesContext);\n  const {\n    trackEvent\n  } = useContext(SessionContext);\n\n  if (isMetaKeyActive) {\n    if (lineHitCounts === null) {\n      return null;\n    }\n\n    const [hitPoints, hitPointStatus] = lineHitCounts.count >= TOO_MANY_POINTS_TO_FIND ? [null, null] : getHitPointsForLocationSuspense(client, {\n      column: lineHitCounts.firstBreakableColumnIndex,\n      line: lineNumber,\n      sourceId: source.sourceId\n    }, null, focusRange);\n    let targetPoint = null;\n\n    if (hitPoints !== null && hitPointStatus !== \"too-many-points-to-find\") {\n      if (isShiftKeyActive) {\n        targetPoint = findLastHitPoint(hitPoints, executionPoint);\n      } else {\n        targetPoint = findHitPoint(hitPoints, executionPoint);\n      }\n    }\n\n    const disabled = targetPoint == null;\n\n    const onClick = () => {\n      if (targetPoint != null) {\n        update(targetPoint.time, targetPoint.point);\n      }\n    };\n\n    return /*#__PURE__*/_jsx(\"button\", {\n      className: buttonClassName,\n      \"data-test-name\": \"ContinueToButton\",\n      \"data-test-state\": isShiftKeyActive ? \"previous\" : \"next\",\n      disabled: disabled,\n      onClick: onClick,\n      children: /*#__PURE__*/_jsx(Icon, {\n        className: iconClassName,\n        type: isShiftKeyActive ? \"continue-to-previous\" : \"continue-to-next\"\n      })\n    });\n  } else {\n    const addLogPoint = () => {\n      if (lineHitCounts === null) {\n        return;\n      }\n\n      const fileName = source?.url?.split(\"/\")?.pop();\n      let content = `\"${fileName}\", ${lineNumber}`;\n      const location = {\n        column: lineHitCounts.firstBreakableColumnIndex,\n        line: lineNumber,\n        sourceId: source.sourceId\n      };\n\n      if (source?.sourceId) {\n        const closestFunctionName = findClosestFunctionName(source?.sourceId, location);\n\n        if (closestFunctionName) {\n          content = `\"${closestFunctionName}\", ${lineNumber}`;\n        }\n      }\n\n      if (point) {\n        editPoint(point.id, {\n          content,\n          shouldLog: true\n        });\n      } else {\n        // Distinct from \"breakpoint.add\" apparently\n        trackEvent(\"breakpoint.plus_click\");\n        addPoint({\n          content,\n          shouldLog: true\n        }, location);\n      }\n    };\n\n    const togglePoint = () => {\n      if (point) {\n        if (!point.shouldLog || point.shouldBreak) {\n          editPoint(point.id, {\n            shouldLog: !point.shouldLog\n          });\n        } else {\n          trackEvent(\"breakpoint.minus_click\");\n          deletePoints(point.id);\n        }\n      }\n    };\n\n    return /*#__PURE__*/_jsx(\"button\", {\n      className: buttonClassName,\n      \"data-test-name\": \"LogPointToggle\",\n      \"data-test-state\": point?.shouldLog ? \"on\" : \"off\",\n      onClick: point?.shouldLog ? togglePoint : addLogPoint,\n      children: /*#__PURE__*/_jsx(Icon, {\n        className: iconClassName,\n        type: point?.shouldLog ? \"remove\" : \"add\"\n      })\n    });\n  }\n}\n\nconst findHitPoint = (hitPoints, executionPoint) => {\n  const hitPoint = hitPoints.find(point => compareExecutionPoints(point.point, executionPoint) > 0);\n\n  if (hitPoint != null) {\n    if (isExecutionPointsGreaterThan(hitPoint.point, executionPoint)) {\n      return hitPoint;\n    }\n  }\n\n  return null;\n};\n\nconst findLastHitPoint = (hitPoints, executionPoint) => {\n  const hitPoint = findLast(hitPoints, point => compareExecutionPoints(point.point, executionPoint) < 0);\n\n  if (hitPoint != null) {\n    if (isExecutionPointsLessThan(hitPoint.point, executionPoint)) {\n      return hitPoint;\n    }\n  }\n\n  return null;\n};","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n// Longer term we probably want to consider using Relay for this;\n// For now let's see how far we can get just using the Fetch API.\nexport class GraphQLClient {\n  constructor(url) {\n    _defineProperty(this, \"url\", void 0);\n\n    this.url = url;\n  }\n\n  async send(body, accessToken) {\n    const response = await fetch(this.url, {\n      method: \"POST\",\n      headers: _objectSpread(_objectSpread({}, accessToken && {\n        Authorization: `Bearer ${accessToken}`\n      }), {}, {\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify(body)\n    });\n    const json = await response.json();\n    return json.data;\n  }\n\n}","import { createContext } from \"react\";\nimport { GraphQLClient } from \"../graphql/GraphQLClient\";\n// By default, this context wires the app up to use real GraphQL backend APIs.\n// We can leverage this when writing tests (or UI demos) by injecting a stub client.\nlet graphqlUrl = \"https://api.replay.io/v1/graphql\";\n\nif (true) {\n  const url = new URL(window.location.href);\n\n  if (url.searchParams.has(\"graphql\")) {\n    graphqlUrl = url.searchParams.get(\"graphql\");\n  }\n}\n\nexport const GraphQLClientContext = /*#__PURE__*/createContext(new GraphQLClient(graphqlUrl));","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nconst AddCommentMutation = `\n  mutation AddComment($input: AddCommentInput!) {\n    addComment(input: $input) {\n      success\n      comment {\n        id\n      }\n    }\n  }\n`;\nconst AddCommentReplyMutation = `\n  mutation AddCommentReply($input: AddCommentReplyInput!) {\n    addCommentReply(input: $input) {\n      success\n      commentReply {\n        id\n      }\n    }\n  }\n`;\nconst DeleteCommentMutation = `\n  mutation DeleteComment($commentId: ID!) {\n    deleteComment(input: { id: $commentId }) {\n      success\n    }\n  }\n`;\nconst DeleteCommentReplyMutation = `\n  mutation DeleteCommentReply($replyId: ID!) {\n    deleteCommentReply(input: { id: $replyId }) {\n      success\n    }\n  }\n`;\nconst GetCommentsQuery = `\n  query GetComments($recordingId: UUID!) {\n    recording(uuid: $recordingId) {\n      uuid\n      comments {\n        id\n        isPublished\n        content\n        primaryLabel\n        secondaryLabel\n        createdAt\n        updatedAt\n        hasFrames\n        sourceLocation\n        time\n        point\n        position\n        networkRequestId\n        user {\n          id\n          internal\n          name\n          picture\n          __typename\n        }\n        replies {\n          id\n          isPublished\n          content\n          createdAt\n          updatedAt\n          user {\n            id\n            name\n            picture\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n  }\n`;\nconst UpdateCommentMutation = `\n  mutation UpdateCommentContent($newContent: String!, $newIsPublished: Boolean!, $commentId: ID!, $newPosition: JSONObject) {\n    updateComment(input: { id: $commentId, content: $newContent, isPublished: $newIsPublished, position: $newPosition }) {\n      success\n    }\n  }\n`;\nconst UpdateCommentReplyMutation = `\n  mutation UpdateCommentReplyContent($newContent: String!, $newIsPublished: Boolean!, $replyId: ID!) {\n    updateCommentReply(input: { id: $replyId, content: $newContent, isPublished: $newIsPublished }) {\n      success\n    }\n  }\n`;\nexport async function addComment(graphQLClient, accessToken, recordingId, config) {\n  await graphQLClient.send({\n    operationName: \"AddComment\",\n    query: AddCommentMutation,\n    variables: {\n      input: _objectSpread(_objectSpread({}, config), {}, {\n        recordingId\n      })\n    }\n  }, accessToken);\n}\nexport async function addCommentReply(graphQLClient, accessToken, parentId, content, isPublished) {\n  await graphQLClient.send({\n    operationName: \"AddCommentReply\",\n    query: AddCommentReplyMutation,\n    variables: {\n      input: {\n        commentId: parentId,\n        content,\n        isPublished\n      }\n    }\n  }, accessToken);\n}\nexport async function deleteComment(graphQLClient, accessToken, commentId) {\n  await graphQLClient.send({\n    operationName: \"DeleteComment\",\n    query: DeleteCommentMutation,\n    variables: {\n      commentId\n    }\n  }, accessToken);\n}\nexport async function deleteCommentReply(graphQLClient, accessToken, replyId) {\n  await graphQLClient.send({\n    operationName: \"DeleteCommentReply\",\n    query: DeleteCommentReplyMutation,\n    variables: {\n      replyId\n    }\n  }, accessToken);\n}\nexport async function getComments(graphQLClient, recordingId, accessToken) {\n  const response = await graphQLClient.send({\n    operationName: \"GetComments\",\n    query: GetCommentsQuery,\n    variables: {\n      recordingId\n    }\n  }, accessToken);\n  const comments = response?.recording?.comments ?? []; // TODO Re-think these type differences; it would be nice for the client and GraphQL to use the same types.\n  // @ts-ignore\n\n  return comments.map(comment => {\n    return _objectSpread(_objectSpread({}, comment), {}, {\n      content: contentToString(comment.content),\n      replies: comment.replies.map(reply => {\n        return _objectSpread(_objectSpread({}, reply), {}, {\n          content: contentToString(reply.content),\n          hasFrames: comment.hasFrames,\n          sourceLocation: comment.sourceLocation,\n          time: comment.time,\n          parentId: comment.id,\n          point: comment.point,\n          position: comment.position\n        });\n      })\n    });\n  });\n}\nexport async function updateComment(graphQLClient, accessToken, commentId, newContent, newIsPublished, newPosition) {\n  await graphQLClient.send({\n    operationName: \"UpdateCommentContent\",\n    query: UpdateCommentMutation,\n    variables: {\n      newContent,\n      newIsPublished,\n      newPosition,\n      commentId\n    }\n  }, accessToken);\n}\nexport async function updateCommentReply(graphQLClient, accessToken, replyId, newContent, newIsPublished) {\n  await graphQLClient.send({\n    operationName: \"UpdateCommentReplyContent\",\n    query: UpdateCommentReplyMutation,\n    variables: {\n      newContent,\n      newIsPublished,\n      replyId\n    }\n  }, accessToken);\n} // HACK: This is the inverse of parseCommentContent() in utils/comments\n// For the purposes of this demo, comment contents are plain text.\n\nfunction contentToString(content) {\n  try {\n    content = JSON.parse(content).content.map(paragraph => paragraph.content.map(block => block.text).join(\"\")).join(\"\");\n  } catch (error) {}\n\n  return content;\n}","export function validate(code) {\n  try {\n    new Function(code);\n    return true;\n  } catch (error) {\n    return false;\n  }\n}","import styles from \"./AutoCompleteListRow.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function AutoCompleteListRow({\n  data,\n  index,\n  style\n}) {\n  const match = data.matches[index];\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: index === data.selectedIndex ? styles.RowSelected : styles.Row,\n    onClick: () => data.onSubmit(match),\n    style: style,\n    children: match\n  });\n}","import { findIndexString, insertString } from \"bvaughn-architecture-demo/src/utils/array\"; // const OBJECT_PROTOTYPE_PROPERTIES = Object.getOwnPropertyNames(Object.prototype);\n// const ARRAY_PROTOTYPE_PROPERTIES = Object.getOwnPropertyNames(Array.prototype);\n\nexport default function find(expressionHead, expressionTail, scopes, properties) {\n  if (expressionHead) {\n    // We're searching the properties of an object.\n    // Ignore scope values because they aren't part of that object.\n    if (expressionTail) {\n      return findMatches(expressionTail.toLowerCase(), null, properties);\n    } else {\n      // Show all properties until a user has started narrowing things down.\n      return flatten(null, properties);\n    }\n  } else if (expressionTail) {\n    // If there's no expression head, we might be searching values in scope,\n    // or we might be searching global/window properties.\n    return findMatches(expressionTail.toLowerCase(), scopes, properties);\n  } else {\n    return null;\n  }\n}\n\nfunction flatten(scopes, properties) {\n  const matches = [];\n\n  if (scopes) {\n    scopes.forEach(scope => {\n      scope.bindings?.forEach(binding => {\n        const name = binding.name.toLowerCase();\n\n        if (findIndexString(matches, name) < 0) {\n          insertString(matches, binding.name);\n        }\n      });\n    });\n  }\n\n  if (properties) {\n    properties.forEach(property => {\n      const name = property.name.toLowerCase();\n\n      if (findIndexString(matches, name) < 0) {\n        insertString(matches, property.name);\n      }\n    });\n  } else {// TODO\n    // Under which conditions should we fall back to this?\n    // [ARRAY_PROTOTYPE_PROPERTIES, OBJECT_PROTOTYPE_PROPERTIES].forEach(properties => {\n    //   properties.forEach(property => {\n    //     const name = property.toLowerCase();\n    //     if (findIndexString(matches, name) < 0) {\n    //       insertString(matches, property);\n    //     }\n    //   });\n    // });\n  }\n\n  return matches;\n}\n\nfunction findMatches(needle, scopes, properties) {\n  const matches = [];\n\n  if (scopes) {\n    scopes.forEach(scope => {\n      scope.bindings?.forEach(binding => {\n        const name = binding.name.toLowerCase();\n\n        if (findIndexString(matches, name) < 0 && name.startsWith(needle)) {\n          insertString(matches, binding.name);\n        }\n      });\n    });\n  }\n\n  if (properties) {\n    properties.forEach(property => {\n      const name = property.name.toLowerCase();\n\n      if (findIndexString(matches, name) < 0 && name.startsWith(needle)) {\n        insertString(matches, property.name);\n      }\n    });\n  } else {// TODO\n    // Under which conditions should we fall back to this?\n    // [ARRAY_PROTOTYPE_PROPERTIES, OBJECT_PROTOTYPE_PROPERTIES].forEach(properties => {\n    //   properties.forEach(property => {\n    //     const name = property.toLowerCase();\n    //     if (findIndexString(matches, name) < 0 && name.startsWith(needle)) {\n    //       insertString(matches, property);\n    //     }\n    //   });\n    // });\n  }\n\n  return matches;\n}","import { useContext, useEffect, useMemo, useRef, useState } from \"react\";\nimport { FixedSizeList as List } from \"react-window\";\nimport Popup from \"bvaughn-architecture-demo/components/Popup\";\nimport useCurrentPause from \"bvaughn-architecture-demo/src/hooks/useCurrentPause\";\nimport { getObjectWithPreviewSuspense } from \"bvaughn-architecture-demo/src/suspense/ObjectPreviews\";\nimport { evaluateSuspense } from \"bvaughn-architecture-demo/src/suspense/PauseCache\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport AutoCompleteListRow from \"./AutoCompleteListRow\";\nimport find from \"./utils/findMatches\";\nimport styles from \"./AutoCompleteList.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst LINE_HEIGHT = 20;\nconst MAX_LIST_HEIGHT = 200; // The legacy auto-complete allowed property previews to overflow.\n// This meant we only got a couple of them, which was only of limited use.\n// Let's try not allowing overflow and we can disable it if it's too slow.\n\nconst PREVIEW_CAN_OVERFLOW = false;\nexport default function AutoCompleteListOuter({\n  dataTestId,\n  dataTestName,\n  expression,\n  inputRef,\n  onCancel,\n  onSubmit\n}) {\n  // This hook suspends so we can't call other hooks after it.\n  // There's no point in fetching further data though unless there's a pause (or an expression),\n  // so we can bail out early after calling this hook.\n  const pause = useCurrentPause();\n\n  if (!expression || !pause) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsx(AutoCompleteListInner, {\n    dataTestId: dataTestId,\n    dataTestName: dataTestName,\n    expression: expression,\n    inputRef: inputRef,\n    onCancel: onCancel,\n    onSubmit: onSubmit,\n    pause: pause\n  });\n}\n\nfunction AutoCompleteListInner({\n  dataTestId,\n  dataTestName,\n  expression,\n  inputRef,\n  onCancel,\n  onSubmit,\n  pause\n}) {\n  const replayClient = useContext(ReplayClientContext);\n  const listRef = useRef(null);\n  const {\n    0: selectedIndex,\n    1: setSelectedIndex\n  } = useState(0);\n  const {\n    0: expressionHead,\n    1: expressionTail\n  } = useMemo(() => {\n    if (expression && expression.includes(\".\")) {\n      const pieces = expression.split(\".\");\n      return [pieces.slice(0, -1).join(\".\"), pieces[pieces.length - 1]];\n    }\n\n    return [null, expression];\n  }, [expression]);\n  let properties = null;\n  let scopes = pause.data.scopes || null;\n\n  if (expressionHead) {\n    // Evaluate the properties of an object (expressionHead)\n    const pauseId = pause.pauseId;\n    const frameId = pause.data.frames?.[0]?.frameId ?? null;\n    const maybeResult = evaluateSuspense(replayClient, pauseId, frameId, expressionHead).returned || null;\n    const maybeResultId = maybeResult?.object;\n\n    if (maybeResultId) {\n      const {\n        preview\n      } = getObjectWithPreviewSuspense(replayClient, pause.pauseId, maybeResultId, !PREVIEW_CAN_OVERFLOW);\n      properties = preview?.properties || null;\n    }\n  } else {\n    // Evaluate the properties of the global/window object\n    if (scopes && scopes.length > 0) {\n      const maybeGlobalObject = scopes[scopes.length - 1];\n      const maybeGlobalObjectId = maybeGlobalObject?.object;\n\n      if (maybeGlobalObjectId) {\n        const {\n          preview\n        } = getObjectWithPreviewSuspense(replayClient, pause.pauseId, maybeGlobalObjectId, !PREVIEW_CAN_OVERFLOW);\n        properties = preview?.properties || null;\n      }\n    }\n  }\n\n  const matches = useMemo(() => find(expressionHead, expressionTail, scopes, properties), [expressionHead, expressionTail, scopes, properties]);\n  useEffect(() => {\n    if (matches == null || matches.length == 0) {\n      return;\n    }\n\n    const onKeyDown = event => {\n      let nextIndex = null;\n\n      switch (event.key) {\n        case \"Enter\":\n          {\n            const match = matches[selectedIndex];\n\n            if (match) {\n              onSubmit(match);\n            }\n\n            break;\n          }\n\n        case \"ArrowDown\":\n          {\n            nextIndex = selectedIndex + 1 < matches.length ? selectedIndex + 1 : 0;\n            break;\n          }\n\n        case \"ArrowUp\":\n          {\n            nextIndex = selectedIndex > 0 ? selectedIndex - 1 : 0;\n            break;\n          }\n      }\n\n      if (nextIndex !== null) {\n        event.preventDefault();\n        setSelectedIndex(nextIndex);\n        const list = listRef.current;\n\n        if (list) {\n          list.scrollToItem(nextIndex, \"smart\");\n        }\n      }\n    };\n\n    if (selectedIndex >= matches.length) {\n      setSelectedIndex(matches.length - 1);\n    }\n\n    document.body.addEventListener(\"keydown\", onKeyDown);\n    return () => {\n      document.body.removeEventListener(\"keydown\", onKeyDown);\n    };\n  }, [matches, onSubmit, selectedIndex]);\n\n  if (matches == null || matches.length === 0) {\n    return null;\n  }\n\n  const itemData = {\n    matches,\n    onSubmit,\n    selectedIndex\n  };\n  return /*#__PURE__*/_jsx(Popup, {\n    dataTestId: dataTestId,\n    dataTestName: dataTestName,\n    dismiss: onCancel,\n    target: inputRef.current,\n    children: /*#__PURE__*/_jsx(List, {\n      className: styles.List,\n      height: Math.min(matches.length * LINE_HEIGHT, MAX_LIST_HEIGHT),\n      itemCount: matches.length,\n      itemData: itemData,\n      itemSize: LINE_HEIGHT,\n      ref: listRef,\n      width: 200,\n      children: AutoCompleteListRow\n    })\n  });\n}","import { useContext } from \"react\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { isPointInRegions } from \"shared/utils/time\";\nimport { TimelineContext } from \"../contexts/TimelineContext\";\nimport { getPauseForExecutionPointSuspense } from \"../suspense/PauseCache\";\nimport useLoadedRegions from \"./useRegions\";\nexport default function useCurrentPause() {\n  const client = useContext(ReplayClientContext);\n  const loadedRegions = useLoadedRegions(client);\n  const {\n    executionPoint\n  } = useContext(TimelineContext); // If we are not currently paused at an explicit point, find the nearest point and pause there.\n\n  const isLoaded = loadedRegions !== null && isPointInRegions(executionPoint, loadedRegions.loaded);\n\n  if (isLoaded) {\n    const pause = getPauseForExecutionPointSuspense(client, executionPoint);\n    return pause;\n  }\n\n  return null;\n}","import { Suspense, useRef, useState } from \"react\";\nimport getExpressionFromString from \"../utils/getExpressionFromString\";\nimport AutoCompleteList from \"./AutoCompleteList\";\nimport styles from \"./AutoComplete.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function AutoComplete({\n  autoFocus,\n  className = \"\",\n  dataTestId,\n  dataTestName,\n  onCancel: onCancelProp,\n  onChange: onChangeProp,\n  onSubmit: onSubmitProp,\n  value\n}) {\n  const inputRef = useRef(null);\n  const {\n    0: expression,\n    1: setExpression\n  } = useState(null);\n\n  const onChange = event => {\n    const input = event.currentTarget;\n    const newValue = input.value;\n\n    if (newValue !== value) {\n      onChangeProp(newValue);\n    }\n\n    const cursorIndex = input.selectionStart;\n    const shouldAutoComplete = cursorIndex === newValue.length && newValue.length > 0 && newValue.charAt(newValue.length - 1) !== \" \";\n    const expression = shouldAutoComplete ? getExpressionFromString(newValue, cursorIndex - 1) : null;\n    setExpression(expression);\n  };\n\n  const onKeyDown = event => {\n    switch (event.key) {\n      case \"Enter\":\n        {\n          if (!expression) {\n            event.preventDefault();\n            onSubmitProp();\n          }\n\n          break;\n        }\n\n      case \"Escape\":\n        {\n          event.preventDefault();\n\n          if (expression) {\n            setExpression(null);\n          } else {\n            onCancelProp();\n          }\n\n          break;\n        }\n    }\n  };\n\n  const onSubmit = match => {\n    const input = inputRef.current;\n\n    if (input) {\n      const value = input.value;\n      let cursorIndex = input.selectionStart || value.length;\n\n      while (cursorIndex >= 0) {\n        const character = value.charAt(cursorIndex - 1);\n\n        if (character === \".\" || character === \" \") {\n          break;\n        }\n\n        cursorIndex--;\n      }\n\n      const newValue = value.substr(0, cursorIndex) + match;\n      onChangeProp(newValue);\n      input.focus();\n    }\n\n    setExpression(null);\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(\"input\", {\n      autoFocus: autoFocus,\n      className: `${className} ${styles.Input}`,\n      \"data-test-id\": dataTestId,\n      \"data-test-name\": dataTestName,\n      onChange: onChange,\n      onKeyDown: onKeyDown,\n      ref: inputRef,\n      value: value\n    }), expression && /*#__PURE__*/_jsx(Suspense, {\n      children: /*#__PURE__*/_jsx(AutoCompleteList, {\n        dataTestId: dataTestId ? `${dataTestId}-List` : undefined,\n        dataTestName: dataTestName ? `${dataTestName}-List` : undefined,\n        expression: expression,\n        inputRef: inputRef,\n        onCancel: onCancelProp,\n        onSubmit: onSubmit\n      })\n    })]\n  });\n}","export default function getExpressionFromString(string, characterIndex) {\n  let expression = \"\";\n  let currentIndex = characterIndex;\n\n  while (currentIndex >= 0) {\n    const character = string.charAt(currentIndex);\n\n    if (character === \" \") {\n      break;\n    }\n\n    expression = character + expression;\n    currentIndex--;\n  } // Do some basic validation to make sure the expression is valid\n  // Don't try to auto-complete numbers.\n\n\n  if (`${parseFloat(expression)}` === expression) {\n    return null;\n  } // Don't try to auto-complete booleans.\n\n\n  if (expression === \"true\" || expression === \"false\") {\n    return null;\n  } // Don't try to auto-complete strings.\n\n\n  switch (expression.charAt(0)) {\n    case '\"':\n    case \"'\":\n      return null;\n  }\n\n  return expression || null;\n}","export function getBadgeStyleVars(badge) {\n  const badgeName = badge || \"default\";\n  return {\n    \"--badge-background-color\": `var(--badge-${badgeName}-color)`,\n    \"--badge-color\": `var(--badge-${badgeName}-contrast-color)`\n  };\n}","import { useContext, useState } from \"react\";\nimport { PointsContext } from \"bvaughn-architecture-demo/src/contexts/PointsContext\";\nimport Icon from \"../Icon\";\nimport { getBadgeStyleVars } from \"./utils/getBadgeStyleVars\";\nimport styles from \"./BadgePicker.module.css\"; // Three states prevents close animation from being shown on mount.\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function BadgePicker({\n  point\n}) {\n  const {\n    editPoint\n  } = useContext(PointsContext);\n  const {\n    0: state,\n    1: setState\n  } = useState(\"initial\");\n\n  const toggle = badge => {\n    editPoint(point.id, {\n      badge\n    });\n    setState(\"closed\");\n  };\n\n  const isInitial = state === \"initial\";\n  const isOpen = state === \"open\";\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.BadgePicker,\n    children: [/*#__PURE__*/_jsx(\"button\", {\n      className: `${styles.BadgePickerButton} ${styles.BadgePickerButtonToggle}`,\n      \"data-test-name\": isOpen ? \"BadgeButtonButton-default\" : \"BadgePickerButton\",\n      \"data-test-state\": point.badge || \"default\",\n      onClick: () => isOpen ? toggle(null) : setState(\"open\"),\n      children: isOpen ? /*#__PURE__*/_jsx(Icon, {\n        className: styles.BadgePickerButtonIcon,\n        type: \"remove\"\n      }) : /*#__PURE__*/_jsx(BadgePickerButtonIcon, {\n        badge: point.badge\n      })\n    }), isInitial || /*#__PURE__*/_jsx(\"div\", {\n      className: isOpen ? styles.BadgePickerOpen : styles.BadgePickerClosed,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.BadgePickerPopOut,\n        \"data-test-name\": \"BadgePickerPopout\",\n        children: [/*#__PURE__*/_jsx(BadgePickerButton, {\n          currentBadge: point.badge,\n          targetBadge: \"unicorn\",\n          toggle: toggle\n        }), /*#__PURE__*/_jsx(BadgePickerButton, {\n          currentBadge: point.badge,\n          targetBadge: \"green\",\n          toggle: toggle\n        }), /*#__PURE__*/_jsx(BadgePickerButton, {\n          currentBadge: point.badge,\n          targetBadge: \"yellow\",\n          toggle: toggle\n        }), /*#__PURE__*/_jsx(BadgePickerButton, {\n          currentBadge: point.badge,\n          targetBadge: \"orange\",\n          toggle: toggle\n        }), /*#__PURE__*/_jsx(BadgePickerButton, {\n          currentBadge: point.badge,\n          targetBadge: \"purple\",\n          toggle: toggle\n        })]\n      })\n    }, state)]\n  });\n}\n\nfunction BadgePickerButton({\n  currentBadge,\n  targetBadge,\n  toggle\n}) {\n  let onClick;\n\n  if (targetBadge && toggle) {\n    onClick = () => toggle(targetBadge);\n  }\n\n  return /*#__PURE__*/_jsx(\"button\", {\n    className: `${styles.BadgePickerButton} ${currentBadge === targetBadge ? styles.BadgePickerButtonCurrent : \"\"}`,\n    \"data-test-name\": `BadgeButtonButton-${targetBadge || \"default\"}`,\n    onClick: onClick,\n    children: /*#__PURE__*/_jsx(BadgePickerButtonIcon, {\n      badge: targetBadge\n    })\n  });\n}\n\nfunction BadgePickerButtonIcon({\n  badge,\n  onClick\n}) {\n  const badgeStyle = getBadgeStyleVars(badge);\n\n  if (badge === \"unicorn\") {\n    return /*#__PURE__*/_jsx(\"span\", {\n      className: styles.UnicornBadge,\n      onClick: onClick,\n      children: /*#__PURE__*/_jsx(\"span\", {\n        className: styles.Unicorn\n      })\n    });\n  } else {\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: styles.BadgePickerButtonIcon,\n      onClick: onClick,\n      style: badgeStyle\n    });\n  }\n}","import { useContext, useMemo, useState } from \"react\";\nimport { TimelineContext } from \"bvaughn-architecture-demo/src/contexts/TimelineContext\";\nimport Icon from \"../Icon\";\nimport styles from \"./CommentButton.module.css\"; // Three states prevents close animation from being shown on mount.\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function CommentButton({\n  disabled,\n  hitPoints,\n  onClick\n}) {\n  const {\n    executionPoint\n  } = useContext(TimelineContext);\n  const {\n    0: state,\n    1: setState\n  } = useState(\"initial\");\n  const isPausedAtPoint = useMemo(() => {\n    return hitPoints.find(point => point.point === executionPoint) != null;\n  }, [executionPoint, hitPoints]);\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: styles.Container,\n    onMouseEnter: () => setState(\"open\"),\n    onMouseLeave: () => setState(\"closed\"),\n    children: /*#__PURE__*/_jsxs(\"button\", {\n      className: [styles.Button, state === \"closed\" && styles.Closed, isPausedAtPoint ? styles.PausedStyle : styles.NotPausedStyle].join(\" \"),\n      disabled: disabled,\n      \"data-test-name\": \"PointPanel-AddCommentButton\",\n      onClick: onClick,\n      children: [/*#__PURE__*/_jsx(Icon, {\n        className: styles.ButtonIcon,\n        type: \"comment\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.ButtonLabel,\n        children: \"Add comment\"\n      })]\n    })\n  });\n}","import { compareExecutionPoints, isExecutionPointsGreaterThan, isExecutionPointsLessThan } from \"bvaughn-architecture-demo/src/utils/time\";\nimport { binarySearch } from \"protocol/utils\";\nconst nullTuple = [null, null];\nexport function findClosestHitPoint(hitPoints, executionPoint) {\n  const index = binarySearch(0, hitPoints.length, index => compareExecutionPoints(executionPoint, hitPoints[index].point));\n\n  if (index >= 0 && index < hitPoints.length) {\n    const hitPoint = hitPoints[index];\n    return [hitPoint, index];\n  }\n\n  return nullTuple;\n}\nexport function findHitPoint(hitPoints, executionPoint) {\n  const [hitPoint, hitPointIndex] = findClosestHitPoint(hitPoints, executionPoint);\n\n  if (hitPoint !== null && hitPoint.point === executionPoint) {\n    return [hitPoint, hitPointIndex];\n  }\n\n  return nullTuple;\n}\nexport function findHitPointAfter(hitPoints, executionPoint) {\n  const [hitPoint, index] = findClosestHitPoint(hitPoints, executionPoint);\n\n  if (hitPoint !== null) {\n    if (isExecutionPointsGreaterThan(hitPoint.point, executionPoint)) {\n      return [hitPoint, index];\n    } else {\n      const nextIndex = index + 1;\n\n      if (nextIndex < hitPoints.length) {\n        return [hitPoints[nextIndex], nextIndex];\n      }\n    }\n  }\n\n  return nullTuple;\n}\nexport function findHitPointBefore(hitPoints, executionPoint) {\n  const [hitPoint, index] = findClosestHitPoint(hitPoints, executionPoint);\n\n  if (hitPoint !== null) {\n    if (isExecutionPointsLessThan(hitPoint.point, executionPoint)) {\n      return [hitPoint, index];\n    } else {\n      const prevIndex = index - 1;\n\n      if (prevIndex >= 0) {\n        return [hitPoints[prevIndex], prevIndex];\n      }\n    }\n  }\n\n  return nullTuple;\n}\nexport function findPointForLocation(points, sourceId, lineNumber) {\n  return points.find(point => point.location.sourceId === sourceId && point.location.line === lineNumber) || null;\n}","import { useContext, useEffect, useLayoutEffect, useRef, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport Icon from \"bvaughn-architecture-demo/components/Icon\";\nimport { SessionContext } from \"bvaughn-architecture-demo/src/contexts/SessionContext\";\nimport { TimelineContext } from \"bvaughn-architecture-demo/src/contexts/TimelineContext\";\nimport { imperativelyGetClosestPointForTime } from \"bvaughn-architecture-demo/src/suspense/PointsCache\";\nimport { formatTimestamp, isExecutionPointsGreaterThan, isExecutionPointsLessThan } from \"bvaughn-architecture-demo/src/utils/time\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { getBadgeStyleVars } from \"./utils/getBadgeStyleVars\";\nimport { findHitPoint, findHitPointAfter, findHitPointBefore } from \"./utils/points\";\nimport styles from \"./PointPanelTimeline.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function PointPanelTimeline({\n  hitPoints,\n  hitPointStatus,\n  point\n}) {\n  const client = useContext(ReplayClientContext);\n  const {\n    duration,\n    trackEvent\n  } = useContext(SessionContext);\n  const {\n    executionPoint: currentExecutionPoint,\n    isPending,\n    time: currentTime,\n    update\n  } = useContext(TimelineContext);\n  const {\n    0: hoverCoordinates,\n    1: setHoverCoordinates\n  } = useState(null);\n  const {\n    0: hoverTime,\n    1: setHoverTime\n  } = useState(0); // When the user seeks to a new time, we should immediately update to reflect their intent.\n\n  const {\n    0: optimisticTime,\n    1: setOptimisticTime\n  } = useState(null);\n  const progressBarTime = isPending && optimisticTime !== null ? optimisticTime : currentTime;\n  useEffect(() => {\n    // Reset this whenever the actual time changes;\n    // It's only meant to be something shown temporarily.\n    setOptimisticTime(null);\n  }, [currentTime]);\n  useEffect(() => {\n    const hasError = hitPointStatus !== \"complete\";\n\n    if (!hasError && hitPoints !== null) {\n      trackEvent(hitPoints.length > 0 ? \"breakpoint.has_hits\" : \"breakpoint.no_hits\", {\n        hits: hitPoints.length\n      });\n    }\n  }, [hitPoints, hitPointStatus, trackEvent]);\n  const [currentHitPoint, currentHitPointIndex] = findHitPoint(hitPoints, currentExecutionPoint);\n  const firstHitPoint = hitPoints.length > 0 ? hitPoints[0] : null;\n  const lastHitPoint = hitPoints.length > 0 ? hitPoints[hitPoints.length - 1] : null;\n  const previousButtonEnabled = firstHitPoint != null && isExecutionPointsLessThan(firstHitPoint.point, currentExecutionPoint);\n  const nextButtonEnabled = lastHitPoint != null && isExecutionPointsGreaterThan(lastHitPoint.point, currentExecutionPoint);\n\n  const goToPrevious = () => {\n    const [prevHitPoint] = findHitPointBefore(hitPoints, currentExecutionPoint);\n\n    if (prevHitPoint !== null) {\n      setOptimisticTime(prevHitPoint.time);\n      update(prevHitPoint.time, prevHitPoint.point);\n    }\n  };\n\n  const goToNext = () => {\n    const [nextHitPoint] = findHitPointAfter(hitPoints, currentExecutionPoint);\n\n    if (nextHitPoint !== null) {\n      setOptimisticTime(nextHitPoint.time);\n      update(nextHitPoint.time, nextHitPoint.point);\n    }\n  };\n\n  const label = currentHitPointIndex !== null ? `${currentHitPointIndex + 1} / ${hitPoints.length}` : hitPoints.length;\n  const tooManyPointsToFind = hitPointStatus === \"too-many-points-to-find\";\n  const badgeStyle = getBadgeStyleVars(point.badge);\n\n  const onTimelineClick = async event => {\n    if (isPending) {\n      return;\n    }\n\n    const currentTarget = event.currentTarget;\n    const rect = currentTarget.getBoundingClientRect();\n    const relativeX = event.clientX - rect.x;\n    const percentage = Math.max(0, Math.min(1, relativeX / rect.width));\n    const time = Math.round(duration * percentage);\n    const point = await imperativelyGetClosestPointForTime(client, time);\n    setOptimisticTime(hoverTime);\n    update(hoverTime, point);\n  };\n\n  const onTimelineMouseLeave = () => {\n    setHoverTime(0);\n    setHoverCoordinates(null);\n  };\n\n  const onTimelineMouseMove = event => {\n    const currentTarget = event.currentTarget;\n    const rect = currentTarget.getBoundingClientRect();\n    const relativeX = event.clientX - rect.x;\n    const percentage = Math.max(0, Math.min(1, relativeX / rect.width));\n    const time = Math.round(duration * percentage);\n    setHoverTime(time);\n    setHoverCoordinates({\n      clientX: event.clientX,\n      clientY: event.clientY\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(\"button\", {\n      className: styles.PreviousHitPointButton,\n      \"data-test-name\": \"PreviousHitPointButton\",\n      disabled: isPending || !previousButtonEnabled,\n      onClick: goToPrevious,\n      children: /*#__PURE__*/_jsx(Icon, {\n        className: styles.PreviousHitPointButtonIcon,\n        type: \"arrow-left\"\n      })\n    }), tooManyPointsToFind ? /*#__PURE__*/_jsx(\"div\", {\n      className: styles.HitPointsLabelTooMany,\n      \"data-test-name\": \"LogPointStatus\",\n      style: badgeStyle,\n      children: \"-\"\n    }) : /*#__PURE__*/_jsx(\"div\", {\n      className: styles.HitPointsLabel,\n      \"data-test-name\": \"LogPointStatus\",\n      style: badgeStyle,\n      children: label\n    }), /*#__PURE__*/_jsx(\"button\", {\n      className: styles.NextHitPointButton,\n      \"data-test-name\": \"NextHitPointButton\",\n      disabled: isPending || !nextButtonEnabled,\n      onClick: goToNext,\n      children: /*#__PURE__*/_jsx(Icon, {\n        className: styles.NextHitPointButtonIcon,\n        type: \"arrow-right\"\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: isPending ? styles.HitPointTimelineDisabled : styles.HitPointTimeline,\n      \"data-test-name\": \"PointPanelTimeline\",\n      \"data-test-state\": isPending ? \"disabled\" : \"enabled\",\n      onClick: onTimelineClick,\n      onMouseLeave: onTimelineMouseLeave,\n      onMouseMove: onTimelineMouseMove,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.HitPointTimelineBackground\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: !isPending && hoverTime > 0 && hoverTime < progressBarTime ? styles.ProgressBarPartiallyOpaque : styles.ProgressBarOpaque,\n        style: {\n          width: `${100 * progressBarTime / duration}%`\n        }\n      }), !isPending && hoverTime > 0 && /*#__PURE__*/_jsx(\"div\", {\n        className: hoverTime < progressBarTime ? styles.ProgressBarOpaque : styles.ProgressBarPartiallyOpaque,\n        style: {\n          width: `${100 * hoverTime / duration}%`\n        }\n      }), hitPoints.map(hitPoint => /*#__PURE__*/_jsx(\"button\", {\n        className: currentHitPoint === hitPoint ? styles.HitPointButtonCurrent : styles.HitPointButton,\n        disabled: isPending,\n        onClick: event => {\n          event.stopPropagation();\n          event.preventDefault();\n          setOptimisticTime(hitPoint.time);\n          update(hitPoint.time, hitPoint.point);\n        },\n        style: {\n          left: `${100 * hitPoint.time / duration}%`\n        }\n      }, hitPoint.point)), hoverTime !== null && hoverCoordinates !== null && /*#__PURE__*/_jsx(TimeTooltip, {\n        clientX: hoverCoordinates.clientX,\n        clientY: hoverCoordinates.clientY,\n        time: hoverTime\n      })]\n    })]\n  });\n}\n\nfunction TimeTooltip({\n  clientX,\n  clientY,\n  time\n}) {\n  const ref = useRef(null);\n  useLayoutEffect(() => {\n    const tooltip = ref.current;\n    const rect = tooltip.getBoundingClientRect();\n    tooltip.style.left = `${clientX - rect.width / 2}px`;\n    tooltip.style.top = `${clientY - rect.height}px`;\n  });\n  return /*#__PURE__*/createPortal( /*#__PURE__*/_jsx(\"div\", {\n    className: styles.TimeTool,\n    ref: ref,\n    children: formatTimestamp(time)\n  }), document.body);\n}","import { Suspense } from \"react\";\nimport { parse } from \"bvaughn-architecture-demo/src/suspense/SyntaxParsingCache\";\nimport Loader from \"../Loader\";\nimport styles from \"./SyntaxHighlightedLine.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function SyntaxHighlightedLine({\n  code,\n  editable\n}) {\n  return /*#__PURE__*/_jsx(Suspense, {\n    fallback: /*#__PURE__*/_jsx(Loader, {}),\n    children: /*#__PURE__*/_jsx(SyntaxHighlightedLineSuspends, {\n      code: code,\n      editable: editable\n    })\n  });\n}\n\nfunction SyntaxHighlightedLineSuspends({\n  code,\n  editable = false,\n  fileExtension = \".js\"\n}) {\n  const htmlLines = parse(code, fileExtension) || [];\n  return /*#__PURE__*/_jsx(\"span\", {\n    className: styles.Code,\n    contentEditable: editable,\n    dangerouslySetInnerHTML: {\n      __html: htmlLines.join(\"\\n\")\n    }\n  });\n}","import { Suspense, unstable_useCacheRefresh as useCacheRefresh, useContext, useMemo, useState, useTransition } from \"react\";\nimport Icon from \"bvaughn-architecture-demo/components/Icon\";\nimport { FocusContext } from \"bvaughn-architecture-demo/src/contexts/FocusContext\";\nimport { GraphQLClientContext } from \"bvaughn-architecture-demo/src/contexts/GraphQLClientContext\";\nimport { InspectorContext } from \"bvaughn-architecture-demo/src/contexts/InspectorContext\";\nimport { PointsContext } from \"bvaughn-architecture-demo/src/contexts/PointsContext\";\nimport { SessionContext } from \"bvaughn-architecture-demo/src/contexts/SessionContext\";\nimport { TimelineContext } from \"bvaughn-architecture-demo/src/contexts/TimelineContext\";\nimport { addComment as addCommentGraphQL } from \"bvaughn-architecture-demo/src/graphql/Comments\";\nimport { getHitPointsForLocationSuspense } from \"bvaughn-architecture-demo/src/suspense/PointsCache\";\nimport { validate } from \"bvaughn-architecture-demo/src/utils/points\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport Loader from \"../Loader\";\nimport AutoComplete from \"./AutoComplete/AutoComplete\";\nimport BadgePicker from \"./BadgePicker\";\nimport CommentButton from \"./CommentButton\";\nimport PointPanelTimeline from \"./PointPanelTimeline\";\nimport SyntaxHighlightedLine from \"./SyntaxHighlightedLine\";\nimport styles from \"./PointPanel.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function SourcePanelWrapper({\n  className,\n  point\n}) {\n  return /*#__PURE__*/_jsx(Suspense, {\n    fallback: /*#__PURE__*/_jsx(Loader, {\n      className: `${styles.Loader} ${className}`\n    }),\n    children: /*#__PURE__*/_jsx(PointPanel, {\n      className: className,\n      point: point\n    })\n  });\n}\n\nfunction PointPanel({\n  className,\n  point\n}) {\n  const {\n    range: focusRange\n  } = useContext(FocusContext);\n  const graphQLClient = useContext(GraphQLClientContext);\n  const {\n    showCommentsPanel\n  } = useContext(InspectorContext);\n  const {\n    editPoint\n  } = useContext(PointsContext);\n  const client = useContext(ReplayClientContext);\n  const {\n    accessToken,\n    recordingId,\n    trackEvent\n  } = useContext(SessionContext);\n  const {\n    executionPoint: currentExecutionPoint,\n    time: curentTime\n  } = useContext(TimelineContext);\n  const [hitPoints, hitPointStatus] = getHitPointsForLocationSuspense(client, point.location, null, focusRange);\n  const invalidateCache = useCacheRefresh();\n  const {\n    0: isEditing,\n    1: setIsEditing\n  } = useState(false);\n  const {\n    0: isPending,\n    1: startTransition\n  } = useTransition();\n  const {\n    0: editableCondition,\n    1: setEditableCondition\n  } = useState(point.condition);\n  const {\n    0: editableContent,\n    1: setEditableContent\n  } = useState(point.content);\n  const isContentValid = useMemo(() => !!editableContent && validate(editableContent), [editableContent]);\n  const isConditionValid = useMemo(() => editableCondition === null || validate(editableCondition), [editableCondition]);\n  const hasChanged = editableCondition !== point.condition || editableContent !== point.content;\n  const lineNumber = point.location.line;\n\n  if (isEditing) {\n    const hasCondition = editableCondition !== null;\n\n    const onCancel = () => {\n      setEditableContent(point.content);\n      setEditableCondition(point.condition);\n      setIsEditing(false);\n    };\n\n    const onEditableContentChange = newContent => {\n      trackEvent(\"breakpoint.set_log\");\n      setEditableContent(newContent);\n    };\n\n    const onEditableConditionChange = newCondition => {\n      trackEvent(\"breakpoint.set_condition\");\n      setEditableCondition(newCondition);\n    };\n\n    const onSubmit = () => {\n      if (isConditionValid && isContentValid && hasChanged) {\n        editPoint(point.id, {\n          condition: editableCondition || null,\n          content: editableContent\n        });\n      }\n\n      setIsEditing(false);\n    };\n\n    const onAddConditionClick = () => {\n      setEditableCondition(\"\");\n    };\n\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: `${styles.Panel} ${className}`,\n      \"data-test-id\": `PointPanel-${lineNumber}`,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.LayoutRow,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.MainColumn,\n          children: [hasCondition && /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.FixedHeightRow,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.ContentPrefixLabel,\n              children: \"if\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: isConditionValid ? styles.ContentWrapper : styles.ContentWrapperInvalid,\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: styles.Content,\n                children: /*#__PURE__*/_jsx(AutoComplete, {\n                  autoFocus: true,\n                  className: styles.ContentInput,\n                  dataTestName: \"PointPanel-ConditionInput\",\n                  onCancel: onCancel,\n                  onChange: onEditableConditionChange,\n                  onSubmit: onSubmit,\n                  value: editableCondition\n                })\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.FixedHeightRow,\n            children: [hasCondition && /*#__PURE__*/_jsx(\"div\", {\n              className: styles.ContentPrefixLabel,\n              children: \"log\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: isContentValid ? styles.ContentWrapper : styles.ContentWrapperInvalid,\n              children: [/*#__PURE__*/_jsx(BadgePicker, {\n                point: point\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: styles.Content,\n                children: /*#__PURE__*/_jsx(AutoComplete, {\n                  autoFocus: true,\n                  className: styles.ContentInput,\n                  dataTestName: \"PointPanel-ContentInput\",\n                  onCancel: onCancel,\n                  onChange: onEditableContentChange,\n                  onSubmit: onSubmit,\n                  value: editableContent\n                })\n              })]\n            })]\n          }), !hasCondition && /*#__PURE__*/_jsx(\"div\", {\n            className: styles.FixedHeightRow,\n            children: /*#__PURE__*/_jsx(\"button\", {\n              className: styles.AddConditionButton,\n              \"data-test-name\": \"PointPanel-AddConditionButton\",\n              disabled: isPending,\n              onClick: onAddConditionClick,\n              children: \"Add conditional\"\n            })\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.SecondaryColumn,\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: styles.FixedHeightRow,\n            children: /*#__PURE__*/_jsx(\"button\", {\n              className: styles.SaveButton,\n              \"data-test-name\": \"PointPanel-SaveButton\",\n              disabled: isPending || !isContentValid || !isConditionValid || !hasChanged,\n              onClick: onSubmit,\n              children: \"Save\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.FixedHeightRow,\n            children: /*#__PURE__*/_jsx(\"button\", {\n              className: styles.CancelButton,\n              \"data-test-name\": \"PointPanel-CancelButton\",\n              disabled: isPending,\n              onClick: onCancel,\n              children: \"Cancel\"\n            })\n          })]\n        })]\n      })\n    });\n  } else {\n    const hasCondition = point.condition !== null;\n    let showTooManyPointsMessage = false;\n\n    switch (hitPointStatus) {\n      case \"too-many-points-to-find\":\n      case \"too-many-points-to-run-analysis\":\n        showTooManyPointsMessage = true;\n        break;\n    }\n\n    const startEditing = () => {\n      trackEvent(\"breakpoint.start_edit\");\n      setEditableCondition(point.condition || null);\n      setEditableContent(point.content);\n      setIsEditing(true);\n    };\n\n    const addComment = () => {\n      if (accessToken === null) {\n        return;\n      }\n\n      startTransition(async () => {\n        if (showCommentsPanel !== null) {\n          showCommentsPanel();\n        }\n\n        trackEvent(\"breakpoint.add_comment\");\n        await addCommentGraphQL(graphQLClient, accessToken, recordingId, {\n          content: \"\",\n          hasFrames: true,\n          isPublished: false,\n          point: currentExecutionPoint,\n          sourceLocation: point.location,\n          time: curentTime\n        });\n        invalidateCache();\n      });\n    };\n\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: `${styles.Panel} ${className}`,\n      \"data-test-id\": `PointPanel-${lineNumber}`,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: styles.LayoutRow,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.MainColumn,\n          children: [hasCondition && /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.FixedHeightRow,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.ContentPrefixLabel,\n              children: \"if\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.ContentWrapper,\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: styles.Content,\n                onClick: showTooManyPointsMessage ? undefined : startEditing,\n                children: /*#__PURE__*/_jsx(SyntaxHighlightedLine, {\n                  code: point.condition\n                })\n              }), /*#__PURE__*/_jsx(\"button\", {\n                className: styles.EditButton,\n                disabled: isPending,\n                onClick: showTooManyPointsMessage ? undefined : startEditing,\n                \"data-test-name\": \"PointPanel-EditButton\",\n                children: /*#__PURE__*/_jsx(Icon, {\n                  className: styles.EditButtonIcon,\n                  type: \"edit\"\n                })\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.FixedHeightRow,\n            children: [hasCondition && /*#__PURE__*/_jsx(\"div\", {\n              className: styles.ContentPrefixLabel,\n              children: \"log\"\n            }), showTooManyPointsMessage ? /*#__PURE__*/_jsx(\"div\", {\n              className: styles.ContentWrapperTooManyPoints,\n              children: \"Use Focus Mode to reduce the number of hits.\"\n            }) : /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.ContentWrapper,\n              children: [/*#__PURE__*/_jsx(BadgePicker, {\n                point: point\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: styles.Content,\n                onClick: showTooManyPointsMessage ? undefined : startEditing,\n                children: /*#__PURE__*/_jsx(SyntaxHighlightedLine, {\n                  code: point.content\n                })\n              }), /*#__PURE__*/_jsx(\"button\", {\n                className: styles.EditButton,\n                disabled: isPending,\n                onClick: showTooManyPointsMessage ? undefined : startEditing,\n                \"data-test-name\": \"PointPanel-EditButton\",\n                children: /*#__PURE__*/_jsx(Icon, {\n                  className: styles.EditButtonIcon,\n                  type: \"edit\"\n                })\n              })]\n            })]\n          })]\n        }), accessToken !== null && /*#__PURE__*/_jsx(\"div\", {\n          className: styles.SecondaryColumn,\n          children: /*#__PURE__*/_jsx(CommentButton, {\n            disabled: isPending,\n            hitPoints: hitPoints,\n            onClick: addComment\n          })\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.FixedHeightRow,\n        children: /*#__PURE__*/_jsx(PointPanelTimeline, {\n          hitPoints: hitPoints,\n          hitPointStatus: hitPointStatus,\n          point: point\n        })\n      })]\n    });\n  }\n}","import styles from \"./SourceLineLoadingPlaceholder.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function SourceLineLoadingPlaceholder({\n  width\n}) {\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: styles.Shimmer,\n    style: {\n      width: `${width}ch`\n    },\n    children: \"\\xA0\"\n  });\n}","export function formatHitCount(count) {\n  if (count === 10000) {\n    return \"10k+\";\n  } else if (count < 1000) {\n    return `${count}`;\n  } else {\n    return `${Math.round(count / 100) / 10}k`;\n  }\n}","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { Suspense, memo, useMemo, useState, useSyncExternalStore } from \"react\";\nimport { areEqual } from \"react-window\";\nimport Icon from \"bvaughn-architecture-demo/components/Icon\";\nimport CurrentLineHighlight from \"./CurrentLineHighlight\";\nimport HoverButton from \"./HoverButton\";\nimport PointPanel from \"./PointPanel\";\nimport SourceLineLoadingPlaceholder from \"./SourceLineLoadingPlaceholder\";\nimport { formatHitCount } from \"./utils/formatHitCount\";\nimport { findPointForLocation } from \"./utils/points\";\nimport styles from \"./SourceListRow.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst SourceListRow = /*#__PURE__*/memo(({\n  data,\n  index,\n  style\n}) => {\n  const {\n    0: isHovered,\n    1: setIsHovered\n  } = useState(false);\n  const loadingPlaceholderWidth = useMemo(() => Math.round(5 + Math.random() * 30), []);\n  const lineNumber = index + 1;\n  const {\n    addPoint,\n    deletePoints,\n    editPoint,\n    hitCounts,\n    maxHitCount,\n    minHitCount,\n    points,\n    setShowHitCounts,\n    showColumnBreakpoints,\n    showHitCounts,\n    source,\n    streamingParser\n  } = data;\n  const {\n    sourceId\n  } = source;\n  const parsedLines = useSyncExternalStore(streamingParser.subscribe, () => streamingParser.parsedLines, () => streamingParser.parsedLines);\n  const rawLines = useSyncExternalStore(streamingParser.subscribe, () => streamingParser.rawLines, () => streamingParser.rawLines);\n  const lineHitCounts = hitCounts?.get(lineNumber) || null;\n  const html = index < parsedLines.length ? parsedLines[index] : null;\n  const point = findPointForLocation(points, sourceId, lineNumber);\n  const hitCount = lineHitCounts?.count || null;\n  const lineHasHits = hitCount !== null && hitCount > 0; // We use a gradient to indicate the \"heat\" (the number of hits).\n  // This absolute hit count values are relative, per file.\n  // Cubed root prevents high hit counts from lumping all other values together.\n\n  const NUM_GRADIENT_COLORS = 3;\n  let hitCountBarClassName = styles.LineHitCountBar0;\n  let hitCountLabelClassName = styles.LineHitCountLabel0;\n  let hitCountIndex = NUM_GRADIENT_COLORS - 1;\n\n  if (hitCount !== null && minHitCount !== null && maxHitCount !== null) {\n    if (minHitCount !== maxHitCount) {\n      hitCountIndex = Math.min(NUM_GRADIENT_COLORS - 1, Math.round((hitCount - minHitCount) / (maxHitCount - minHitCount) * NUM_GRADIENT_COLORS));\n    }\n\n    hitCountBarClassName = styles[`LineHitCountBar${hitCountIndex + 1}`];\n    hitCountLabelClassName = styles[`LineHitCountLabel${hitCountIndex + 1}`];\n  }\n\n  let lineSegments = null;\n\n  if (html !== null) {\n    if (showColumnBreakpoints && point?.shouldLog) {\n      const {\n        id,\n        location,\n        shouldBreak\n      } = point;\n\n      if (location.column === 0) {\n        // Special case; much simpler.\n        lineSegments = /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(\"button\", {\n            className: styles.BreakpointButton,\n            onClick: () => editPoint(id, {\n              shouldBreak: !shouldBreak\n            }),\n            children: /*#__PURE__*/_jsx(Icon, {\n              className: shouldBreak ? styles.BreakpointIcon : styles.DisabledBreakpointIcon,\n              type: \"breakpoint\"\n            })\n          }), /*#__PURE__*/_jsx(\"pre\", {\n            className: styles.LineSegment,\n            dangerouslySetInnerHTML: {\n              __html: html\n            }\n          })]\n        });\n      } else {\n        // HACK\n        // This could possibly be done in a smarter way?\n        const div = document.createElement(\"div\");\n        div.innerHTML = html;\n        let htmlAfter = \"\";\n        let htmlBefore = \"\";\n        let columnIndex = 0;\n\n        while (div.childNodes.length > 0) {\n          const child = div.childNodes[0];\n          htmlBefore += child.outerHTML || child.textContent;\n          child.remove();\n          columnIndex += child.textContent?.length || 0;\n\n          if (columnIndex >= location.column) {\n            htmlAfter = div.innerHTML;\n            break;\n          }\n        }\n\n        lineSegments = /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(\"pre\", {\n            className: styles.LineSegment,\n            dangerouslySetInnerHTML: {\n              __html: htmlBefore\n            }\n          }), /*#__PURE__*/_jsx(\"button\", {\n            className: styles.BreakpointButton,\n            onClick: () => editPoint(id, {\n              shouldBreak: !shouldBreak\n            }),\n            children: /*#__PURE__*/_jsx(Icon, {\n              className: shouldBreak ? styles.BreakpointIcon : styles.DisabledBreakpointIcon,\n              type: \"breakpoint\"\n            })\n          }), /*#__PURE__*/_jsx(\"pre\", {\n            className: styles.LineSegment,\n            dangerouslySetInnerHTML: {\n              __html: htmlAfter\n            }\n          })]\n        });\n      }\n    } else {\n      lineSegments = /*#__PURE__*/_jsx(\"pre\", {\n        className: styles.LineSegment,\n        dangerouslySetInnerHTML: {\n          __html: html\n        }\n      });\n    }\n  } else {\n    const plainText = index < rawLines.length ? rawLines[index] : null;\n\n    if (plainText !== null) {\n      lineSegments = /*#__PURE__*/_jsx(\"pre\", {\n        className: styles.LineSegment,\n        children: plainText\n      });\n    } else {\n      lineSegments = /*#__PURE__*/_jsx(SourceLineLoadingPlaceholder, {\n        width: loadingPlaceholderWidth\n      });\n    }\n  }\n\n  const toggleBreakpoint = () => {\n    if (lineHitCounts === null) {\n      return;\n    }\n\n    if (point) {\n      if (!point.shouldBreak || point.shouldLog) {\n        editPoint(point.id, {\n          shouldBreak: !point.shouldBreak\n        });\n      } else {\n        deletePoints(point.id);\n      }\n    } else {\n      // TODO The legacy app uses the closest function name for the content (if there is one).\n      // This app doesn't yet have logic for parsing source contents though.\n      addPoint({\n        shouldBreak: true\n      }, {\n        column: lineHitCounts.firstBreakableColumnIndex,\n        line: lineNumber,\n        sourceId\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.Row,\n    \"data-test-id\": `SourceLine-${lineNumber}`,\n    onMouseEnter: () => setIsHovered(true),\n    onMouseLeave: () => setIsHovered(false),\n    style: _objectSpread(_objectSpread({}, style), {}, {\n      // Each row should grow as much as needed to fit its code/content.\n      // The parent list will measure rows after render and adjust the min-width of the list.\n      // This prevents horizontal scrolling from jumping as new rows are rendered.\n      width: undefined\n    }),\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: lineHasHits ? styles.LineWithHits : styles.LineWithoutHits,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: styles.LineNumber,\n        \"data-test-id\": `SourceLine-LineNumber-${lineNumber}`,\n        children: [lineNumber, /*#__PURE__*/_jsx(\"div\", {\n          className: point?.shouldBreak ? styles.BreakpointToggleOn : styles.BreakpointToggleOff,\n          \"data-test-name\": \"BreakpointToggle\",\n          \"data-test-state\": point?.shouldBreak ? \"on\" : \"off\",\n          onClick: toggleBreakpoint,\n          children: lineNumber\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: `${styles.LineHitCountBar} ${hitCountBarClassName}`,\n        onClick: () => setShowHitCounts(!showHitCounts)\n      }), showHitCounts && /*#__PURE__*/_jsx(\"div\", {\n        className: `${styles.LineHitCountLabel} ${hitCountLabelClassName}`,\n        onClick: () => setShowHitCounts(!showHitCounts),\n        children: hitCount !== null ? formatHitCount(hitCount) : \"\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.LineSegmentsAndPointPanel,\n        children: [lineSegments, isHovered && /*#__PURE__*/_jsx(Suspense, {\n          children: /*#__PURE__*/_jsx(HoverButton, {\n            addPoint: addPoint,\n            buttonClassName: styles.HoverButton,\n            deletePoints: deletePoints,\n            editPoint: editPoint,\n            iconClassName: styles.HoverButtonIcon,\n            lineHitCounts: lineHitCounts,\n            lineNumber: lineNumber,\n            point: point,\n            source: source\n          })\n        })]\n      }), point?.shouldLog && /*#__PURE__*/_jsx(PointPanel, {\n        className: styles.PointPanel,\n        point: point\n      })]\n    }), /*#__PURE__*/_jsx(CurrentLineHighlight, {\n      lineNumber: lineNumber,\n      sourceId: sourceId\n    })]\n  });\n}, areEqual);\nSourceListRow.displayName = \"SourceListRow\";\nexport default SourceListRow;","export default function getScrollbarWidth() {\n  if (typeof document !== \"undefined\") {\n    const div = document.createElement(\"div\");\n    div.style.overflow = \"scroll\";\n    document.body.appendChild(div);\n    const scrollBarWidth = div.offsetWidth - div.clientWidth;\n    document.body.removeChild(div);\n    return scrollBarWidth;\n  }\n\n  return 0;\n}","import { useCallback, useContext, useEffect, useLayoutEffect, useMemo, useRef, useSyncExternalStore } from \"react\";\nimport { VariableSizeList as List } from \"react-window\";\nimport { FocusContext } from \"bvaughn-architecture-demo/src/contexts/FocusContext\";\nimport { PointsContext } from \"bvaughn-architecture-demo/src/contexts/PointsContext\";\nimport { SourcesContext } from \"bvaughn-architecture-demo/src/contexts/SourcesContext\";\nimport useLocalStorage from \"bvaughn-architecture-demo/src/hooks/useLocalStorage\";\nimport { getCachedMinMaxSourceHitCounts, getSourceHitCountsSuspense } from \"bvaughn-architecture-demo/src/suspense/SourcesCache\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport useFontBasedListMeasurents from \"./hooks/useFontBasedListMeasurents\";\nimport SourceListRow from \"./SourceListRow\";\nimport { SourceSearchContext } from \"./SourceSearchContext\";\nimport { formatHitCount } from \"./utils/formatHitCount\";\nimport getScrollbarWidth from \"./utils/getScrollbarWidth\";\nimport { findPointForLocation } from \"./utils/points\";\nimport styles from \"./SourceList.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function SourceList({\n  height,\n  showColumnBreakpoints,\n  source,\n  streamingParser,\n  streamingSourceContents,\n  width\n}) {\n  const {\n    sourceId\n  } = source;\n  const scrollbarWidth = useMemo(getScrollbarWidth, []);\n  const innerRef = useRef(null);\n  const listRef = useRef(null);\n  const {\n    range: focusRange\n  } = useContext(FocusContext);\n  const {\n    addPoint,\n    deletePoints,\n    editPoint,\n    points\n  } = useContext(PointsContext);\n  const client = useContext(ReplayClientContext);\n  const {\n    focusedLineNumber,\n    focusedSourceId,\n    markPendingFocusUpdateProcessed,\n    pendingFocusUpdate,\n    setVisibleLines,\n    visibleLines\n  } = useContext(SourcesContext);\n  const {\n    conditionalPointPanelHeight,\n    pointPanelHeight,\n    lineHeight,\n    lineHeightWithConditionalPoint,\n    lineHeightWithPoint\n  } = useFontBasedListMeasurents(listRef);\n  const lineCount = useSyncExternalStore(streamingSourceContents.subscribe, () => streamingSourceContents.lineCount, () => streamingSourceContents.lineCount);\n  useEffect(() => {\n    if (pendingFocusUpdate === null || focusedLineNumber === null || focusedSourceId === null) {\n      return;\n    }\n\n    const list = listRef.current;\n\n    if (list) {\n      const lineIndex = focusedLineNumber - 1;\n      list.scrollToItem(lineIndex, \"smart\"); // Important!\n      // Don't mark the update processed until we have actually scrolled to the line.\n      // The Source viewer might be suspended, loading data, and we don't want to drop the scroll action.\n\n      markPendingFocusUpdateProcessed();\n    }\n  }, [focusedLineNumber, focusedSourceId, markPendingFocusUpdateProcessed, pendingFocusUpdate, sourceId]);\n  const {\n    0: sourceSearchState,\n    1: sourceSearchActions\n  } = useContext(SourceSearchContext);\n  useLayoutEffect(() => {\n    const {\n      pendingUpdateForScope,\n      enabled,\n      index,\n      results\n    } = sourceSearchState;\n\n    if (pendingUpdateForScope === null || pendingUpdateForScope !== sourceId) {\n      return;\n    }\n\n    if (enabled) {\n      if (results.length > 0) {\n        const lineIndex = results[index];\n        const list = listRef.current;\n\n        if (list) {\n          list.scrollToItem(lineIndex, \"smart\");\n        }\n      }\n\n      sourceSearchActions.markUpdateProcessed();\n    }\n  }, [sourceId, sourceSearchActions, sourceSearchState]);\n  const togglesLocalStorageKey = `Replay:ShowHitCounts`;\n  const [showHitCounts, setShowHitCounts] = useLocalStorage(togglesLocalStorageKey, true);\n  const hitCounts = visibleLines ? getSourceHitCountsSuspense(client, sourceId, visibleLines, focusRange) : null;\n  const [minHitCount, maxHitCount] = getCachedMinMaxSourceHitCounts(sourceId, focusRange);\n  const prevPointsRef = useRef([]);\n  useLayoutEffect(() => {\n    const list = listRef.current;\n\n    if (list) {\n      const prevPoints = prevPointsRef.current; // HACK\n      // This is a really lazy way of invalidating cached measurements;\n      // It's better than invalidating from index 0, but it's still likely to be more work than necessary.\n\n      const prevPointsIndex = prevPoints.length > 0 ? prevPoints[0].location.line - 1 : Number.MAX_SAFE_INTEGER;\n      const nextPointsIndex = points.length > 0 ? points[0].location.line - 1 : Number.MAX_SAFE_INTEGER;\n      const index = Math.min(prevPointsIndex, nextPointsIndex);\n      list.resetAfterIndex(index);\n    }\n\n    prevPointsRef.current = points;\n  }, [points]);\n  const itemData = useMemo(() => ({\n    addPoint,\n    deletePoints,\n    editPoint,\n    hitCounts,\n    lineHeight,\n    maxHitCount,\n    minHitCount,\n    points,\n    setShowHitCounts,\n    showColumnBreakpoints,\n    showHitCounts,\n    source,\n    streamingParser\n  }), [addPoint, deletePoints, editPoint, hitCounts, lineHeight, maxHitCount, minHitCount, points, showHitCounts, showColumnBreakpoints, setShowHitCounts, source, streamingParser]);\n  const getItemSize = useCallback(index => {\n    const lineNumber = index + 1;\n    const point = findPointForLocation(points, sourceId, lineNumber);\n\n    if (point === null || !point.shouldLog) {\n      return lineHeight;\n    } else if (point.condition !== null) {\n      return lineHeightWithConditionalPoint;\n    } else {\n      return lineHeightWithPoint;\n    }\n  }, [lineHeight, lineHeightWithConditionalPoint, lineHeightWithPoint, points, sourceId]);\n  const longestLineWidthRef = useRef(0);\n  const onItemsRendered = useCallback(({\n    visibleStartIndex,\n    visibleStopIndex\n  }) => {\n    setVisibleLines(visibleStartIndex, visibleStopIndex); // Ensure that the list remains wide enough to horizontally scroll to the largest line we've rendered.\n    // This won't quite work the same as a non-windowed solution; it's an approximation.\n\n    const container = innerRef.current;\n\n    if (container) {\n      let longestLineWidth = 0;\n\n      for (let index = 0; index < container.children.length; index++) {\n        const child = container.children[index];\n        longestLineWidth = Math.max(longestLineWidth, child.clientWidth);\n      }\n\n      if (longestLineWidth > longestLineWidthRef.current) {\n        longestLineWidthRef.current = longestLineWidth;\n        container.style.setProperty(\"--longest-line-width\", `${longestLineWidth}px`);\n      }\n    }\n  }, [setVisibleLines]);\n  const maxLineNumberStringLength = `${lineCount}`.length;\n  const maxHitCountStringLength = showHitCounts && maxHitCount !== null ? `${formatHitCount(maxHitCount)}`.length : 0;\n  const widthMinusScrollbar = width - scrollbarWidth;\n  const style = {\n    \"--conditional-point-panel-height\": `${conditionalPointPanelHeight}px`,\n    \"--hit-count-size\": `${maxHitCountStringLength}ch`,\n    \"--line-height\": `${lineHeight}px`,\n    \"--line-number-size\": `${maxLineNumberStringLength + 1}ch`,\n    \"--list-width\": `${widthMinusScrollbar}px`,\n    \"--point-panel-height\": `${pointPanelHeight}px`\n  };\n  return /*#__PURE__*/_jsx(List, {\n    className: styles.List,\n    estimatedItemSize: lineHeight,\n    height: height,\n    innerRef: innerRef,\n    itemCount: lineCount || 0,\n    itemData: itemData,\n    itemSize: getItemSize,\n    onItemsRendered: onItemsRendered,\n    ref: listRef,\n    style: style,\n    width: width,\n    children: SourceListRow\n  });\n}","import { useSyncExternalStore } from \"react\";\nimport styles from \"./StreamingSourceLoadingProgressHeader.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function StreamingSourceLoadingProgressHeader({\n  streamingParser\n}) {\n  const rawProgress = useSyncExternalStore(streamingParser.subscribe, () => streamingParser.rawProgress, () => streamingParser.rawProgress);\n  const parsedProgress = useSyncExternalStore(streamingParser.subscribe, () => streamingParser.parsedProgress, () => streamingParser.parsedProgress);\n  const loadedProgressBarWidth = Math.round(rawProgress * 100);\n  const parsedProgressBarWidth = Math.round(parsedProgress * 100);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.Container,\n    style: {\n      // Collapse progress bar once loading has finished\n      height: rawProgress === 1 ? 0 : undefined\n    },\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: styles.RawProgressBar,\n      style: {\n        width: `${loadedProgressBarWidth}%`\n      }\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.ParsedProgressBar,\n      style: {\n        // Show parsed progress bar once parsing has started\n        opacity: parsedProgress > 0 ? 1 : 0,\n        width: parsedProgress > 0 ? `${parsedProgressBarWidth}%` : 0\n      }\n    })]\n  });\n}","import debounce from \"lodash/debounce\";\nimport { Suspense, useContext, useLayoutEffect, useRef, useState } from \"react\";\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport { getStreamingSourceContentsSuspense } from \"bvaughn-architecture-demo/src/suspense/SourcesCache\";\nimport { parseStreaming } from \"bvaughn-architecture-demo/src/suspense/SyntaxParsingCache\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport Loader from \"../Loader\";\nimport PreviewPopup from \"./PreviewPopup\";\nimport SourceList from \"./SourceList\";\nimport StreamingSourceLoadingProgressHeader from \"./StreamingSourceLoadingProgressHeader\";\nimport getExpressionForTokenElement from \"./utils/getExpressionForTokenElement\";\nimport styles from \"./Source.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst MOUSE_MOVE_DEBOUNCE_DURATION = 250;\nexport default function Source({\n  source,\n  showColumnBreakpoints\n}) {\n  return /*#__PURE__*/_jsx(Suspense, {\n    fallback: /*#__PURE__*/_jsx(Loader, {\n      className: styles.Loader\n    }),\n    children: /*#__PURE__*/_jsx(SourceLoader, {\n      source: source,\n      showColumnBreakpoints: showColumnBreakpoints\n    })\n  });\n}\n\nfunction SourceLoader({\n  source,\n  showColumnBreakpoints\n}) {\n  const client = useContext(ReplayClientContext);\n  const streamingSourceContents = getStreamingSourceContentsSuspense(client, source.sourceId);\n\n  if (source === null) {\n    return null;\n  }\n\n  const streamingParser = parseStreaming(streamingSourceContents);\n\n  if (streamingParser === null) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsx(SourceRenderer, {\n    showColumnBreakpoints: showColumnBreakpoints,\n    source: source,\n    streamingParser: streamingParser,\n    streamingSourceContents: streamingSourceContents\n  });\n}\n\nfunction SourceRenderer({\n  showColumnBreakpoints,\n  source,\n  streamingParser,\n  streamingSourceContents\n}) {\n  const {\n    0: hoveredState,\n    1: setHoveredState\n  } = useState(null);\n  useLayoutEffect(() => () => {\n    // If a hover preview is visible when this Source is hidden for Offscreen\n    // make sure to clean it up so it doesn't remain visible.\n    setHoveredState(null);\n  }, []);\n  useLayoutEffect(() => {\n    if (hoveredState) {\n      const target = hoveredState.target;\n      target.classList.add(styles.HoveredTarget);\n      return () => {\n        target.classList.remove(styles.HoveredTarget);\n      };\n    }\n  }, [hoveredState]);\n  const sourceRef = useRef(null);\n\n  const onMouseMove = ({\n    target\n  }) => {\n    const source = sourceRef.current;\n\n    if (!source.contains(target)) {\n      // Don't react to mouse move events within e.g. the preview popup.\n      return;\n    } // HACK\n    // This is kind of a janky way to differentiate tokens from non-tokens but it works for now.\n\n\n    const htmlElement = target;\n    const className = htmlElement.className;\n    const isToken = typeof className === \"string\" && className.startsWith(\"tok-\");\n\n    if (isToken) {\n      // Debounce hover event to avoid showing the popup (or requesting data) in response to normal mouse movements.\n      setHoverStateDebounced(htmlElement, setHoveredState);\n    } else {\n      // Mouse-out should immediately cancel any pending actions.\n      // This avoids race cases where we might show a popup after the mouse has moused away.\n      setHoverStateDebounced.cancel();\n      setHoveredState(null);\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.Source,\n    \"data-test-id\": `Source-${source.sourceId}`,\n    \"data-test-name\": \"Source\",\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: styles.SourceList,\n      onMouseMove: onMouseMove,\n      ref: sourceRef,\n      children: [/*#__PURE__*/_jsx(AutoSizer, {\n        children: ({\n          height,\n          width\n        }) => /*#__PURE__*/_jsx(SourceList, {\n          height: height,\n          showColumnBreakpoints: showColumnBreakpoints,\n          source: source,\n          streamingParser: streamingParser,\n          streamingSourceContents: streamingSourceContents,\n          width: width\n        })\n      }), /*#__PURE__*/_jsx(StreamingSourceLoadingProgressHeader, {\n        streamingParser: streamingParser\n      })]\n    }), hoveredState ? /*#__PURE__*/_jsx(PreviewPopup, {\n      containerRef: sourceRef,\n      dismiss: () => setHoveredState(null),\n      expression: hoveredState.expression,\n      target: hoveredState.target\n    }) : null]\n  });\n}\n\nconst setHoverStateDebounced = debounce((element, setHoveredState) => {\n  let expression = null;\n\n  if (element !== null) {\n    const rowElement = element.parentElement;\n    expression = getExpressionForTokenElement(rowElement, element);\n  }\n\n  setHoveredState(expression ? {\n    expression,\n    target: element\n  } : null);\n}, MOUSE_MOVE_DEBOUNCE_DURATION);","export default function getExpressionForTokenElement(rowElement, tokenElement) {\n  if (tokenElement.tagName === \"PRE\") {\n    return null;\n  }\n\n  switch (tokenElement.className) {\n    case \"tok-comment\":\n    case \"tok-number\":\n    case \"tok-operator\":\n    case \"tok-punctuation\":\n    case \"tok-string\":\n    case \"tok-string2\":\n      return null;\n  }\n\n  const children = Array.from(rowElement.childNodes);\n  let expression = tokenElement.textContent;\n  let currentTokenElement = tokenElement;\n\n  while (currentTokenElement != null) {\n    const index = children.indexOf(currentTokenElement);\n\n    if (index < 1) {\n      break;\n    }\n\n    currentTokenElement = children[index - 1];\n\n    if (currentTokenElement.nodeName === \"#text\") {\n      break;\n    } else {\n      const textContent = currentTokenElement.textContent;\n\n      if (textContent === null || textContent.trim() === \"\") {\n        break;\n      }\n    }\n\n    if (currentTokenElement.className !== \"tok-punctuation\") {\n      expression = currentTokenElement.textContent + expression;\n    }\n\n    if (currentTokenElement.textContent !== \".\") {\n      break;\n    }\n  }\n\n  return expression.startsWith(\".\") ? expression.slice(1) : expression;\n}","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport sortedIndexBy from \"lodash/sortedIndexBy\";\nimport { useContext, useLayoutEffect, useMemo, useRef, useState } from \"react\";\nimport { SourcesContext } from \"bvaughn-architecture-demo/src/contexts/SourcesContext\";\nimport { getSourceFileName } from \"bvaughn-architecture-demo/src/utils/source\";\nimport useSearch from \"./useSearch\";\n\nfunction search(query, sources) {\n  const needle = query.toLocaleLowerCase();\n  const results = [];\n\n  for (let sourceIndex = 0; sourceIndex < sources.length; sourceIndex++) {\n    const source = sources[sourceIndex];\n    let queryIndex = 0;\n    let queryCharacter = needle.charAt(queryIndex);\n    const characterIndices = [];\n    let weight = 0; // TODO Search the entire path/url (not just the file name)\n\n    const fileName = getSourceFileName(source, true);\n\n    if (fileName !== null) {\n      for (let index = 0; index < fileName.length; index++) {\n        const character = fileName.charAt(index);\n\n        if (character === queryCharacter) {\n          if (characterIndices.length > 0) {\n            const prevCharacterIndex = characterIndices[characterIndices.length - 1];\n\n            if (prevCharacterIndex === index - 1) {\n              // Give weight to consecutive characters.\n              weight++;\n            }\n          }\n\n          characterIndices.push(index);\n          queryIndex++;\n\n          if (queryIndex >= needle.length) {\n            // We've found a match!\n            const result = {\n              characterIndices,\n              source,\n              weight\n            }; // Insert results in order of weight (highest to lowest).\n\n            const index = sortedIndexBy(results, result, ({\n              weight\n            }) => -weight);\n            results.splice(index, 0, result);\n            break;\n          } else {\n            queryCharacter = needle.charAt(queryIndex);\n          }\n        }\n      }\n    }\n  }\n\n  return results;\n}\n\nexport default function useSourceFileNameSearch() {\n  const {\n    focusedSourceId,\n    openSource\n  } = useContext(SourcesContext);\n  const focusedSourceIdRef = useRef(null);\n  const {\n    0: sources,\n    1: setSources\n  } = useState([]);\n  const [state, dispatch] = useSearch(sources, search);\n  const {\n    0: goToLineState,\n    1: setGoToLineState\n  } = useState({\n    goToLineMode: false,\n    goToLineNumber: null\n  });\n  useLayoutEffect(() => {\n    focusedSourceIdRef.current = focusedSourceId;\n  }, [focusedSourceId]);\n  const externalActions = useMemo(() => _objectSpread(_objectSpread({}, dispatch), {}, {\n    search: query => {\n      dispatch.search(query);\n      const goToLineMode = query.startsWith(\":\");\n      let goToLineNumber = null;\n\n      if (goToLineMode) {\n        const parsed = parseInt(query.slice(1), 10);\n\n        if (!Number.isNaN(parsed)) {\n          goToLineNumber = parsed;\n        }\n      }\n\n      setGoToLineState({\n        goToLineMode,\n        goToLineNumber\n      });\n\n      if (goToLineNumber !== null) {\n        const sourceId = focusedSourceIdRef.current;\n\n        if (sourceId != null) {\n          openSource(sourceId, goToLineNumber);\n        }\n      }\n    },\n    setSources\n  }), [dispatch, openSource]);\n  const externalState = useMemo(() => _objectSpread(_objectSpread({}, state), goToLineState), [goToLineState, state]);\n  return [externalState, externalActions];\n}","import { createContext, useContext, useEffect, useMemo } from \"react\";\nimport { getSourcesHelper } from \"bvaughn-architecture-demo/src/suspense/SourcesCache\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport useSourceFileNameSearch from \"./hooks/useSourceFileNameSearch\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const SourceFileNameSearchContext = /*#__PURE__*/createContext(null);\nexport function SourceFileNameSearchContextRoot({\n  children\n}) {\n  const client = useContext(ReplayClientContext);\n  const [state, actions] = useSourceFileNameSearch();\n  const context = useMemo(() => [state, actions], [state, actions]); // Keep source search state in sync with the focused source.\n\n  useEffect(() => {\n    async function updateSources(setSources) {\n      const sources = await getSourcesHelper(client);\n      setSources(sources);\n    }\n\n    updateSources(actions.setSources);\n  }, [client, actions]);\n  return /*#__PURE__*/_jsx(SourceFileNameSearchContext.Provider, {\n    value: context,\n    children: children\n  });\n}","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { useContext } from \"react\";\nimport Icon from \"../Icon\";\nimport { SourceSearchContext } from \"./SourceSearchContext\";\nimport styles from \"./SourceSearch.module.css\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function SourceSearch({\n  containerRef,\n  inputRef\n}) {\n  const {\n    0: searchState,\n    1: searchActions\n  } = useContext(SourceSearchContext);\n  const {\n    caseSensitive,\n    regex,\n    wholeWord\n  } = searchState.modifiers;\n\n  const onChange = event => {\n    searchActions.search(event.currentTarget.value);\n  };\n\n  const onKeyDown = event => {\n    switch (event.key) {\n      case \"Enter\":\n        {\n          event.preventDefault();\n\n          if (event.shiftKey) {\n            searchActions.goToPrevious();\n          } else {\n            searchActions.goToNext();\n          }\n\n          break;\n        }\n\n      case \"Escape\":\n        {\n          event.preventDefault();\n          searchActions.disable();\n          const container = containerRef.current;\n\n          if (container) {\n            container.focus();\n          }\n\n          break;\n        }\n    }\n  };\n\n  if (!searchState.enabled) {\n    return null;\n  }\n\n  let results = null;\n\n  if (searchState.results.length > 0) {\n    results = /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.Results,\n      \"data-test-id\": \"SearchResultsLabel\",\n      children: [searchState.index + 1, \" of \", searchState.results.length, \" results\"]\n    });\n  } else if (searchState.query !== \"\") {\n    results = /*#__PURE__*/_jsx(\"div\", {\n      className: styles.Results,\n      children: \"No results found\"\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.Container,\n    \"data-test-id\": \"SourceSearch\",\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: styles.InputAndResults,\n      children: [/*#__PURE__*/_jsx(Icon, {\n        className: styles.SearchIcon,\n        type: \"search\"\n      }), /*#__PURE__*/_jsx(\"input\", {\n        autoFocus: true,\n        className: styles.Input,\n        \"data-test-id\": \"SourceSearchInput\",\n        onChange: onChange,\n        onKeyDown: onKeyDown,\n        placeholder: \"Find\",\n        ref: inputRef,\n        type: \"text\",\n        value: searchState.query\n      }), results, /*#__PURE__*/_jsx(\"button\", {\n        className: styles.ResultsIconButton,\n        \"data-test-id\": \"SourceSearchGoToPreviousButton\",\n        disabled: searchState.results.length === 0,\n        onClick: searchActions.goToPrevious,\n        children: /*#__PURE__*/_jsx(Icon, {\n          className: styles.ResultsIcon,\n          type: \"up\"\n        })\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: styles.ResultsIconButton,\n        \"data-test-id\": \"SourceSearchGoToNextButton\",\n        disabled: searchState.results.length === 0,\n        onClick: searchActions.goToNext,\n        children: /*#__PURE__*/_jsx(Icon, {\n          className: styles.ResultsIcon,\n          type: \"down\"\n        })\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.Modifiers,\n      children: [\"Modifiers:\", /*#__PURE__*/_jsx(\"button\", {\n        className: [styles.ResultsIconButton, regex && styles.ResultsIconButtonActive].join(\" \"),\n        \"data-test-id\": \"SearchRegExButton\",\n        onClick: () => searchActions.setModifiers(_objectSpread(_objectSpread({}, searchState.modifiers), {}, {\n          regex: !regex\n        })),\n        children: \".*\"\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: [styles.ResultsIconButton, caseSensitive && styles.ResultsIconButtonActive].join(\" \"),\n        \"data-test-id\": \"SearchCaseSensitivityButton\",\n        onClick: () => searchActions.setModifiers(_objectSpread(_objectSpread({}, searchState.modifiers), {}, {\n          caseSensitive: !caseSensitive\n        })),\n        children: \"Aa\"\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: [styles.ResultsIconButton, wholeWord && styles.ResultsIconButtonActive].join(\" \"),\n        \"data-test-id\": \"SearchWholeWordButtonButton\",\n        onClick: () => searchActions.setModifiers(_objectSpread(_objectSpread({}, searchState.modifiers), {}, {\n          wholeWord: !wholeWord\n        })),\n        children: /*#__PURE__*/_jsx(\"span\", {\n          className: styles.WholeWordText,\n          children: \"ab\"\n        })\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.Modifiers,\n      children: /*#__PURE__*/_jsx(\"button\", {\n        className: styles.ResultsIconButton,\n        \"data-test-id\": \"SourceSearchClearButton\",\n        onClick: searchActions.disable,\n        children: /*#__PURE__*/_jsx(Icon, {\n          className: styles.ResultsIcon,\n          type: \"cancel\"\n        })\n      })\n    })]\n  });\n}","import \"bvaughn-architecture-demo/components/sources/CodeMirror.css\";\nimport { KeyboardEvent, useContext, useEffect, useLayoutEffect, useRef } from \"react\";\n\nimport LazyOffscreen from \"bvaughn-architecture-demo/components/LazyOffscreen\";\nimport Source from \"bvaughn-architecture-demo/components/sources/Source\";\nimport { SourceFileNameSearchContextRoot } from \"bvaughn-architecture-demo/components/sources/SourceFileNameSearchContext\";\nimport SourceSearch from \"bvaughn-architecture-demo/components/sources/SourceSearch\";\nimport {\n  SourceSearchContext,\n  SourceSearchContextRoot,\n} from \"bvaughn-architecture-demo/components/sources/SourceSearchContext\";\nimport { KeyboardModifiersContextRoot } from \"bvaughn-architecture-demo/src/contexts/KeyboardModifiersContext\";\nimport { SourcesContext } from \"bvaughn-architecture-demo/src/contexts/SourcesContext\";\nimport { getSource } from \"bvaughn-architecture-demo/src/suspense/SourcesCache\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { useFeature } from \"ui/hooks/settings\";\nimport { getSelectedLocation } from \"ui/reducers/sources\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\n\nimport { setViewport } from \"../../selectors\";\n\nexport default function NewSourceAdapterRoot() {\n  return (\n    <KeyboardModifiersContextRoot>\n      <SourceFileNameSearchContextRoot>\n        <SourceSearchContextRoot>\n          <NewSourceAdapter />\n        </SourceSearchContextRoot>\n      </SourceFileNameSearchContextRoot>\n    </KeyboardModifiersContextRoot>\n  );\n}\n\nfunction NewSourceAdapter() {\n  const replayClient = useContext(ReplayClientContext);\n  const { focusedSourceId, openSource, openSourceIds, visibleLines } = useContext(SourcesContext);\n  const [sourceSearchState, sourceSearchActions] = useContext(SourceSearchContext);\n\n  const sourceSearchInputRef = useRef<HTMLInputElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const { value: showColumnBreakpoints } = useFeature(\"columnBreakpoints\");\n\n  const dispatch = useAppDispatch();\n  const location = useAppSelector(getSelectedLocation);\n\n  // Sync the selected location that's in Redux to the new SourcesContext.\n  // This makes the CMD+O and CMD+G menus work.\n  // This also makes clicking on Console log locations work.\n  useLayoutEffect(() => {\n    if (location == null) {\n      return;\n    }\n\n    // TRICKY\n    // Legacy code passes 1-based line numbers around,\n    // Except when a filed is opened (e.g. by clicking on the file tab) in which cases it passes 0.\n    // We ignore the 0 because it breaks scroll state preservation between tabs.\n    const lineNumber = location?.line ?? 0;\n\n    openSource(location.sourceId, lineNumber > 0 ? lineNumber : undefined);\n  }, [location, openSource]);\n\n  // Sync the lines currently rendered by the new Source list to Redux.\n  // This updates Redux state to mark certain actions as \"processed\".\n  useEffect(() => {\n    if (visibleLines) {\n      dispatch(setViewport(visibleLines));\n    }\n  }, [dispatch, visibleLines]);\n\n  const onKeyDown = (event: KeyboardEvent) => {\n    switch (event.key) {\n      case \"f\":\n      case \"F\":\n        if (event.ctrlKey || event.metaKey) {\n          sourceSearchActions.enable();\n\n          const input = sourceSearchInputRef.current;\n          if (input) {\n            input.focus();\n          }\n\n          event.preventDefault();\n          event.stopPropagation();\n        }\n        break;\n    }\n  };\n\n  return (\n    <div\n      className=\"editor-wrapper relative flex flex-col outline-none\"\n      onKeyDown={onKeyDown}\n      ref={containerRef}\n      tabIndex={0}\n    >\n      {openSourceIds.map(sourceId => {\n        const source = getSource(replayClient, sourceId);\n        return (\n          <LazyOffscreen key={sourceId} mode={sourceId === focusedSourceId ? \"visible\" : \"hidden\"}>\n            <Source source={source!} showColumnBreakpoints={showColumnBreakpoints} />\n          </LazyOffscreen>\n        );\n      })}\n      {sourceSearchState.enabled && (\n        <SourceSearch containerRef={containerRef} inputRef={sourceSearchInputRef} />\n      )}\n    </div>\n  );\n}\n","import classNames from \"classnames\";\nimport React from \"react\";\n\nimport { getSelectedSource } from \"ui/reducers/sources\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\n\nimport { deselectSource } from \"../../actions/sources/select\";\n\nexport default function CommandPaletteButton() {\n  const selectedSource = useAppSelector(getSelectedSource);\n  const dispatch = useAppDispatch();\n\n  const showCommandPalette = () => dispatch(deselectSource());\n\n  return (\n    <button\n      className={classNames(\"command-palette cursor-auto\", { active: !selectedSource })}\n      onClick={showCommandPalette}\n    >\n      <div className=\"img replay-logo\" style={{ height: \"20px\", width: \"20px\" }} />\n    </button>\n  );\n}\n","/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at <http://mozilla.org/MPL/2.0/>. */\n\n//\n\nimport classnames from \"classnames\";\nimport React, { PureComponent } from \"react\";\nimport { ConnectedProps, connect } from \"react-redux\";\n\nimport { buildMenu, showMenu } from \"devtools/shared/contextmenu\";\nimport { actions } from \"ui/actions\";\nimport { Redacted } from \"ui/components/Redacted\";\nimport { SourceDetails, getHasSiblingOfSameName, getSelectedSource } from \"ui/reducers/sources\";\nimport { UIState } from \"ui/state\";\nimport { trackEvent } from \"ui/utils/telemetry\";\n\nimport { getActiveSearch, getContext, getSourcesForTabs } from \"../../selectors\";\nimport { copyToTheClipboard } from \"../../utils/clipboard\";\nimport {\n  getFileURL,\n  getRawSourceURL,\n  getSourceQueryString,\n  getTruncatedFileName,\n  isPretty,\n} from \"../../utils/source\";\nimport { getTabMenuItems } from \"../../utils/tabs\";\nimport { CloseButton } from \"../shared/Button\";\nimport SourceIcon from \"../shared/SourceIcon\";\n\ninterface TabProps {\n  source: SourceDetails;\n  onDragOver: React.DragEventHandler<HTMLDivElement>;\n  onDragStart: React.DragEventHandler<HTMLDivElement>;\n  onDragEnd: React.DragEventHandler<HTMLDivElement>;\n}\n\nconst mapStateToProps = (state: UIState, { source }: TabProps) => {\n  const selectedSource = getSelectedSource(state);\n\n  return {\n    cx: getContext(state),\n    tabSources: getSourcesForTabs(state),\n    selectedSource,\n    activeSearch: getActiveSearch(state),\n    hasSiblingOfSameName: getHasSiblingOfSameName(state, source),\n  };\n};\n\nconst connector = connect(\n  mapStateToProps,\n  {\n    selectSource: actions.selectSource,\n    copyToClipboard: actions.copyToClipboard,\n    closeTab: actions.closeTab,\n    closeTabs: actions.closeTabs,\n    showSource: actions.showSource,\n    ensureSourcesIsVisible: actions.ensureSourcesIsVisible,\n  },\n  null,\n  {\n    forwardRef: true,\n  }\n);\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\ntype FinalTabProps = PropsFromRedux & TabProps;\n\nclass Tab extends PureComponent<FinalTabProps> {\n  onTabContextMenu = (event: React.MouseEvent, tab: string) => {\n    event.preventDefault();\n    event.stopPropagation();\n    this.showContextMenu(event, tab);\n  };\n\n  showContextMenu(e: React.MouseEvent, tab: string) {\n    const {\n      cx,\n      closeTab,\n      closeTabs,\n      copyToClipboard,\n      tabSources,\n      showSource,\n      selectedSource,\n      source,\n      ensureSourcesIsVisible,\n    } = this.props;\n\n    trackEvent(\"tabs.context_menu\");\n    const tabCount = tabSources.length;\n    const otherTabs = tabSources.filter(t => t.id !== tab);\n    const sourceTab = tabSources.find(t => t.id == tab);\n    const tabURLs = tabSources.map(t => t.url!);\n    const otherTabURLs = otherTabs.map(t => t.url!);\n\n    if (!sourceTab || !selectedSource) {\n      return;\n    }\n\n    const tabMenuItems = getTabMenuItems();\n    const items = [\n      {\n        item: {\n          ...tabMenuItems.closeTab,\n          click: () => closeTab(cx, sourceTab),\n        },\n      },\n      {\n        item: {\n          ...tabMenuItems.closeOtherTabs,\n          click: () => closeTabs(cx, otherTabURLs),\n          disabled: otherTabURLs.length === 0,\n        },\n      },\n      {\n        item: {\n          ...tabMenuItems.closeTabsToEnd,\n          click: () => {\n            const tabIndex = tabSources.findIndex(t => t.id == tab);\n            closeTabs(\n              cx,\n              tabURLs.filter((t, i) => i > tabIndex)\n            );\n          },\n          disabled: tabCount === 1 || tabSources.some((t, i) => t.id === tab && tabCount - 1 === i),\n        },\n      },\n      {\n        item: {\n          ...tabMenuItems.closeAllTabs,\n          click: () => closeTabs(cx, tabURLs),\n        },\n      },\n      { item: { type: \"separator\" } },\n      {\n        item: {\n          ...tabMenuItems.copyToClipboard,\n          disabled: selectedSource.id !== tab,\n          click: () => copyToClipboard(sourceTab),\n        },\n      },\n      {\n        item: {\n          ...tabMenuItems.copySourceUri2,\n          disabled: !selectedSource.url,\n          click: () => copyToTheClipboard(getRawSourceURL(sourceTab.url)),\n        },\n      },\n      {\n        item: {\n          ...tabMenuItems.showSource,\n          disabled: !selectedSource.url,\n          click: () => {\n            ensureSourcesIsVisible();\n            showSource(cx, tab);\n          },\n        },\n      },\n    ];\n\n    showMenu(e, buildMenu(items));\n  }\n\n  isSourceSearchEnabled() {\n    // @ts-expect-error activeSearch possible values mismatch\n    return this.props.activeSearch === \"source\";\n  }\n\n  render() {\n    const {\n      cx,\n      selectedSource,\n      selectSource,\n      closeTab,\n      source,\n      tabSources,\n      hasSiblingOfSameName,\n      onDragOver,\n      onDragStart,\n      onDragEnd,\n    } = this.props;\n    const sourceId = source.id;\n    const active = selectedSource && sourceId == selectedSource.id && !this.isSourceSearchEnabled();\n    const isPrettyCode = isPretty(source);\n\n    function onClickClose(e: React.MouseEvent) {\n      e.stopPropagation();\n      trackEvent(\"tabs.close\");\n      closeTab(cx, source);\n    }\n\n    function handleTabClick(e: React.MouseEvent) {\n      e.preventDefault();\n      e.stopPropagation();\n      trackEvent(\"tabs.select\");\n      return selectSource(cx, sourceId);\n    }\n\n    const className = classnames(\"source-tab\", {\n      active,\n      pretty: isPrettyCode,\n    });\n\n    const query = hasSiblingOfSameName ? getSourceQueryString(source) : \"\";\n\n    return (\n      <Redacted\n        draggable\n        onDragOver={onDragOver}\n        onDragStart={onDragStart}\n        onDragEnd={onDragEnd}\n        className={className}\n        data-status={active ? \"active\" : undefined}\n        data-test-name={`Source-${getTruncatedFileName(source, query)}`}\n        key={sourceId}\n        onClick={handleTabClick}\n        // Accommodate middle click to close tab\n        onMouseUp={e => e.button === 1 && closeTab(cx, source)}\n        onContextMenu={e => this.onTabContextMenu(e, sourceId)}\n        title={getFileURL(source, false)}\n      >\n        <SourceIcon\n          source={source}\n          shouldHide={(icon: string) => [\"file\", \"javascript\"].includes(icon)}\n        />\n        <div className=\"filename\">{getTruncatedFileName(source, query)}</div>\n        <CloseButton buttonClass=\"\" handleClick={onClickClose} tooltip={\"Close tab\"} />\n      </Redacted>\n    );\n  }\n}\n\nexport default connector(Tab);\n","/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at <http://mozilla.org/MPL/2.0/>. */\n\nimport React, { PureComponent } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { ConnectedProps, connect } from \"react-redux\";\n\nimport { getToolboxLayout } from \"ui/reducers/layout\";\nimport { SourceDetails, getSelectedSource } from \"ui/reducers/sources\";\nimport type { UIState } from \"ui/state\";\nimport { trackEvent } from \"ui/utils/telemetry\";\n\nimport actions from \"../../actions\";\nimport { openQuickOpen as openQuickOpenAction } from \"../../actions/quick-open\";\nimport { getSourcesForTabs } from \"../../selectors\";\nimport { isPretty } from \"../../utils/source\";\nimport CommandPaletteButton from \"./CommandPaletteButton\";\nimport Tab from \"./Tab\";\n\nconst mapStateToProps = (state: UIState) => ({\n  selectedSource: getSelectedSource(state),\n  tabSources: getSourcesForTabs(state),\n  toolboxLayout: getToolboxLayout(state),\n});\n\nconst connector = connect(mapStateToProps, {\n  moveTabBySourceId: actions.moveTabBySourceId,\n  openQuickOpen: openQuickOpenAction,\n});\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nclass Tabs extends PureComponent<PropsFromRedux> {\n  _draggedSource: SourceDetails | { url: null; id: null } | null = null;\n  _draggedSourceIndex: number | null = null;\n\n  componentDidUpdate(prevProps: PropsFromRedux) {\n    const { selectedSource } = this.props;\n\n    if (selectedSource && selectedSource != prevProps.selectedSource) {\n      // @ts-expect-error DOM node stuff\n      const sourceNodes = [...this.refs.sourceTabs.children];\n      const selectedSourceNode = sourceNodes.find(node => node.classList.contains(\"active\"));\n\n      const isSelectedSourceNodeVisible = this.getIsSelectedSourceNodeVisible();\n\n      if (selectedSourceNode && !isSelectedSourceNodeVisible) {\n        selectedSourceNode.scrollIntoView({ block: \"center\" });\n      }\n    }\n  }\n\n  getIsSelectedSourceNodeVisible() {\n    // @ts-expect-error DOM node stuff\n    const containerNode = this.refs.sourceTabs.parentElement;\n    // @ts-expect-error DOM node stuff\n    const sourceNodes = [...this.refs.sourceTabs.children];\n    const selectedSourceNode = sourceNodes.find(node => node.classList.contains(\"active\"));\n\n    if (!selectedSourceNode) {\n      return false;\n    }\n\n    const { x: containerX, width: containerWidth } = containerNode.getBoundingClientRect();\n    const { x: childX, width: childWidth } = selectedSourceNode.getBoundingClientRect();\n\n    const visibleLeft = containerX;\n    const visibleRight = containerX + containerWidth;\n    const selectedSourceNodeLeft = childX;\n    const selectedSourceNodeRight = childX + childWidth;\n\n    const leftIsVisible = visibleLeft < selectedSourceNodeLeft;\n    const rightIsVisible = visibleRight > selectedSourceNodeRight;\n\n    return leftIsVisible && rightIsVisible;\n  }\n\n  get draggedSource() {\n    return this._draggedSource == null ? { url: null, id: null } : this._draggedSource;\n  }\n\n  set draggedSource(source: SourceDetails | { url: null; id: null } | null) {\n    this._draggedSource = source;\n  }\n\n  get draggedSourceIndex() {\n    return this._draggedSourceIndex == null ? -1 : this._draggedSourceIndex;\n  }\n\n  set draggedSourceIndex(index: number | null) {\n    this._draggedSourceIndex = index;\n  }\n\n  getIconClass(source: SourceDetails) {\n    if (isPretty(source)) {\n      return \"prettyPrint\";\n    }\n\n    return \"file\";\n  }\n\n  onTabDragStart = (source: SourceDetails, index: number) => {\n    trackEvent(\"tabs.drag_start\");\n    this.draggedSource = source;\n    this.draggedSourceIndex = index;\n  };\n\n  onTabDragEnd = () => {\n    trackEvent(\"tabs.drag_stop\");\n    this.draggedSource = null;\n    this.draggedSourceIndex = null;\n  };\n\n  onTabDragOver = (e: React.MouseEvent, source: SourceDetails, hoveredTabIndex: number) => {\n    const { moveTabBySourceId } = this.props;\n    if (hoveredTabIndex === this.draggedSourceIndex) {\n      return;\n    }\n\n    const tabDOM = ReactDOM.findDOMNode(this.refs[`tab_${source.id}`])! as HTMLElement;\n\n    /* $FlowIgnore: tabDOM.nodeType will always be of Node.ELEMENT_NODE since it comes from a ref;\n      however; the return type of findDOMNode is null | Element | Text */\n    const tabDOMRect = tabDOM!.getBoundingClientRect()!;\n    const { pageX: mouseCursorX } = e;\n    if (\n      /* Case: the mouse cursor moves into the left half of any target tab */\n      mouseCursorX - tabDOMRect.left <\n      tabDOMRect.width / 2\n    ) {\n      // The current tab goes to the left of the target tab\n      const targetTab =\n        hoveredTabIndex > this.draggedSourceIndex! ? hoveredTabIndex - 1 : hoveredTabIndex;\n      moveTabBySourceId(this.draggedSource!.id!, targetTab);\n      this.draggedSourceIndex = targetTab;\n    } else if (\n      /* Case: the mouse cursor moves into the right half of any target tab */\n      mouseCursorX - tabDOMRect.left >=\n      tabDOMRect.width / 2\n    ) {\n      // The current tab goes to the right of the target tab\n      const targetTab =\n        hoveredTabIndex < this.draggedSourceIndex! ? hoveredTabIndex + 1 : hoveredTabIndex;\n      moveTabBySourceId(this.draggedSource!.id!, targetTab);\n      this.draggedSourceIndex = targetTab;\n    }\n  };\n\n  renderTabs() {\n    const { openQuickOpen, tabSources, toolboxLayout } = this.props;\n\n    return (\n      <>\n        <div className=\"source-tabs tab\" ref=\"sourceTabs\">\n          {toolboxLayout == \"ide\" && <CommandPaletteButton />}\n          {tabSources.map((source, index) => {\n            return (\n              <Tab\n                onDragStart={_ => this.onTabDragStart(source, index)}\n                onDragOver={e => {\n                  this.onTabDragOver(e, source, index);\n                  e.preventDefault();\n                }}\n                onDragEnd={this.onTabDragEnd}\n                key={index}\n                source={source}\n                ref={`tab_${source.id}`}\n              />\n            );\n          })}\n        </div>\n        {tabSources.length > 1 && (\n          <button\n            className=\"source-drop-down-button\"\n            onClick={() => openQuickOpen(\"\", false, true)}\n            title=\"Show opened files\"\n          >\n            ⋯\n          </button>\n        )}\n      </>\n    );\n  }\n\n  render() {\n    const { toolboxLayout, tabSources } = this.props;\n    const isSingleColumnLayout = [\"left\", \"bottom\"].includes(toolboxLayout);\n\n    if (isSingleColumnLayout && !tabSources.length) {\n      return null;\n    }\n\n    return <div className=\"source-header\">{this.renderTabs()}</div>;\n  }\n}\nexport default connector(Tabs);\n","import classNames from \"classnames\";\nimport React, { useEffect, useLayoutEffect, useRef, useState } from \"react\";\n\nimport { setUnexpectedError } from \"ui/actions/errors\";\nimport { ReplayUpdatedError } from \"ui/components/ErrorBoundary\";\nimport { Redacted } from \"ui/components/Redacted\";\nimport { useFeature } from \"ui/hooks/settings\";\nimport { getToolboxLayout } from \"ui/reducers/layout\";\nimport { getSelectedSource } from \"ui/reducers/sources\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\nimport useWidthObserver from \"ui/utils/useWidthObserver\";\n\nimport { waitForEditor } from \"../../utils/editor/create-editor\";\nimport WelcomeBox from \"../WelcomeBox\";\nimport EditorFooter from \"./Footer\";\nimport Editor from \"./index\";\nimport NewSourceAdapter from \"./NewSourceAdapter\";\nimport EditorTabs from \"./Tabs\";\n\nexport const EditorPane = () => {\n  const [loadingEditor, setLoadingEditor] = useState(true);\n  const dispatch = useAppDispatch();\n  const toolboxLayout = useAppSelector(getToolboxLayout);\n  const selectedSource = useAppSelector(getSelectedSource);\n  const panelEl = useRef(null);\n  const { value: enableLargeText } = useFeature(\"enableLargeText\");\n  const { value: enableNewSourceViewer } = useFeature(\"newSourceViewer\");\n\n  const nodeWidth = useWidthObserver(panelEl);\n\n  // ExperimentFeature: LargeText Logic\n  useLayoutEffect(() => {\n    const root = document.querySelector<HTMLElement>(\":root\")!;\n    if (enableLargeText) {\n      root.style.setProperty(\"--theme-code-font-size\", \"14px\");\n    } else {\n      root.style.setProperty(\"--theme-code-font-size\", \"11px\");\n    }\n  }, [enableLargeText]);\n  useEffect(() => {\n    (async () => {\n      try {\n        await waitForEditor();\n        setLoadingEditor(false);\n      } catch {\n        dispatch(setUnexpectedError(ReplayUpdatedError));\n      }\n    })();\n  }, [dispatch]);\n\n  if (loadingEditor) {\n    return null;\n  }\n\n  return (\n    <div\n      className={classNames(\"editor-pane overflow-hidden \", {\n        narrow: nodeWidth && nodeWidth < 240,\n        \"rounded-lg\": toolboxLayout == \"ide\",\n      })}\n      ref={panelEl}\n    >\n      <div className=\"editor-container relative\">\n        <EditorTabs />\n        {selectedSource ? (\n          <Redacted className=\"h-full\">\n            {enableNewSourceViewer ? <NewSourceAdapter /> : <Editor />}\n          </Redacted>\n        ) : (\n          <WelcomeBox />\n        )}\n        {selectedSource && <EditorFooter />}\n      </div>\n    </div>\n  );\n};\n","import { RefObject, useEffect, useState } from \"react\";\n\nvar resizeObserver;\n\n// Set the element to be observed in the component's state, and pass it into this\n// hook so that it returns the width of the element whenever it's resized.\nexport default function useWidthObserver(node: RefObject<HTMLElement | null>) {\n  const [width, setWidth] = useState<number | null>(null);\n\n  useEffect(() => {\n    if (node?.current === null) {\n      return;\n    }\n\n    resizeObserver = new ResizeObserver(() => {\n      if (node?.current === null) {\n        return;\n      }\n      const newWidth = node.current.getBoundingClientRect().width;\n      setWidth(newWidth);\n    });\n\n    resizeObserver.observe(node.current);\n  }, [node]);\n\n  return width;\n}\n","import classNames from \"classnames\";\nimport { useState } from \"react\";\n\nimport Checkbox from \"../shared/Forms/Checkbox\";\nimport MaterialIcon from \"../shared/MaterialIcon\";\nimport { CanonicalRequestType, RequestTypeOptions } from \"./utils\";\n\nexport const FilterLayout = ({\n  setFilterValue,\n  table,\n  toggleType,\n  types,\n}: {\n  setFilterValue: (value: string) => void;\n  table: React.ReactNode;\n  toggleType: (type: CanonicalRequestType) => void;\n  types: Set<CanonicalRequestType>;\n}) => {\n  const [filterOpen, setFilterOpen] = useState(false);\n\n  return (\n    <>\n      <div className=\"flex items-center bg-bodyBgcolor p-1 pl-0\">\n        <div className={classNames(\"pl-1\", filterOpen && \"basis-32\")}>\n          <button\n            onClick={() => setFilterOpen(!filterOpen)}\n            className={classNames(\"flex items-center\", {\n              \"mr-1\": !filterOpen,\n              \"text-primaryAccent hover:text-primaryAccentHover focus:text-primaryAccentHover\":\n                types.size > 0,\n            })}\n          >\n            <MaterialIcon iconSize=\"lg\" outlined={true}>\n              filter_alt\n            </MaterialIcon>\n          </button>\n        </div>\n        <div className=\"flex flex-1 items-center rounded-md bg-themeTextFieldBgcolor p-1\">\n          <MaterialIcon iconSize=\"lg\">search</MaterialIcon>\n\n          <input\n            placeholder=\"Filter requests\"\n            onChange={event => setFilterValue(event.target.value)}\n            className=\"w-full bg-transparent px-1 text-themeTextFieldColor focus:outline-none\"\n          />\n        </div>\n      </div>\n\n      <div className=\"flex min-h-0 flex-1\">\n        {filterOpen ? (\n          <div className=\"flex basis-32 flex-col overflow-auto border-r border-splitter bg-bodyBgcolor px-1.5 py-0.5\">\n            {RequestTypeOptions.map(canonicalType => (\n              <ToggleRow\n                key={canonicalType.label}\n                selected={types.has(canonicalType.type)}\n                onClick={() => toggleType(canonicalType.type)}\n              >\n                {canonicalType.label}\n              </ToggleRow>\n            ))}\n          </div>\n        ) : null}\n\n        {table}\n      </div>\n    </>\n  );\n};\n\nconst ToggleRow = ({\n  children,\n  selected,\n  onClick,\n}: {\n  children: React.ReactNode;\n  selected: boolean;\n  onClick: () => void;\n}) => {\n  return (\n    <label className=\"flex select-none items-center py-1\">\n      <div className=\"flex flex-grow flex-row items-center space-x-2\">\n        <Checkbox checked={selected} className=\"m-0\" onChange={onClick} />\n        <span className=\"flex-grow overflow-hidden overflow-ellipsis whitespace-pre\">\n          {children}\n        </span>\n      </div>\n    </label>\n  );\n};\n","import cx from \"classnames\";\nimport React from \"react\";\n\nimport { NetworkTab } from \"ui/components/NetworkMonitor/RequestDetails\";\n\ntype Tab = {\n  id: NetworkTab;\n  title: string;\n  visible: boolean;\n};\n\nexport default function PanelTabs({\n  activeTab,\n  setActiveTab,\n  tabs,\n}: {\n  activeTab: string;\n  setActiveTab: (tab: NetworkTab) => void;\n  tabs: readonly Tab[];\n}) {\n  return (\n    <div className=\"devtools-sidebar-tabs\">\n      <div className=\"tabs\">\n        <nav className=\"tabs-navigation\">\n          <ul className=\"tabs-menu\" role=\"tablist\">\n            {tabs\n              .filter(t => t.visible)\n              .map((tab: Tab) => (\n                <li\n                  key={tab.id}\n                  className={cx(\"tabs-menu-item\", { \"is-active\": activeTab == tab.id })}\n                  role=\"presentation\"\n                >\n                  <span className=\"devtools-tab-line\"></span>\n                  <button\n                    id={`${tab.id}-tab`}\n                    onClick={() => setActiveTab(tab.id)}\n                    role=\"tab\"\n                    tabIndex={0}\n                    title={tab.title}\n                  >\n                    {tab.title}\n                  </button>\n                </li>\n              ))}\n          </ul>\n        </nav>\n      </div>\n    </div>\n  );\n}\n","import { AddCommentButton } from \"design\";\nimport { createNetworkRequestComment } from \"ui/actions/comments\";\nimport { useGetRecordingId } from \"ui/hooks/recordings\";\nimport { useAppDispatch } from \"ui/setup/hooks\";\nimport useAuth0 from \"ui/utils/useAuth0\";\n\nimport { RequestSummary } from \"./utils\";\n\nexport default function AddNetworkRequestCommentButton({\n  request,\n  className,\n}: {\n  request: RequestSummary;\n  className?: string;\n}) {\n  const dispatch = useAppDispatch();\n  const recordingId = useGetRecordingId();\n  const { isAuthenticated } = useAuth0();\n\n  const addRequestComment = () => {\n    dispatch(createNetworkRequestComment(request, recordingId));\n  };\n\n  // Un-authenticated users can't comment on Replays.\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return <AddCommentButton className={className} onClick={addRequestComment} />;\n}\n","import classNames from \"classnames\";\nimport { useEffect, useMemo, useState } from \"react\";\n\nimport MaterialIcon from \"../shared/MaterialIcon\";\nimport { RawBody } from \"./content\";\n\nconst BodyDownload = ({ raw, filename }: { raw: RawBody; filename: string }) => {\n  const [downloaded, setDownloaded] = useState(false);\n  const dataURL = useMemo(\n    () => URL.createObjectURL(new Blob([raw.content.buffer], { type: raw.contentType })),\n    [raw]\n  );\n\n  useEffect(() => {\n    return () => URL.revokeObjectURL(dataURL);\n  }, [dataURL]);\n\n  return (\n    <a\n      className=\"ml-1 block flex items-center\"\n      href={dataURL}\n      download={filename}\n      target=\"_blank\"\n      rel=\"noreferrer noopener\"\n      onClick={() => {\n        setDownloaded(true);\n        setTimeout(() => {\n          setDownloaded(false);\n        }, 2000);\n      }}\n    >\n      <MaterialIcon iconSize=\"lg\" className={classNames({ \"text-primaryAccent\": downloaded })}>\n        file_download\n      </MaterialIcon>\n    </a>\n  );\n};\n\nexport default BodyDownload;\n","import { BodyData } from \"@replayio/protocol\";\n\n// These are the body types that we know how to display.\n// The functions in this file have two jobs:\n//   1. Map the entire world of content types (see\n//   http://www.iana.org/assignments/media-types/media-types.xhtml) onto the\n//   small number of things that we know how to display\n//   2. When neccessary, change the form of that content so that we will be able\n//   to display it\n\nexport enum Displayable {\n  Image,\n  JSON,\n  Raw,\n  Text,\n}\n\nexport type JSONBody = {\n  // What to display it as when shown in the UI\n  as: Displayable.JSON;\n  // The content as it is currently held\n  content: object;\n  // The content-type header that the server sent with this request\n  contentType: string;\n};\n\nexport type RawBody = {\n  as: Displayable.Raw;\n  content: Uint8Array;\n  contentType: string;\n};\n\nexport type TextBody = {\n  as: Displayable.Text;\n  content: string;\n  contentType: string;\n};\n\nexport type ImageBody = {\n  as: Displayable.Image;\n  content: string; // base64 you can feed into a `src` attribute\n  contentType: string;\n};\n\nexport type DisplayableBody = JSONBody | RawBody | TextBody | ImageBody;\n\nconst TEXTISH_CONTENT_TYPES = [\n  \"application/x-www-form-urlencoded\",\n  \"application/javascript\",\n  \"application/json\",\n  \"application/octet-stream\",\n  \"application/xhtml+xml\",\n  \"application/xml\",\n  \"image/svg+xml\",\n];\n\nconst withoutCharset = (contentType: string) => contentType.split(\";\")[0];\n\nexport const shouldTryAndTurnIntoText = (contentType: string): boolean => {\n  if (contentType.startsWith(\"text\")) {\n    return true;\n  }\n\n  if (contentType == \"unknown\") {\n    return true;\n  }\n\n  if (TEXTISH_CONTENT_TYPES.includes(withoutCharset(contentType))) {\n    return true;\n  }\n  return false;\n};\n\nconst shouldTryAndConvertToImage = (contentType: string) => contentType.startsWith(\"image\");\n\nconst Base64ToUInt8Array = (base64: string): Uint8Array => {\n  var binaryString = atob(base64);\n  var len = binaryString.length;\n  var bytes = new Uint8Array(len);\n  for (var i = 0; i < len; i++) {\n    bytes[i] = binaryString.charCodeAt(i);\n  }\n  return bytes;\n};\n\nexport const BodyPartsToUInt8Array = (bodyParts: BodyData[], contentType: string): RawBody => {\n  let combined = new Uint8Array(bodyParts.reduce((acc, x) => acc + x.length, 0));\n  for (const part of bodyParts) {\n    combined.set(Base64ToUInt8Array(part.value), part.offset);\n  }\n  return {\n    as: Displayable.Raw,\n    content: combined,\n    contentType,\n  };\n};\n\nexport const RawToImageMaybe = (input: DisplayableBody): DisplayableBody => {\n  if (input.as === Displayable.Raw && shouldTryAndConvertToImage(input.contentType)) {\n    return {\n      as: Displayable.Image,\n      content: Buffer.from(input.content).toString(\"base64\"),\n      contentType: input.contentType,\n    };\n  } else {\n    return input;\n  }\n};\n\nexport const RawToUTF8 = (input: DisplayableBody): DisplayableBody => {\n  if (input.as === Displayable.Raw && shouldTryAndTurnIntoText(input.contentType)) {\n    return {\n      ...input,\n      as: Displayable.Text,\n      content: new TextDecoder().decode(input.content.buffer),\n    };\n  } else {\n    return input;\n  }\n};\n\nexport const StringToObjectMaybe = (input: DisplayableBody): DisplayableBody => {\n  if (input.as === Displayable.Text) {\n    try {\n      return {\n        ...input,\n        as: Displayable.JSON,\n        content: JSON.parse(input.content),\n      };\n    } catch (e) {\n      return input;\n    }\n  } else {\n    return input;\n  }\n};\n\nexport const URLEncodedToPlaintext = (input: DisplayableBody): DisplayableBody => {\n  if (input.contentType === \"application/x-www-form-urlencoded\" && input.as === Displayable.Text) {\n    return {\n      ...input,\n      as: Displayable.Text,\n      content: decodeURI(input.content),\n    };\n  } else {\n    return input;\n  }\n};\n","import { BodyData } from \"@replayio/protocol\";\nimport classNames from \"classnames\";\nimport { useMemo, useState } from \"react\";\nimport ReactJson from \"react-json-view\";\n\nimport { getTheme } from \"ui/reducers/app\";\nimport { useAppSelector } from \"ui/setup/hooks\";\n\nimport MaterialIcon from \"../shared/MaterialIcon\";\nimport BodyDownload from \"./BodyDownload\";\nimport {\n  BodyPartsToUInt8Array,\n  Displayable,\n  RawBody,\n  RawToImageMaybe,\n  RawToUTF8,\n  StringToObjectMaybe,\n  TextBody,\n  URLEncodedToPlaintext,\n} from \"./content\";\nimport styles from \"./HttpBody.module.css\";\n\nconst TextBodyComponent = ({ raw, text }: { raw: RawBody; text: string }) => {\n  const [copied, setCopied] = useState(false);\n\n  return (\n    <div\n      className={classNames(styles[\"copy-container\"], \"relative pr-6\")}\n      style={{ width: \"fit-content\" }}\n    >\n      <pre className=\"whitespace-pre-wrap\">\n        {text}\n        <div\n          className=\"absolute top-0 right-1 z-10\"\n          onClick={() => {\n            const asString = RawToUTF8(raw) as TextBody;\n            const blob = new Blob([asString.content], { type: \"text/plain\" });\n            navigator.clipboard.write([new ClipboardItem({ \"text/plain\": blob })]);\n            setCopied(true);\n            setTimeout(() => setCopied(false), 2000);\n          }}\n        >\n          <MaterialIcon\n            className={classNames(styles[\"copy-icon\"], { \"text-primaryAccent\": copied })}\n          >\n            content_copy\n          </MaterialIcon>\n        </div>\n      </pre>\n    </div>\n  );\n};\n\nconst ImageBodyComponent = ({ raw, data }: { raw: RawBody; data: string }) => {\n  return (\n    <div\n      className={classNames(styles[\"copy-container\"], \"relative pr-6\")}\n      style={{ width: \"fit-content\" }}\n    >\n      <img src={`data:${raw.contentType};base64,${data}`} />\n    </div>\n  );\n};\n\nconst HttpBody = ({\n  bodyParts,\n  contentType,\n  filename,\n}: {\n  bodyParts: BodyData[];\n  contentType: string;\n  filename: string;\n}) => {\n  const theme = useAppSelector(getTheme);\n  const raw = useMemo(() => {\n    return BodyPartsToUInt8Array(bodyParts, contentType);\n  }, [contentType, bodyParts]);\n\n  const displayable = useMemo(() => {\n    return StringToObjectMaybe(URLEncodedToPlaintext(RawToUTF8(RawToImageMaybe(raw))));\n  }, [raw]);\n\n  if (displayable.as === Displayable.JSON) {\n    return (\n      <ReactJson\n        style={{ backgroundColor: \"none\" }}\n        theme={theme == \"light\" ? \"rjv-default\" : \"tube\"}\n        src={displayable.content}\n        shouldCollapse={false}\n        displayDataTypes={false}\n        displayObjectSize={false}\n      />\n    );\n  }\n  if (displayable.as === Displayable.Image) {\n    return (\n      <>\n        <ImageBodyComponent raw={raw} data={displayable.content} />\n      </>\n    );\n  }\n  if (displayable.as === Displayable.Text) {\n    return (\n      <>\n        <TextBodyComponent raw={raw} text={displayable.content} />\n      </>\n    );\n  }\n  if (displayable.as === Displayable.Raw) {\n    return (\n      <>\n        <div className=\"flex items-center\">\n          <p>\n            This content-type ({contentType}) cannot be displayed, but you can download the\n            response.\n          </p>\n          <BodyDownload raw={raw} filename={filename} />\n        </div>\n      </>\n    );\n  }\n  return null;\n};\n\nexport default HttpBody;\n","import React from \"react\";\n\nimport { getSelectedRequestBody } from \"ui/reducers/network\";\nimport { useAppSelector } from \"ui/setup/hooks\";\n\nimport HttpBody from \"./HttpBody\";\nimport { RequestSummary, findHeader } from \"./utils\";\n\nconst RequestBody = ({ request }: { request: RequestSummary | undefined }) => {\n  const requestBody = useAppSelector(getSelectedRequestBody);\n\n  if (!request || !requestBody) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className=\"flex items-center py-2 pl-4 font-bold\">Request body:</div>\n      <div className=\"pl-6\">\n        <HttpBody\n          bodyParts={requestBody}\n          contentType={findHeader(request.requestHeaders, \"content-type\") || \"unknown\"}\n          filename={request.name}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default RequestBody;\n","import { ResponseBodyData } from \"@replayio/protocol\";\nimport React from \"react\";\n\nimport { getSelectedResponseBody } from \"ui/reducers/network\";\nimport { useAppSelector } from \"ui/setup/hooks\";\n\nimport HttpBody from \"./HttpBody\";\nimport { RequestSummary, findHeader } from \"./utils\";\n\n// Keep the internal implementation separate so we can mock it easily in storybook.\nexport function _ResponseBody({\n  request,\n  responseBodyParts,\n}: {\n  request: RequestSummary;\n  responseBodyParts: ResponseBodyData[];\n}) {\n  return (\n    <>\n      <div className=\"flex items-center justify-between px-4 py-2 font-bold\">Response body:</div>\n      <div className=\"pl-4\">\n        <HttpBody\n          bodyParts={responseBodyParts}\n          contentType={findHeader(request.responseHeaders, \"content-type\") || \"unknown\"}\n          filename={request.name}\n        />\n      </div>\n    </>\n  );\n}\n\nconst ResponseBody = ({ request }: { request?: RequestSummary }) => {\n  const responseBodyParts = useAppSelector(getSelectedResponseBody);\n\n  if (!request || !responseBodyParts) {\n    return null;\n  }\n\n  return <_ResponseBody request={request} responseBodyParts={responseBodyParts} />;\n};\n\nexport default ResponseBody;\n","import React, { Suspense } from \"react\";\n\nimport Frames from \"devtools/client/debugger/src/components/SecondaryPanes/Frames/NewFrames\";\nimport { getPauseIdForPointSuspense } from \"ui/suspense/util\";\n\nimport { RequestSummary } from \"./utils\";\n\nfunction StackTrace({ request }: { request: RequestSummary }) {\n  const pauseId = getPauseIdForPointSuspense(request.point.point, request.point.time);\n  return (\n    <div className=\"call-stack-pane\">\n      <h1 className=\"py-2 px-4 font-bold\">Stack Trace</h1>\n      <div className=\"px-2\">\n        <Frames pauseId={pauseId} panel=\"networkmonitor\" />\n      </div>\n    </div>\n  );\n}\n\nexport default function StackTraceSuspenseWrapper({ request }: { request: RequestSummary }) {\n  return (\n    <Suspense>\n      <StackTrace request={request} />\n    </Suspense>\n  );\n}\n","import classNames from \"classnames\";\nimport sortBy from \"lodash/sortBy\";\nimport React, { ReactNode, useEffect, useMemo, useState } from \"react\";\n\nimport CloseButton from \"devtools/client/debugger/src/components/shared/Button/CloseButton\";\nimport PanelTabs from \"devtools/client/shared/components/PanelTabs\";\nimport { hideRequestDetails, selectAndFetchRequest } from \"ui/actions/network\";\nimport { getLoadedRegions } from \"ui/reducers/app\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\nimport { isPointInRegions } from \"ui/utils/timeline\";\n\nimport AddNetworkRequestCommentButton from \"./AddNetworkRequestCommentButton\";\nimport RequestBody from \"./RequestBody\";\nimport ResponseBody from \"./ResponseBody\";\nimport StackTrace from \"./StackTrace\";\nimport { RequestSummary, findHeader } from \"./utils\";\nimport styles from \"./RequestDetails.module.css\";\n\ninterface Detail {\n  name: string;\n  value: string | React.ReactNode;\n}\n\nexport const RequestDetailsUnavailable = () => {\n  const dispatch = useAppDispatch();\n  const closePanel = () => dispatch(hideRequestDetails());\n\n  return (\n    <div className=\"flex h-full w-full flex-col\">\n      <RequestDetailsTabs>\n        <div className=\"flex flex-grow justify-end\">\n          <CloseButton buttonClass=\"mr-4\" handleClick={closePanel} tooltip={\"Close tab\"} />\n        </div>\n      </RequestDetailsTabs>\n      <div className=\"relative flex-grow\">\n        <div className=\"m-2\">\n          This request happened in a part of the recording which is not currently loaded\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst RequestDetailsTabs = ({ children }: { children?: ReactNode }) => {\n  return (\n    <div\n      className={classNames(\n        \"sticky top-0 z-10 flex items-center justify-between bg-toolbarBackground\",\n        styles.border\n      )}\n    >\n      {children}\n    </div>\n  );\n};\n\nfunction FormattedUrl({ url }: { url: string }) {\n  const parsedUrl = new URL(url);\n  const params = [...parsedUrl.searchParams.entries()];\n  return (\n    <span className=\"text-themeBody\">\n      <span className=\"\">{parsedUrl.origin}</span>\n      <span className=\"\">{parsedUrl.pathname}</span>\n      {params.length > 0 ? (\n        <>\n          {params.map(([key, value], index) => (\n            <span key={key}>\n              <span className=\"\">{index === 0 ? \"?\" : \"&\"}</span>\n              <span className=\"text-primaryAccent\">{key}</span>\n              <span>={value}</span>\n            </span>\n          ))}\n        </>\n      ) : null}\n    </span>\n  );\n}\n\nconst DetailTable = ({ className, details }: { className?: string; details: Detail[] }) => {\n  if (details.length === 0) {\n    return (\n      <div className={classNames(className, \"flex flex-col\")}>\n        <div className={classNames(styles.row, \"cursor-pointer py-1 hover:bg-toolbarBackground\")}>\n          No entries\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={classNames(className, \"flex flex-col\")}>\n      {details.map((h, i) => (\n        <div\n          className={classNames(styles.row, \"cursor-pointer py-1 hover:bg-toolbarBackground\")}\n          key={`${h.name}-${i}`}\n        >\n          <span className=\"font-bold \">{h.name}:</span> {h.value}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport const TriangleToggle = ({ open }: { open: boolean }) => (\n  <span\n    className={classNames(\"img arrow select-none p-3\", { expanded: open })}\n    style={{ marginInlineEnd: \"4px\" }}\n  />\n);\n\nconst parseCookie = (str: string): Record<string, string> => {\n  if (str.trim() === \"\") {\n    return {};\n  }\n\n  return str\n    .split(\";\")\n    .map(v => v.split(\"=\"))\n    .reduce((acc: Record<string, string>, v) => {\n      acc[decodeURIComponent(v[0].trim())] = decodeURIComponent(v[1].trim());\n      return acc;\n    }, {});\n};\n\nconst Cookies = ({ request }: { request: RequestSummary }) => {\n  return (\n    <div>\n      <h2 className={classNames(\"cursor-pointer border-t p-4 py-1 font-bold\", styles.title)}>\n        Request Cookies\n      </h2>\n      <DetailTable\n        className={styles.request}\n        details={Object.entries(\n          parseCookie(findHeader(request?.requestHeaders, \"cookie\") || \"\")\n        ).map((value: [string, string]) => {\n          return { name: value[0], value: value[1] };\n        })}\n      />\n    </div>\n  );\n};\n\nconst Timing = ({ request }: { request: RequestSummary }) => {\n  const details = [{ name: \"Started at\", value: `${request.start}ms` }];\n  if (request.firstByte) {\n    details.push({ name: \"Responded at (first byte)\", value: `${request.firstByte}ms` });\n    details.push({\n      name: \"Wait time to first byte\",\n      value: `${request.firstByte - request.start}ms`,\n    });\n  }\n  if (request.end) {\n    details.push({ name: \"Ended at\", value: `${request.end}ms` });\n    details.push({ name: \"Total time\", value: `${request.end - request.start}ms` });\n  }\n  return (\n    <>\n      <div className=\"flex items-center justify-between px-4 py-2 font-bold\">Timings:</div>\n      <DetailTable details={details} />\n    </>\n  );\n};\n\nconst HeadersPanel = ({ request }: { request: RequestSummary }) => {\n  const [requestExpanded, setRequestExpanded] = useState(true);\n  const [requestHeadersExpanded, setRequestHeadersExpanded] = useState(true);\n  const [responseHeadersExpanded, setResponseHeadersExpanded] = useState(true);\n  const [queryParametersExpanded, setQueryParametersExpanded] = useState(true);\n\n  const details = [\n    { name: \"URL\", value: <FormattedUrl url={request.url} /> },\n    { name: \"Request Method\", value: request.method },\n    { name: \"Status Code\", value: String(request.status) },\n    { name: \"Type\", value: request.documentType || request.cause || \"unknown\" },\n    { name: \"Start\", value: `${request.start}ms` },\n  ];\n  if (request.firstByte) {\n    details.push({ name: \"Time to first byte\", value: `${request.firstByte - request.start}ms` });\n  }\n  if (request.end) {\n    details.push({ name: \"Total Time\", value: `${request.end - request.start}ms` });\n  }\n\n  const requestHeaders = useMemo(\n    () => sortBy(request.requestHeaders, r => r.name.toLowerCase()),\n    [request]\n  );\n  const responseHeaders = useMemo(\n    () => sortBy(request.responseHeaders, r => r.name.toLowerCase()),\n    [request]\n  );\n  return (\n    <>\n      <div\n        className={classNames(\n          \"flex cursor-pointer items-center justify-between py-1 pr-2 font-bold\"\n        )}\n        onClick={() => setRequestExpanded(!requestExpanded)}\n      >\n        <div>\n          <TriangleToggle open={requestExpanded} />\n          General\n        </div>\n      </div>\n      {requestExpanded && <DetailTable className={styles.request} details={details} />}\n      <div\n        className={classNames(\n          \"cursor-pointer border-t border-themeBorder py-1 font-bold\",\n          styles.title\n        )}\n        onClick={() => setRequestHeadersExpanded(!requestHeadersExpanded)}\n      >\n        <TriangleToggle open={requestHeadersExpanded} />\n        Request Headers\n      </div>\n      {requestHeadersExpanded && (\n        <DetailTable className={styles.headerTable} details={requestHeaders} />\n      )}\n      {request.responseHeaders.length > 0 && (\n        <>\n          <div\n            className={classNames(\"cursor-pointer border-t py-1 font-bold\", styles.title)}\n            onClick={() => setResponseHeadersExpanded(!responseHeadersExpanded)}\n          >\n            <TriangleToggle open={responseHeadersExpanded} />\n            Response Headers\n          </div>\n          {responseHeadersExpanded && (\n            <DetailTable className={styles.headerTable} details={responseHeaders} />\n          )}\n          {request.queryParams.length > 0 && (\n            <div>\n              <div\n                className={classNames(\"cursor-pointer border-t py-1 font-bold\", styles.title)}\n                onClick={() => setQueryParametersExpanded(!queryParametersExpanded)}\n              >\n                <TriangleToggle open={queryParametersExpanded} />\n                Query Parameters\n              </div>\n              {queryParametersExpanded && (\n                <DetailTable\n                  className={classNames(\"py-1\", styles.request)}\n                  details={request.queryParams.map(x => ({\n                    name: x[0],\n                    value: x[1],\n                  }))}\n                />\n              )}\n            </div>\n          )}\n        </>\n      )}\n    </>\n  );\n};\n\nconst DEFAULT_TAB = \"headers\";\n\nexport type NetworkTab = \"headers\" | \"cookies\" | \"response\" | \"request\" | \"stackTrace\" | \"timings\";\n\nconst RequestDetails = ({\n  cx,\n  request,\n  previousRequestId,\n  nextRequestId,\n}: {\n  cx: any;\n  request: RequestSummary;\n  previousRequestId: string | null;\n  nextRequestId: string | null;\n}) => {\n  const dispatch = useAppDispatch();\n  const [activeTab, setActiveTab] = useState<NetworkTab>(DEFAULT_TAB);\n  const loadedRegions = useAppSelector(getLoadedRegions)?.loaded;\n\n  // Keyboard shortcuts handler.\n  useEffect(() => {\n    const onDocumentKeyDown = (event: KeyboardEvent) => {\n      switch (event.key) {\n        case \"ArrowUp\": {\n          event.preventDefault();\n          previousRequestId !== null && dispatch(selectAndFetchRequest(previousRequestId));\n          break;\n        }\n        case \"ArrowDown\": {\n          event.preventDefault();\n          nextRequestId !== null && dispatch(selectAndFetchRequest(nextRequestId));\n          break;\n        }\n      }\n    };\n\n    document.addEventListener(\"keydown\", onDocumentKeyDown);\n    return () => {\n      document.removeEventListener(\"keydown\", onDocumentKeyDown);\n    };\n  }, [previousRequestId, nextRequestId, dispatch]);\n\n  const tabs: readonly { id: NetworkTab; title: string; visible: boolean }[] = [\n    { id: \"headers\", title: \"Headers\", visible: true },\n    {\n      id: \"cookies\",\n      title: \"Cookies\",\n      visible: Boolean(findHeader(request.requestHeaders, \"cookie\")),\n    },\n    { id: \"request\", title: \"Request\", visible: request.hasRequestBody },\n    { id: \"response\", title: \"Response\", visible: request.hasResponseBody },\n    { id: \"stackTrace\", title: \"Stack Trace\", visible: Boolean(request.triggerPoint) },\n    {\n      id: \"timings\",\n      title: \"Timings\",\n      visible: typeof request.start === \"number\" && typeof request.end === \"number\",\n    },\n  ];\n\n  const activeTabs = tabs.filter(t => t.visible);\n  const closePanel = () => dispatch(hideRequestDetails());\n\n  useEffect(() => {\n    if (!activeTabs.find(t => t.id === activeTab)) {\n      setActiveTab(DEFAULT_TAB);\n    }\n  }, [activeTab, activeTabs]);\n\n  if (!(loadedRegions && request && isPointInRegions(loadedRegions, request.point.point))) {\n    return <RequestDetailsUnavailable />;\n  }\n\n  return (\n    <div className=\"no-scrollbar w-full overflow-y-scroll border-l border-themeBorder bg-bodyBgcolor\">\n      <RequestDetailsTabs>\n        <PanelTabs tabs={tabs} activeTab={activeTab} setActiveTab={setActiveTab} />\n        <CloseButton buttonClass=\"mr-2\" handleClick={closePanel} tooltip={\"Close tab\"} />\n      </RequestDetailsTabs>\n      <div className={classNames(\"requestDetails relative\", styles.requestDetails)}>\n        <div>\n          <AddNetworkRequestCommentButton request={request} className=\"absolute top-1 right-1\" />\n          {activeTab === \"headers\" && <HeadersPanel request={request} />}\n          {activeTab === \"cookies\" && <Cookies request={request} />}\n          {activeTab === \"response\" && <ResponseBody request={request} />}\n          {activeTab === \"request\" && <RequestBody request={request} />}\n          {activeTab === \"stackTrace\" && <StackTrace request={request} />}\n          {activeTab === \"timings\" && <Timing request={request} />}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RequestDetails;\n","import React from \"react\";\nimport { Column } from \"react-table\";\n\nimport { Dropdown, DropdownItem, DropdownItemContent } from \"ui/components/Library/LibraryDropdown\";\n\nexport default function ColumnsDropdown({ columns }: { columns: Column[] }) {\n  const ColumnItem = ({ column }: { column: Column }) => {\n    const attrs = (column as any).getToggleHiddenProps();\n    return (\n      <DropdownItem onClick={() => attrs.onChange({ target: { checked: !attrs.checked } })}>\n        <DropdownItemContent\n          selected={attrs.checked}\n          icon={attrs.checked ? \"checked\" : \"unchecked\"}\n        >\n          <span className=\"capitalize\">{String(column.id)}</span>\n        </DropdownItemContent>\n      </DropdownItem>\n    );\n  };\n\n  return (\n    <Dropdown>\n      {columns.map(column => (\n        <ColumnItem key={column.id} column={column} />\n      ))}\n    </Dropdown>\n  );\n}\n","import classNames from \"classnames\";\nimport React, { useState } from \"react\";\nimport { Column, HeaderGroup } from \"react-table\";\n\nimport { ContextMenu } from \"../ContextMenu\";\nimport ColumnsDropdown from \"./ColumnsDropdown\";\nimport { RequestSummary } from \"./utils\";\nimport styles from \"./RequestTable.module.css\";\n\ninterface MenuLocation {\n  x: number;\n  y: number;\n}\n\nexport function HeaderGroups({\n  columns,\n  headerGroups,\n}: {\n  columns: Column[];\n  headerGroups: HeaderGroup<RequestSummary>[];\n}) {\n  const [menuLocation, setMenuLocation] = useState<MenuLocation>();\n  return (\n    <div\n      className=\"border-b border-splitter bg-toolbarBackground\"\n      onContextMenu={ev => {\n        ev.preventDefault();\n        setMenuLocation({ x: ev.pageX, y: ev.pageY });\n      }}\n    >\n      {menuLocation ? (\n        <ContextMenu x={menuLocation.x} y={menuLocation.y} close={() => setMenuLocation(undefined)}>\n          <ColumnsDropdown columns={columns} />\n        </ContextMenu>\n      ) : (\n        \"\"\n      )}\n      {headerGroups.map((headerGroup: HeaderGroup<RequestSummary>) => {\n        const { key, ...headerProps } = headerGroup.getHeaderGroupProps();\n        return (\n          <div\n            key={key}\n            className=\"flex items-center divide-x divide-themeTextFieldBgcolor font-normal\"\n            {...headerProps}\n          >\n            {headerGroup.headers.map((column, index) => {\n              const { key, ...columnProps } = column.getHeaderProps();\n              const isLastColumn = index === headerGroup.headers.length - 1;\n              return (\n                <div className={classNames(\"p-1\", styles[column.id])} {...columnProps} key={key}>\n                  {column.render(\"Header\")}\n                  {!isLastColumn ? (\n                    <div\n                      //@ts-ignore\n                      {...column.getResizerProps()}\n                      className={classNames(\"select-none\", styles.resizer, {\n                        //@ts-ignore typescript freaking *hates* react-table\n                        isResizing: column.isResizing,\n                      })}\n                    />\n                  ) : null}\n                </div>\n              );\n            })}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import classNames from \"classnames\";\nimport React, { useLayoutEffect, useRef } from \"react\";\nimport { Row } from \"react-table\";\n\nimport { RequestSummary } from \"./utils\";\nimport styles from \"./RequestTable.module.css\";\n\nexport const RequestRow = ({\n  currentTime,\n  isFirstInFuture,\n  isInLoadedRegion,\n  isInPast,\n  isSelected,\n  onClick,\n  onSeek,\n  row,\n  showContentMenuAt,\n}: {\n  currentTime: number;\n  isFirstInFuture: boolean;\n  isInLoadedRegion: boolean;\n  isInPast: boolean;\n  isSelected: boolean;\n  onClick: (row: RequestSummary) => void;\n  onSeek: (row: RequestSummary) => void;\n  row: Row<RequestSummary>;\n  showContentMenuAt: (params: { pageX: number; pageY: number; row: Row<RequestSummary> }) => void;\n}) => {\n  const prevIsSelectedRef = useRef<boolean>(false);\n  const ref = useRef<HTMLDivElement>(null);\n\n  // Make sure newly selected Network requests have been scrolled into view.\n  useLayoutEffect(() => {\n    if (isSelected && !prevIsSelectedRef.current) {\n      ref.current!.scrollIntoView({ block: \"nearest\" });\n    }\n\n    prevIsSelectedRef.current = isSelected;\n  }, [isSelected]);\n\n  const onContextMenu = (event: React.MouseEvent) => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    showContentMenuAt({ pageX: event.pageX, pageY: event.pageY, row });\n  };\n\n  return (\n    <div\n      key={row.getRowProps().key}\n      className={classNames(styles.row, {\n        [styles.current]: isFirstInFuture,\n        [styles.selected]: isSelected,\n        [styles.future]: !isInPast,\n        [styles.unloaded]: !isInLoadedRegion,\n      })}\n      onClick={() => onClick(row.original)}\n      onContextMenu={onContextMenu}\n      ref={ref}\n      tabIndex={0}\n    >\n      <div {...row.getRowProps()}>\n        {row.original.triggerPoint && row.original.triggerPoint.time !== currentTime && (\n          <button\n            className={classNames(styles.seekBadge, \"shadow-md\")}\n            onClick={() => {\n              if (!row.original.triggerPoint) {\n                return;\n              }\n              onSeek(row.original);\n            }}\n          >\n            <div\n              className={classNames(\"img\", {\n                [styles.fastForward]: row.original.triggerPoint.time > currentTime,\n                [styles.rewind]: row.original.triggerPoint.time < currentTime,\n              })}\n            />\n            <span className={classNames(\"px-2 text-timejumpText\", styles.verbose)}>\n              {row.original.triggerPoint.time > currentTime ? \"Fast-forward\" : \"Rewind\"}\n            </span>\n          </button>\n        )}\n        {row.cells.map(cell => {\n          const { key, ...cellProps } = cell.getCellProps();\n          return (\n            <div\n              key={key}\n              className={classNames(\n                \"items-center overflow-hidden whitespace-nowrap p-1\",\n                styles[cell.column.id]\n              )}\n              {...cellProps}\n              style={{ ...cell.getCellProps().style, display: \"flex\" }}\n              title={cell.value}\n            >\n              <div className={(cell.column as any).className}>{cell.render(\"Cell\")}</div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n","import classNames from \"classnames\";\nimport React, { useState } from \"react\";\nimport { Row, TableInstance } from \"react-table\";\n\nimport { setFocusRegionBeginTime, setFocusRegionEndTime } from \"ui/actions/timeline\";\nimport { getLoadedRegions } from \"ui/reducers/app\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\nimport type { AppDispatch } from \"ui/setup/store\";\nimport { trackEvent } from \"ui/utils/telemetry\";\nimport { isTimeInRegions } from \"ui/utils/timeline\";\n\nimport { ContextMenu } from \"../ContextMenu\";\nimport { Dropdown, DropdownItem } from \"../Library/LibraryDropdown\";\nimport Icon from \"../shared/Icon\";\nimport { HeaderGroups } from \"./HeaderGroups\";\nimport { RequestRow } from \"./RequestRow\";\nimport { RequestSummary } from \"./utils\";\nimport styles from \"./RequestTable.module.css\";\n\ninterface ContextMenuData {\n  pageX: number;\n  pageY: number;\n  row: Row<RequestSummary>;\n}\n\nconst RequestTable = ({\n  className,\n  currentTime,\n  data,\n  filteredAfterCount,\n  filteredBeforeCount,\n  onRowSelect,\n  seek,\n  selectedRequest,\n  table,\n}: {\n  className?: string;\n  currentTime: number;\n  data: RequestSummary[];\n  filteredAfterCount: number;\n  filteredBeforeCount: number;\n  onRowSelect: (request: RequestSummary) => void;\n  seek: (point: string, time: number, hasFrames: boolean, pauseId?: string | undefined) => boolean;\n  selectedRequest?: RequestSummary;\n  table: TableInstance<RequestSummary>;\n}) => {\n  const { columns, getTableProps, getTableBodyProps, headerGroups, rows, prepareRow } = table;\n\n  const dispatch = useAppDispatch() as AppDispatch;\n  const loadedRegions = useAppSelector(getLoadedRegions);\n  const [contextMenuData, setContextMenuData] = useState<ContextMenuData | null>(null);\n\n  const onSeek = (request: RequestSummary) => {\n    trackEvent(\"net_monitor.seek_to_request\");\n    seek(request.point.point, request.point.time, true);\n    onRowSelect(request);\n  };\n\n  const closeContextMenu = () => {\n    setContextMenuData(null);\n  };\n\n  const setFocusEnd = () => {\n    setContextMenuData(null);\n\n    if (contextMenuData) {\n      const endTime = contextMenuData.row.original?.end;\n      if (endTime != null) {\n        dispatch(setFocusRegionEndTime(endTime, true));\n      }\n    }\n  };\n\n  const setFocusStart = () => {\n    setContextMenuData(null);\n\n    if (contextMenuData) {\n      const beginTime = contextMenuData.row.original?.start;\n      if (beginTime != null) {\n        dispatch(setFocusRegionBeginTime(beginTime, true));\n      }\n    }\n  };\n\n  let inPast = true;\n\n  return (\n    <div className={classNames(\"no-scrollbar min-w-full bg-bodyBgcolor\", className)}>\n      {/* Relative here helps with when the timeline goes past the last request*/}\n      <div\n        className={classNames(\"flex h-full w-full flex-col overflow-x-auto\", styles.request)}\n        {...getTableProps()}\n      >\n        <HeaderGroups columns={columns as any} headerGroups={headerGroups} />\n\n        <div className=\"relative w-fit min-w-full overflow-y-auto\" {...getTableBodyProps()}>\n          {filteredBeforeCount > 0 && (\n            <div className={styles.banner}>{filteredBeforeCount} requests filtered before</div>\n          )}\n\n          {rows.map((row: Row<RequestSummary>) => {\n            let firstInFuture = false;\n            if (inPast && row.original.point.time >= currentTime) {\n              inPast = false;\n              firstInFuture = true;\n            }\n\n            const isInLoadedRegion = loadedRegions\n              ? isTimeInRegions(row.original.point.time, loadedRegions.loaded)\n              : false;\n\n            prepareRow(row);\n\n            return (\n              <RequestRow\n                currentTime={currentTime}\n                isFirstInFuture={firstInFuture}\n                isInLoadedRegion={isInLoadedRegion}\n                isInPast={inPast}\n                isSelected={selectedRequest?.id === row.original.id}\n                key={row.getRowProps().key}\n                onClick={onRowSelect}\n                onSeek={onSeek}\n                row={row}\n                showContentMenuAt={setContextMenuData}\n              />\n            );\n          })}\n          <div\n            className={classNames({\n              [styles.current]: data.every(r => (r.point?.time || 0) < currentTime),\n              [styles.end]: data.every(r => (r.point?.time || 0) < currentTime),\n            })}\n          />\n\n          {filteredAfterCount > 0 && (\n            <div className={styles.banner}>{filteredAfterCount} requests filtered after</div>\n          )}\n        </div>\n      </div>\n\n      {contextMenuData !== null && (\n        <ContextMenu x={contextMenuData.pageX} y={contextMenuData.pageY} close={closeContextMenu}>\n          <Dropdown>\n            <DropdownItem onClick={setFocusStart}>\n              <>\n                <Icon filename=\"set-focus-start\" className=\"mr-4 bg-iconColor\" size=\"large\" />\n                Set focus start\n              </>\n            </DropdownItem>\n            <DropdownItem onClick={setFocusEnd}>\n              <>\n                <Icon filename=\"set-focus-end\" className=\"mr-4 bg-iconColor\" size=\"large\" />\n                Set focus end\n              </>\n            </DropdownItem>\n          </Dropdown>\n        </ContextMenu>\n      )}\n    </div>\n  );\n};\n\nexport default RequestTable;\n","import { RequestEventInfo, RequestInfo } from \"@replayio/protocol\";\nimport { useMemo } from \"react\";\nimport {\n  TableInstance,\n  useBlockLayout,\n  useGlobalFilter,\n  useResizeColumns,\n  useTable,\n} from \"react-table\";\n\nimport { CanonicalRequestType, RequestSummary, partialRequestsToCompleteSummaries } from \"./utils\";\n\nexport default function Table({\n  children,\n  events,\n  requests,\n  types,\n  ...props\n}: {\n  children: (props: {\n    data: RequestSummary[];\n    table: TableInstance<RequestSummary>;\n  }) => JSX.Element;\n  events: RequestEventInfo[];\n  requests: RequestInfo[];\n  types: Set<CanonicalRequestType>;\n}) {\n  const columns = useMemo(\n    () => [\n      {\n        Header: \"Status\",\n        // https://github.com/tannerlinsley/react-table/discussions/2664\n        accessor: \"status\" as const,\n        width: 50,\n        maxWidth: 100,\n      },\n      {\n        Header: \"Name\",\n        accessor: \"name\" as const,\n      },\n      {\n        Header: \"Path\",\n        accessor: \"path\" as const,\n      },\n      {\n        Header: \"Url\",\n        accessor: \"url\" as const,\n      },\n      {\n        Header: \"Method\",\n        accessor: \"method\" as const,\n        width: 50,\n        maxWidth: 100,\n      },\n      {\n        Header: \"Type\",\n        accessor: (req: RequestSummary) => req.documentType || req.cause,\n        className: \"\",\n        width: 125,\n      },\n      {\n        Header: \"Domain\",\n        accessor: \"domain\" as const,\n      },\n    ],\n    []\n  );\n  const data = useMemo(\n    () => partialRequestsToCompleteSummaries(requests, events, types),\n    [events, requests, types]\n  );\n\n  const defaultColumn = useMemo(\n    () => ({\n      minWidth: 60,\n      width: 200,\n      maxWidth: 1000,\n    }),\n    []\n  );\n  const tableInstance = useTable<RequestSummary>(\n    {\n      //@ts-ignore\n      autoResetGlobalFilter: false,\n      columns: columns as any,\n      data,\n      defaultColumn,\n      initialState: { hiddenColumns: [\"url\", \"path\"] },\n    },\n    useBlockLayout,\n    useGlobalFilter,\n    useResizeColumns\n  );\n\n  return children({ table: tableInstance, data, ...props });\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { ConnectedProps, connect } from \"react-redux\";\n\nimport { getThreadContext } from \"devtools/client/debugger/src/selectors\";\nimport SplitBox from \"devtools/client/shared/components/splitter/SplitBox\";\nimport { actions } from \"ui/actions\";\nimport { hideRequestDetails, selectAndFetchRequest } from \"ui/actions/network\";\nimport { getFocusedEvents, getFocusedRequests, getSelectedRequestId } from \"ui/reducers/network\";\nimport { getCurrentTime } from \"ui/reducers/timeline\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\nimport { UIState } from \"ui/state\";\nimport { timeMixpanelEvent } from \"ui/utils/mixpanel\";\nimport { trackEvent } from \"ui/utils/telemetry\";\n\nimport LoadingProgressBar from \"../shared/LoadingProgressBar\";\nimport { FilterLayout } from \"./FilterLayout\";\nimport RequestDetails from \"./RequestDetails\";\nimport RequestTable from \"./RequestTable\";\nimport Table from \"./Table\";\nimport { CanonicalRequestType, RequestSummary } from \"./utils\";\n\nexport const NetworkMonitor = ({\n  currentTime,\n  cx,\n  events,\n  loading,\n  requests,\n  requestsAfterFilterCount,\n  requestsBeforeFilterCount,\n  seek,\n}: PropsFromRedux) => {\n  const selectedRequestId = useAppSelector(getSelectedRequestId);\n  const dispatch = useAppDispatch();\n  const [types, setTypes] = useState<Set<CanonicalRequestType>>(new Set([]));\n  const [vert, setVert] = useState<boolean>(false);\n\n  const container = useRef<HTMLDivElement>(null);\n\n  const toggleType = (type: CanonicalRequestType) => {\n    dispatch(hideRequestDetails());\n\n    const newTypes = new Set(types);\n    if (newTypes.has(type)) {\n      trackEvent(\"net_monitor.delete_type\", { type });\n      newTypes.delete(type);\n    } else {\n      trackEvent(\"net_monitor.add_type\", { type });\n      newTypes.add(type);\n    }\n    setTypes(newTypes);\n  };\n\n  let resizeObserver = useRef(\n    new ResizeObserver(() => setVert((container.current?.offsetWidth || 0) > 700))\n  );\n\n  useEffect(() => {\n    const observer = resizeObserver.current;\n    const splitBoxContainer = container.current;\n\n    if (splitBoxContainer) {\n      observer.observe(splitBoxContainer);\n    }\n\n    return () => {\n      if (splitBoxContainer) {\n        observer.unobserve(splitBoxContainer);\n      }\n    };\n  }, []);\n\n  if (loading) {\n    timeMixpanelEvent(\"net_monitor.open_network_monitor\");\n    return (\n      <div className=\"relative\">\n        <LoadingProgressBar />\n      </div>\n    );\n  }\n\n  trackEvent(\"net_monitor.open_network_monitor\");\n\n  return (\n    <Table events={events} requests={requests} types={types}>\n      {({ table, data }: { table: any; data: RequestSummary[] }) => {\n        let selectedRequest;\n        let previousRequestId = null;\n        let nextRequestId = null;\n        if (selectedRequestId) {\n          selectedRequest = data.find((request, i) => {\n            if (request.id === selectedRequestId) {\n              previousRequestId = i > 0 ? data[i - 1].id : null;\n              nextRequestId = i + 1 < data.length ? data[i + 1].id : null;\n              return true;\n            }\n          });\n        }\n\n        return (\n          <div className=\"flex h-full min-h-0 flex-col\" ref={container}>\n            <FilterLayout\n              setFilterValue={table.setGlobalFilter}\n              toggleType={toggleType}\n              types={types}\n              table={\n                <SplitBox\n                  className=\"min-h-0 border-t border-splitter\"\n                  initialSize=\"350px\"\n                  minSize={selectedRequest ? \"30%\" : \"100%\"}\n                  maxSize={selectedRequest ? \"70%\" : \"100%\"}\n                  startPanel={\n                    <RequestTable\n                      table={table}\n                      currentTime={currentTime}\n                      data={data}\n                      filteredAfterCount={requestsAfterFilterCount}\n                      filteredBeforeCount={requestsBeforeFilterCount}\n                      onRowSelect={row => {\n                        trackEvent(\"net_monitor.select_request_row\");\n                        dispatch(selectAndFetchRequest(row.id));\n                      }}\n                      seek={seek}\n                      selectedRequest={selectedRequest}\n                    />\n                  }\n                  endPanel={\n                    selectedRequestId ? (\n                      selectedRequest ? (\n                        <RequestDetails\n                          cx={cx}\n                          request={selectedRequest}\n                          previousRequestId={previousRequestId}\n                          nextRequestId={nextRequestId}\n                        />\n                      ) : (\n                        <div>Loading…</div>\n                      )\n                    ) : null\n                  }\n                  splitterSize={2}\n                  vert={vert}\n                />\n              }\n            />\n          </div>\n        );\n      }}\n    </Table>\n  );\n};\n\nconst connector = connect(\n  (state: UIState) => {\n    const [requests, requestsBeforeFilterCount, requestsAfterFilterCount] =\n      getFocusedRequests(state);\n\n    return {\n      currentTime: getCurrentTime(state),\n      cx: getThreadContext(state),\n      events: getFocusedEvents(state),\n      loading: state.network.loading,\n      requests,\n      requestsAfterFilterCount,\n      requestsBeforeFilterCount,\n    };\n  },\n  {\n    seek: actions.seek,\n  }\n);\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nexport default connector(NetworkMonitor);\n","import { NodeBounds } from \"@replayio/protocol\";\n\nimport { getDevicePixelRatio } from \"protocol/graphics\";\n\nexport interface NodePickerOpts {\n  onHovering?: (nodeId: string | null) => void;\n  onPicked: (nodeId: string | null) => void;\n  onHighlightNode: (nodeId: string) => void;\n  onUnhighlightNode: () => void;\n  onCheckNodeBounds: (x: number, y: number, nodeIds?: string[]) => Promise<NodeBounds | null>;\n  enabledNodeIds?: string[];\n}\n\ninterface Position {\n  x: number;\n  y: number;\n}\n\nexport class NodePicker {\n  private opts: NodePickerOpts | undefined;\n  private pickerPosition: Position | undefined;\n  private hoveredNodeId: string | undefined;\n\n  enable(opts: NodePickerOpts) {\n    this.opts = opts;\n    document.body.addEventListener(\"mousemove\", this.onMouseMove);\n    document.body.addEventListener(\"mouseup\", this.onMouseClick);\n  }\n\n  disable() {\n    document.body.removeEventListener(\"mousemove\", this.onMouseMove);\n    document.body.removeEventListener(\"mouseup\", this.onMouseClick);\n    this.opts = undefined;\n    this.pickerPosition = undefined;\n    this.hoveredNodeId = undefined;\n  }\n\n  private onMouseMove = async (e: MouseEvent) => {\n    const pos = this.mouseEventCanvasPosition(e);\n    const opts = this.opts;\n    this.pickerPosition = pos;\n    let nodeBounds: NodeBounds | null = null;\n    if (pos) {\n      if (opts?.onCheckNodeBounds) {\n        nodeBounds = await opts.onCheckNodeBounds(pos.x, pos.y, opts?.enabledNodeIds);\n      }\n    }\n\n    if (nodeBounds) {\n      this.opts?.onHighlightNode(nodeBounds.node);\n      if (nodeBounds.node !== this.hoveredNodeId) {\n        this.hoveredNodeId = nodeBounds.node;\n        this.opts?.onHovering?.(nodeBounds.node);\n      }\n    } else {\n      this.opts?.onUnhighlightNode();\n    }\n  };\n\n  private onMouseClick = async (e: MouseEvent) => {\n    const opts = this.opts;\n    this.disable();\n    const pos = this.mouseEventCanvasPosition(e);\n    let nodeBounds: NodeBounds | null = null;\n    if (pos) {\n      if (opts?.onCheckNodeBounds) {\n        nodeBounds = await opts.onCheckNodeBounds(pos.x, pos.y, opts?.enabledNodeIds);\n      }\n    }\n    opts?.onPicked(nodeBounds ? nodeBounds.node : null);\n  };\n\n  // Get the x/y coordinate of a mouse event wrt the recording's DOM.\n  private mouseEventCanvasPosition(e: MouseEvent) {\n    const canvas = document.getElementById(\"graphics\");\n    if (!canvas) {\n      return undefined;\n    }\n    const bounds = canvas.getBoundingClientRect();\n    if (\n      e.clientX < bounds.left ||\n      e.clientX > bounds.right ||\n      e.clientY < bounds.top ||\n      e.clientY > bounds.bottom\n    ) {\n      // Not in the canvas.\n      return undefined;\n    }\n\n    const scale = bounds.width / canvas.offsetWidth;\n    const pixelRatio = getDevicePixelRatio();\n    if (!pixelRatio) {\n      return undefined;\n    }\n\n    return {\n      x: (e.clientX - bounds.left) / scale / pixelRatio,\n      y: (e.clientY - bounds.top) / scale / pixelRatio,\n    };\n  }\n}\n","import { NodeBounds } from \"@replayio/protocol\";\nimport classnames from \"classnames\";\nimport React, { useCallback, useLayoutEffect, useRef, useState } from \"react\";\n\nimport {\n  highlightNode,\n  selectNode,\n  unhighlightNode,\n} from \"devtools/client/inspector/markup/actions/markup\";\nimport { ThreadFront } from \"protocol/thread\";\nimport {\n  fetchMouseTargetsForPause,\n  loadMouseTargets,\n  setIsNodePickerActive,\n  setMouseTargetsLoading,\n} from \"ui/actions/app\";\nimport { setSelectedPanel } from \"ui/actions/layout\";\nimport { useAppDispatch } from \"ui/setup/hooks\";\nimport { getMouseTarget } from \"ui/suspense/nodeCaches\";\nimport { NodePicker as NodePickerClass } from \"ui/utils/nodePicker\";\n\ninterface Position {\n  x: number;\n  y: number;\n}\n\ndeclare global {\n  interface Window {\n    // Used in the test harness for picking a node.\n    // Assigned in a `useLayoutEffect` further below.\n    gNodePicker: GlobalNodePickerTestMethods;\n  }\n}\n\ninterface GlobalNodePickerTestMethods {\n  clickNodePickerButton: () => Promise<void>;\n  nodePickerMouseClickInCanvas: (pos: Position | null) => Promise<void>;\n}\n\nconst nodePickerInstance = new NodePickerClass();\n\nexport function NodePicker() {\n  const dispatch = useAppDispatch();\n\n  // Contrast with the React DevTools instance of the picker\n  const [globalNodePickerActive, setGlobalNodePickerActive] = useState(false);\n\n  const nodePickerRemoveTime = useRef<number | undefined>(undefined);\n\n  async function clickNodePickerButton() {\n    if (globalNodePickerActive) {\n      // The node picker mousedown listener will take care of deactivation.\n      return;\n    }\n\n    // Hacky workaround to make sure the picker stays deactivated when\n    // clicking on its icon.\n    const now = Date.now();\n    if (nodePickerRemoveTime.current && now - nodePickerRemoveTime.current < 200) {\n      return;\n    }\n\n    setGlobalNodePickerActive(true);\n    dispatch(setIsNodePickerActive(true));\n    dispatch(loadMouseTargets());\n    dispatch(setSelectedPanel(\"inspector\"));\n  }\n\n  const handleNodeSelected = useCallback(\n    async function handleNodeSelected(nodeId: string) {\n      dispatch(highlightNode(nodeId));\n      dispatch(selectNode(nodeId));\n    },\n    [dispatch]\n  );\n\n  const nodePickerMouseClickInCanvas = useCallback(\n    async function nodePickerMouseClickInCanvas(pos: Position | null) {\n      setGlobalNodePickerActive(false);\n      nodePickerRemoveTime.current = Date.now();\n      let nodeBounds: NodeBounds | null = null;\n      if (pos) {\n        const boundingRects = await dispatch(fetchMouseTargetsForPause());\n        nodeBounds = getMouseTarget(boundingRects ?? [], pos.x, pos.y);\n      }\n      if (nodeBounds) {\n        handleNodeSelected(nodeBounds.node);\n      } else {\n        dispatch(unhighlightNode());\n      }\n    },\n    [dispatch, handleNodeSelected]\n  );\n\n  useLayoutEffect(() => {\n    if (globalNodePickerActive) {\n      nodePickerInstance.enable({\n        onHighlightNode(nodeId) {\n          dispatch(highlightNode(nodeId));\n        },\n        onUnhighlightNode() {\n          dispatch(unhighlightNode());\n        },\n        async onPicked(nodeId) {\n          setGlobalNodePickerActive(false);\n          dispatch(setIsNodePickerActive(false));\n          dispatch(setMouseTargetsLoading(false));\n          nodePickerRemoveTime.current = Date.now();\n\n          if (nodeId) {\n            handleNodeSelected(nodeId);\n          } else {\n            dispatch(unhighlightNode());\n          }\n        },\n        onCheckNodeBounds: async (x, y, nodeIds) => {\n          const boundingRects = await dispatch(fetchMouseTargetsForPause());\n          return getMouseTarget(boundingRects ?? [], x, y, nodeIds);\n        },\n      });\n    } else {\n      nodePickerInstance.disable();\n    }\n  }, [globalNodePickerActive, dispatch, handleNodeSelected]);\n\n  useLayoutEffect(() => {\n    // TODO Get rid of these globals and do DOM node checks in the test harness\n    // Save these globally so that the test harness can use them\n    window.gNodePicker = {\n      clickNodePickerButton,\n      nodePickerMouseClickInCanvas,\n    };\n  });\n\n  return (\n    <button\n      id=\"command-button-pick\"\n      className={classnames(\"devtools-button toolbar-panel-button tab\", {\n        active: globalNodePickerActive,\n      })}\n      onClick={clickNodePickerButton}\n      title=\"Select an element in the video to inspect it\"\n    />\n  );\n}\n","import React from \"react\";\n\nimport LoadingProgressBar from \"ui/components/shared/LoadingProgressBar\";\n\nexport default function Loader() {\n  return (\n    <div className=\"relative\">\n      <LoadingProgressBar />\n    </div>\n  );\n}\n","import React, { ReactNode } from \"react\";\nimport { ConnectedProps, connect } from \"react-redux\";\n\nimport LoadingScreen from \"./shared/LoadingScreen\";\n\ninterface PropsFromParent {\n  slice: \"inspector\" | \"messages\";\n  children: ReactNode;\n  loading?: ReactNode;\n}\n\nfunction WaitForReduxSlice({ hasSlice, children, loading }: PropsFromParent & PropsFromRedux) {\n  return hasSlice ? (\n    <>{children}</>\n  ) : (\n    <>{loading}</> || <LoadingScreen fallbackMessage=\"Booting the debugger...\" />\n  );\n}\n\nconst connector = connect((state: any, { slice }: PropsFromParent) => ({\n  hasSlice: !!state[slice],\n}));\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nexport default connector(WaitForReduxSlice);\n","import { ThreadFront } from \"protocol/thread\";\nimport { RecordingCapabilities } from \"protocol/thread/thread\";\n\nlet recordingCapabilitiesPromise: Promise<RecordingCapabilities> | null = null;\nlet recordingCapabilities: RecordingCapabilities | null = null;\n\nexport function getRecordingCapabilitiesSuspense(): RecordingCapabilities {\n  if (recordingCapabilities !== null) {\n    return recordingCapabilities;\n  } else {\n    if (recordingCapabilitiesPromise === null) {\n      recordingCapabilitiesPromise = new Promise(async (resolve, reject) => {\n        try {\n          recordingCapabilities = await ThreadFront.getRecordingCapabilities();\n          recordingCapabilitiesPromise = null;\n\n          resolve(recordingCapabilities!);\n        } catch (error) {\n          reject(error);\n        }\n      });\n    }\n\n    throw recordingCapabilitiesPromise;\n  }\n}\n","import { createContext, useCallback, useMemo, useState } from \"react\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const ConsoleContextMenuContext = /*#__PURE__*/createContext(null);\nexport function ConsoleContextMenuContextRoot({\n  children\n}) {\n  const {\n    0: loggable,\n    1: setLoggable\n  } = useState(null);\n  const {\n    0: mouseCoordinates,\n    1: setMouseCoordinates\n  } = useState(null);\n  const hide = useCallback(() => {\n    setLoggable(null);\n    setMouseCoordinates(null);\n  }, []);\n  const show = useCallback((loggable, mouseCoordinates) => {\n    setLoggable(loggable);\n    setMouseCoordinates(mouseCoordinates);\n  }, []);\n  const context = useMemo(() => ({\n    hide,\n    loggable,\n    mouseCoordinates,\n    show\n  }), [hide, loggable, mouseCoordinates, show]);\n  return /*#__PURE__*/_jsx(ConsoleContextMenuContext.Provider, {\n    value: context,\n    children: children\n  });\n}","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { useContext, useEffect, useMemo, useReducer } from \"react\";\nimport { ConsoleFiltersContext } from \"../contexts/ConsoleFiltersContext\";\nconst EMPTY_ARRAY = [];\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"goToNext\":\n      {\n        const {\n          index,\n          results\n        } = state;\n        return _objectSpread(_objectSpread({}, state), {}, {\n          index: index < results.length - 1 ? index + 1 : 0\n        });\n      }\n\n    case \"goToPrevious\":\n      {\n        const {\n          index,\n          results\n        } = state;\n        return _objectSpread(_objectSpread({}, state), {}, {\n          index: index > 0 ? index - 1 : results.length - 1\n        });\n      }\n\n    case \"updateQuery\":\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          query: action.query\n        });\n      }\n\n    case \"updateResults\":\n      {\n        const {\n          results\n        } = action;\n        let index = -1;\n\n        if (results.length > 0) {\n          const {\n            index: prevIndex,\n            results: prevResults\n          } = state;\n          const prevItem = prevIndex >= 0 && prevIndex < prevResults.length ? prevResults[prevIndex] : null;\n\n          if (prevItem) {\n            index = results.indexOf(prevItem);\n          }\n\n          if (index < 0) {\n            index = 0;\n          }\n        }\n\n        return _objectSpread(_objectSpread({}, state), {}, {\n          index,\n          results\n        });\n      }\n  }\n}\n\nexport default function useSearchDOM(items, stableSearch, listRef) {\n  const {\n    0: state,\n    1: dispatch\n  } = useReducer(reducer, {\n    index: -1,\n    results: EMPTY_ARRAY,\n    query: \"\"\n  });\n  const {\n    filterByText\n  } = useContext(ConsoleFiltersContext);\n  const {\n    query\n  } = state; // Any time our search inputs change, re-run the search function.\n  // HACK Search iterates over the filtered list, so filter criteria is an input as well.\n\n  useEffect(() => {\n    const results = query ? stableSearch(query, items, listRef) : EMPTY_ARRAY;\n    dispatch({\n      type: \"updateResults\",\n      results\n    });\n  }, [filterByText, items, listRef, query, stableSearch]);\n  const actions = useMemo(() => ({\n    goToNext: () => dispatch({\n      type: \"goToNext\"\n    }),\n    goToPrevious: () => dispatch({\n      type: \"goToPrevious\"\n    }),\n    search: query => dispatch({\n      type: \"updateQuery\",\n      query\n    })\n  }), []);\n  const externalState = useMemo(() => ({\n    index: state.index,\n    query: state.query,\n    results: state.results\n  }), [state]);\n  return [externalState, actions];\n}","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { useContext, useMemo, useState } from \"react\";\nimport { LoggablesContext } from \"bvaughn-architecture-demo/components/console/LoggablesContext\";\nimport useSearchDOM from \"bvaughn-architecture-demo/src/hooks/useSearchDOM\";\nconst EMPTY_ARRAY = [];\n\nfunction search(query, loggables, listRef) {\n  const results = [];\n  const needle = query.toLocaleLowerCase();\n  const list = listRef.current;\n  list.childNodes.forEach(node => {\n    const element = node; // HACK Must be compatible with the style used by <LoggablesContextRoot>\n\n    if (element.hasAttribute(\"data-search-index\") && element.style.display != \"none\") {\n      const textContent = element.textContent?.toLocaleLowerCase();\n\n      if (textContent?.includes(needle)) {\n        const index = parseInt(element.getAttribute(\"data-search-index\"), 10);\n        const loggable = loggables[index];\n        results.push(loggable);\n      }\n    }\n  });\n  return results;\n}\n\nconst INVISIBLE_STATE = {\n  results: EMPTY_ARRAY,\n  index: -1,\n  query: \"\",\n  visible: false\n};\nexport default function useConsoleSearchDOM(listRef, searchInputRef, defaultVisible = true) {\n  const loggables = useContext(LoggablesContext);\n  const [state, dispatch] = useSearchDOM(loggables, search, listRef);\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(defaultVisible);\n  const externalActions = useMemo(() => _objectSpread(_objectSpread({}, dispatch), {}, {\n    hide: () => setVisible(false),\n    show: () => {\n      setVisible(true); // If search is already visible, (re)focus the input.\n\n      const searchInput = searchInputRef.current;\n\n      if (searchInput) {\n        searchInput.focus();\n      }\n    }\n  }), [dispatch, searchInputRef]);\n  const externalState = useMemo(() => visible ? _objectSpread(_objectSpread({}, state), {}, {\n    visible\n  }) : INVISIBLE_STATE, [state, visible]);\n  return [externalState, externalActions];\n}","import { createContext, useMemo } from \"react\";\nimport useConsoleSearchDOM from \"./hooks/useConsoleSearchDOM\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const ConsoleSearchContext = /*#__PURE__*/createContext(null);\nexport function ConsoleSearchContextRoot({\n  children,\n  messageListRef,\n  searchInputRef,\n  showSearchInputByDefault\n}) {\n  const [state, actions] = useConsoleSearchDOM(messageListRef, searchInputRef, showSearchInputByDefault);\n  const context = useMemo(() => [state, actions], [state, actions]);\n  return /*#__PURE__*/_jsx(ConsoleSearchContext.Provider, {\n    value: context,\n    children: children\n  });\n}","import { useContext } from \"react\";\nimport Icon from \"../Icon\";\nimport { ConsoleSearchContext } from \"./ConsoleSearchContext\";\nimport styles from \"./ConsoleSearch.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ConsoleSearch({\n  className,\n  hideOnEscape,\n  searchInputRef\n}) {\n  const {\n    0: searchState,\n    1: searchActions\n  } = useContext(ConsoleSearchContext);\n\n  const onChange = event => {\n    searchActions.search(event.currentTarget.value);\n  };\n\n  const onKeyDown = event => {\n    switch (event.key) {\n      case \"Escape\":\n        {\n          if (hideOnEscape) {\n            event.preventDefault();\n            searchActions.hide();\n          }\n\n          break;\n        }\n\n      case \"Enter\":\n        {\n          event.preventDefault();\n\n          if (event.shiftKey) {\n            searchActions.goToPrevious();\n          } else {\n            searchActions.goToNext();\n          }\n\n          break;\n        }\n    }\n  };\n\n  if (!searchState.visible) {\n    return null;\n  }\n\n  let results = null;\n\n  if (searchState.results.length > 0) {\n    results = /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.Results,\n      \"data-test-id\": \"SearchResultsLabel\",\n      children: [searchState.index + 1, \" of \", searchState.results.length, \" results\", /*#__PURE__*/_jsx(\"button\", {\n        className: styles.ResultsIconButton,\n        \"data-test-id\": \"ConsoleSearchGoToPreviousButton\",\n        onClick: searchActions.goToPrevious,\n        children: /*#__PURE__*/_jsx(Icon, {\n          className: styles.ResultsIcon,\n          type: \"up\"\n        })\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: styles.ResultsIconButton,\n        \"data-test-id\": \"ConsoleSearchGoToNextButton\",\n        onClick: searchActions.goToNext,\n        children: /*#__PURE__*/_jsx(Icon, {\n          className: styles.ResultsIcon,\n          type: \"down\"\n        })\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: styles.ResultsIconButton,\n        \"data-test-id\": \"ConsoleSearchClearButton\",\n        onClick: searchActions.hide,\n        children: /*#__PURE__*/_jsx(Icon, {\n          className: styles.ResultsIcon,\n          type: \"cancel\"\n        })\n      })]\n    });\n  } else if (searchState.query !== \"\") {\n    results = /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.Results,\n      children: [\"No results found\", /*#__PURE__*/_jsx(\"button\", {\n        className: styles.ResultsIconButton,\n        onClick: searchActions.hide,\n        children: /*#__PURE__*/_jsx(Icon, {\n          className: styles.ResultsIcon,\n          type: \"cancel\"\n        })\n      })]\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: `${styles.Container} ${className}`,\n    \"data-test-id\": \"ConsoleSearch\",\n    children: [/*#__PURE__*/_jsx(Icon, {\n      className: styles.Icon,\n      type: \"search\"\n    }), /*#__PURE__*/_jsx(\"input\", {\n      autoFocus: true,\n      className: styles.Input,\n      \"data-test-id\": \"ConsoleSearchInput\",\n      onChange: onChange,\n      onKeyDown: onKeyDown,\n      placeholder: \"Find in logs\",\n      ref: searchInputRef,\n      type: \"text\",\n      value: searchState.query\n    }), results]\n  });\n}","import { useContext, useRef } from \"react\";\nimport { FocusContext } from \"bvaughn-architecture-demo/src/contexts/FocusContext\";\nimport { PointsContext } from \"bvaughn-architecture-demo/src/contexts/PointsContext\";\nimport { SessionContext } from \"bvaughn-architecture-demo/src/contexts/SessionContext\";\nimport useModalDismissSignal from \"bvaughn-architecture-demo/src/hooks/useModalDismissSignal\";\nimport { getLoggableTime, isPointInstance } from \"bvaughn-architecture-demo/src/utils/loggables\";\nimport { ConsoleContextMenuContext } from \"./ConsoleContextMenuContext\";\nimport styles from \"./ContextMenu.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst BADGES = [\"green\", \"yellow\", \"orange\", \"purple\"];\n\nfunction ContextMenu({\n  hide,\n  loggable,\n  mouseCoordinates\n}) {\n  const {\n    duration\n  } = useContext(SessionContext);\n  const {\n    rangeForDisplay,\n    update\n  } = useContext(FocusContext);\n  const {\n    editPoint\n  } = useContext(PointsContext);\n  const ref = useRef(null);\n  useModalDismissSignal(ref, hide, true);\n\n  const setFocusBegin = () => {\n    hide();\n    const begin = getLoggableTime(loggable);\n    const end = rangeForDisplay !== null ? rangeForDisplay.end.time : duration;\n    update([begin, end], true);\n  };\n\n  const setFocusEnd = () => {\n    hide();\n    const end = getLoggableTime(loggable);\n    const begin = rangeForDisplay !== null ? rangeForDisplay.begin.time : 0;\n    update([begin, end], true);\n  };\n\n  const setBadge = badge => {\n    hide();\n\n    if (isPointInstance(loggable)) {\n      editPoint(loggable.point.id, {\n        badge\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.ContextMenu,\n    \"data-test-id\": \"ConsoleContextMenu\",\n    ref: ref,\n    style: {\n      left: mouseCoordinates.x,\n      top: mouseCoordinates.y\n    },\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: styles.ContextMenuItem,\n      \"data-test-id\": \"ConsoleContextMenu-SetFocusStartButton\",\n      onClick: setFocusBegin,\n      children: \"Set focus start\"\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.ContextMenuItem,\n      \"data-test-id\": \"ConsoleContextMenu-SetFocusEndButton\",\n      onClick: setFocusEnd,\n      children: \"Set focus end\"\n    }), isPointInstance(loggable) && /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.ContextMenuItem,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.UnicornBadge,\n        \"data-test-id\": \"ConsoleContextMenu-Badge-unicorn\",\n        onClick: () => setBadge(\"unicorn\")\n      }), BADGES.map(badge => /*#__PURE__*/_jsx(\"div\", {\n        className: styles.ColorBadge,\n        \"data-test-id\": `ConsoleContextMenu-Badge-${badge}`,\n        onClick: () => setBadge(badge),\n        style: {\n          // @ts-ignore\n          \"--badge-color\": `var(--badge-${badge}-color)`\n        }\n      }, badge)), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.ColorBadgeClear,\n        onClick: () => setBadge(null)\n      })]\n    })]\n  });\n}\n\nexport default function ContextMenuWrapper() {\n  const {\n    hide,\n    loggable,\n    mouseCoordinates\n  } = useContext(ConsoleContextMenuContext);\n\n  if (loggable === null || mouseCoordinates === null) {\n    return null;\n  } else {\n    return /*#__PURE__*/_jsx(ContextMenu, {\n      hide: hide,\n      loggable: loggable,\n      mouseCoordinates: mouseCoordinates\n    });\n  }\n}","import { useEffect } from \"react\"; // Closes a modal dialog if the user clicks outside of it or types \"Escape\"\n\nexport default function useModalDismissSignal(modalRef, dismissCallback, dismissOnClickOutside = true) {\n  useEffect(() => {\n    const element = modalRef.current;\n\n    if (element === null) {\n      return;\n    }\n\n    const handleDocumentKeyDown = event => {\n      if (event.key === \"Escape\") {\n        dismissCallback();\n      }\n    };\n\n    const handleDocumentClick = event => {\n      if (!element.contains(event.target)) {\n        event.stopPropagation();\n        event.preventDefault();\n        dismissCallback();\n      }\n    };\n\n    let ownerDocument = null; // Delay until after the current call stack is empty,\n    // in case this effect is being run while an event is currently bubbling.\n    // In that case, we don't want to listen to the pre-existing event.\n\n    let timeoutID = setTimeout(() => {\n      timeoutID = null; // It's important to listen to the ownerDocument to support browser extensions.\n      // The root document might belong to a different window.\n\n      ownerDocument = element.ownerDocument;\n      ownerDocument.addEventListener(\"keydown\", handleDocumentKeyDown);\n\n      if (dismissOnClickOutside) {\n        ownerDocument.addEventListener(\"click\", handleDocumentClick, true);\n      }\n\n      if (dismissOnClickOutside) {\n        ownerDocument.addEventListener(\"scroll\", dismissCallback, true);\n      }\n    }, 0);\n    return () => {\n      if (timeoutID !== null) {\n        clearTimeout(timeoutID);\n      }\n\n      if (ownerDocument !== null) {\n        ownerDocument.removeEventListener(\"keydown\", handleDocumentKeyDown);\n        ownerDocument.removeEventListener(\"click\", handleDocumentClick, true);\n      }\n    };\n  }, [modalRef, dismissCallback, dismissOnClickOutside]);\n}","import React, { useContext } from \"react\";\nimport { ConsoleFiltersContext } from \"bvaughn-architecture-demo/src/contexts/ConsoleFiltersContext\";\nimport styles from \"./FilterText.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function FilterText() {\n  const {\n    filterByDisplayText,\n    update\n  } = useContext(ConsoleFiltersContext);\n  return /*#__PURE__*/_jsx(\"input\", {\n    className: styles.Input,\n    \"data-test-id\": \"ConsoleFilterInput\",\n    name: \"filter messages\",\n    value: filterByDisplayText,\n    onChange: event => update({\n      filterByText: event.currentTarget.value\n    }),\n    placeholder: \"Filter output\"\n  });\n}","let recordingCapabilitiesPromise = null;\nlet recordingCapabilities = null;\nexport function getRecordingCapabilitiesSuspense(replayClient) {\n  if (recordingCapabilities !== null) {\n    return recordingCapabilities;\n  } else {\n    if (recordingCapabilitiesPromise === null) {\n      recordingCapabilitiesPromise = new Promise(async (resolve, reject) => {\n        try {\n          recordingCapabilities = await replayClient.getRecordingCapabilities();\n          recordingCapabilitiesPromise = null;\n          resolve(recordingCapabilities);\n        } catch (error) {\n          reject(error);\n        }\n      });\n    }\n\n    throw recordingCapabilitiesPromise;\n  }\n}","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutProperties from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"id\", \"checked\", \"className\", \"disabled\", \"label\", \"addon\", \"onChange\", \"title\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport styles from \"./Checkbox.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function Checkbox(_ref) {\n  let {\n    id,\n    checked,\n    className,\n    disabled,\n    label,\n    addon,\n    onChange,\n    title\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  const generatedId = React.useId();\n  const parsedId = id || generatedId;\n  const checkboxProps = {\n    disabled,\n    id,\n    checked,\n    onChange,\n    type: \"checkbox\"\n  };\n  return label ? /*#__PURE__*/_jsxs(\"div\", _objectSpread(_objectSpread({\n    className: classNames(styles.Container, className)\n  }, props), {}, {\n    children: [/*#__PURE__*/_jsx(\"input\", _objectSpread(_objectSpread({}, checkboxProps), {}, {\n      id: parsedId,\n      className: styles.Input\n    })), /*#__PURE__*/_jsx(\"label\", {\n      htmlFor: parsedId,\n      className: styles.Label,\n      children: label\n    }), addon]\n  })) : /*#__PURE__*/_jsx(\"input\", _objectSpread(_objectSpread(_objectSpread({}, checkboxProps), props), {}, {\n    className: classNames(styles.Input, className)\n  }));\n}","import * as React from \"react\";\nimport styles from \"./Badge.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport function Badge({\n  label\n}) {\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: styles.Root,\n    children: label\n  });\n}","import { useContext } from \"react\";\nimport Icon from \"bvaughn-architecture-demo/components/Icon\";\nimport { ConsoleFiltersContext } from \"bvaughn-architecture-demo/src/contexts/ConsoleFiltersContext\";\nimport { Badge, Checkbox } from \"design\";\nimport styles from \"./EventType.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function EventType({\n  categoryLabel,\n  disabled,\n  event\n}) {\n  const {\n    eventTypesForDisplay: eventTypes,\n    update\n  } = useContext(ConsoleFiltersContext);\n  const checked = eventTypes[event.type] === true;\n\n  const toggle = () => update({\n    eventTypes: {\n      [event.type]: !checked\n    }\n  });\n\n  const stopPropagation = event => {\n    event.stopPropagation();\n  };\n\n  return /*#__PURE__*/_jsxs(\"label\", {\n    className: disabled ? styles.EventTypeDisabled : styles.EventType,\n    \"data-test-id\": `EventTypes-${event.type}`,\n    \"data-test-name\": \"EventTypeToggle\",\n    onClick: stopPropagation,\n    children: [/*#__PURE__*/_jsx(Checkbox, {\n      disabled: disabled,\n      checked: checked,\n      onChange: toggle\n    }), /*#__PURE__*/_jsxs(\"span\", {\n      className: styles.Label,\n      children: [categoryLabel && /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"span\", {\n          className: styles.CategoryPrefix,\n          children: categoryLabel\n        }), /*#__PURE__*/_jsx(Icon, {\n          className: styles.ArrowIcon,\n          type: \"arrow\"\n        })]\n      }), /*#__PURE__*/_jsx(\"span\", {\n        children: event.label\n      })]\n    }), /*#__PURE__*/_jsx(Badge, {\n      label: event.count\n    })]\n  });\n}","import { useMemo } from \"react\";\nimport Expandable from \"bvaughn-architecture-demo/components/Expandable\";\nimport { Badge } from \"design\";\nimport EventType from \"./EventType\";\nimport styles from \"./EventCategory.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function EventCategory({\n  disabled,\n  eventCategory,\n  filterByText\n}) {\n  const {\n    0: eventsWithHits,\n    1: totalHitCount\n  } = useMemo(() => {\n    let totalHitCount = 0;\n    const eventsWithHits = eventCategory.events.filter(event => {\n      if (event.count > 0) {\n        totalHitCount += event.count;\n        return true;\n      }\n    });\n    return [eventsWithHits, totalHitCount];\n  }, [eventCategory]);\n  const categoryName = eventCategory.category;\n  const filteredEvents = useMemo(() => {\n    if (!filterByText) {\n      return eventsWithHits;\n    }\n\n    const filterByTextLowerCase = filterByText.toLowerCase();\n\n    if (categoryName.toLowerCase().includes(filterByTextLowerCase)) {\n      return eventsWithHits;\n    }\n\n    return eventsWithHits.filter(({\n      label\n    }) => {\n      return label.toLowerCase().includes(filterByTextLowerCase);\n    });\n  }, [categoryName, eventsWithHits, filterByText]);\n\n  if (filteredEvents.length === 0) {\n    return null;\n  }\n\n  const eventsList = /*#__PURE__*/_jsx(\"div\", {\n    className: styles.List,\n    children: filteredEvents.map(event => /*#__PURE__*/_jsx(EventType, {\n      categoryLabel: filterByText ? categoryName : null,\n      disabled: disabled,\n      event: event\n    }, event.type))\n  });\n\n  if (filterByText) {\n    return eventsList;\n  } else {\n    return /*#__PURE__*/_jsx(Expandable, {\n      children: eventsList,\n      headerClassName: styles.HeaderWrapper,\n      header: /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.Header,\n        \"data-test-id\": `EventCategoryHeader-${eventCategory.category}`,\n        children: [/*#__PURE__*/_jsx(\"span\", {\n          className: styles.Category,\n          children: eventCategory.category\n        }), /*#__PURE__*/_jsx(Badge, {\n          label: totalHitCount\n        })]\n      })\n    });\n  }\n}","import { Suspense, useContext, useMemo, useState, useTransition } from \"react\";\nimport Loader from \"bvaughn-architecture-demo/components/Loader\";\nimport { getEventCategoryCountsSuspense } from \"bvaughn-architecture-demo/src/suspense/EventsCache\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport EventCategory from \"./EventCategory\";\nimport styles from \"./EventsList.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function EventsList() {\n  const {\n    0: filterByDisplayText,\n    1: setFilterByDisplayText\n  } = useState(\"\");\n  const {\n    0: filterByText,\n    1: setFilterByText\n  } = useState(\"\");\n  const {\n    0: isPending,\n    1: startTransition\n  } = useTransition();\n\n  const onFilterTextChange = event => {\n    const newFilterByText = event.currentTarget.value;\n    setFilterByDisplayText(newFilterByText);\n    startTransition(() => {\n      setFilterByText(newFilterByText);\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.EventsList,\n    children: [/*#__PURE__*/_jsx(\"input\", {\n      className: styles.FilterInput,\n      \"data-test-id\": \"EventTypeFilterInput\",\n      onChange: onFilterTextChange,\n      placeholder: \"Filter by event type\",\n      type: \"text\",\n      value: filterByDisplayText\n    }), /*#__PURE__*/_jsx(Suspense, {\n      fallback: /*#__PURE__*/_jsx(Loader, {}),\n      children: /*#__PURE__*/_jsx(EventsListCategories, {\n        filterByText: filterByText,\n        isPending: isPending\n      })\n    })]\n  });\n}\n\nfunction EventsListCategories({\n  filterByText,\n  isPending\n}) {\n  const client = useContext(ReplayClientContext);\n  const eventCategoryCounts = getEventCategoryCountsSuspense(client);\n  const {\n    0: commonEventCategories,\n    1: otherEventCategories\n  } = useMemo(() => {\n    const commonEventCategories = [];\n    const otherEventCategories = [];\n    eventCategoryCounts.forEach(category => {\n      switch (category.category) {\n        case \"Keyboard\":\n        case \"Mouse\":\n          commonEventCategories.push(category);\n          break;\n\n        default:\n          otherEventCategories.push(category);\n          break;\n      }\n    });\n    return [commonEventCategories, otherEventCategories];\n  }, [eventCategoryCounts]);\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: styles.Header,\n      children: \"Common Events\"\n    }), commonEventCategories.map(eventCategory => /*#__PURE__*/_jsx(EventCategory, {\n      disabled: isPending,\n      eventCategory: eventCategory,\n      filterByText: filterByText\n    }, eventCategory.category)), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.Header,\n      children: \"Other Events\"\n    }), otherEventCategories.map(eventCategory => /*#__PURE__*/_jsx(EventCategory, {\n      disabled: isPending,\n      eventCategory: eventCategory,\n      filterByText: filterByText\n    }, eventCategory.category))]\n  });\n}","import camelCase from \"lodash/camelCase\";\nimport React, { Suspense, useContext, useMemo, useSyncExternalStore } from \"react\";\nimport Icon from \"bvaughn-architecture-demo/components/Icon\";\nimport { ConsoleFiltersContext } from \"bvaughn-architecture-demo/src/contexts/ConsoleFiltersContext\";\nimport { FocusContext } from \"bvaughn-architecture-demo/src/contexts/FocusContext\";\nimport { getStatus, subscribeForStatus } from \"bvaughn-architecture-demo/src/suspense/ExceptionsCache\";\nimport { getMessagesSuspense } from \"bvaughn-architecture-demo/src/suspense/MessagesCache\";\nimport { getRecordingCapabilitiesSuspense } from \"bvaughn-architecture-demo/src/suspense/RecordingCache\";\nimport { isInNodeModules } from \"bvaughn-architecture-demo/src/utils/messages\";\nimport { Badge, Checkbox } from \"design\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport EventsList from \"./EventsList\";\nimport styles from \"./FilterToggles.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function FilterToggles() {\n  const {\n    showErrors,\n    showExceptionsForDisplay: showExceptions,\n    showLogs,\n    showNodeModules,\n    showTimestamps,\n    showWarnings,\n    update\n  } = useContext(ConsoleFiltersContext);\n  const replayClient = useContext(ReplayClientContext);\n  const recordingCapabilities = getRecordingCapabilitiesSuspense(replayClient);\n  const status = useSyncExternalStore(subscribeForStatus, getStatus, getStatus);\n  let exceptionsBadge = null;\n\n  switch (status) {\n    case \"failed-too-many-points\":\n      {\n        if (showExceptions) {\n          exceptionsBadge = /*#__PURE__*/_jsx(\"span\", {\n            title: \"There are too many exceptions. Please focus to a smaller time range and try again.\",\n            children: /*#__PURE__*/_jsx(Icon, {\n              className: styles.ExceptionsErrorIcon,\n              type: \"warning\"\n            })\n          });\n        }\n\n        break;\n      }\n\n    case \"request-in-progress\":\n      {\n        exceptionsBadge = /*#__PURE__*/_jsx(Icon, {\n          className: styles.SpinnerIcon,\n          type: \"spinner\"\n        });\n        break;\n      }\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.Filters,\n    \"data-test-id\": \"ConsoleFilterToggles\",\n    children: [/*#__PURE__*/_jsx(Toggle, {\n      afterContent: exceptionsBadge,\n      checked: showExceptions,\n      label: \"Exceptions\",\n      onChange: showExceptions => update({\n        showExceptions\n      })\n    }), /*#__PURE__*/_jsx(Toggle, {\n      afterContent: /*#__PURE__*/_jsx(Suspense, {\n        fallback: null,\n        children: /*#__PURE__*/_jsx(ToggleCategoryCount, {\n          category: \"logs\"\n        })\n      }),\n      checked: showLogs,\n      label: \"Logs\",\n      onChange: showLogs => update({\n        showLogs\n      })\n    }), /*#__PURE__*/_jsx(Toggle, {\n      afterContent: /*#__PURE__*/_jsx(Suspense, {\n        fallback: null,\n        children: /*#__PURE__*/_jsx(ToggleCategoryCount, {\n          category: \"warnings\"\n        })\n      }),\n      checked: showWarnings,\n      label: \"Warnings\",\n      onChange: showWarnings => update({\n        showWarnings\n      })\n    }), /*#__PURE__*/_jsx(Toggle, {\n      afterContent: /*#__PURE__*/_jsx(Suspense, {\n        fallback: null,\n        children: /*#__PURE__*/_jsx(ToggleCategoryCount, {\n          category: \"errors\"\n        })\n      }),\n      checked: showErrors,\n      label: \"Errors\",\n      onChange: showErrors => update({\n        showErrors\n      })\n    }), recordingCapabilities.supportsEventTypes && /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(\"hr\", {\n        className: styles.Divider\n      }), /*#__PURE__*/_jsx(EventsList, {})]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.EmptySpaceFiller\n    }), /*#__PURE__*/_jsx(\"hr\", {\n      className: styles.Divider\n    }), /*#__PURE__*/_jsx(Toggle, {\n      afterContent: /*#__PURE__*/_jsx(Suspense, {\n        fallback: null,\n        children: /*#__PURE__*/_jsx(NodeModulesCount, {})\n      }),\n      checked: showNodeModules,\n      label: \"Node modules\",\n      onChange: showNodeModules => update({\n        showNodeModules\n      })\n    }), /*#__PURE__*/_jsx(Toggle, {\n      checked: showTimestamps,\n      label: \"Timestamps\",\n      onChange: showTimestamps => update({\n        showTimestamps\n      })\n    })]\n  });\n}\n\nfunction Toggle({\n  afterContent = null,\n  checked,\n  label,\n  onChange\n}) {\n  const id = `FilterToggle-${camelCase(label)}`;\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.Filter,\n    children: [/*#__PURE__*/_jsx(Checkbox, {\n      \"data-test-id\": id,\n      label: label,\n      checked: checked,\n      id: id,\n      onChange: event => onChange(event.target.checked)\n    }), afterContent]\n  });\n}\n\nfunction ToggleCategoryCount({\n  category\n}) {\n  const {\n    range: focusRange\n  } = useContext(FocusContext);\n  const client = useContext(ReplayClientContext);\n  const {\n    categoryCounts\n  } = getMessagesSuspense(client, focusRange);\n  const count = categoryCounts[category];\n  return count === 0 ? null : /*#__PURE__*/_jsx(Badge, {\n    label: count\n  });\n}\n\nfunction NodeModulesCount() {\n  const client = useContext(ReplayClientContext);\n  const {\n    range\n  } = useContext(FocusContext);\n  const {\n    messages\n  } = getMessagesSuspense(client, range);\n  const count = useMemo(() => {\n    return messages.filter(message => isInNodeModules(message)).length;\n  }, [messages]);\n  return count === 0 ? null : /*#__PURE__*/_jsx(Badge, {\n    label: count\n  });\n}","import { useContext, useLayoutEffect, useRef } from \"react\";\nimport { TimelineContext } from \"bvaughn-architecture-demo/src/contexts/TimelineContext\";\nimport styles from \"./CurrentTimeIndicator.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function CurrentTimeIndicator() {\n  const {\n    executionPoint\n  } = useContext(TimelineContext);\n  const ref = useRef(null);\n  useLayoutEffect(() => {\n    const div = ref.current;\n    div.scrollIntoView({\n      behavior: \"smooth\",\n      block: \"nearest\"\n    });\n  }, [executionPoint]);\n  return /*#__PURE__*/_jsx(\"div\", {\n    ref: ref,\n    className: styles.CurrentTimeIndicator,\n    \"data-test-id\": \"Console-CurrentTimeIndicator\"\n  });\n}","export let Nag;\n\n(function (Nag) {\n  Nag[\"FIRST_LOG_IN\"] = \"first_log_in\";\n  Nag[\"FIRST_REPLAY_2\"] = \"first_replay_2\";\n  Nag[\"VIEW_DEVTOOLS\"] = \"view_devtools\";\n  Nag[\"FIRST_BREAKPOINT_EDIT\"] = \"first_breakpoint_edit\";\n  Nag[\"FIRST_BREAKPOINT_ADD\"] = \"first_breakpoint_add\";\n  Nag[\"FIRST_BREAKPOINT_SAVE\"] = \"first_breakpoint_save\";\n  Nag[\"FIRST_CONSOLE_NAVIGATE\"] = \"first_console_navigate\";\n  Nag[\"DOWNLOAD_REPLAY\"] = \"download_replay\";\n})(Nag || (Nag = {}));\n\nexport let EmailSubscription;\n\n(function (EmailSubscription) {\n  EmailSubscription[\"COLLABORATOR_REQUEST\"] = \"collaborator_request\";\n  EmailSubscription[\"REPLAY_COMMENT\"] = \"replay_comment\";\n  EmailSubscription[\"NEW_TEAM_INVITE\"] = \"new_team_invite\";\n})(EmailSubscription || (EmailSubscription = {}));","import _defineProperty from \"/workspace/trunk/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n// TODO Pass this client via Context\nlet GRAPHQL_URL = \"https://api.replay.io/v1/graphql\";\n\nif (true) {\n  const url = new URL(window.location.href);\n\n  if (url.searchParams.has(\"graphql\")) {\n    GRAPHQL_URL = url.searchParams.get(\"graphql\");\n  }\n}\n\nconst GetUserQuery = `\nquery GetUser {\n    viewer {\n      user {\n        name\n        picture\n        id\n        __typename\n      }\n      motd\n      features {\n        library\n        __typename\n      }\n      acceptedTOSVersion\n      email\n      internal\n      nags\n      unsubscribedEmailTypes\n      __typename\n    }\n  }\n`;\nexport async function getCurrentUserInfo(accessToken) {\n  const response = await fetch(GRAPHQL_URL, {\n    method: \"POST\",\n    headers: _objectSpread(_objectSpread({}, accessToken && {\n      Authorization: `Bearer ${accessToken}`\n    }), {}, {\n      \"Content-Type\": \"application/json\"\n    }),\n    body: JSON.stringify({\n      operationName: \"GetUser\",\n      query: GetUserQuery,\n      variables: {}\n    })\n  });\n  const json = await response.json(); // TODO GraphQL types\n\n  const viewer = json.data?.viewer;\n\n  if (!viewer) {\n    return null;\n  }\n\n  return {\n    name: viewer.user.name,\n    picture: viewer.user.picture,\n    motd: viewer.motd,\n    acceptedTOSVersion: viewer.acceptedTOSVersion,\n    email: viewer.email,\n    id: viewer.user.id,\n    internal: viewer.internal,\n    nags: viewer.nags,\n    unsubscribedEmailTypes: viewer.unsubscribedEmailTypes,\n    features: viewer.features || {}\n  };\n}\nconst DismissNagMutation = `\n  mutation DismissNag($nag: String!) {\n    dismissNag(input: { nag: $nag }) {\n      success\n    }\n  }\n`;\nexport async function dismissNag(graphQLClient, accessToken, nag) {\n  await graphQLClient.send({\n    operationName: \"DismissNag\",\n    query: DismissNagMutation,\n    variables: {\n      nag\n    }\n  }, accessToken);\n}","import { useContext } from \"react\";\nimport { GraphQLClientContext } from \"../contexts/GraphQLClientContext\";\nimport { SessionContext } from \"../contexts/SessionContext\";\nimport { dismissNag } from \"../graphql/User\";\nexport function useDismissNag() {\n  const {\n    accessToken,\n    currentUserInfo,\n    refetchUser\n  } = useContext(SessionContext);\n  const graphQLClient = useContext(GraphQLClientContext);\n  return async nag => {\n    if (!accessToken || !currentUserInfo) {\n      return;\n    }\n\n    const {\n      id,\n      nags\n    } = currentUserInfo;\n\n    if (!nags || nags.includes(nag) || !id) {\n      return;\n    }\n\n    await dismissNag(graphQLClient, accessToken, nag); // The console uses a simple `fetch`-based GraphQL client.\n    // But, our user data  in the main app is stored via Apollo.\n    // Apollo won't refetch automatically when we made this update,\n    // so run this callback to force Apollo to refetch the user.\n\n    refetchUser();\n  };\n}","import { unstable_useCacheRefresh as useCacheRefresh, useContext, useRef, useState, useTransition } from \"react\";\nimport Icon from \"bvaughn-architecture-demo/components/Icon\";\nimport { GraphQLClientContext } from \"bvaughn-architecture-demo/src/contexts/GraphQLClientContext\";\nimport { InspectorContext } from \"bvaughn-architecture-demo/src/contexts/InspectorContext\";\nimport { SessionContext } from \"bvaughn-architecture-demo/src/contexts/SessionContext\";\nimport { TimelineContext } from \"bvaughn-architecture-demo/src/contexts/TimelineContext\";\nimport { addComment as addCommentGraphQL } from \"bvaughn-architecture-demo/src/graphql/Comments\";\nimport { Nag } from \"bvaughn-architecture-demo/src/graphql/types\";\nimport { useDismissNag } from \"bvaughn-architecture-demo/src/hooks/useDismissNag\";\nimport { isExecutionPointsGreaterThan } from \"bvaughn-architecture-demo/src/utils/time\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport styles from \"./MessageHoverButton.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function MessageHoverButton({\n  executionPoint,\n  locations,\n  showAddCommentButton,\n  time\n}) {\n  const ref = useRef(null);\n  const dismissNag = useDismissNag();\n  const {\n    0: isHovered,\n    1: setIsHovered\n  } = useState(false);\n  const {\n    inspectFunctionDefinition,\n    showCommentsPanel\n  } = useContext(InspectorContext);\n  const {\n    accessToken,\n    recordingId\n  } = useContext(SessionContext);\n  const graphQLClient = useContext(GraphQLClientContext);\n  const {\n    executionPoint: currentExecutionPoint,\n    update\n  } = useContext(TimelineContext);\n  const invalidateCache = useCacheRefresh();\n  const {\n    0: isPending,\n    1: startTransition\n  } = useTransition();\n  const isCurrentlyPausedAt = currentExecutionPoint === executionPoint;\n  const client = useContext(ReplayClientContext);\n  const location = locations ? client.getPreferredLocation(locations) : null;\n  let button = null;\n\n  if (isCurrentlyPausedAt) {\n    if (showAddCommentButton && accessToken) {\n      const addCommentTransition = () => {\n        startTransition(async () => {\n          if (showCommentsPanel !== null) {\n            showCommentsPanel();\n          }\n\n          await addCommentGraphQL(graphQLClient, accessToken, recordingId, {\n            content: \"\",\n            hasFrames: true,\n            isPublished: false,\n            point: executionPoint,\n            sourceLocation: location,\n            time\n          });\n          invalidateCache();\n        });\n      };\n\n      button = /*#__PURE__*/_jsxs(\"button\", {\n        className: styles.AddCommentButton,\n        \"data-test-id\": \"AddCommentButton\",\n        disabled: isPending,\n        onClick: addCommentTransition,\n        onMouseEnter: () => setIsHovered(true),\n        onMouseLeave: () => setIsHovered(false),\n        ref: ref,\n        children: [/*#__PURE__*/_jsx(Icon, {\n          className: styles.AddCommentButtonIcon,\n          type: \"comment\"\n        }), /*#__PURE__*/_jsx(\"span\", {\n          className: isHovered ? styles.LabelHovered : styles.Label,\n          children: \" Add comment \"\n        })]\n      });\n    }\n  } else {\n    const onClick = event => {\n      event.preventDefault();\n      event.stopPropagation();\n      update(time, executionPoint);\n\n      if (inspectFunctionDefinition !== null && location !== null) {\n        inspectFunctionDefinition([location]);\n      }\n\n      dismissNag(Nag.FIRST_CONSOLE_NAVIGATE);\n    };\n\n    const label = currentExecutionPoint === null || isExecutionPointsGreaterThan(executionPoint, currentExecutionPoint) ? \"Fast-forward\" : \"Rewind\";\n    button = /*#__PURE__*/_jsxs(\"button\", {\n      className: styles.ConsoleMessageHoverButton,\n      \"data-test-id\": \"ConsoleMessageHoverButton\",\n      onClick: onClick,\n      onMouseEnter: () => setIsHovered(true),\n      onMouseLeave: () => setIsHovered(false),\n      ref: ref,\n      children: [/*#__PURE__*/_jsx(Icon, {\n        className: styles.ConsoleMessageHoverButtonIcon,\n        type: currentExecutionPoint === null || isExecutionPointsGreaterThan(executionPoint, currentExecutionPoint) ? \"fast-forward\" : \"rewind\"\n      }), /*#__PURE__*/_jsxs(\"span\", {\n        className: isHovered ? styles.LabelHovered : styles.Label,\n        children: [\" \", label, \" \"]\n      })]\n    });\n  }\n\n  return button;\n}","import { useContext } from \"react\";\nimport { InspectorContext } from \"bvaughn-architecture-demo/src/contexts/InspectorContext\";\nimport { getSource } from \"bvaughn-architecture-demo/src/suspense/SourcesCache\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport styles from \"./Source.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function Source({\n  className = \"\",\n  locations\n}) {\n  const {\n    inspectFunctionDefinition\n  } = useContext(InspectorContext);\n  const client = useContext(ReplayClientContext);\n  const location = client.getPreferredLocation(locations);\n\n  if (location == null) {\n    return null;\n  }\n\n  const source = getSource(client, location.sourceId);\n\n  if (source == null) {\n    return null;\n  }\n\n  const fileName = source.url?.split(\"/\").slice(-1)[0];\n\n  const openSource = event => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (inspectFunctionDefinition !== null) {\n      inspectFunctionDefinition([location]);\n    }\n  };\n\n  const sourceString = `${fileName}:${location.line}`;\n  return /*#__PURE__*/_jsx(\"span\", {\n    className: `${styles.Source} ${className}`,\n    \"data-test-name\": \"Console-Source\",\n    onClick: openSource,\n    title: sourceString,\n    children: sourceString\n  });\n}","import { Fragment, useMemo, useRef, useState } from \"react\";\nimport { useLayoutEffect } from \"react\";\nimport { Suspense, memo, useContext } from \"react\";\nimport Inspector from \"bvaughn-architecture-demo/components/inspector\";\nimport Loader from \"bvaughn-architecture-demo/components/Loader\";\nimport { ConsoleFiltersContext } from \"bvaughn-architecture-demo/src/contexts/ConsoleFiltersContext\";\nimport { InspectableTimestampedPointContext } from \"bvaughn-architecture-demo/src/contexts/InspectorContext\";\nimport { TimelineContext } from \"bvaughn-architecture-demo/src/contexts/TimelineContext\";\nimport { formatTimestamp } from \"bvaughn-architecture-demo/src/utils/time\";\nimport { ConsoleContextMenuContext } from \"../ConsoleContextMenuContext\";\nimport MessageHoverButton from \"../MessageHoverButton\";\nimport Source from \"../Source\";\nimport styles from \"./shared.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nfunction EventLogRenderer({\n  eventLog,\n  index,\n  isFocused\n}) {\n  const {\n    show\n  } = useContext(ConsoleContextMenuContext);\n  const {\n    showTimestamps\n  } = useContext(ConsoleFiltersContext);\n  const {\n    executionPoint: currentExecutionPoint\n  } = useContext(TimelineContext);\n  const ref = useRef(null);\n  const {\n    0: isHovered,\n    1: setIsHovered\n  } = useState(false);\n  const {\n    point,\n    pauseId,\n    time,\n    values\n  } = eventLog;\n  const context = useMemo(() => ({\n    executionPoint: point,\n    time\n  }), [point, time]);\n  useLayoutEffect(() => {\n    if (isFocused) {\n      ref.current?.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"nearest\"\n      });\n    }\n  }, [isFocused]);\n  let className = styles.Row;\n\n  if (isFocused) {\n    className = `${className} ${styles.Focused}`;\n  }\n\n  const content = values.length > 0 ? values.map((value, index) => /*#__PURE__*/_jsxs(Fragment, {\n    children: [/*#__PURE__*/_jsx(Inspector, {\n      context: \"console\",\n      pauseId: pauseId,\n      protocolValue: value\n    }), index < values.length - 1 && \" \"]\n  }, index)) : null;\n\n  const showContextMenu = event => {\n    event.preventDefault();\n    show(eventLog, {\n      x: event.pageX,\n      y: event.pageY\n    });\n  };\n\n  const primaryContent = /*#__PURE__*/_jsxs(_Fragment, {\n    children: [showTimestamps && /*#__PURE__*/_jsxs(\"span\", {\n      className: styles.TimeStamp,\n      children: [formatTimestamp(eventLog.time, true), \" \"]\n    }), content ? /*#__PURE__*/_jsx(\"span\", {\n      className: styles.LogContents,\n      \"data-test-name\": \"LogContents\",\n      children: content\n    }) : /*#__PURE__*/_jsx(\"span\", {\n      className: styles.LogContentsEmpty,\n      \"data-test-name\": \"LogContents\",\n      children: \"No data to display.\"\n    })]\n  });\n\n  return /*#__PURE__*/_jsx(InspectableTimestampedPointContext.Provider, {\n    value: context,\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      ref: ref,\n      className: className,\n      \"data-search-index\": index,\n      \"data-test-message-type\": \"event\",\n      \"data-test-paused-here\": eventLog.point === currentExecutionPoint,\n      \"data-test-name\": \"Message\",\n      role: \"listitem\",\n      onContextMenu: showContextMenu,\n      onMouseEnter: () => setIsHovered(true),\n      onMouseLeave: () => setIsHovered(false),\n      children: [/*#__PURE__*/_jsx(\"span\", {\n        className: styles.Source,\n        children: /*#__PURE__*/_jsx(Suspense, {\n          fallback: /*#__PURE__*/_jsx(Loader, {}),\n          children: /*#__PURE__*/_jsx(Source, {\n            locations: eventLog.location\n          })\n        })\n      }), primaryContent, isHovered && /*#__PURE__*/_jsx(MessageHoverButton, {\n        executionPoint: eventLog.point,\n        locations: eventLog.location,\n        showAddCommentButton: true,\n        time: eventLog.time\n      })]\n    })\n  });\n}\n\nexport default /*#__PURE__*/memo(EventLogRenderer);","import jsTokens from \"js-tokens\";\nimport { createWakeable } from \"../utils/suspense\";\nimport { preCacheObjects } from \"./ObjectPreviews\";\nimport { STATUS_PENDING, STATUS_REJECTED, STATUS_RESOLVED } from \"./types\";\n\nfunction getKey(focusRange, location, code, condition) {\n  const rangeString = focusRange ? `${focusRange.begin}-${focusRange.end}` : \"-\";\n  return `${rangeString}:${location.sourceId}:${location.line}:${location.column}:${code}:${condition || \"\"}`;\n}\n\nconst locationAndTimeToValueMap = new Map(); // TODO (FE-469) Filter in-memory if the range gets smaller (and we haven't overflowed)\n// Currently we re-run the analysis which seems wasteful.\n\nexport function runAnalysisSuspense(client, focusRange, location, code, condition) {\n  const key = getKey(focusRange, location, code, condition);\n  let record = locationAndTimeToValueMap.get(key);\n\n  if (record == null) {\n    const wakeable = createWakeable();\n    record = {\n      status: STATUS_PENDING,\n      value: wakeable\n    };\n    locationAndTimeToValueMap.set(key, record);\n\n    if (!condition && canRunLocalAnalysis(code)) {\n      runLocalAnalysis(code, record, wakeable);\n    } else {\n      runRemoteAnalysis(client, focusRange, location, code, condition, record, wakeable);\n    }\n  }\n\n  if (record.status === STATUS_RESOLVED) {\n    return record.value;\n  } else {\n    throw record.value;\n  }\n}\nexport function canRunLocalAnalysis(code) {\n  const tokens = jsTokens(code); // @ts-ignore\n\n  for (let token of tokens) {\n    switch (token.type) {\n      case \"IdentifierName\":\n        {\n          switch (token.value) {\n            case \"false\":\n            case \"Infinity\":\n            case \"NaN\":\n            case \"null\":\n            case \"true\":\n            case \"undefined\":\n              {\n                // Supported\n                break;\n              }\n\n            default:\n              {\n                return false;\n              }\n          }\n\n          break;\n        }\n\n      case \"Punctuator\":\n        {\n          switch (token.value) {\n            case \",\":\n              {\n                // Supported\n                break;\n              }\n\n            default:\n              {\n                return false;\n              }\n          }\n\n          break;\n        }\n\n      case \"NoSubstitutionTemplate\":\n      case \"NumericLiteral\":\n      case \"StringLiteral\":\n      case \"WhiteSpace\":\n        {\n          // supported\n          break;\n        }\n\n      default:\n        {\n          return false;\n        }\n    }\n  }\n\n  return true;\n}\n\nasync function runLocalAnalysis(code, record, wakeable) {\n  try {\n    const analysisResults = await new Promise((resolve, reject) => {\n      if (code === \"location\") {\n        reject();\n      }\n\n      const escapedCode = code.replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g, '\\\\\"'); // Most globals (like window and document) aren't defined in a Worker, but the location global is.\n\n      const workerCode = `\n          const values = (() => eval(\"[${escapedCode}]\"))();\n          postMessage(values);\n      `;\n      const blob = new Blob([workerCode], {\n        type: \"text/javascript\"\n      });\n      const objectURL = URL.createObjectURL(blob);\n      const worker = new Worker(objectURL);\n      worker.addEventListener(\"message\", event => {\n        const values = event.data;\n\n        const analysisResults = timeStampedPoint => ({\n          executionPoint: timeStampedPoint.point,\n          isRemote: false,\n          pauseId: null,\n          time: timeStampedPoint.time,\n          values\n        });\n\n        resolve(analysisResults);\n        clearTimeout(timeoutID);\n      });\n      worker.addEventListener(\"error\", event => {\n        reject(event.message);\n        clearTimeout(timeoutID);\n      });\n      worker.postMessage(\"start\");\n      const timeoutID = setTimeout(() => {\n        worker.terminate();\n        reject(\"Timed out\");\n      }, 5000);\n    });\n    record.status = STATUS_RESOLVED;\n    record.value = analysisResults;\n    wakeable.resolve(analysisResults);\n  } catch (error) {\n    record.status = STATUS_REJECTED;\n    record.value = error;\n    wakeable.reject(error);\n  }\n}\n\nasync function runRemoteAnalysis(client, focusRange, location, code, condition, record, wakeable) {\n  try {\n    const results = await client.runAnalysis({\n      effectful: false,\n      location,\n      mapper: createMapperForAnalysis(code, condition),\n      range: focusRange || undefined\n    });\n    const resultsMap = new Map();\n    results.forEach(result => {\n      const objects = result.data.objects;\n\n      if (objects) {\n        // Pre-cache pause data so we don't need to refetch when rendering in inspecting values in the console.\n        preCacheObjects(result.pauseId, objects);\n      }\n\n      resultsMap.set(result.point, {\n        executionPoint: result.point,\n        isRemote: true,\n        pauseId: result.pauseId,\n        time: result.time,\n        values: result.values\n      });\n    });\n\n    const analysisResults = timeStampedPoint => {\n      return resultsMap.get(timeStampedPoint.point) || null;\n    };\n\n    record.status = STATUS_RESOLVED;\n    record.value = analysisResults;\n    wakeable.resolve(analysisResults);\n  } catch (error) {\n    record.status = STATUS_REJECTED;\n    record.value = error;\n    wakeable.reject(error);\n  }\n}\n\nfunction createMapperForCondition(condition) {\n  return `\n    const { result: conditionResult } = sendCommand(\n      \"Pause.evaluateInFrame\",\n      { frameId, expression: ${JSON.stringify(condition)}, useOriginalScopes: true }\n    );\n    addPauseData(conditionResult.data);\n    if (conditionResult.returned) {\n      const { returned } = conditionResult;\n      if (\"value\" in returned && !returned.value) {\n        return [];\n      }\n      if (!Object.keys(returned).length) {\n        // Undefined.\n        return [];\n      }\n    }\n  `;\n}\n\nfunction createMapperForAnalysis(code, condition) {\n  const escapedCode = code.replace(/\"/g, '\\\\\"');\n  return `\n    const finalData = { frames: [], scopes: [], objects: [] };\n    const { point, time, pauseId } = input;\n    const { frameId, functionName, location } = getTopFrame();\n\n    ${condition ? createMapperForCondition(condition) : \"\"}\n\n    function addPauseData({ frames, scopes, objects }) {\n      finalData.frames.push(...(frames || []));\n      finalData.scopes.push(...(scopes || []));\n      finalData.objects.push(...(objects || []));\n    }\n\n    function getTopFrame() {\n      const { frame, data } = sendCommand(\"Pause.getTopFrame\");\n      addPauseData(data);\n      return finalData.frames.find((f) => f.frameId == frame);\n    }\n\n    const bindings = [{ name: \"displayName\", value: functionName || \"\" }];\n    const { result } = sendCommand(\"Pause.evaluateInFrame\", {\n      frameId,\n      bindings,\n      expression: \"[\" + \"${escapedCode}\" + \"]\",\n      useOriginalScopes: true,\n    });\n    const values = [];\n    addPauseData(result.data);\n    if (result.exception) {\n      values.push(result.exception);\n    } else {\n      {\n        const { object } = result.returned;\n        const { result: lengthResult } = sendCommand(\"Pause.getObjectProperty\", {\n          object,\n          name: \"length\",\n        });\n        addPauseData(lengthResult.data);\n        const length = lengthResult.returned.value;\n        for (let i = 0; i < length; i++) {\n          const { result: elementResult } = sendCommand(\"Pause.getObjectProperty\", {\n            object,\n            name: i.toString(),\n          });\n          values.push(elementResult.returned);\n          addPauseData(elementResult.data);\n        }\n      }\n    }\n    return [\n      {\n        key: point,\n        value: { time, pauseId, point, location, values, data: finalData },\n      },\n    ];\n  `;\n}","import classNames from \"classnames\";\nimport { Fragment, useMemo, useRef, useState } from \"react\";\nimport { useLayoutEffect } from \"react\";\nimport { Suspense, memo, useContext } from \"react\";\nimport ErrorBoundary from \"bvaughn-architecture-demo/components/ErrorBoundary\";\nimport Inspector from \"bvaughn-architecture-demo/components/inspector\";\nimport ClientValueValueRenderer from \"bvaughn-architecture-demo/components/inspector/values/ClientValueValueRenderer\";\nimport Loader from \"bvaughn-architecture-demo/components/Loader\";\nimport { ConsoleFiltersContext } from \"bvaughn-architecture-demo/src/contexts/ConsoleFiltersContext\";\nimport { FocusContext } from \"bvaughn-architecture-demo/src/contexts/FocusContext\";\nimport { InspectableTimestampedPointContext } from \"bvaughn-architecture-demo/src/contexts/InspectorContext\";\nimport { TimelineContext } from \"bvaughn-architecture-demo/src/contexts/TimelineContext\";\nimport { runAnalysisSuspense } from \"bvaughn-architecture-demo/src/suspense/AnalysisCache\";\nimport { primitiveToClientValue } from \"bvaughn-architecture-demo/src/utils/protocol\";\nimport { formatTimestamp } from \"bvaughn-architecture-demo/src/utils/time\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { ConsoleContextMenuContext } from \"../ConsoleContextMenuContext\";\nimport MessageHoverButton from \"../MessageHoverButton\";\nimport Source from \"../Source\";\nimport styles from \"./shared.module.css\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nconst NEW_BADGE_THRESHOLD = 5000; // Renders PointInstances with shouldLog=true.\n\nfunction LogPointRenderer({\n  index,\n  isFocused,\n  logPointInstance\n}) {\n  const {\n    show\n  } = useContext(ConsoleContextMenuContext);\n  const {\n    showTimestamps\n  } = useContext(ConsoleFiltersContext);\n  const {\n    executionPoint: currentExecutionPoint\n  } = useContext(TimelineContext);\n  const ref = useRef(null);\n  const {\n    0: isHovered,\n    1: setIsHovered\n  } = useState(false);\n  useLayoutEffect(() => {\n    if (isFocused) {\n      ref.current?.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"nearest\"\n      });\n    }\n  }, [isFocused]);\n  let className = styles.Row;\n\n  if (isFocused) {\n    className = `${className} ${styles.Focused}`;\n  }\n\n  const showContextMenu = event => {\n    event.preventDefault();\n    show(logPointInstance, {\n      x: event.pageX,\n      y: event.pageY\n    });\n  };\n\n  const locations = useMemo(() => [logPointInstance.point.location], [logPointInstance.point.location]);\n  const showNewBadgeFlash = Date.now() - logPointInstance.point.createdAtTime < NEW_BADGE_THRESHOLD; // Note the Suspense key below is set to the log point expression's content/code.\n  // This causes the Suspense boundary to immediately show a fallback state when content is edited,\n  // rather than the default React behavior of updating in the background.\n  // While that behavior is good for most scenarios, it makes log point edits feel sluggish.\n\n  const primaryContent = /*#__PURE__*/_jsxs(_Fragment, {\n    children: [showTimestamps && /*#__PURE__*/_jsxs(\"span\", {\n      className: styles.TimeStamp,\n      children: [formatTimestamp(logPointInstance.timeStampedHitPoint.time, true), \" \"]\n    }), /*#__PURE__*/_jsxs(\"span\", {\n      className: styles.LogContents,\n      \"data-test-name\": \"LogContents\",\n      children: [/*#__PURE__*/_jsx(BadgeRenderer, {\n        badge: logPointInstance.point.badge,\n        showNewBadgeFlash: showNewBadgeFlash\n      }), /*#__PURE__*/_jsx(ErrorBoundary, {\n        fallback: /*#__PURE__*/_jsx(\"div\", {\n          className: styles.ErrorBoundaryFallback,\n          children: \"Something went wrong.\"\n        }),\n        children: /*#__PURE__*/_jsx(Suspense, {\n          fallback: /*#__PURE__*/_jsx(Loader, {}),\n          children: /*#__PURE__*/_jsx(AnalyzedContent, {\n            logPointInstance: logPointInstance\n          })\n        }, logPointInstance.point.content)\n      })]\n    })]\n  });\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    ref: ref,\n    className: className,\n    \"data-search-index\": index,\n    \"data-test-message-type\": \"log-point\",\n    \"data-test-paused-here\": logPointInstance.timeStampedHitPoint.point === currentExecutionPoint,\n    \"data-test-name\": \"Message\",\n    onContextMenu: showContextMenu,\n    onMouseEnter: () => setIsHovered(true),\n    onMouseLeave: () => setIsHovered(false),\n    role: \"listitem\",\n    children: [/*#__PURE__*/_jsx(\"span\", {\n      className: styles.Source,\n      children: /*#__PURE__*/_jsx(Suspense, {\n        fallback: /*#__PURE__*/_jsx(Loader, {}),\n        children: locations.length > 0 && /*#__PURE__*/_jsx(Source, {\n          locations: locations\n        })\n      })\n    }), primaryContent, isHovered && /*#__PURE__*/_jsx(MessageHoverButton, {\n      executionPoint: logPointInstance.timeStampedHitPoint.point,\n      locations: locations,\n      showAddCommentButton: true,\n      time: logPointInstance.timeStampedHitPoint.time\n    })]\n  });\n}\n\nfunction AnalyzedContent({\n  logPointInstance\n}) {\n  const client = useContext(ReplayClientContext);\n  const {\n    range: focusRange\n  } = useContext(FocusContext);\n  const {\n    point,\n    timeStampedHitPoint\n  } = logPointInstance;\n  const pointRange = focusRange ? {\n    begin: focusRange.begin.point,\n    end: focusRange.end.point\n  } : null;\n  const analysisResults = runAnalysisSuspense(client, pointRange, point.location, point.content, point.condition);\n  const context = useMemo(() => ({\n    executionPoint: timeStampedHitPoint.point,\n    time: timeStampedHitPoint.time\n  }), [timeStampedHitPoint]);\n  const entry = analysisResults(timeStampedHitPoint);\n\n  if (entry === null) {\n    console.error(`No analysis results found for execution point \"${timeStampedHitPoint.point}\"`);\n    return /*#__PURE__*/_jsx(\"span\", {\n      className: styles.AnalysisError,\n      children: \"Analysis error\"\n    });\n  }\n\n  const {\n    isRemote,\n    pauseId,\n    values\n  } = entry;\n  const children = isRemote ? values.map((value, index) => /*#__PURE__*/_jsxs(Fragment, {\n    children: [/*#__PURE__*/_jsx(Inspector, {\n      context: \"console\",\n      pauseId: pauseId,\n      protocolValue: value\n    }), index < values.length - 1 && \" \"]\n  }, index)) : values.map((value, index) => /*#__PURE__*/_jsxs(Fragment, {\n    children: [/*#__PURE__*/_jsx(ClientValueValueRenderer, {\n      context: \"console\",\n      clientValue: primitiveToClientValue(value)\n    }), index < values.length - 1 && \" \"]\n  }, index));\n  return /*#__PURE__*/_jsx(InspectableTimestampedPointContext.Provider, {\n    value: context,\n    children: children\n  });\n}\n\nfunction BadgeRenderer({\n  badge,\n  showNewBadgeFlash\n}) {\n  switch (badge) {\n    case null:\n      {\n        return /*#__PURE__*/_jsx(\"span\", {\n          className: styles.BadgeContainer,\n          children: /*#__PURE__*/_jsx(\"span\", {\n            className: classNames(styles.DefaultColorBadge, showNewBadgeFlash && styles.PulsingBadge)\n          })\n        });\n        break;\n      }\n\n    case \"unicorn\":\n      return /*#__PURE__*/_jsx(\"span\", {\n        className: styles.UnicornBadge,\n        children: /*#__PURE__*/_jsx(\"span\", {\n          className: styles.Unicorn\n        })\n      });\n\n    default:\n      return /*#__PURE__*/_jsx(\"span\", {\n        className: styles.BadgeContainer,\n        children: /*#__PURE__*/_jsx(\"span\", {\n          className: styles.ColorBadge,\n          style: {\n            // @ts-ignore\n            \"--badge-color\": `var(--badge-${badge}-color)`\n          }\n        })\n      });\n  }\n}\n\nexport default /*#__PURE__*/memo(LogPointRenderer);","import React, { Suspense, memo, useContext } from \"react\";\nimport Loader from \"bvaughn-architecture-demo/components/Loader\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport Source from \"./Source\";\nimport styles from \"./StackRenderer.module.css\"; // This is a crappy approximation of the console; the UI isn't meant to be the focus of this branch.\n// It would be nice to re-implement the whole Console UI though and re-write all of the legacy object inspector code.\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction StackRenderer({\n  frames,\n  stack\n}) {\n  if (frames == null || stack == null) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsx(Suspense, {\n    fallback: /*#__PURE__*/_jsx(Loader, {}),\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: styles.StackGrid,\n      \"data-test-name\": \"Stack\",\n      children: stack.map((frameId, index) => /*#__PURE__*/_jsx(StackFrameRenderer, {\n        frameId: frameId,\n        frames: frames\n      }, index))\n    })\n  });\n}\n\nfunction StackFrameRenderer({\n  frameId,\n  frames\n}) {\n  const client = useContext(ReplayClientContext);\n  const frame = frames.find(frame => frame.frameId === frameId);\n\n  if (frame == null) {\n    return null;\n  }\n\n  if (frame.location.length === 0) {\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: styles.Frame,\n      children: frame.functionName\n    });\n  } else {\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(\"span\", {\n        children: frame.functionName || \"(anonymous)\"\n      }), /*#__PURE__*/_jsx(\"span\", {\n        children: \"@\"\n      }), /*#__PURE__*/_jsx(\"span\", {\n        className: styles.SourceColumn,\n        children: /*#__PURE__*/_jsx(Source, {\n          className: styles.Source,\n          locations: frame.location\n        })\n      })]\n    });\n  }\n}\n\nexport default /*#__PURE__*/memo(StackRenderer);","import { Fragment, useMemo, useRef, useState } from \"react\";\nimport { useLayoutEffect } from \"react\";\nimport { Suspense, memo, useContext } from \"react\";\nimport ErrorBoundary from \"bvaughn-architecture-demo/components/ErrorBoundary\";\nimport Expandable from \"bvaughn-architecture-demo/components/Expandable\";\nimport Icon from \"bvaughn-architecture-demo/components/Icon\";\nimport Inspector from \"bvaughn-architecture-demo/components/inspector\";\nimport Loader from \"bvaughn-architecture-demo/components/Loader\";\nimport { ConsoleFiltersContext } from \"bvaughn-architecture-demo/src/contexts/ConsoleFiltersContext\";\nimport { InspectableTimestampedPointContext } from \"bvaughn-architecture-demo/src/contexts/InspectorContext\";\nimport { TimelineContext } from \"bvaughn-architecture-demo/src/contexts/TimelineContext\";\nimport { formatTimestamp } from \"bvaughn-architecture-demo/src/utils/time\";\nimport { ConsoleContextMenuContext } from \"../ConsoleContextMenuContext\";\nimport MessageHoverButton from \"../MessageHoverButton\";\nimport Source from \"../Source\";\nimport StackRenderer from \"../StackRenderer\";\nimport styles from \"./shared.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst EMPTY_ARRAY = []; // This is a crappy approximation of the console; the UI isn't meant to be the focus of this branch.\n// It would be nice to re-implement the whole Console UI though and re-write all of the legacy object inspector code.\n\nfunction MessageRenderer({\n  index,\n  isFocused,\n  message\n}) {\n  const ref = useRef(null);\n  const {\n    0: isHovered,\n    1: setIsHovered\n  } = useState(false);\n  const {\n    show\n  } = useContext(ConsoleContextMenuContext);\n  const {\n    showTimestamps\n  } = useContext(ConsoleFiltersContext);\n  const {\n    executionPoint: currentExecutionPoint\n  } = useContext(TimelineContext);\n  const context = useMemo(() => ({\n    executionPoint: message.point.point,\n    time: message.point.time\n  }), [message.point]);\n  useLayoutEffect(() => {\n    if (isFocused) {\n      ref.current?.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"nearest\"\n      });\n    }\n  }, [isFocused]);\n  const stack = message.stack || EMPTY_ARRAY;\n  const frames = message.data.frames || EMPTY_ARRAY;\n  const frame = stack.length > 0 && frames.length > 0 ? frames.find(frame => frame.frameId === stack[0]) || null : null;\n  let className = styles.Row;\n  let icon = null;\n  let showExpandable = false;\n  let testMessageType = \"console-log\";\n\n  switch (message.level) {\n    case \"error\":\n      {\n        className = styles.ErrorRow;\n        icon = /*#__PURE__*/_jsx(Icon, {\n          className: styles.ErrorIcon,\n          type: \"error\"\n        });\n        showExpandable = frames.length > 0;\n        testMessageType = \"console-error\";\n        break;\n      }\n\n    case \"trace\":\n      {\n        className = styles.TraceRow;\n        showExpandable = frames.length > 0;\n        break;\n      }\n\n    case \"warning\":\n      {\n        className = styles.WarningRow;\n        icon = /*#__PURE__*/_jsx(Icon, {\n          className: styles.WarningIcon,\n          type: \"warning\"\n        });\n        showExpandable = frames.length > 0;\n        testMessageType = \"console-warning\";\n        break;\n      }\n  }\n\n  if (isFocused) {\n    className = `${className} ${styles.Focused}`;\n  }\n\n  const showContextMenu = event => {\n    event.preventDefault();\n    show(message, {\n      x: event.pageX,\n      y: event.pageY\n    });\n  };\n\n  const argumentValues = message.argumentValues || EMPTY_ARRAY;\n  const primaryContent = argumentValues.length > 0 ? /*#__PURE__*/_jsx(Suspense, {\n    fallback: /*#__PURE__*/_jsx(Loader, {}),\n    children: argumentValues.map((argumentValue, index) => /*#__PURE__*/_jsxs(Fragment, {\n      children: [/*#__PURE__*/_jsx(Inspector, {\n        context: \"console\",\n        pauseId: message.pauseId,\n        protocolValue: argumentValue\n      }), index < argumentValues.length - 1 && \" \"]\n    }, index))\n  }) : \" \";\n\n  const logContents = /*#__PURE__*/_jsxs(\"span\", {\n    className: styles.LogContents,\n    \"data-test-name\": \"LogContents\",\n    children: [message.text && /*#__PURE__*/_jsx(\"span\", {\n      className: styles.MessageText,\n      children: message.text\n    }), /*#__PURE__*/_jsx(ErrorBoundary, {\n      fallback: /*#__PURE__*/_jsx(\"div\", {\n        className: styles.ErrorBoundaryFallback,\n        children: \"Something went wrong.\"\n      }),\n      children: primaryContent\n    })]\n  });\n\n  return /*#__PURE__*/_jsx(InspectableTimestampedPointContext.Provider, {\n    value: context,\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      ref: ref,\n      className: className,\n      \"data-search-index\": index,\n      \"data-test-message-type\": testMessageType,\n      \"data-test-paused-here\": message.point.point === currentExecutionPoint,\n      \"data-test-name\": \"Message\",\n      onContextMenu: showContextMenu,\n      onMouseEnter: () => setIsHovered(true),\n      onMouseLeave: () => setIsHovered(false),\n      role: \"listitem\",\n      children: [showTimestamps && /*#__PURE__*/_jsxs(\"span\", {\n        className: styles.TimeStamp,\n        children: [formatTimestamp(message.point.time, true), \" \"]\n      }), icon, /*#__PURE__*/_jsx(\"span\", {\n        className: styles.Source,\n        children: /*#__PURE__*/_jsx(Suspense, {\n          fallback: /*#__PURE__*/_jsx(Loader, {}),\n          children: frame?.location?.length > 0 && /*#__PURE__*/_jsx(Source, {\n            locations: frame.location\n          })\n        })\n      }), frame != null && message.stack != null && showExpandable ? /*#__PURE__*/_jsx(Expandable, {\n        children: /*#__PURE__*/_jsx(StackRenderer, {\n          frames: frames,\n          stack: message.stack\n        }),\n        className: styles.Expandable,\n        header: logContents,\n        useBlockLayoutWhenExpanded: false\n      }) : logContents, isHovered && /*#__PURE__*/_jsx(MessageHoverButton, {\n        executionPoint: message.point.point,\n        locations: frame?.location || null,\n        showAddCommentButton: true,\n        time: message.point.time\n      })]\n    })\n  });\n}\n\nexport default /*#__PURE__*/memo(MessageRenderer);","import jsTokens from \"js-tokens\";\nimport { useMemo } from \"react\";\nimport styles from \"./SyntaxHighlightedExpression.module.css\"; // TODO\n// Replace this component with SyntaxHighlightedLine\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function SyntaxHighlightedExpression({\n  expression\n}) {\n  const tokens = useMemo(() => parseExpression(expression), [expression]);\n  return /*#__PURE__*/_jsx(\"span\", {\n    children: tokens.map((token, index) => /*#__PURE__*/_jsx(\"span\", {\n      className: styles[token.type] || \"\",\n      children: token.value\n    }, index))\n  });\n}\n\nfunction parseExpression(expression) {\n  // Wrap with \"[...]\" so the expression is valid.\n  const tokens = Array.from(jsTokens(`[${expression}]`)); // Remove the \"[]\" wrappers.\n\n  return tokens.slice(1, tokens.length - 1);\n}","import { Suspense, memo, useContext, useLayoutEffect, useMemo, useRef, useState } from \"react\";\nimport Icon from \"bvaughn-architecture-demo/components/Icon\";\nimport Inspector from \"bvaughn-architecture-demo/components/inspector\";\nimport ClientValueValueRenderer from \"bvaughn-architecture-demo/components/inspector/values/ClientValueValueRenderer\";\nimport Loader from \"bvaughn-architecture-demo/components/Loader\";\nimport SyntaxHighlightedExpression from \"bvaughn-architecture-demo/components/SyntaxHighlightedExpression\";\nimport { ConsoleFiltersContext } from \"bvaughn-architecture-demo/src/contexts/ConsoleFiltersContext\";\nimport { InspectableTimestampedPointContext } from \"bvaughn-architecture-demo/src/contexts/InspectorContext\";\nimport { TimelineContext } from \"bvaughn-architecture-demo/src/contexts/TimelineContext\";\nimport { evaluateSuspense } from \"bvaughn-architecture-demo/src/suspense/PauseCache\";\nimport { primitiveToClientValue } from \"bvaughn-architecture-demo/src/utils/protocol\";\nimport { formatTimestamp } from \"bvaughn-architecture-demo/src/utils/time\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { ConsoleContextMenuContext } from \"../ConsoleContextMenuContext\";\nimport MessageHoverButton from \"../MessageHoverButton\";\nimport styles from \"./shared.module.css\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction TerminalExpressionRenderer({\n  index,\n  isFocused,\n  terminalExpression\n}) {\n  const {\n    show\n  } = useContext(ConsoleContextMenuContext);\n  const {\n    showTimestamps\n  } = useContext(ConsoleFiltersContext);\n  const {\n    executionPoint: currentExecutionPoint\n  } = useContext(TimelineContext);\n  const {\n    0: isHovered,\n    1: setIsHovered\n  } = useState(false);\n  const ref = useRef(null);\n  useLayoutEffect(() => {\n    // Always scroll new expressions into view.\n    // These aren't persisted between sessions, so we only need to handle the simple case:\n    // A user has just added a new expression (and it should be scrolled into view).\n    ref.current?.scrollIntoView({\n      behavior: \"smooth\",\n      block: \"nearest\"\n    });\n  }, []);\n  useLayoutEffect(() => {\n    if (isFocused) {\n      ref.current?.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"nearest\"\n      });\n    }\n  }, [isFocused]);\n  let className = styles.Row;\n\n  if (isFocused) {\n    className = `${className} ${styles.Focused}`;\n  }\n\n  const showContextMenu = event => {\n    event.preventDefault();\n    show(terminalExpression, {\n      x: event.pageX,\n      y: event.pageY\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: className,\n    \"data-search-index\": index,\n    \"data-test-message-type\": \"terminal-expression\",\n    \"data-test-paused-here\": terminalExpression.point === currentExecutionPoint,\n    \"data-test-name\": \"Message\",\n    onContextMenu: showContextMenu,\n    onMouseEnter: () => setIsHovered(true),\n    onMouseLeave: () => setIsHovered(false),\n    ref: ref,\n    role: \"listitem\",\n    children: [/*#__PURE__*/_jsxs(\"span\", {\n      className: showTimestamps ? styles.TerminalPrimaryRowWithTimestamps : styles.TerminalPrimaryRowWithoutTimestamps,\n      children: [showTimestamps && /*#__PURE__*/_jsxs(\"span\", {\n        className: styles.TimeStamp,\n        children: [formatTimestamp(terminalExpression.time, true), \" \"]\n      }), /*#__PURE__*/_jsxs(\"span\", {\n        className: styles.TerminalLogContents,\n        \"data-test-name\": \"LogContents\",\n        children: [/*#__PURE__*/_jsxs(\"span\", {\n          className: styles.LogContents,\n          \"data-test-name\": \"TerminalExpression-Expression\",\n          children: [/*#__PURE__*/_jsx(Icon, {\n            className: styles.PromptIcon,\n            type: \"prompt\"\n          }), /*#__PURE__*/_jsx(SyntaxHighlightedExpression, {\n            expression: terminalExpression.expression\n          })]\n        }), /*#__PURE__*/_jsxs(\"span\", {\n          className: styles.LogContents,\n          \"data-test-name\": \"TerminalExpression-Result\",\n          children: [/*#__PURE__*/_jsx(Icon, {\n            className: styles.EagerEvaluationIcon,\n            type: \"eager-evaluation\"\n          }), /*#__PURE__*/_jsx(Suspense, {\n            fallback: /*#__PURE__*/_jsx(Loader, {}),\n            children: /*#__PURE__*/_jsx(EvaluatedContent, {\n              terminalExpression: terminalExpression\n            })\n          })]\n        })]\n      })]\n    }), isHovered && /*#__PURE__*/_jsx(MessageHoverButton, {\n      executionPoint: terminalExpression.point,\n      locations: null,\n      showAddCommentButton: false,\n      time: terminalExpression.time\n    })]\n  });\n}\n\nfunction EvaluatedContent({\n  terminalExpression\n}) {\n  const client = useContext(ReplayClientContext);\n  const {\n    frameId,\n    pauseId,\n    point,\n    time\n  } = terminalExpression;\n  const context = useMemo(() => ({\n    executionPoint: point,\n    time\n  }), [point, time]);\n  const result = evaluateSuspense(client, pauseId, frameId, terminalExpression.expression);\n  const {\n    exception,\n    returned\n  } = result;\n  let children = null;\n\n  if (exception) {\n    children = /*#__PURE__*/_jsx(Inspector, {\n      context: \"console\",\n      pauseId: pauseId,\n      protocolValue: exception\n    });\n  } else if (returned) {\n    children = returned.value ? /*#__PURE__*/_jsx(ClientValueValueRenderer, {\n      clientValue: primitiveToClientValue(returned.value),\n      context: \"console\"\n    }) : /*#__PURE__*/_jsx(Inspector, {\n      context: \"console\",\n      pauseId: pauseId,\n      protocolValue: returned\n    });\n  }\n\n  if (children !== null) {\n    return /*#__PURE__*/_jsx(InspectableTimestampedPointContext.Provider, {\n      value: context,\n      children: children\n    });\n  } // Assume the evaluation failed (even if not explicitly)\n\n\n  return /*#__PURE__*/_jsxs(\"span\", {\n    className: styles.Exception,\n    children: [/*#__PURE__*/_jsx(Icon, {\n      className: styles.ErrorIcon,\n      type: \"error\"\n    }), \"The expression could not be evaluated.\"]\n  });\n}\n\nexport default /*#__PURE__*/memo(TerminalExpressionRenderer);","import { Fragment, useMemo, useRef, useState } from \"react\";\nimport { useLayoutEffect } from \"react\";\nimport { Suspense, memo, useContext } from \"react\";\nimport Expandable from \"bvaughn-architecture-demo/components/Expandable\";\nimport Icon from \"bvaughn-architecture-demo/components/Icon\";\nimport Inspector from \"bvaughn-architecture-demo/components/inspector\";\nimport Loader from \"bvaughn-architecture-demo/components/Loader\";\nimport { ConsoleFiltersContext } from \"bvaughn-architecture-demo/src/contexts/ConsoleFiltersContext\";\nimport { TimelineContext } from \"bvaughn-architecture-demo/src/contexts/TimelineContext\";\nimport { formatTimestamp } from \"bvaughn-architecture-demo/src/utils/time\";\nimport { ConsoleContextMenuContext } from \"../ConsoleContextMenuContext\";\nimport MessageHoverButton from \"../MessageHoverButton\";\nimport Source from \"../Source\";\nimport StackRenderer from \"../StackRenderer\";\nimport styles from \"./shared.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst EMPTY_ARRAY = [];\n\nfunction UncaughtExceptionRenderer({\n  index,\n  isFocused,\n  uncaughtException\n}) {\n  const {\n    show\n  } = useContext(ConsoleContextMenuContext);\n  const {\n    showTimestamps\n  } = useContext(ConsoleFiltersContext);\n  const {\n    executionPoint: currentExecutionPoint\n  } = useContext(TimelineContext);\n  const locations = useMemo(() => {\n    return Array.isArray(uncaughtException.location) ? uncaughtException.location : [uncaughtException.location];\n  }, [uncaughtException.location]);\n  const ref = useRef(null);\n  const {\n    0: isHovered,\n    1: setIsHovered\n  } = useState(false);\n  useLayoutEffect(() => {\n    if (isFocused) {\n      ref.current?.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"nearest\"\n      });\n    }\n  }, [isFocused]);\n  let className = styles.ErrorRow;\n\n  if (isFocused) {\n    className = `${className} ${styles.Focused}`;\n  }\n\n  const showContextMenu = event => {\n    event.preventDefault();\n    show(uncaughtException, {\n      x: event.pageX,\n      y: event.pageY\n    });\n  };\n\n  const frames = uncaughtException.data.frames || EMPTY_ARRAY;\n  const showExpandable = frames.length > 0;\n  const argumentValues = uncaughtException.values || EMPTY_ARRAY;\n  const primaryContent = argumentValues.length > 0 ? /*#__PURE__*/_jsx(\"span\", {\n    className: styles.LogContents,\n    \"data-test-name\": \"LogContents\",\n    children: /*#__PURE__*/_jsx(Suspense, {\n      fallback: /*#__PURE__*/_jsx(Loader, {}),\n      children: argumentValues.map((argumentValue, index) => /*#__PURE__*/_jsxs(Fragment, {\n        children: [/*#__PURE__*/_jsx(Inspector, {\n          context: \"console\",\n          pauseId: uncaughtException.pauseId,\n          protocolValue: argumentValue\n        }), index < argumentValues.length - 1 && \" \"]\n      }, index))\n    })\n  }) : \" \";\n  return /*#__PURE__*/_jsxs(\"div\", {\n    ref: ref,\n    className: className,\n    \"data-search-index\": index,\n    \"data-test-message-type\": \"exception\",\n    \"data-test-paused-here\": uncaughtException.point === currentExecutionPoint,\n    \"data-test-name\": \"Message\",\n    onContextMenu: showContextMenu,\n    onMouseEnter: () => setIsHovered(true),\n    onMouseLeave: () => setIsHovered(false),\n    role: \"listitem\",\n    children: [showTimestamps && /*#__PURE__*/_jsxs(\"span\", {\n      className: styles.TimeStamp,\n      children: [formatTimestamp(uncaughtException.time, true), \" \"]\n    }), /*#__PURE__*/_jsx(Icon, {\n      className: styles.ErrorIcon,\n      type: \"error\"\n    }), /*#__PURE__*/_jsx(\"span\", {\n      className: styles.Source,\n      children: /*#__PURE__*/_jsx(Suspense, {\n        fallback: /*#__PURE__*/_jsx(Loader, {}),\n        children: locations.length > 0 && /*#__PURE__*/_jsx(Source, {\n          locations: locations\n        })\n      })\n    }), showExpandable ? /*#__PURE__*/_jsx(Expandable, {\n      children: /*#__PURE__*/_jsx(StackRenderer, {\n        frames: frames,\n        stack: frames.map(({\n          frameId\n        }) => frameId)\n      }),\n      className: styles.Expandable,\n      header: primaryContent,\n      useBlockLayoutWhenExpanded: false\n    }) : primaryContent, isHovered && /*#__PURE__*/_jsx(MessageHoverButton, {\n      executionPoint: uncaughtException.point,\n      locations: locations,\n      showAddCommentButton: true,\n      time: uncaughtException.time\n    })]\n  });\n}\n\nexport default /*#__PURE__*/memo(UncaughtExceptionRenderer);","import { forwardRef, useContext, useMemo } from \"react\";\nimport Icon from \"bvaughn-architecture-demo/components/Icon\";\nimport { FocusContext } from \"bvaughn-architecture-demo/src/contexts/FocusContext\";\nimport { TimelineContext } from \"bvaughn-architecture-demo/src/contexts/TimelineContext\";\nimport useLoadedRegions from \"bvaughn-architecture-demo/src/hooks/useRegions\";\nimport { getMessagesSuspense } from \"bvaughn-architecture-demo/src/suspense/MessagesCache\";\nimport { getLoggableExecutionPoint, isEventLog, isPointInstance, isProtocolMessage, isTerminalExpression, isUncaughtException } from \"bvaughn-architecture-demo/src/utils/loggables\";\nimport { isExecutionPointsLessThan } from \"bvaughn-architecture-demo/src/utils/time\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { isPointInRegions } from \"shared/utils/time\";\nimport { ConsoleSearchContext } from \"./ConsoleSearchContext\";\nimport CurrentTimeIndicator from \"./CurrentTimeIndicator\";\nimport { LoggablesContext } from \"./LoggablesContext\";\nimport EventLogRenderer from \"./renderers/EventLogRenderer\";\nimport LogPointRenderer from \"./renderers/LogPointRenderer\";\nimport MessageRenderer from \"./renderers/MessageRenderer\";\nimport TerminalExpressionRenderer from \"./renderers/TerminalExpressionRenderer\";\nimport UncaughtExceptionRenderer from \"./renderers/UncaughtExceptionRenderer\";\nimport styles from \"./MessagesList.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\n// This is an approximation of the console; the UI isn't meant to be the focus of this branch.\n// The primary purpose of this component is to showcase:\n// 1. Using React Suspense (and Suspense caches) for just-in-time loading of Protocol data\n// 2. Using an injected ReplayClientInterface to enable easy testing/mocking\nfunction MessagesList({\n  forwardedRef\n}) {\n  const {\n    isTransitionPending: isFocusTransitionPending,\n    range: focusRange\n  } = useContext(FocusContext);\n  const loggables = useContext(LoggablesContext);\n  const replayClient = useContext(ReplayClientContext);\n  const {\n    0: searchState\n  } = useContext(ConsoleSearchContext);\n  const {\n    executionPoint: currentExecutionPoint\n  } = useContext(TimelineContext);\n  const loadedRegions = useLoadedRegions(replayClient); // The Console should render a line indicating the current execution point.\n  // This point might match multiple logs– or it might be between logs, or after the last log, etc.\n  // This looking finds the best place to render the indicator.\n\n  const currentTimeIndicatorPlacement = useMemo(() => {\n    if (currentExecutionPoint === \"0\") {\n      return \"begin\";\n    }\n\n    const nearestLoggable = loggables.find(loggable => {\n      const executionPoint = getLoggableExecutionPoint(loggable);\n\n      if (!isExecutionPointsLessThan(executionPoint, currentExecutionPoint)) {\n        return true;\n      }\n    });\n    return nearestLoggable || \"end\";\n  }, [currentExecutionPoint, loggables]); // TRICKY\n  // Message filtering is done client-side, but overflow/counts are server-side so it comes from Suspense.\n\n  const {\n    countAfter,\n    countBefore,\n    didOverflow\n  } = getMessagesSuspense(replayClient, focusRange); // This component only needs to render a pending UI when a focus changes,\n  // because this might require an async backend request.\n  // Filter text changes are always processed synchronously,\n  // so dimming the UI would just cause a short flicker which we can avoid.\n\n  const isTransitionPending = isFocusTransitionPending;\n  const currentSearchResult = searchState.query !== \"\" && searchState.results.length > 0 ? searchState.results[searchState.index] : null;\n\n  const currentTimeIndicator = /*#__PURE__*/_jsx(CurrentTimeIndicator, {}, \"CurrentTimeIndicator\");\n\n  const listItems = [];\n\n  if (currentTimeIndicatorPlacement === \"begin\") {\n    listItems.push(currentTimeIndicator);\n  }\n\n  loggables.forEach((loggable, index) => {\n    if (currentTimeIndicatorPlacement === loggable) {\n      listItems.push(currentTimeIndicator);\n    }\n\n    const loggableExecutionPoint = getLoggableExecutionPoint(loggable);\n    const isLoaded = loadedRegions !== null && isPointInRegions(loggableExecutionPoint, loadedRegions.loaded);\n\n    if (isLoaded) {\n      if (isEventLog(loggable)) {\n        listItems.push( /*#__PURE__*/_jsx(EventLogRenderer, {\n          index: index,\n          isFocused: loggable === currentSearchResult,\n          eventLog: loggable\n        }, index));\n      } else if (isPointInstance(loggable)) {\n        listItems.push( /*#__PURE__*/_jsx(LogPointRenderer, {\n          index: index,\n          isFocused: loggable === currentSearchResult,\n          logPointInstance: loggable\n        }, index));\n      } else if (isProtocolMessage(loggable)) {\n        listItems.push( /*#__PURE__*/_jsx(MessageRenderer, {\n          index: index,\n          isFocused: loggable === currentSearchResult,\n          message: loggable\n        }, index));\n      } else if (isTerminalExpression(loggable)) {\n        listItems.push( /*#__PURE__*/_jsx(TerminalExpressionRenderer, {\n          index: index,\n          isFocused: loggable === currentSearchResult,\n          terminalExpression: loggable\n        }, index));\n      } else if (isUncaughtException(loggable)) {\n        listItems.push( /*#__PURE__*/_jsx(UncaughtExceptionRenderer, {\n          index: index,\n          isFocused: loggable === currentSearchResult,\n          uncaughtException: loggable\n        }, index));\n      } else {\n        throw Error(\"Unsupported loggable type\");\n      }\n    }\n  });\n\n  if (currentTimeIndicatorPlacement === \"end\") {\n    listItems.push(currentTimeIndicator);\n  } // Note that it's important to only render messages inside of the message lists.\n  // Overflow notifications are displayed outside of the list, to avoid interfering with search.\n  // See <LoggablesContextRoot> and useConsoleSearchDOM() for more info.\n\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [didOverflow && /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.OverflowRow,\n      children: [/*#__PURE__*/_jsx(Icon, {\n        className: styles.OverflowRowIcon,\n        type: \"warning\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [\"There are too many console messages so not all are being displayed.\", \" \", /*#__PURE__*/_jsx(\"a\", {\n          className: styles.OverflowLink,\n          href: \"https://www.notion.so/replayio/Debugger-Limitations-5b33bb0e5bd1459cbd7daf3234219c27#8d72d62414a7490586ee5ac3adef09fb\",\n          target: \"_blank\",\n          rel: \"noreferrer noopener\",\n          children: \"Read more\"\n        })]\n      })]\n    }), countBefore > 0 && /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.CountRow,\n      children: [/*#__PURE__*/_jsx(\"span\", {\n        \"data-test-id\": \"MessagesList-TrimmedBeforeCount\",\n        children: countBefore\n      }), \" messages filtered before the focus range\"]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: isTransitionPending ? styles.ContainerPending : styles.Container,\n      \"data-test-name\": \"Messages\",\n      ref: forwardedRef,\n      role: \"list\",\n      tabIndex: 0,\n      children: listItems\n    }), countAfter > 0 && /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.CountRow,\n      children: [/*#__PURE__*/_jsx(\"span\", {\n        \"data-test-id\": \"MessagesList-TrimmedAfterCount\",\n        children: countAfter\n      }), \" messages filtered after the focus range\"]\n    })]\n  });\n}\n\nfunction MessagesListRefForwarder(_, ref) {\n  return /*#__PURE__*/_jsx(MessagesList, {\n    forwardedRef: ref\n  });\n}\n\nexport default /*#__PURE__*/forwardRef(MessagesListRefForwarder);","import classNames from \"classnames\";\nimport { unstable_Offscreen as Offscreen, Suspense, useContext, useRef, useState } from \"react\";\nimport ErrorBoundary from \"bvaughn-architecture-demo/components/ErrorBoundary\";\nimport Icon from \"bvaughn-architecture-demo/components/Icon\";\nimport Loader from \"bvaughn-architecture-demo/components/Loader\";\nimport { ConsoleFiltersContextRoot } from \"bvaughn-architecture-demo/src/contexts/ConsoleFiltersContext\";\nimport { SessionContext } from \"bvaughn-architecture-demo/src/contexts/SessionContext\";\nimport { TerminalContext } from \"bvaughn-architecture-demo/src/contexts/TerminalContext\";\nimport useLocalStorage from \"bvaughn-architecture-demo/src/hooks/useLocalStorage\";\nimport { ConsoleContextMenuContextRoot } from \"./ConsoleContextMenuContext\";\nimport ConsoleSearch from \"./ConsoleSearch\";\nimport { ConsoleSearchContext, ConsoleSearchContextRoot } from \"./ConsoleSearchContext\";\nimport ContextMenu from \"./ContextMenu\";\nimport FilterText from \"./filters/FilterText\";\nimport FilterToggles from \"./filters/FilterToggles\";\nimport { LoggablesContextRoot } from \"./LoggablesContext\";\nimport MessagesList from \"./MessagesList\";\nimport styles from \"./ConsoleRoot.module.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ConsoleRoot({\n  nagHeader = null,\n  showFiltersByDefault = true,\n  showSearchInputByDefault = true,\n  terminalInput = null\n}) {\n  const messageListRef = useRef(null);\n  const searchInputRef = useRef(null);\n  return /*#__PURE__*/_jsx(ConsoleContextMenuContextRoot, {\n    children: /*#__PURE__*/_jsx(ConsoleFiltersContextRoot, {\n      children: /*#__PURE__*/_jsx(LoggablesContextRoot, {\n        messageListRef: messageListRef,\n        children: /*#__PURE__*/_jsx(ConsoleSearchContextRoot, {\n          messageListRef: messageListRef,\n          searchInputRef: searchInputRef,\n          showSearchInputByDefault: showSearchInputByDefault,\n          children: /*#__PURE__*/_jsx(Console, {\n            messageListRef: messageListRef,\n            nagHeader: nagHeader,\n            searchInputRef: searchInputRef,\n            showFiltersByDefault: showFiltersByDefault,\n            terminalInput: terminalInput\n          })\n        })\n      })\n    })\n  });\n}\n\nfunction Console({\n  messageListRef,\n  nagHeader = null,\n  searchInputRef,\n  showFiltersByDefault = true,\n  terminalInput = null\n}) {\n  const {\n    0: _,\n    1: searchActions\n  } = useContext(ConsoleSearchContext);\n  const {\n    clearMessages: clearConsoleEvaluations,\n    messages: consoleEvaluations\n  } = useContext(TerminalContext);\n  const {\n    recordingId\n  } = useContext(SessionContext);\n  const [isMenuOpen, setIsMenuOpen] = useLocalStorage(`Replay:Console:MenuOpen:${recordingId}`, showFiltersByDefault);\n  const {\n    0: menuValueHasBeenToggled,\n    1: setMenuValueHasBeenToggled\n  } = useState(false); // We default to having the console filters panel turned off, to minimize UI \"busyness\".\n  // _If_ it's off initially, we want to completely skip rendering it, which\n  // avoids making the \"fetch events\" calls during app startup to speed up loading.\n  // But, if it's ever been shown and toggled off, continue rendering it\n  // inside the `<Offscreen>` to preserve state.\n\n  const renderFilters = isMenuOpen || menuValueHasBeenToggled;\n\n  const onKeyDown = event => {\n    switch (event.key) {\n      case \"f\":\n      case \"F\":\n        if (event.ctrlKey || event.metaKey) {\n          searchActions.show();\n          event.preventDefault();\n          event.stopPropagation();\n        }\n\n        break;\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: classNames(styles.ConsoleRoot, isMenuOpen && styles.ConsoleRootOpen),\n    \"data-test-id\": \"ConsoleRoot\",\n    onKeyDown: onKeyDown,\n    tabIndex: 0,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: styles.ConsoleActions,\n      children: [/*#__PURE__*/_jsx(\"button\", {\n        className: styles.MenuToggleButton,\n        \"data-test-id\": \"ConsoleMenuToggleButton\",\n        \"data-test-state\": isMenuOpen ? \"open\" : \"closed\",\n        onClick: () => {\n          setIsMenuOpen(!isMenuOpen);\n          setMenuValueHasBeenToggled(true);\n        },\n        title: isMenuOpen ? \"Close filter menu\" : \"Open filter menu\",\n        children: /*#__PURE__*/_jsx(Icon, {\n          className: styles.MenuToggleButtonIcon,\n          type: isMenuOpen ? \"menu-open\" : \"menu-closed\"\n        })\n      }), consoleEvaluations.length > 0 && /*#__PURE__*/_jsx(\"button\", {\n        className: styles.DeleteTerminalExpressionButton,\n        \"data-test-id\": \"ClearConsoleEvaluationsButton\",\n        onClick: clearConsoleEvaluations,\n        title: \"Clear console evaluations\",\n        children: /*#__PURE__*/_jsx(Icon, {\n          className: styles.DeleteTerminalExpressionIcon,\n          type: \"delete\"\n        })\n      })]\n    }), /*#__PURE__*/_jsx(FilterText, {}), /*#__PURE__*/_jsx(Offscreen, {\n      mode: isMenuOpen ? \"visible\" : \"hidden\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: styles.FilterColumn,\n        children: /*#__PURE__*/_jsx(Suspense, {\n          fallback: /*#__PURE__*/_jsx(Loader, {}),\n          children: renderFilters && /*#__PURE__*/_jsx(FilterToggles, {})\n        })\n      })\n    }), /*#__PURE__*/_jsx(Suspense, {\n      fallback: /*#__PURE__*/_jsx(\"div\", {\n        className: styles.Loader,\n        children: /*#__PURE__*/_jsx(Loader, {})\n      }),\n      children: /*#__PURE__*/_jsx(ErrorBoundary, {\n        fallbackClassName: styles.ErrorBoundaryFallback,\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.MessageColumn,\n          children: [nagHeader, /*#__PURE__*/_jsx(MessagesList, {\n            ref: messageListRef\n          }), terminalInput, /*#__PURE__*/_jsx(ConsoleSearch, {\n            className: styles.Row,\n            hideOnEscape: terminalInput !== null,\n            searchInputRef: searchInputRef\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsx(ContextMenu, {})]\n  });\n}","import ConsoleRoot from \"./ConsoleRoot\";\nexport default ConsoleRoot;","import { Value } from \"@replayio/protocol\";\nimport debounce from \"lodash/debounce\";\nimport React, { FC, Suspense, useContext, useEffect, useMemo, useRef, useState } from \"react\";\n\nimport ErrorBoundary from \"bvaughn-architecture-demo/components/ErrorBoundary\";\nimport Inspector from \"bvaughn-architecture-demo/components/inspector\";\nimport Loader from \"bvaughn-architecture-demo/components/Loader\";\nimport { getRecordingCapabilitiesSuspense } from \"bvaughn-architecture-demo/src/suspense/RecordingCache\";\nimport { useEagerEvaluateExpression } from \"devtools/client/webconsole/utils/autocomplete-eager\";\nimport { ThreadFront } from \"protocol/thread\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\n\nfunction useEagerEvalPreview(expression: string) {\n  const [value, setValue] = useState<Value | null>(null);\n  const expressionRef = useRef(expression);\n  const eagerEvaluateExpression = useEagerEvaluateExpression();\n\n  const debouncedUpdateValue = useMemo(\n    () =>\n      // Debounce the function called from the effect to cut down the number\n      // of protocol requests made (only request when the user stops typing)\n      debounce(async function updateValue(expression: string) {\n        setValue(null);\n        const rv = await eagerEvaluateExpression(expression);\n        setValue(rv!);\n      }, 300),\n    [eagerEvaluateExpression]\n  );\n\n  useEffect(() => {\n    expressionRef.current = expression;\n    debouncedUpdateValue(expression);\n\n    return () => {\n      debouncedUpdateValue.cancel();\n    };\n  }, [expression, eagerEvaluateExpression, debouncedUpdateValue]);\n\n  return value;\n}\n\nconst Preview: FC<{ expression: string }> = ({ expression }) => {\n  const previewValue = useEagerEvalPreview(expression);\n  if (!previewValue) {\n    return null;\n  }\n\n  const pause = ThreadFront.currentPause;\n  if (!pause || !pause.pauseId) {\n    return null;\n  }\n\n  return (\n    <div className=\"pointer-events-none relative\">\n      <div className=\"overflow-hidden overflow-ellipsis whitespace-pre opacity-50\">\n        <ErrorBoundary>\n          <Suspense fallback={<Loader />}>\n            <Inspector context=\"default\" pauseId={pause.pauseId} protocolValue={previewValue} />\n          </Suspense>\n        </ErrorBoundary>\n      </div>\n    </div>\n  );\n};\n\ntype Props = {\n  expression: string;\n  completedExpression: string | null;\n};\n\nfunction EagerEvalFooterSuspends({ expression, completedExpression }: Props) {\n  const replayClient = useContext(ReplayClientContext);\n  const recordingCapabilities = getRecordingCapabilitiesSuspense(replayClient);\n\n  if (!recordingCapabilities.supportsEagerEvaluation) {\n    return null;\n  }\n\n  return (\n    <div\n      className=\"message result flex items-center font-mono\"\n      style={{\n        padding: \"4px 8px 4px 4px\",\n        borderTop: \"1px solid var(--theme-background\",\n        borderBottom: \"0px\",\n        minHeight: \"var(--editor-footer-height)\",\n      }}\n    >\n      {expression ? (\n        <>\n          <div\n            className=\"icon\"\n            style={{\n              width: `1.5rem`,\n              marginInlineStart: `var(--console-icon-horizontal-offset)`,\n              marginInlineEnd: `calc(4px - var(--console-icon-horizontal-offset))`,\n            }}\n          />\n          <Preview expression={completedExpression || expression} />\n        </>\n      ) : null}\n    </div>\n  );\n}\n\nexport default function EagerEvalFooter(props: Props) {\n  return (\n    <Suspense>\n      <EagerEvalFooterSuspends {...props} />\n    </Suspense>\n  );\n}\n","import { Editor } from \"codemirror\";\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\n\nimport {\n  EditorWithAutocomplete,\n  Keys,\n} from \"ui/components/shared/CodeEditor/EditorWithAutocomplete\";\nimport { useGetRecording, useGetRecordingId } from \"ui/hooks/recordings\";\nimport { getIsInLoadedRegion } from \"ui/reducers/app\";\nimport { getPlayback } from \"ui/reducers/timeline\";\nimport { useAppSelector } from \"ui/setup/hooks\";\n\nimport EagerEvalFooter from \"./EagerEvalFooter\";\n\nconst getJsTermApi = (\n  editor: Editor,\n  execute: () => void,\n  setValueCallback: (value: string) => void,\n  showAutocomplete?: (show: boolean) => void\n) => {\n  return {\n    editor,\n    execute,\n    setValue: (value = \"\") => {\n      // In order to get the autocomplete popup to work properly, we need to set the\n      // editor text and the cursor in the same operation. If we don't, the text change\n      // is done before the cursor is moved, and the autocompletion call to the server\n      // sends an erroneous query.\n      editor.operation(() => {\n        editor.setValue(value);\n\n        // Set the cursor at the end of the input.\n        const lines = value.split(\"\\n\");\n        editor.setCursor({\n          line: lines.length - 1,\n          ch: lines[lines.length - 1].length,\n        });\n      });\n\n      setValueCallback(value);\n    },\n    showAutocomplete,\n  };\n};\n\nexport default function JSTerm({\n  addTerminalExpression,\n  terminalExpressionHistory,\n}: {\n  addTerminalExpression: (expression: string) => void;\n  terminalExpressionHistory: string[];\n}) {\n  const isInLoadedRegion = useAppSelector(getIsInLoadedRegion);\n  const playback = useAppSelector(getPlayback);\n\n  const [value, setValue] = useState(\"\");\n  const [historyIndex, setHistoryIndex] = useState<number | null>(null);\n\n  const [autocompletePreview, setAutocompletePreview] = useState<string | null>(null);\n\n  const execute = () => {\n    const trimmedValue = value.trim();\n    if (trimmedValue !== \"\") {\n      setValue(\"\");\n      setHistoryIndex(null);\n      addTerminalExpression(trimmedValue);\n    }\n  };\n\n  useEffect(() => {\n    // HACK\n    // Update this after each render to avoid a stale closure.\n    if (window.jsterm != null) {\n      window.jsterm.execute = execute;\n    }\n  });\n\n  const recordingId = useGetRecordingId();\n  const { recording } = useGetRecording(recordingId);\n  const canEval = recording && recording.userRole !== \"team-user\";\n\n  const onKeyPress = (e: KeyboardEvent, editor: Editor) => {\n    if (e.key === Keys.ENTER && !e.shiftKey) {\n      e.preventDefault();\n\n      execute();\n    } else if (e.key === Keys.ARROW_UP && editor.getCursor().line === 0) {\n      e.preventDefault();\n\n      let newIndex = null;\n      let newValue = null;\n\n      if (historyIndex === null) {\n        newIndex = terminalExpressionHistory.length - 1;\n        newValue = terminalExpressionHistory[newIndex];\n      } else {\n        newIndex = historyIndex - 1;\n        newValue = terminalExpressionHistory[newIndex];\n      }\n\n      if (newIndex >= 0 && newValue != null) {\n        setHistoryIndex(newIndex);\n        setValue(newValue);\n      }\n    } else if (e.key === Keys.ARROW_DOWN && editor.getCursor().line === editor.lineCount() - 1) {\n      e.preventDefault();\n\n      if (historyIndex !== null) {\n        if (historyIndex + 1 < terminalExpressionHistory.length) {\n          const newIndex = historyIndex + 1;\n          const newValue = terminalExpressionHistory[newIndex];\n\n          setHistoryIndex(newIndex);\n          setValue(newValue);\n        } else {\n          setHistoryIndex(null);\n          setValue(\"\");\n        }\n      }\n    }\n  };\n\n  const onPreviewAvailable = (previewValue: string | null) => setAutocompletePreview(previewValue);\n\n  // HACK\n  // Forcefully remount EditorWithAutocomplete between Offscreen show/hide events.\n  // This avoids bugs where the component doesn't properly reset its state.\n  const [key, setKey] = useState(0);\n  useLayoutEffect(() => () => setKey(prevKey => prevKey + 1), []);\n\n  let inaccessibleReason: InaccessibleReason | undefined = undefined;\n\n  if (canEval) {\n    if (!isInLoadedRegion) {\n      inaccessibleReason = playback ? \"disabledPlayback\" : \"other\";\n    }\n  } else {\n    inaccessibleReason = \"userRole\";\n  }\n\n  // TODO [bvaughn] Refocus JSTerm <input> when SearchInput is hidden\n  return (\n    <div>\n      <div className=\"relative\">\n        <div\n          className=\"jsterm-input-container flex items-center\"\n          key=\"jsterm-container\"\n          aria-live=\"off\"\n          tabIndex={-1}\n        >\n          <div className=\"console-chevron ml-3 mr-1 h-3 w-3\" />\n          {inaccessibleReason ? (\n            <InaccessibleEditor reason={inaccessibleReason} />\n          ) : (\n            <EditorWithAutocomplete\n              key={key}\n              onEditorMount={(editor: Editor, showAutocomplete?: (show: boolean) => void) =>\n                (window.jsterm = getJsTermApi(editor, execute, setValue, showAutocomplete))\n              }\n              onPreviewAvailable={onPreviewAvailable}\n              onRegularKeyPress={onKeyPress}\n              setValue={setValue}\n              value={value}\n            />\n          )}\n        </div>\n      </div>\n      <EagerEvalFooter expression={value} completedExpression={autocompletePreview} />\n    </div>\n  );\n}\n\ntype InaccessibleReason = \"disabledPlayback\" | \"userRole\" | \"other\";\n\ninterface InaccessibleEditorProps {\n  reason: InaccessibleReason;\n}\n\nconst reasonStrings: Record<InaccessibleReason, string> = {\n  disabledPlayback: \"Console evaluations are disabled during playback\",\n  userRole: \"Only 'Developer'-role users can evaluate expressions\",\n  other: \"Unavailable...\",\n};\n\nfunction InaccessibleEditor({ reason }: InaccessibleEditorProps) {\n  const msg = reasonStrings[reason];\n\n  return <div className=\"flex h-full items-center italic text-gray-400\">{msg}</div>;\n}\n","import React, { KeyboardEvent, useContext } from \"react\";\n\nimport NewConsole from \"bvaughn-architecture-demo/components/console\";\nimport { ConsoleSearchContext } from \"bvaughn-architecture-demo/components/console/ConsoleSearchContext\";\nimport { TerminalContext } from \"bvaughn-architecture-demo/src/contexts/TerminalContext\";\nimport { getSelectedFrameId } from \"devtools/client/debugger/src/selectors\";\nimport JSTerm from \"devtools/client/webconsole/components/Input/JSTerm\";\nimport { Pause } from \"protocol/thread/pause\";\nimport { ThreadFront } from \"protocol/thread/thread\";\nimport { useGetRecordingId } from \"ui/hooks/recordings\";\nimport { useFeature } from \"ui/hooks/settings\";\nimport { useAppSelector } from \"ui/setup/hooks\";\n\nimport { ConsoleNag } from \"../shared/Nags/Nags\";\nimport useTerminalHistory from \"./useTerminalHistory\";\nimport styles from \"./NewConsole.module.css\";\n\n// Adapter that connects the legacy app Redux stores to the newer React Context providers.\nexport default function NewConsoleRoot() {\n  const { value: consoleFilterDrawerDefaultsToOpen } = useFeature(\n    \"consoleFilterDrawerDefaultsToOpen\"\n  );\n\n  return (\n    <NewConsole\n      nagHeader={<ConsoleNag />}\n      showFiltersByDefault={consoleFilterDrawerDefaultsToOpen}\n      showSearchInputByDefault={false}\n      terminalInput={<JSTermWrapper />}\n    />\n  );\n}\n\nfunction JSTermWrapper() {\n  const [_, searchActions] = useContext(ConsoleSearchContext);\n  const { addMessage } = useContext(TerminalContext);\n\n  const recordingId = useGetRecordingId();\n  const [terminalExpressionHistory, setTerminalExpressionHistory] = useTerminalHistory(recordingId);\n\n  // Note that the \"frameId\" the protocol expects is actually the \"protocolId\" and NOT the \"frameId\"\n  const frame = useAppSelector(getSelectedFrameId);\n  const frameId = frame?.frameId || null;\n  const pauseId = frame?.pauseId;\n\n  const onKeyDown = (event: KeyboardEvent) => {\n    switch (event.key) {\n      case \"Escape\":\n        searchActions.hide();\n\n        event.preventDefault();\n        event.stopPropagation();\n        break;\n      case \"f\":\n      case \"F\":\n        if (event.metaKey) {\n          searchActions.show();\n\n          event.preventDefault();\n          event.stopPropagation();\n        }\n        break;\n    }\n  };\n\n  const addTerminalExpression = (expression: string) => {\n    const pause = pauseId ? Pause.getById(pauseId) : ThreadFront.currentPause;\n    if (!pause?.pauseId) {\n      return;\n    }\n\n    setTerminalExpressionHistory(expression);\n\n    addMessage({\n      expression,\n      frameId: frameId || null,\n      pauseId: pause.pauseId,\n      point: pause.point!,\n      time: pause.time!,\n    });\n  };\n\n  return (\n    <div className={styles.JSTermWrapper} data-test-id=\"JSTerm\" onKeyDown={onKeyDown}>\n      <JSTerm\n        addTerminalExpression={addTerminalExpression}\n        terminalExpressionHistory={terminalExpressionHistory}\n      />\n    </div>\n  );\n}\n","import { RecordingId } from \"@replayio/protocol\";\nimport { useCallback } from \"react\";\n\nimport useLocalStorage from \"bvaughn-architecture-demo/src/hooks/useLocalStorage\";\n\nexport default function useTerminalHistory(\n  recordingId: RecordingId,\n  maxHistoryLength: number = 20\n): [string[], (value: string) => void] {\n  const [terminalExpressionHistory, setTerminalExpressionHistory] = useLocalStorage<string[]>(\n    `${recordingId}::terminalExpressionHistory`,\n    []\n  );\n\n  const setTerminalExpressionHistoryWrapper = useCallback<(value: string) => void>(\n    (command: string) => {\n      setTerminalExpressionHistory(prevHistory => {\n        const newHistory =\n          prevHistory.length >= maxHistoryLength\n            ? [...prevHistory.slice(1), command]\n            : [...prevHistory, command];\n        return newHistory;\n      });\n    },\n    [maxHistoryLength, setTerminalExpressionHistory]\n  );\n\n  return [terminalExpressionHistory, setTerminalExpressionHistoryWrapper];\n}\n","import { Value as ProtocolValue } from \"@replayio/protocol\";\n\nimport {\n  getObjectThrows,\n  getObjectWithPreviewHelper,\n} from \"bvaughn-architecture-demo/src/suspense/ObjectPreviews\";\nimport { protocolValueToClientValue } from \"bvaughn-architecture-demo/src/utils/protocol\";\nimport { ReplayClientInterface } from \"shared/client/types\";\n\n// like JSON, but including `undefined`\nexport type JSONishValue =\n  | boolean\n  | string\n  | number\n  | null\n  | undefined\n  | JSONishValue[]\n  | { [key: string]: JSONishValue };\n\n/**\n * Takes a backend `objectId`, loads its data preview, and\n * fetches/caches data for all of its fields that are objects/arrays.\n * Note that this does not return the object with its contents - it\n * just makes sure all the fields exist in the cache.\n */\nexport async function loadObjectProperties(\n  replayClient: ReplayClientInterface,\n  pauseId: string,\n  objectId: string\n) {\n  const obj = await getObjectWithPreviewHelper(replayClient, pauseId, objectId);\n\n  const properties = obj.preview?.properties ?? [];\n  const objectProperties = properties.filter(entry => \"object\" in entry) ?? [];\n\n  const propertyPromises = objectProperties.map(prop =>\n    getObjectWithPreviewHelper(replayClient, pauseId, prop.object!)\n  );\n\n  await Promise.all(propertyPromises);\n}\n\n/**\n * Takes a backend Replay API `ProtocolValue`, recurses over it,\n * and returns a plain JS object/array/primitive with nested data.\n *\n * Ported from the original `NodeFront.getJSON()` implementation.\n */\nexport async function getJSON(\n  replayClient: ReplayClientInterface,\n  pauseId: string,\n  value: ProtocolValue,\n  visitedObjectIds = new Set<string>()\n): Promise<JSONishValue> {\n  const clientObject = protocolValueToClientValue(pauseId, value);\n\n  if (clientObject.objectId) {\n    if (visitedObjectIds.has(clientObject.objectId!)) {\n      return undefined;\n    }\n\n    visitedObjectIds = new Set(visitedObjectIds);\n    visitedObjectIds.add(clientObject.objectId!);\n\n    await loadObjectProperties(replayClient, pauseId, clientObject.objectId!);\n    const obj = getObjectThrows(pauseId, clientObject.objectId!);\n\n    const properties = obj.preview?.properties ?? [];\n\n    const actualPropValues = await Promise.all(\n      properties.map(async val => {\n        const value = await getJSON(replayClient, pauseId, val, visitedObjectIds);\n        const key = val.name;\n        return [key, value] as [string, JSONishValue];\n      })\n    );\n\n    if (clientObject.type === \"array\") {\n      let result: JSONishValue[] = [];\n      for (const [key, value] of actualPropValues) {\n        const index = parseInt(key);\n        if (Number.isInteger(index)) {\n          result[index] = value;\n        }\n      }\n      return result;\n    }\n\n    return Object.fromEntries(actualPropValues);\n  }\n  switch (clientObject.type) {\n    case \"boolean\": {\n      return clientObject.preview === \"true\";\n    }\n    case \"string\":\n    case \"symbol\": {\n      return clientObject.preview!;\n    }\n    case \"number\":\n    case \"nan\": {\n      return Number(clientObject.preview!);\n    }\n    case \"null\": {\n      return null;\n    }\n    case \"undefined\": {\n      return undefined;\n    }\n  }\n\n  throw new Error(\"Unexpected client value! \" + JSON.stringify(clientObject));\n}\n","import { ExecutionPoint, NodeBounds, ObjectId } from \"@replayio/protocol\";\nimport React, { useContext } from \"react\";\nimport { useEffect, useState } from \"react\";\nimport type { Store, Wall } from \"react-devtools-inline/frontend\";\n\nimport {\n  getObjectPropertyHelper,\n  getObjectWithPreviewHelper,\n} from \"bvaughn-architecture-demo/src/suspense/ObjectPreviews\";\nimport { highlightNode, unhighlightNode } from \"devtools/client/inspector/markup/actions/markup\";\nimport { ThreadFront } from \"protocol/thread\";\nimport { compareNumericStrings } from \"protocol/utils\";\nimport { ReplayClientContext } from \"shared/client/ReplayClientContext\";\nimport { ReplayClientInterface } from \"shared/client/types\";\nimport { fetchMouseTargetsForPause } from \"ui/actions/app\";\nimport { setHasReactComponents, setProtocolCheckFailed } from \"ui/actions/reactDevTools\";\nimport {\n  getCurrentPoint,\n  getTheme,\n  setIsNodePickerActive,\n  setIsNodePickerInitializing,\n} from \"ui/reducers/app\";\nimport {\n  getAnnotations,\n  getProtocolCheckFailed,\n  getReactInitPoint,\n} from \"ui/reducers/reactDevTools\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\nimport { Annotation } from \"ui/state/reactDevTools\";\nimport { getMouseTarget } from \"ui/suspense/nodeCaches\";\nimport { NodePicker as NodePickerClass, NodePickerOpts } from \"ui/utils/nodePicker\";\nimport { getJSON } from \"ui/utils/objectFetching\";\nimport { sendTelemetryEvent, trackEvent } from \"ui/utils/telemetry\";\n\ntype ReactDevToolsInlineModule = typeof import(\"react-devtools-inline/frontend\");\n\ntype NodeOptsWithoutBounds = Omit<NodePickerOpts, \"onCheckNodeBounds\">;\n\nconst getDOMNodes = `((rendererID, id) => __REACT_DEVTOOLS_GLOBAL_HOOK__.rendererInterfaces.get(rendererID).findNativeNodesForFiberID(id))`;\n\n// used by the frontend to communicate with the backend\nclass ReplayWall implements Wall {\n  private _listener?: (msg: any) => void;\n  private inspectedElements = new Set();\n  private highlightedElementId?: number;\n  store?: Store;\n\n  constructor(\n    private enablePicker: (opts: NodeOptsWithoutBounds) => void,\n    private initializePicker: () => void,\n    private disablePicker: () => void,\n    private onShutdown: () => void,\n    private highlightNode: (nodeId: string) => void,\n    private unhighlightNode: () => void,\n    private fetchMouseTargetsForPause: () => Promise<NodeBounds[] | undefined>,\n    private replayClient: ReplayClientInterface,\n    private pauseId: string | undefined\n  ) {}\n\n  // called by the frontend to register a listener for receiving backend messages\n  listen(listener: (msg: any) => void) {\n    this._listener = msg => {\n      try {\n        listener(msg);\n      } catch (err) {\n        console.warn(\"Error in ReactDevTools frontend\", err);\n      }\n    };\n    return () => {\n      this._listener = undefined;\n    };\n  }\n\n  // send an annotation from the backend in the recording to the frontend\n  sendAnnotation(annotation: Annotation) {\n    this._listener?.(annotation);\n  }\n\n  // called by the frontend to send a request to the backend\n  async send(event: string, payload: any) {\n    try {\n      switch (event) {\n        case \"inspectElement\": {\n          if (this.inspectedElements.has(payload.id) && !payload.path) {\n            // this element has been inspected before, the frontend asks to inspect it again\n            // to see if there are any changes - in Replay there won't be any so we can send\n            // the response immediately without asking the backend\n            this._listener?.({\n              event: \"inspectedElement\",\n              payload: {\n                responseID: payload.requestID,\n                id: payload.id,\n                type: \"no-change\",\n              },\n            });\n          } else {\n            if (!payload.path) {\n              this.inspectedElements.add(payload.id);\n            }\n            this.sendRequest(event, payload);\n          }\n          break;\n        }\n\n        case \"getBridgeProtocol\": {\n          const response = await this.sendRequest(event, payload);\n          if (response === undefined) {\n            trackEvent(\"error.reactdevtools.set_protocol_failed\");\n            setProtocolCheckFailed();\n          }\n          break;\n        }\n\n        case \"highlightNativeElement\": {\n          const { rendererID, id } = payload;\n\n          if (this.highlightedElementId) {\n            this.unhighlightNode();\n          }\n          this.highlightedElementId = id;\n\n          const response = await ThreadFront.evaluateNew({\n            text: `${getDOMNodes}(${rendererID}, ${id})[0]`,\n          });\n\n          const nodeId = response.returned?.object;\n          if (!nodeId || this.highlightedElementId !== id) {\n            return;\n          }\n\n          this.highlightNode(nodeId);\n          break;\n        }\n\n        case \"clearNativeElementHighlight\": {\n          this.unhighlightNode();\n          this.highlightedElementId = undefined;\n          break;\n        }\n\n        case \"startInspectingNative\": {\n          this.initializePicker();\n\n          const boundingRects = await this.fetchMouseTargetsForPause();\n\n          if (!boundingRects?.length) {\n            this.disablePicker();\n            this._listener?.({ event: \"stopInspectingNative\", payload: true });\n            break;\n          }\n\n          const nodeToElementId = await this.mapNodesToElements();\n\n          this.enablePicker({\n            onHovering: nodeId => {\n              const elementId = nodeId && nodeToElementId.get(nodeId);\n              elementId && this._listener?.({ event: \"selectFiber\", payload: elementId });\n            },\n            onPicked: _ => {\n              this._listener?.({ event: \"stopInspectingNative\", payload: true });\n            },\n            onHighlightNode: this.highlightNode,\n            onUnhighlightNode: this.unhighlightNode,\n            enabledNodeIds: [...nodeToElementId.keys()],\n          });\n\n          break;\n        }\n\n        case \"stopInspectingNative\": {\n          this.disablePicker();\n          break;\n        }\n      }\n    } catch (err) {\n      // we catch for the case where a region is unloaded and ThreadFront fails\n      console.warn(err);\n    }\n  }\n\n  // send a request to the backend in the recording and the reply to the frontend\n  private async sendRequest(event: string, payload: any) {\n    const response = await ThreadFront.evaluateNew({\n      text: ` __RECORD_REPLAY_REACT_DEVTOOLS_SEND_MESSAGE__(\"${event}\", ${JSON.stringify(\n        payload\n      )})`,\n    });\n\n    if (response.returned) {\n      const result: any = await getJSON(this.replayClient, this.pauseId!, response.returned);\n\n      if (result) {\n        this._listener?.({ event: result.event, payload: result.data });\n      }\n      return result;\n    }\n  }\n\n  private async mapNodesToElements() {\n    const nodeToElementId = new Map<ObjectId, number>();\n    for (const rootID of this.store!._roots) {\n      const rendererID = this.store!._rootIDToRendererID.get(rootID)!;\n      const elementIDs = JSON.stringify(this.collectElementIDs(rootID));\n      const expr = `${elementIDs}.reduce((map, id) => { for (node of ${getDOMNodes}(${rendererID}, id) || []) { map.set(node, id); } return map; }, new Map())`;\n      const response = await ThreadFront.evaluateNew({ text: expr });\n      if (response.returned?.object) {\n        const mapObjData = await getObjectWithPreviewHelper(\n          this.replayClient,\n          this.pauseId!,\n          response.returned.object\n        );\n\n        mapObjData.preview?.containerEntries?.forEach(entry => {\n          // The backend should have returned numeric node IDs as values.\n          // The keys are DOM node objects. We don't need to fetch them,\n          // because all we care about here is the object IDs anyway.\n          if (typeof entry.key?.object === \"string\" && typeof entry.value.value === \"number\") {\n            nodeToElementId.set(entry.key.object, entry.value.value);\n          }\n        });\n      }\n    }\n    return nodeToElementId;\n  }\n\n  private collectElementIDs(elementID: number, elementIDs?: number[]) {\n    if (!elementIDs) {\n      elementIDs = [];\n    }\n    elementIDs.push(elementID);\n    const element = this.store!._idToElement.get(elementID);\n    for (const childID of element!.children) {\n      this.collectElementIDs(childID, elementIDs);\n    }\n    return elementIDs;\n  }\n}\n\nfunction createReactDevTools(\n  reactDevToolsInlineModule: ReactDevToolsInlineModule,\n  annotations: Annotation[],\n  currentPoint: ExecutionPoint,\n  enablePicker: (opts: NodeOptsWithoutBounds) => void,\n  initializePicker: () => void,\n  disablePicker: () => void,\n  onShutdown: () => void,\n  highlightNode: (nodeId: string) => void,\n  unhighlightNode: () => void,\n  fetchMouseTargetsForPause: () => Promise<NodeBounds[] | undefined>,\n  replayClient: ReplayClientInterface,\n  pauseId: string | undefined\n) {\n  const { createBridge, createStore, initialize } = reactDevToolsInlineModule;\n\n  const target = { postMessage() {} };\n  const wall = new ReplayWall(\n    enablePicker,\n    initializePicker,\n    disablePicker,\n    onShutdown,\n    highlightNode,\n    unhighlightNode,\n    fetchMouseTargetsForPause,\n    replayClient,\n    pauseId\n  );\n  const bridge = createBridge(target, wall);\n  const store = createStore(bridge, {\n    checkBridgeProtocolCompatibility: false,\n    supportsNativeInspection: true,\n  });\n  wall.store = store;\n  const ReactDevTools = initialize(target, { bridge, store });\n\n  for (const { message, point } of annotations) {\n    if (message.event === \"operations\" && compareNumericStrings(point, currentPoint) <= 0) {\n      wall.sendAnnotation(message);\n    }\n  }\n\n  return ReactDevTools;\n}\n\n// React DevTools (RD) changed its internal data structure slightly in a minor update.\n// The result is that Replay sessions recorded with older versions of RD don't play well in newer versions.\n// We can work around this by checking RD's \"bridge protocol\" version (which we also store)\n// and loading the appropriate frontend version to match.\n// For more information see https://github.com/facebook/react/issues/24219\nasync function loadReactDevToolsInlineModuleFromProtocol(\n  stateUpdaterCallback: Function,\n  replayClient: ReplayClientInterface,\n  pauseId?: string\n) {\n  if (!pauseId) {\n    return;\n  }\n\n  const response = await ThreadFront.evaluateNew({\n    text: ` __RECORD_REPLAY_REACT_DEVTOOLS_SEND_MESSAGE__(\"getBridgeProtocol\", undefined)`,\n  });\n  if (response.returned?.object) {\n    // Unwrap the nested eval objects by asking the backend for contents\n    // of the nested fields: `{data: {version: 123}}`\n    const responseDataObject = await getObjectPropertyHelper(\n      replayClient,\n      pauseId,\n      response.returned.object,\n      \"data\"\n    );\n    const versionData = (await getObjectPropertyHelper(\n      replayClient,\n      pauseId,\n      responseDataObject.object!,\n      \"version\"\n    )) as { value: number };\n    const { value: version } = versionData;\n\n    // We should only load the DevTools module once we know which protocol version it requires.\n    // If we don't have a version yet, it probably means we're too early in the Replay session.\n    if (version >= 2) {\n      stateUpdaterCallback(await import(\"react-devtools-inline/frontend\"));\n    } else if (version === 1) {\n      stateUpdaterCallback(await import(\"react-devtools-inline_4_18_0/frontend\"));\n    }\n  }\n}\n\nconst nodePickerInstance = new NodePickerClass();\n\nexport default function ReactDevtoolsPanel() {\n  const annotations = useAppSelector(getAnnotations);\n  const currentPoint = useAppSelector(getCurrentPoint);\n  const protocolCheckFailed = useAppSelector(getProtocolCheckFailed);\n  const reactInitPoint = useAppSelector(getReactInitPoint);\n  const pauseId = useAppSelector(state => state.pause.id);\n\n  const dispatch = useAppDispatch();\n\n  const theme = useAppSelector(getTheme);\n  const replayClient = useContext(ReplayClientContext);\n\n  // Once we've obtained the protocol version, we'll dynamically load the correct module/version.\n  const [reactDevToolsInlineModule, setReactDevToolsInlineModule] =\n    useState<ReactDevToolsInlineModule | null>(null);\n\n  // Try to load the DevTools module whenever the current point changes.\n  // Eventually we'll reach a point that has the DevTools protocol embedded.\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => {\n    if (reactDevToolsInlineModule === null) {\n      loadReactDevToolsInlineModuleFromProtocol(\n        setReactDevToolsInlineModule,\n        replayClient,\n        pauseId\n      );\n    }\n  });\n\n  if (currentPoint === null) {\n    return null;\n  }\n\n  function enablePicker(opts: NodeOptsWithoutBounds) {\n    dispatch(setIsNodePickerActive(true));\n    dispatch(setIsNodePickerInitializing(false));\n\n    const actualOpts: NodePickerOpts = {\n      ...opts,\n      onCheckNodeBounds: async (x, y, nodeIds) => {\n        const boundingRects = await dispatchFetchMouseTargets();\n        return getMouseTarget(boundingRects ?? [], x, y, nodeIds);\n      },\n    };\n    nodePickerInstance.enable(actualOpts);\n  }\n  function initializePicker() {\n    dispatch(setIsNodePickerActive(false));\n    dispatch(setIsNodePickerInitializing(true));\n  }\n  function disablePicker() {\n    nodePickerInstance.disable();\n    dispatch(setIsNodePickerActive(false));\n    dispatch(setIsNodePickerInitializing(false));\n  }\n\n  function onShutdown() {\n    sendTelemetryEvent(\"react-devtools-shutdown\");\n    dispatch(setHasReactComponents(false));\n  }\n\n  function dispatchHighlightNode(nodeId: string) {\n    dispatch(highlightNode(nodeId));\n  }\n\n  function dispatchUnhighlightNode() {\n    dispatch(unhighlightNode());\n  }\n\n  function dispatchFetchMouseTargets() {\n    return dispatch(fetchMouseTargetsForPause());\n  }\n\n  if (protocolCheckFailed) {\n    return (\n      <div className=\"flex flex-col gap-4 p-4\">\n        <div>React DevTools failed to init.</div>\n        <div>\n          Try picking a different point on the timeline or reloading the page. If the problem\n          persists, try creating a new recording with the latest version of the Replay browser.\n        </div>\n      </div>\n    );\n  }\n\n  const isReactDevToolsReady = reactDevToolsInlineModule !== null;\n  const isReady =\n    isReactDevToolsReady &&\n    reactInitPoint !== null &&\n    currentPoint !== null &&\n    compareNumericStrings(reactInitPoint, currentPoint) <= 0;\n\n  if (!isReady) {\n    return (\n      <div className=\"flex flex-col items-center gap-4 p-4\">\n        <img src=\"/images/react.svg\" className=\"mt-2 w-8\" />\n        {isReactDevToolsReady ? (\n          <>\n            <div>Mounting your React application...</div>\n            <div>Try picking a different point on the timeline.</div>\n          </>\n        ) : (\n          <div>Loading React Developer Tools...</div>\n        )}\n      </div>\n    );\n  }\n\n  const ReactDevTools = createReactDevTools(\n    reactDevToolsInlineModule,\n    annotations,\n    currentPoint,\n    enablePicker,\n    initializePicker,\n    disablePicker,\n    onShutdown,\n    dispatchHighlightNode,\n    dispatchUnhighlightNode,\n    dispatchFetchMouseTargets,\n    replayClient,\n    pauseId\n  );\n\n  return (\n    <ReactDevTools\n      browserTheme={theme}\n      enabledInspectedElementContextMenu={false}\n      overrideTab=\"components\"\n      showTabBar={false}\n      readOnly={true}\n      hideSettings={true}\n      hideToggleErrorAction={true}\n      hideToggleSuspenseAction={true}\n      hideLogAction={true}\n      hideViewSourceAction={true}\n    />\n  );\n}\n","// import { Root, UPDATE_STATE } from \"@redux-devtools/app\";\nimport type { Root } from \"@redux-devtools/app\";\nimport React, { useContext, useLayoutEffect, useRef, useState } from \"react\";\nimport { batch } from \"react-redux\";\n\nimport { useAppSelector } from \"ui/setup/hooks\";\nimport type { UIState } from \"ui/state\";\n\nimport { ReduxAnnotationsContext } from \"./redux-devtools/redux-annotations\";\n\ntype RDTAppStore = NonNullable<Root[\"store\"]>;\n\ntype RDTThemes = \"light\" | \"dark\" | \"auto\";\n\nconst replayThemesToRDTThemes = {\n  light: \"light\",\n  dark: \"dark\",\n  system: \"auto\",\n} as const;\n\nexport const ReduxDevToolsPanel = () => {\n  const [ReduxDevToolsAppRoot, setRoot] = useState<typeof Root | null>(null);\n  const rootRef = useRef<Root | null>(null);\n  const reduxAnnotations = useContext(ReduxAnnotationsContext);\n\n  // Collect the current Replay app theme so we can apply it to the Redux DevTools\n  const appTheme = useAppSelector((state: UIState) => state.app.theme);\n  // Also save the current RDT theme in state, so we can do stupid syncing tricks\n  const [currentRDTTheme, setCurrentRDTTheme] = useState<RDTThemes>(\n    replayThemesToRDTThemes[appTheme]\n  );\n\n  useLayoutEffect(() => {\n    // Code-split and lazy-import the main Redux DevTools `<Root>` component.\n    // This saves on bundle size, and also ensures it's only added if needed.\n    // TODO Re-enable Redux DevTools integration\n    // import(\"@redux-devtools/app\").then(rdtapp => {\n    //   setRoot(() => rdtapp.Root);\n    // });\n  }, []);\n\n  useLayoutEffect(() => {\n    // TODO Re-enable Redux DevTools annotations handling\n    return;\n\n    /*\n    if (!rootRef.current) {\n      return;\n    }\n\n    const store = rootRef.current.store!;\n\n    const colorPreference = replayThemesToRDTThemes[appTheme];\n\n    store.dispatch({\n      type: \"main/CHANGE_THEME\",\n      theme: \"default\",\n      scheme: \"default\",\n      colorPreference,\n    });\n\n    // HACK The RDT store overwrites our initial dispatch when it reloads its own persisted prefs.\n    // By subscribing to the store, diffing that value, and setting React state,\n    // we can loop back through here and re-dispatch based on the Replay theme,\n    // thus effectively keeping them in sync.\n    // We unsubscribe and resubscribe every time to avoid leaks.\n    return store.subscribe(() => {\n      const updatedRDTTheme = store.getState().theme.colorPreference;\n      if (currentRDTTheme !== updatedRDTTheme) {\n        setCurrentRDTTheme(updatedRDTTheme);\n      }\n    });\n    */\n  }, [ReduxDevToolsAppRoot, appTheme, currentRDTTheme]);\n\n  useLayoutEffect(() => {\n    // TODO Re-enable Redux DevTools annotations handling\n    return;\n\n    /*\n    if (!rootRef.current) {\n      return;\n    }\n\n    const rootComponent = rootRef.current;\n    const store = rootComponent.store!;\n*/\n    /*\n\n     The Redux DevTools UI has its own Redux store with its own reducers.\n     The primary part that we care about is the slice reducer that manages \n     which \"store instances\" are connected, and calculates the \"lifted state\" \n     for each store (ie, \"after 3 increment actions, the state is `{value: 3}`\".\n     See [`reducers/instances.ts` in the Redux DevTools repo for the logic](https://github.com/reduxjs/redux-devtools/blob/b82de745928211cd9b7daa7a61b197ad9e11ec36/packages/redux-devtools-app/src/reducers/instances.ts).\n\n     The RDT internals first pass along an `INIT_INSTANCE` action to let the UI \n     know that a given store instance exists, and then later pass along the serialized  \n     actions  for processing to update that instance's calculated state.\n\n     Internally, the `instances` reducer appears to have handling for a \n     \"default\" state, and falls back to that value if no instances are connected.  \n     In my experimenting I found I needed to dispatch an action related to that \n     as part of resetting the internal state.\n\n    */\n\n    /*\n    const allInstanceIds: string[] = [\"default\"];\n\n    reduxAnnotations.forEach(annotation => {\n      // @ts-ignore ignore \"this comparison never matches\" error\n      if (annotation.action?.request?.type === \"INIT_INSTANCE\") {\n        // @ts-ignore-error TS is _really_ getting confused here\n        allInstanceIds.push(annotation.action.request.instanceId);\n      }\n    });\n\n    batch(() => {\n      // We may receive the Redux annotations in several groups over time.\n      // Rather than try to figure out which ones we have and haven't loaded into\n      // the RDT Redux store, we'll just try to reset its internal instance state entirely,\n      // and always reload all of the received annotation actions.\n\n      // TODO THIS IS A TERRIBLE IDEA COME UP WITH SOMETHING BETTER AND YET THIS WORKS\n      // Seemingly reset the DevTools internal knowledge of actions.\n      // @ts-ignore this is legal to dispatch\n      store.dispatch({\n        type: \"socket/DISCONNECTED\",\n      });\n\n      // For each connection instance that we know will exist from annotations,\n      // re-create an empty state value in the instances data.\n      allInstanceIds.forEach(instanceId => {\n        store.dispatch({\n          type: \"devTools/UPDATE_STATE\",\n          request: {\n            type: \"LIFTED\",\n            id: instanceId,\n          },\n        });\n      });\n\n      // Originally I had this showing only actions up to the current pause point,\n      // but that led to a situation where there could be partly-initialized state and\n      // the RDT UI would end up crashing. Now, always load everything we've received.\n      reduxAnnotations.forEach(annotation => {\n        store.dispatch(annotation.action);\n      });\n    });\n    */\n  }, [ReduxDevToolsAppRoot, reduxAnnotations]);\n\n  if (!ReduxDevToolsAppRoot) {\n    return null;\n  }\n\n  // @ts-ignore Weird ref type error\n  return <ReduxDevToolsAppRoot ref={rootRef} />;\n};\n","import classNames from \"classnames\";\nimport { useEffect, useRef, useState } from \"react\";\n\nimport { getSelectedPanel, getToolboxLayout } from \"ui/reducers/layout\";\nimport { getSelectedLocation } from \"ui/reducers/sources\";\nimport { useAppSelector } from \"ui/setup/hooks\";\n\nexport default function TabSpotlight() {\n  const [isShown, setIsShown] = useState(false);\n  const selectedSource = useAppSelector(getSelectedLocation);\n  const layout = useAppSelector(getToolboxLayout);\n  const selectedPanel = useAppSelector(getSelectedPanel);\n  const timeoutKey = useRef<NodeJS.Timeout | null>(null);\n\n  useEffect(() => {\n    if (!selectedSource?.sourceId || layout === \"ide\" || selectedPanel === \"debugger\") {\n      return;\n    }\n\n    if (timeoutKey.current) {\n      clearTimeout(timeoutKey.current);\n    }\n\n    setIsShown(true);\n\n    timeoutKey.current = setTimeout(() => {\n      setIsShown(false);\n      timeoutKey.current = null;\n    }, 2000);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedSource?.sourceId]);\n\n  return (\n    <span\n      className={classNames(\"transition\", isShown ? \"text-primaryAccent\" : \"text-bodyColor\")}\n      style={{ transitionDuration: \"3000\" }}\n    >\n      Sources\n    </span>\n  );\n}\n","import { setShowVideoPanel } from \"ui/actions/layout\";\nimport { getShowVideoPanel } from \"ui/reducers/layout\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\n\nimport Icon from \"../shared/Icon\";\n\ninterface ToolboxButtonProps {\n  title?: string;\n  onClick?: () => void;\n  children?: React.ReactNode;\n}\n\nexport const ToolboxButton = ({ children, title, onClick = () => {} }: ToolboxButtonProps) => {\n  return (\n    <button\n      className=\"toolbox-options flex items-center p-2 text-iconColor hover:text-gray-600\"\n      title={title}\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  );\n};\n\nexport const ShowVideoButton = () => {\n  const dispatch = useAppDispatch();\n  const showVideoPanel = useAppSelector(getShowVideoPanel);\n\n  const onClick = () => {\n    dispatch(setShowVideoPanel(true));\n  };\n\n  if (showVideoPanel) {\n    return null;\n  }\n\n  return (\n    <ToolboxButton title=\"Show Video\" onClick={onClick}>\n      <Icon filename=\"video\" className=\"bg-iconColor\" size=\"small\" />\n    </ToolboxButton>\n  );\n};\n","import React, { ReactNode, useState } from \"react\";\n\nimport { setToolboxLayout } from \"ui/actions/layout\";\nimport { getToolboxLayout } from \"ui/reducers/layout\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\nimport { ToolboxLayout } from \"ui/state/layout\";\n\nimport { Dropdown, DropdownItem } from \"../Library/LibraryDropdown\";\nimport Icon from \"../shared/Icon\";\nimport PortalDropdown from \"../shared/PortalDropdown\";\nimport { getRecordingCapabilitiesSuspense } from \"./getRecordingCapabilities\";\n\nconst LAYOUT_ICONS = {\n  bottom: \"dock-bottom\",\n  full: \"dock-full\",\n  ide: \"dock-bottom-right\",\n  left: \"dock-left\",\n};\n\nfunction ToolboxOption({\n  dataTestId,\n  label,\n  onClick,\n  icon,\n}: {\n  dataTestId?: string;\n  label: string;\n  onClick: () => void;\n  icon?: string;\n}) {\n  return (\n    <DropdownItem onClick={onClick}>\n      <div className=\"flex space-x-2\" data-test-id={dataTestId}>\n        {icon ? <Icon filename={icon} className=\"bg-iconColor\" /> : null}\n        <div>{label}</div>\n      </div>\n    </DropdownItem>\n  );\n}\n\nfunction LayoutOption({\n  dataTestId,\n  label,\n  value,\n  icon,\n  collapseDropdown,\n}: {\n  dataTestId?: string;\n  label: string;\n  value: ToolboxLayout;\n  icon: string;\n  collapseDropdown: () => void;\n}) {\n  const dispatch = useAppDispatch();\n\n  const onClick = () => {\n    dispatch(setToolboxLayout(value));\n    collapseDropdown();\n  };\n\n  return <ToolboxOption dataTestId={dataTestId} onClick={onClick} label={label} icon={icon} />;\n}\n\nexport default function ToolboxOptions() {\n  const toolboxLayout = useAppSelector(getToolboxLayout);\n  const [expanded, setExpanded] = useState(false);\n  const button = <Icon filename={LAYOUT_ICONS[toolboxLayout]} className=\"bg-iconColor\" />;\n  const collapseDropdown = () => setExpanded(false);\n\n  const recordingCapabilities = getRecordingCapabilitiesSuspense();\n\n  let layoutOptions: ReactNode = null;\n\n  if (recordingCapabilities.supportsRepaintingGraphics) {\n    layoutOptions = (\n      <>\n        <LayoutOption\n          dataTestId=\"DockToBottomRightButton\"\n          label=\"Console on bottom-right\"\n          value=\"ide\"\n          icon={LAYOUT_ICONS.ide}\n          collapseDropdown={collapseDropdown}\n        />\n        <LayoutOption\n          dataTestId=\"DockToLeftButton\"\n          label=\"Console on left\"\n          value=\"left\"\n          icon={LAYOUT_ICONS.left}\n          collapseDropdown={collapseDropdown}\n        />\n        <LayoutOption\n          dataTestId=\"DockToBottomButton\"\n          label=\"Console on bottom\"\n          value=\"bottom\"\n          icon={LAYOUT_ICONS.bottom}\n          collapseDropdown={collapseDropdown}\n        />\n      </>\n    );\n  } else {\n    layoutOptions = (\n      <>\n        <LayoutOption\n          dataTestId=\"DockSplitViewButton\"\n          label=\"Split view\"\n          value=\"ide\"\n          icon={LAYOUT_ICONS.left}\n          collapseDropdown={collapseDropdown}\n        />\n        <LayoutOption\n          dataTestId=\"DockFullViewButton\"\n          label=\"Full view\"\n          value=\"full\"\n          icon={LAYOUT_ICONS.full}\n          collapseDropdown={collapseDropdown}\n        />\n      </>\n    );\n  }\n\n  return (\n    <PortalDropdown\n      buttonContent={button}\n      setExpanded={setExpanded}\n      expanded={expanded}\n      buttonStyle=\"toolbox-options p-2 flex items-center text-iconColor hover:text-gray-600\"\n      distance={0}\n    >\n      <Dropdown>{layoutOptions}</Dropdown>\n    </PortalDropdown>\n  );\n}\n","import \"ui/setup/dynamic/inspector\";\nimport classnames from \"classnames\";\nimport React, { FC, ReactNode, Suspense, useContext } from \"react\";\n\nimport LazyOffscreen from \"bvaughn-architecture-demo/components/LazyOffscreen\";\nimport { EditorPane } from \"devtools/client/debugger/src/components/Editor/EditorPane\";\nimport { RecordingCapabilities } from \"protocol/thread/thread\";\nimport { setSelectedPanel } from \"ui/actions/layout\";\nimport { useFeature } from \"ui/hooks/settings\";\nimport { getSelectedPanel, getToolboxLayout } from \"ui/reducers/layout\";\nimport { useAppDispatch, useAppSelector } from \"ui/setup/hooks\";\nimport { SecondaryPanelName, ToolboxLayout } from \"ui/state/layout\";\nimport { trackEvent } from \"ui/utils/telemetry\";\n\nimport { selectors } from \"../../reducers\";\nimport NetworkMonitor from \"../NetworkMonitor\";\nimport { NodePicker } from \"../NodePicker\";\nimport { Redacted } from \"../Redacted\";\nimport Loader from \"../shared/Loader\";\nimport ReplayLogo from \"../shared/ReplayLogo\";\nimport WaitForReduxSlice from \"../WaitForReduxSlice\";\nimport { getRecordingCapabilitiesSuspense } from \"./getRecordingCapabilities\";\nimport NewConsoleRoot from \"./NewConsole\";\nimport ReactDevtoolsPanel from \"./ReactDevTools\";\nimport { ReduxAnnotationsContext } from \"./redux-devtools/redux-annotations\";\nimport { ReduxDevToolsPanel } from \"./ReduxDevTools\";\nimport SourcesTabLabel from \"./SourcesTabLabel\";\nimport { ShowVideoButton } from \"./ToolboxButton\";\nimport ToolboxOptions from \"./ToolboxOptions\";\n\nconst InspectorApp = React.lazy(() => import(\"devtools/client/inspector/components/App\"));\n\ninterface PanelButtonsProps {\n  hasReactComponents: boolean;\n  hasReduxAnnotations: boolean;\n  toolboxLayout: ToolboxLayout;\n  recordingCapabilities: RecordingCapabilities;\n}\n\ninterface PanelButtonProps {\n  panel: SecondaryPanelName;\n  children?: React.ReactNode;\n}\n\nconst PanelButton = ({ panel, children }: PanelButtonProps) => {\n  const selectedPanel = useAppSelector(selectors.getSelectedPanel);\n  const dispatch = useAppDispatch();\n\n  const onClick = (panel: SecondaryPanelName) => {\n    dispatch(setSelectedPanel(panel));\n    trackEvent(`toolbox.secondary.${panel}_select`);\n  };\n\n  return (\n    <button\n      className={classnames(`relative`, {\n        expanded: selectedPanel === panel,\n      })}\n      data-test-id={`PanelButton-${panel}`}\n      onClick={() => onClick(panel)}\n    >\n      <div className=\"label\">{children}</div>\n    </button>\n  );\n};\n\nconst PanelButtons: FC<PanelButtonsProps> = ({\n  hasReactComponents,\n  hasReduxAnnotations,\n  toolboxLayout,\n  recordingCapabilities,\n}) => {\n  const { supportsNetworkRequests, supportsRepaintingGraphics } = recordingCapabilities;\n  const { value: chromiumNetMonitorEnabled } = useFeature(\"chromiumNetMonitor\");\n\n  return (\n    <div className=\"panel-buttons theme-tab-font-size flex flex-row items-center overflow-hidden\">\n      {supportsRepaintingGraphics && <NodePicker />}\n      <PanelButton panel=\"console\">Console</PanelButton>\n      {supportsRepaintingGraphics && <PanelButton panel=\"inspector\">Elements</PanelButton>}\n      {toolboxLayout !== \"ide\" && (\n        <PanelButton panel=\"debugger\">\n          <SourcesTabLabel />\n        </PanelButton>\n      )}\n      {hasReactComponents && <PanelButton panel=\"react-components\">React</PanelButton>}\n      {hasReduxAnnotations && <PanelButton panel=\"redux-devtools\">Redux</PanelButton>}\n      {(chromiumNetMonitorEnabled || supportsNetworkRequests) && (\n        <PanelButton panel=\"network\">Network</PanelButton>\n      )}\n    </div>\n  );\n};\n\nfunction ConsolePanel() {\n  return (\n    <div className=\"toolbox-bottom-panels\">\n      <div className={classnames(\"toolbox-panel\")} id=\"toolbox-content-console\">\n        <Suspense fallback={<Loader />}>\n          <NewConsoleRoot />\n        </Suspense>\n      </div>\n    </div>\n  );\n}\n\nfunction InspectorPanel() {\n  return (\n    <div className={classnames(\"toolbox-panel theme-body\")} id=\"toolbox-content-inspector\">\n      <WaitForReduxSlice\n        slice=\"inspector\"\n        loading={\n          <div className=\"align-center m-auto flex w-full justify-center\">\n            <div className=\"relative flex w-96 flex-col items-center rounded-lg bg-white/75 p-8 py-4\">\n              <ReplayLogo wide size=\"lg\" />\n              <div>Inspector is loading...</div>\n            </div>\n          </div>\n        }\n      >\n        <React.Suspense fallback={null}>\n          <InspectorApp />\n        </React.Suspense>\n      </WaitForReduxSlice>\n    </div>\n  );\n}\n\nfunction PanelButtonsScrollOverflowGradient() {\n  return <div className=\"secondary-toolbox-scroll-overflow-gradient\"></div>;\n}\n\nexport default function SecondaryToolboxSuspenseWrapper() {\n  return (\n    <Suspense fallback={<Loader />}>\n      <SecondaryToolbox />\n    </Suspense>\n  );\n}\n\nfunction SecondaryToolbox() {\n  const selectedPanel = useAppSelector(getSelectedPanel);\n  const hasReactComponents = useAppSelector(selectors.hasReactComponents);\n  const toolboxLayout = useAppSelector(getToolboxLayout);\n  const reduxAnnotations = useContext(ReduxAnnotationsContext);\n  const dispatch = useAppDispatch();\n\n  const recordingCapabilities = getRecordingCapabilitiesSuspense();\n  const { value: chromiumNetMonitorEnabled } = useFeature(\"chromiumNetMonitor\");\n\n  if (selectedPanel === \"react-components\" && !hasReactComponents) {\n    dispatch(setSelectedPanel(\"console\"));\n  }\n\n  const hasReduxAnnotations = reduxAnnotations.length > 0;\n\n  return (\n    <div className={classnames(`secondary-toolbox rounded-lg`)}>\n      <header className=\"secondary-toolbox-header\">\n        <PanelButtons\n          hasReactComponents={hasReactComponents}\n          hasReduxAnnotations={hasReduxAnnotations}\n          recordingCapabilities={recordingCapabilities}\n          toolboxLayout={toolboxLayout}\n        />\n        <div className=\"secondary-toolbox-right-buttons-container flex\">\n          <PanelButtonsScrollOverflowGradient />\n          <ShowVideoButton />\n          <ToolboxOptions />\n        </div>\n      </header>\n      <Redacted className=\"secondary-toolbox-content bg-chrome text-xs\">\n        {(chromiumNetMonitorEnabled || recordingCapabilities.supportsNetworkRequests) && (\n          <Panel isActive={selectedPanel === \"network\"}>\n            <NetworkMonitor />\n          </Panel>\n        )}\n        <Panel isActive={selectedPanel === \"console\"}>\n          <ConsolePanel />\n        </Panel>\n        <Panel isActive={selectedPanel === \"inspector\"}>\n          <InspectorPanel />\n        </Panel>\n        <Panel isActive={selectedPanel === \"react-components\"}>\n          <ReactDevtoolsPanel />\n        </Panel>\n        <Panel isActive={selectedPanel === \"redux-devtools\"}>\n          <ReduxDevToolsPanel />\n        </Panel>\n        {/* _\n          Don't_ render an `<Offscreen>` around the editor.\n          It appears that this causes React to unmount and remount\n          the class components, and we end up with a duplicate\n          CodeMirror instance or similar, and the entire editor freezes\n          and becomes non-interactive. If we skip that, toggling the \"Sources\" \n          tab works just fine as expected.\n        */}\n        {toolboxLayout !== \"ide\" && selectedPanel === \"debugger\" && <EditorPane />}\n      </Redacted>\n    </div>\n  );\n}\n\nfunction Panel({ children, isActive }: { children: ReactNode; isActive: boolean }) {\n  return <LazyOffscreen mode={isActive ? \"visible\" : \"hidden\"}>{children}</LazyOffscreen>;\n}\n","/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at <http://mozilla.org/MPL/2.0/>. */\n\n//\nimport React from \"react\";\n\nexport default class A11yIntention extends React.Component {\n  state = { keyboard: false };\n\n  handleKeyDown = () => {\n    this.setState({ keyboard: true });\n  };\n\n  handleMouseDown = () => {\n    this.setState({ keyboard: false });\n  };\n\n  render() {\n    return (\n      <div\n        className={this.state.keyboard ? \"A11y-keyboard\" : \"A11y-mouse\"}\n        onKeyDown={this.handleKeyDown}\n        onMouseDown={this.handleMouseDown}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at <http://mozilla.org/MPL/2.0/>. */\n\nimport React, { Component, useRef } from \"react\";\nimport { ConnectedProps, connect } from \"react-redux\";\n\nimport KeyShortcuts from \"devtools/client/shared/key-shortcuts\";\nimport { setUnexpectedError } from \"ui/actions/errors\";\nimport { useGetUserSettings } from \"ui/hooks/settings\";\nimport { getSelectedPanel } from \"ui/reducers/layout\";\nimport type { UIState } from \"ui/state\";\n\nimport actions from \"../actions\";\nimport A11yIntention from \"./A11yIntention\";\nimport { EditorPane } from \"./Editor/EditorPane\";\nimport ShortcutsContext from \"./Editor/ShortcutsContext\";\n\nconst mapStateToProps = (state: UIState) => ({\n  selectedPanel: getSelectedPanel(state),\n});\n\nconst connector = connect(mapStateToProps, {\n  refreshCodeMirror: actions.refreshCodeMirror,\n  setUnexpectedError,\n});\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\ntype DebuggerProps = PropsFromRedux & { wrapper: HTMLDivElement };\n\nclass Debugger extends Component<DebuggerProps> {\n  shortcuts = new KeyShortcuts({ window, target: this.props.wrapper });\n\n  componentDidMount() {\n    this.props.refreshCodeMirror();\n  }\n\n  componentDidUpdate(prevProps: DebuggerProps) {\n    const { selectedPanel, refreshCodeMirror } = this.props;\n\n    // Only refresh CodeMirror when moving from a non-debugger panel to the debugger panel. Otherwise,\n    // the gutter will keep errantly resizing between refreshes.\n    if (selectedPanel == \"debugger\" && prevProps.selectedPanel != selectedPanel) {\n      refreshCodeMirror();\n    }\n  }\n\n  // Important so that the tabs chevron updates appropriately when\n  // the user resizes the left or right columns\n  triggerEditorPaneResize() {\n    const editorPane = window.document.querySelector(\".editor-pane\");\n    if (editorPane) {\n      editorPane.dispatchEvent(new Event(\"resizeend\"));\n    }\n  }\n\n  render() {\n    return (\n      <ShortcutsContext.Provider value={this.shortcuts}>\n        <>\n          <A11yIntention>\n            <EditorPane />\n          </A11yIntention>\n        </>\n      </ShortcutsContext.Provider>\n    );\n  }\n}\n\nfunction DebuggerLoader(props: any) {\n  const wrapperNode = useRef<HTMLDivElement>(null);\n  const { loading: loadingSettings } = useGetUserSettings();\n  return (\n    <div className=\"debugger\" ref={wrapperNode}>\n      {loadingSettings ? null : <Debugger {...props} wrapper={wrapperNode.current} />}\n    </div>\n  );\n}\n\nexport default connector(DebuggerLoader);\n","import React from \"react\";\n\nimport DebuggerApp from \"devtools/client/debugger/src/components/App\";\n\nexport default function Toolbox() {\n  return (\n    <div id=\"toolbox\">\n      <div className=\"toolbox-top-panels\">\n        <div className=\"toolbox-panel text-xs\" id=\"toolbox-content-debugger\">\n          <DebuggerApp />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport { getPaneCollapse } from \"devtools/client/debugger/src/selectors\";\nimport SplitBox from \"devtools/client/shared/components/splitter/SplitBox\";\nimport Video from \"ui/components/Video\";\nimport { getRecordingTarget } from \"ui/reducers/app\";\nimport { getShowVideoPanel, getToolboxLayout } from \"ui/reducers/layout\";\nimport { useAppSelector } from \"ui/setup/hooks\";\nimport { ToolboxLayout } from \"ui/state/layout\";\nimport { prefs } from \"ui/utils/prefs\";\n\nimport SecondaryToolbox from \"./SecondaryToolbox\";\nimport Toolbox from \"./Toolbox\";\n\nconst useGetShowVideo = () => {\n  const recordingTarget = useAppSelector(getRecordingTarget);\n  const showVideoPanel = useAppSelector(getShowVideoPanel);\n  return showVideoPanel && recordingTarget !== \"node\";\n};\n\nconst Vertical = () => {\n  const showVideo = useGetShowVideo();\n\n  return (\n    <SplitBox\n      style={{ width: \"100%\", overflow: \"hidden\" }}\n      splitterSize={8}\n      initialSize={prefs.secondaryPanelHeight.toString() as `${number}px`}\n      onResizeEnd={(size: string) => {\n        prefs.secondaryPanelHeight = size;\n      }}\n      minSize={showVideo ? \"10%\" : \"100%\"}\n      maxSize={showVideo ? \"70%\" : \"100%\"}\n      vert={true}\n      startPanel={<SecondaryToolbox />}\n      endPanel={showVideo && <Video />}\n      endPanelControl={false}\n    />\n  );\n};\n\nconst Horizontal = () => {\n  const showVideo = useGetShowVideo();\n\n  return (\n    <SplitBox\n      style={{ width: \"100%\", overflow: \"hidden\" }}\n      splitterSize={8}\n      initialSize={prefs.secondaryPanelHeight.toString() as `${number}px`}\n      onResizeEnd={(size: string) => {\n        prefs.secondaryPanelHeight = size;\n      }}\n      minSize={showVideo ? \"10%\" : \"0\"}\n      maxSize={showVideo ? \"70%\" : \"0\"}\n      vert={false}\n      startPanel={showVideo && <Video />}\n      endPanel={<SecondaryToolbox />}\n      endPanelControl={false}\n    />\n  );\n};\n\nfunction minSize(sidePanelCollapsed: boolean, toolboxLayout: ToolboxLayout): `${number}px` {\n  if (!sidePanelCollapsed && toolboxLayout === \"ide\") {\n    return \"300px\";\n  }\n\n  if (!sidePanelCollapsed || toolboxLayout === \"ide\") {\n    return \"200px\";\n  }\n\n  return \"0px\";\n}\n\nfunction maxSize(\n  sidePanelCollapsed: boolean,\n  toolboxLayout: ToolboxLayout\n): `${number}` | `${number}%` | `${number}px` {\n  if (toolboxLayout === \"ide\") {\n    return \"80%\";\n  }\n\n  if (sidePanelCollapsed) {\n    return \"0\";\n  }\n\n  return String(prefs.sidePanelSize) as `${number}px`;\n}\n\nexport default function Viewer() {\n  const toolboxLayout = useAppSelector(getToolboxLayout);\n  const sidePanelCollapsed = useAppSelector(getPaneCollapse);\n\n  return (\n    <SplitBox\n      startPanel={toolboxLayout === \"ide\" ? <Toolbox /> : null}\n      endPanel={toolboxLayout === \"left\" ? <Vertical /> : <Horizontal />}\n      endPanelControl={false}\n      initialSize={prefs.toolboxSize as `${number}px`}\n      minSize={minSize(sidePanelCollapsed, toolboxLayout)}\n      maxSize={maxSize(sidePanelCollapsed, toolboxLayout)}\n      onMove={(num: number) => (prefs.toolboxSize = `${num}px`)}\n      splitterSize={8}\n      style={{ width: \"100%\", overflow: \"hidden\" }}\n      vert={true}\n    />\n  );\n}\n","import React, { useEffect, useRef, useState } from \"react\";\n\nexport default function LoadingProgressBar({ initialProgress = 0 }) {\n  const [displayedProgress, setDisplayedProgress] = useState(initialProgress);\n  const key = useRef<any>(null);\n\n  useEffect(() => {\n    return () => {\n      clearTimeout(key.current);\n    };\n  }, []);\n\n  useEffect(() => {\n    key.current = setTimeout(() => {\n      if (displayedProgress == 100) {\n        return clearTimeout(key.current);\n      }\n\n      const increment = Math.random();\n      const decayed = increment * ((100 - displayedProgress) / 10);\n      const newDisplayedProgress = displayedProgress + decayed;\n\n      setDisplayedProgress(newDisplayedProgress);\n    }, 200);\n  }, [displayedProgress]);\n\n  return <div className=\"loading-progress-bar z-10\" style={{ width: `${displayedProgress}%` }} />;\n}\n","import { features, prefs } from \"devtools/client/inspector/prefs\";\n\ndeclare global {\n  interface AppHelpers {\n    inspector?: {\n      prefs: typeof prefs;\n      features: typeof features;\n    };\n  }\n}\n\nwindow.app.inspector = { prefs, features };\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Popup\":\"Popup_Popup__WyOQR\",\"UpArrow\":\"Popup_UpArrow__a7fYa\",\"DownArrow\":\"Popup_DownArrow__zB9Lz\",\"ArrowBackground\":\"Popup_ArrowBackground__RHjdA\",\"ArrowForeground\":\"Popup_ArrowForeground__HWdG7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"RegularExpressionLiteral\":\"SyntaxHighlightedExpression_RegularExpressionLiteral__XPY8X\",\"IdentifierName\":\"SyntaxHighlightedExpression_IdentifierName__XcqLl\",\"Invalid\":\"SyntaxHighlightedExpression_Invalid__lzr5w\",\"NumericLiteral\":\"SyntaxHighlightedExpression_NumericLiteral__7_9pF\",\"Punctuator\":\"SyntaxHighlightedExpression_Punctuator__DJIE0\",\"StringLiteral\":\"SyntaxHighlightedExpression_StringLiteral__vlzg_\",\"WhiteSpace\":\"SyntaxHighlightedExpression_WhiteSpace__uYerv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ConsoleRoot\":\"ConsoleRoot_ConsoleRoot__fFreM\",\"ConsoleActions\":\"ConsoleRoot_ConsoleActions__LVkGN\",\"MenuToggleButton\":\"ConsoleRoot_MenuToggleButton__w5DYh\",\"DeleteTerminalExpressionButton\":\"ConsoleRoot_DeleteTerminalExpressionButton__1UZ4E\",\"MenuToggleButtonIcon\":\"ConsoleRoot_MenuToggleButtonIcon__oIoCT\",\"DeleteTerminalExpressionIcon\":\"ConsoleRoot_DeleteTerminalExpressionIcon__fSg7_\",\"FilterColumn\":\"ConsoleRoot_FilterColumn__fuXRV\",\"MessageColumn\":\"ConsoleRoot_MessageColumn__W1OGm\",\"ConsoleRootOpen\":\"ConsoleRoot_ConsoleRootOpen__JgGEu\",\"Row\":\"ConsoleRoot_Row__IUi0K\",\"Loader\":\"ConsoleRoot_Loader__z9T7Q\",\"ErrorBoundaryFallback\":\"ConsoleRoot_ErrorBoundaryFallback__uqMMd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"ConsoleSearch_Container__HCZJH\",\"Icon\":\"ConsoleSearch_Icon__xYNq3\",\"Input\":\"ConsoleSearch_Input__PUJXG\",\"Results\":\"ConsoleSearch_Results__8aS1U\",\"ResultsIconButton\":\"ConsoleSearch_ResultsIconButton__jCtN6\",\"ResultsIcon\":\"ConsoleSearch_ResultsIcon__YTcpU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ContextMenu\":\"ContextMenu_ContextMenu__GL4R_\",\"ContextMenuItem\":\"ContextMenu_ContextMenuItem__QezhD\",\"ColorBadge\":\"ContextMenu_ColorBadge__diURh\",\"ColorBadgeClear\":\"ContextMenu_ColorBadgeClear__J3QoY\",\"UnicornBadge\":\"ContextMenu_UnicornBadge__bY0EM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CurrentTimeIndicator\":\"CurrentTimeIndicator_CurrentTimeIndicator__Bdl98\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AddCommentButton\":\"MessageHoverButton_AddCommentButton__AJvJY\",\"ConsoleMessageHoverButton\":\"MessageHoverButton_ConsoleMessageHoverButton__XSaIc\",\"AddCommentButtonIcon\":\"MessageHoverButton_AddCommentButtonIcon__z7w24\",\"ConsoleMessageHoverButtonIcon\":\"MessageHoverButton_ConsoleMessageHoverButtonIcon__EKfxe\",\"Label\":\"MessageHoverButton_Label__YoO6l\",\"LabelHovered\":\"MessageHoverButton_LabelHovered__a5O8s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"MessagesList_Container__BiWx5\",\"ContainerPending\":\"MessagesList_ContainerPending__K_0yT\",\"CountRow\":\"MessagesList_CountRow___Xumc\",\"OverflowRow\":\"MessagesList_OverflowRow__1_c0y\",\"OverflowRowIcon\":\"MessagesList_OverflowRowIcon__W3jGl\",\"OverflowLink\":\"MessagesList_OverflowLink__OC26I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Source\":\"Source_Source__cFd3V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"StackGrid\":\"StackRenderer_StackGrid__81OD8\",\"Frame\":\"StackRenderer_Frame__674f9\",\"SourceColumn\":\"StackRenderer_SourceColumn__GlUd2\",\"Source\":\"StackRenderer_Source__ouLA2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"EventCategory_Header__InzO5\",\"HeaderWrapper\":\"EventCategory_HeaderWrapper__lhzNJ\",\"Category\":\"EventCategory_Category__dm9x5\",\"List\":\"EventCategory_List__EyLMb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"EventType\":\"EventType_EventType__5HPmO\",\"EventTypeDisabled\":\"EventType_EventTypeDisabled__r2KJk\",\"Checkbox\":\"EventType_Checkbox__bLDJQ\",\"Label\":\"EventType_Label__Y2Sg_\",\"CategoryPrefix\":\"EventType_CategoryPrefix__0TNu4\",\"ArrowIcon\":\"EventType_ArrowIcon__jHopW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"EventsList\":\"EventsList_EventsList__XqJRX\",\"Header\":\"EventsList_Header__WdRpZ\",\"FilterInput\":\"EventsList_FilterInput__OmBCp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Input\":\"FilterText_Input__9_b_C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Filters\":\"FilterToggles_Filters__GdQol\",\"Filter\":\"FilterToggles_Filter__sxaaM\",\"Divider\":\"FilterToggles_Divider__wCUSu\",\"ExceptionsErrorIcon\":\"FilterToggles_ExceptionsErrorIcon__RnP_V\",\"SpinnerIcon\":\"FilterToggles_SpinnerIcon__V9RYt\",\"spin\":\"FilterToggles_spin__1Lj9j\",\"EmptySpaceFiller\":\"FilterToggles_EmptySpaceFiller__34vxC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Row\":\"shared_Row__SEXkn\",\"ErrorRow\":\"shared_ErrorRow__tPzO5\",\"TraceRow\":\"shared_TraceRow__8ij30\",\"WarningRow\":\"shared_WarningRow__0nR4B\",\"EagerEvaluationIcon\":\"shared_EagerEvaluationIcon__rMJ4u\",\"ErrorIcon\":\"shared_ErrorIcon___7L4F\",\"PromptIcon\":\"shared_PromptIcon__gnRIK\",\"WarningIcon\":\"shared_WarningIcon__Xda2a\",\"Focused\":\"shared_Focused__GeIzk\",\"PrimaryRowWithTimestamps\":\"shared_PrimaryRowWithTimestamps___Mkul\",\"PrimaryRowWithoutTimestamps\":\"shared_PrimaryRowWithoutTimestamps__qUfe5\",\"TerminalPrimaryRowWithTimestamps\":\"shared_TerminalPrimaryRowWithTimestamps__1AIZI\",\"TerminalPrimaryRowWithoutTimestamps\":\"shared_TerminalPrimaryRowWithoutTimestamps__VUkhE\",\"LogContents\":\"shared_LogContents__LU9Bt\",\"LogContentsEmpty\":\"shared_LogContentsEmpty__d9_1L\",\"Source\":\"shared_Source__k92oF\",\"TimeStamp\":\"shared_TimeStamp__J3yq7\",\"MessageText\":\"shared_MessageText__Fdr0z\",\"TerminalLogContents\":\"shared_TerminalLogContents__nuDLg\",\"Exception\":\"shared_Exception___EU7D\",\"BadgeContainer\":\"shared_BadgeContainer__CGSmI\",\"ColorBadge\":\"shared_ColorBadge__9Sf0W\",\"UnicornBadge\":\"shared_UnicornBadge__y3rwI\",\"DefaultColorBadge\":\"shared_DefaultColorBadge__blW04\",\"PulsingBadge\":\"shared_PulsingBadge__h6_gA\",\"pulse\":\"shared_pulse__7VWc9\",\"Unicorn\":\"shared_Unicorn__unnFm\",\"Expandable\":\"shared_Expandable__lSdA0\",\"AnalysisError\":\"shared_AnalysisError__6s_Zw\",\"ErrorBoundaryFallback\":\"shared_ErrorBoundaryFallback__uYp6J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SourcePreviewInspector\":\"SourcePreviewInspector_SourcePreviewInspector__lkPJw\",\"Header\":\"SourcePreviewInspector_Header__nV0w1\",\"FixedSizeInspectorWrapper\":\"SourcePreviewInspector_FixedSizeInspectorWrapper__kvODP\",\"InspectorWrapper\":\"SourcePreviewInspector_InspectorWrapper__YcbmC\",\"Inspector\":\"SourcePreviewInspector_Inspector__a7r6r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Input\":\"AutoComplete_Input__O7VL0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"List\":\"AutoCompleteList_List__bpl_W\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Row\":\"AutoCompleteListRow_Row__Y9kTl\",\"RowSelected\":\"AutoCompleteListRow_RowSelected__fWFo9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BadgePicker\":\"BadgePicker_BadgePicker__irNLt\",\"BadgePickerButton\":\"BadgePicker_BadgePickerButton__Kl9MU\",\"BadgePickerButtonToggle\":\"BadgePicker_BadgePickerButtonToggle__4x7TO\",\"BadgePickerButtonIcon\":\"BadgePicker_BadgePickerButtonIcon__6tgos\",\"BadgePickerPopOut\":\"BadgePicker_BadgePickerPopOut__q0v5E\",\"BadgePickerButtonCurrent\":\"BadgePicker_BadgePickerButtonCurrent__p_0_p\",\"BadgePickerOpen\":\"BadgePicker_BadgePickerOpen__Wlyc_\",\"BadgePickerClosed\":\"BadgePicker_BadgePickerClosed__gpnAl\",\"expand\":\"BadgePicker_expand__7ijBs\",\"contract\":\"BadgePicker_contract__1rrfx\",\"UnicornBadge\":\"BadgePicker_UnicornBadge__KA4oL\",\"Unicorn\":\"BadgePicker_Unicorn__HCxr6\",\"fadein\":\"BadgePicker_fadein__uB2md\",\"fadeout\":\"BadgePicker_fadeout__hn3Rd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"CommentButton_Container__CNkOf\",\"Button\":\"CommentButton_Button__wyXv7\",\"PausedStyle\":\"CommentButton_PausedStyle__B0Bnm\",\"NotPausedStyle\":\"CommentButton_NotPausedStyle__g9Vmb\",\"ButtonLabel\":\"CommentButton_ButtonLabel__zTBWa\",\"expand\":\"CommentButton_expand__OJjM1\",\"Closed\":\"CommentButton_Closed__159yt\",\"contract\":\"CommentButton_contract__S4wmB\",\"ButtonIcon\":\"CommentButton_ButtonIcon__uSLrK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CurrentExecutionPoint\":\"CurrentLineHighlight_CurrentExecutionPoint__rz74_\",\"CurrentSearchResult\":\"CurrentLineHighlight_CurrentSearchResult__UfD4M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Panel\":\"PointPanel_Panel__gpYgq\",\"Loader\":\"PointPanel_Loader__zaCV6\",\"LayoutRow\":\"PointPanel_LayoutRow__jGXTt\",\"MainColumn\":\"PointPanel_MainColumn__f_2oq\",\"SecondaryColumn\":\"PointPanel_SecondaryColumn__uSSCl\",\"FixedHeightRow\":\"PointPanel_FixedHeightRow___w57v\",\"ContentWrapper\":\"PointPanel_ContentWrapper__kalt9\",\"ContentWrapperInvalid\":\"PointPanel_ContentWrapperInvalid__HNUdN\",\"ContentWrapperTooManyPoints\":\"PointPanel_ContentWrapperTooManyPoints__B24Xb\",\"Content\":\"PointPanel_Content__W0Sca\",\"AddConditionButton\":\"PointPanel_AddConditionButton__z7M6x\",\"CancelButton\":\"PointPanel_CancelButton__4WnVw\",\"EditButton\":\"PointPanel_EditButton__ug8Ky\",\"SaveButton\":\"PointPanel_SaveButton__XRRGq\",\"EditButtonIcon\":\"PointPanel_EditButtonIcon__an18j\",\"ContentInput\":\"PointPanel_ContentInput__dHgvF\",\"ContentPrefixLabel\":\"PointPanel_ContentPrefixLabel__DQh_6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NextHitPointButton\":\"PointPanelTimeline_NextHitPointButton__MRAh2\",\"PreviousHitPointButton\":\"PointPanelTimeline_PreviousHitPointButton__AjPLl\",\"PreviousHitPointButtonIcon\":\"PointPanelTimeline_PreviousHitPointButtonIcon__FWmqJ\",\"NextHitPointButtonIcon\":\"PointPanelTimeline_NextHitPointButtonIcon__uE0BC\",\"HitPointsLabel\":\"PointPanelTimeline_HitPointsLabel__h4QcG\",\"HitPointsLabelTooMany\":\"PointPanelTimeline_HitPointsLabelTooMany__XwroT\",\"HitPointTimeline\":\"PointPanelTimeline_HitPointTimeline__K9cXJ\",\"HitPointTimelineDisabled\":\"PointPanelTimeline_HitPointTimelineDisabled__tpR5p\",\"HitPointTimelineBackground\":\"PointPanelTimeline_HitPointTimelineBackground__mvADy\",\"HitPointButton\":\"PointPanelTimeline_HitPointButton__KxHB9\",\"HitPointButtonCurrent\":\"PointPanelTimeline_HitPointButtonCurrent__nIHKL\",\"ProgressBarOpaque\":\"PointPanelTimeline_ProgressBarOpaque__MoDlM\",\"ProgressBarPartiallyOpaque\":\"PointPanelTimeline_ProgressBarPartiallyOpaque__z6HDl\",\"TimeTool\":\"PointPanelTimeline_TimeTool__GG7FG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Popup\":\"PreviewPopup_Popup__I3ymI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Source\":\"Source_Source__t3ikc\",\"SourceList\":\"Source_SourceList__GbYzM\",\"Loader\":\"Source_Loader___C5HU\",\"HoveredTarget\":\"Source_HoveredTarget__rUrX0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Shimmer\":\"SourceLineLoadingPlaceholder_Shimmer__LSpXD\",\"shimmer\":\"SourceLineLoadingPlaceholder_shimmer__qrvLd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"List\":\"SourceList_List__jTDAV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Row\":\"SourceListRow_Row__2AILC\",\"LineWithHits\":\"SourceListRow_LineWithHits__PBAin\",\"LineWithoutHits\":\"SourceListRow_LineWithoutHits__3G63k\",\"LineNumber\":\"SourceListRow_LineNumber__rLqVV\",\"Header\":\"SourceListRow_Header__HYuCV\",\"HoverButton\":\"SourceListRow_HoverButton__f4Fql\",\"HoverButtonIcon\":\"SourceListRow_HoverButtonIcon__cK7iF\",\"BreakpointIcon\":\"SourceListRow_BreakpointIcon__hZ4Yo\",\"DisabledBreakpointIcon\":\"SourceListRow_DisabledBreakpointIcon__rFqqC\",\"Icon\":\"SourceListRow_Icon__IRBKk\",\"BreakpointToggleOff\":\"SourceListRow_BreakpointToggleOff__V3dNn\",\"BreakpointToggleOn\":\"SourceListRow_BreakpointToggleOn__N6YzZ\",\"LineHitCountBar\":\"SourceListRow_LineHitCountBar__B9vpW\",\"LineHitCountBar0\":\"SourceListRow_LineHitCountBar0__HSOpV\",\"LineHitCountBar1\":\"SourceListRow_LineHitCountBar1__bYa0Z\",\"LineHitCountBar2\":\"SourceListRow_LineHitCountBar2__Ay7Ep\",\"LineHitCountBar3\":\"SourceListRow_LineHitCountBar3__cNQq7\",\"LineHitCountLabel\":\"SourceListRow_LineHitCountLabel__X6iqP\",\"LineHitCountLabel0\":\"SourceListRow_LineHitCountLabel0__q__JM\",\"LineHitCountLabel1\":\"SourceListRow_LineHitCountLabel1__MqaOQ\",\"LineHitCountLabel2\":\"SourceListRow_LineHitCountLabel2__FIf5H\",\"LineHitCountLabel3\":\"SourceListRow_LineHitCountLabel3__lIoaY\",\"LineSegment\":\"SourceListRow_LineSegment__hd2Zl\",\"BreakpointButton\":\"SourceListRow_BreakpointButton__ygKLE\",\"LineSegmentsAndPointPanel\":\"SourceListRow_LineSegmentsAndPointPanel__fdLA1\",\"CurrentLine\":\"SourceListRow_CurrentLine__FlX17\",\"PointPanel\":\"SourceListRow_PointPanel__xJBbM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"SourceSearch_Container__0XFUm\",\"InputAndResults\":\"SourceSearch_InputAndResults__KibjU\",\"SearchIcon\":\"SourceSearch_SearchIcon__pRYjD\",\"Input\":\"SourceSearch_Input__Oa_qt\",\"Results\":\"SourceSearch_Results__85_Zu\",\"ResultsIconButton\":\"SourceSearch_ResultsIconButton__hbEtE\",\"ResultsIconButtonActive\":\"SourceSearch_ResultsIconButtonActive__uYBcl\",\"ResultsIcon\":\"SourceSearch_ResultsIcon___czfa\",\"Modifiers\":\"SourceSearch_Modifiers__fBd5E\",\"WholeWordText\":\"SourceSearch_WholeWordText__I2moe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"StreamingSourceLoadingProgressHeader_Container__qrwTg\",\"ParsedProgressBar\":\"StreamingSourceLoadingProgressHeader_ParsedProgressBar__2310I\",\"RawProgressBar\":\"StreamingSourceLoadingProgressHeader_RawProgressBar__0F4u8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Code\":\"SyntaxHighlightedLine_Code__k_lrj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Root\":\"AddCommentButton_Root__nBw_W\",\"TextFade\":\"AddCommentButton_TextFade__LASal\",\"AddCommentButton\":\"AddCommentButton_AddCommentButton__8UEi_\",\"isOpened\":\"AddCommentButton_isOpened___Pshr\",\"isPausedOnHit\":\"AddCommentButton_isPausedOnHit__iFeFx\",\"Icon\":\"AddCommentButton_Icon__S30eX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Root\":\"Badge_Root__tzyTr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Checkbox_Container__LyG0q\",\"Input\":\"Checkbox_Input__MbHM0\",\"Label\":\"Checkbox_Label__iK0jd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Picker\":\"Picker_Picker__wDZag\",\"PickerFill\":\"Picker_PickerFill__HUkQJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PrefixBadge\":\"PrefixBadgePicker_PrefixBadge__YL_yl\",\"DefaultBadge\":\"PrefixBadgePicker_DefaultBadge___G5yC\",\"ColorBadge\":\"PrefixBadgePicker_ColorBadge__7UrTJ\",\"UnicornBadge\":\"PrefixBadgePicker_UnicornBadge__h95Wq\",\"PrefixBadgePicker\":\"PrefixBadgePicker_PrefixBadgePicker__2xHy8\",\"green\":\"PrefixBadgePicker_green__KnRgX\",\"orange\":\"PrefixBadgePicker_orange__8tqxE\",\"purple\":\"PrefixBadgePicker_purple__dSec_\",\"yellow\":\"PrefixBadgePicker_yellow__srzgo\",\"unicorn\":\"PrefixBadgePicker_unicorn__x_iJ_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"HitsBadge0\":\"LineHitCounts_HitsBadge0__f8RL_\",\"HitsBadge1\":\"LineHitCounts_HitsBadge1__uB_AV\",\"HitsBadge2\":\"LineHitCounts_HitsBadge2__dEqPZ\",\"HitsBadge3\":\"LineHitCounts_HitsBadge3__gsAE_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Popover\":\"Popover_Popover__kd9ti\",\"Children\":\"Popover_Children__w_fi_\",\"UpArrow\":\"Popover_UpArrow__2rz16\",\"DownArrow\":\"Popover_DownArrow___0ZiZ\",\"ArrowBackground\":\"Popover_ArrowBackground__DOCx7\",\"ArrowForeground\":\"Popover_ArrowForeground__B41ic\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"copy-container\":\"HttpBody_copy-container__aHluY\",\"copy-icon\":\"HttpBody_copy-icon__ksCcv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"requestDetails\":\"RequestDetails_requestDetails__KHDFZ\",\"request\":\"RequestDetails_request__2KrxM\",\"headerTable\":\"RequestDetails_headerTable__xqDhW\",\"title\":\"RequestDetails_title__1bMNK\",\"method\":\"RequestDetails_method__cE34S\",\"status\":\"RequestDetails_status__DdFoc\",\"row\":\"RequestDetails_row___3fVF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"requests\":\"RequestTable_requests__UN9L9\",\"row\":\"RequestTable_row__G_Z8g\",\"banner\":\"RequestTable_banner__mNJ_7\",\"future\":\"RequestTable_future__H1G8k\",\"unloaded\":\"RequestTable_unloaded__WYf3R\",\"selected\":\"RequestTable_selected__dHr_q\",\"current\":\"RequestTable_current__SEo3j\",\"end\":\"RequestTable_end__Vfh5V\",\"resizer\":\"RequestTable_resizer__Z4dzS\",\"seekBadge\":\"RequestTable_seekBadge__JKER_\",\"fastForward\":\"RequestTable_fastForward__5dAIC\",\"rewind\":\"RequestTable_rewind__Zz8aI\",\"verbose\":\"RequestTable_verbose__uARcK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ColorBadge\":\"PrefixBadge_ColorBadge__QLdIF\",\"UnicornBadge\":\"PrefixBadge_UnicornBadge__oiEXU\",\"unicorn\":\"PrefixBadge_unicorn__Uo4OZ\",\"purple\":\"PrefixBadge_purple__IG3Go\",\"green\":\"PrefixBadge_green__ucXCw\",\"orange\":\"PrefixBadge_orange__g4gFy\",\"yellow\":\"PrefixBadge_yellow__1yONJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"JSTermWrapper\":\"NewConsole_JSTermWrapper__lfnCi\",\"Loader\":\"NewConsole_Loader__z9T0y\"};"],"names":["WelcomeBox","dispatch","useAppDispatch","className","onClick","toggleCommandPalette","src","toggleQuickOpen","setSelectedPrimaryPanel","href","Toggle","enabled","setEnabled","disabled","classNames","checked","onChange","value","SourcemapError","why","setModal","SourcemapToggleSuspends","cursorPosition","client","useContext","ReplayClientContext","selectedSource","useAppSelector","getSelectedSource","selectedFrameId","getSelectedFrameId","sourcesState","state","sources","alternateSourceIdResult","getAlternateSourceIdSuspense","isSourceMapped","sourceId","showAlternateSource","id","SourcemapVisualizerLinkSuspends","visualizerURL","getSourcemapVisualizerURLSuspense","target","rel","trackEvent","Icon","size","filename","LOCAL_STORAGE_KEY","SourceFooter","setCursorPosition","useState","line","column","selectedSourceOnMountRef","useRef","useLayoutEffect","selectedSourceOnMount","current","codeMirror","document","querySelector","CodeMirror","timeoutId","scrollPosition","JSON","parse","key","localStorage","getItem","error","localStorageGetItem","setTimeout","display","scroller","scrollLeft","left","scrollTop","top","clearTimeout","scrollInfo","getScrollInfo","newScrollPosition","setItem","localStorageSetItem","stringify","useEffect","onCursorActivity","event","ch","doc","getCursor","on","off","cursorPositionUI","text","title","ErrorBoundary","Suspense","memo","closeContextMenu","type","ContextMenu","close","children","x","y","ref","useModalDismissSignal","ReactDOM","style","zIndex","body","GutterContextMenu","contextMenu","recordingId","useGetRecordingId","isAuthenticated","useAuth0","e","stopPropagation","createFloatingCodeComment","location","contextMenuItem","_excluded","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","ConsoleFiltersContext","createContext","ConsoleFiltersContextRoot","SessionContext","togglesLocalStorageKey","toggles","setToggles","useLocalStorage","showErrors","showLogs","showNodeModules","showTimestamps","showWarnings","filterByText","setFilterByText","deferredFilterByText","setDeferredFilterByText","eventTypes","setEventTypes","deferredEventTypes","setDeferredEventTypes","showExceptionsLocalStorageKey","showExceptions","setShowExceptions","deferredShowExceptions","setDeferredShowExceptions","update","useCallback","values","newEventTypes","newFilterByText","newShowExceptions","newToggles","_objectWithoutProperties","prevToggles","startTransition","prevEventTypes","isTransitionPending","useTransition","consoleFiltersContext","useMemo","eventTypesForDisplay","filterByDisplayText","showExceptionsForDisplay","_jsx","Provider","STANDARD_EVENT_CATEGORIES","category","events","label","eventTypeToEntryPointMap","Map","eventCategoryCounts","inProgressEventCategoryCountsWakeable","getEventCategoryCountsSuspense","createWakeable","async","pendingEventCategoryCounts","allEvents","getEventCountForTypes","map","c","flat","eventType","count","resolve","fetchEventCategoryCounts","getEventTypeEntryPointsSuspense","record","get","status","STATUS_PENDING","set","entryPoints","runAnalysis","effectful","eventHandlerEntryPoints","mapper","MAPPER","entryPoint","preCacheObjects","pauseId","data","objects","eventLogs","wakeable","STATUS_RESOLVED","fetchEventTypeEntryPoints","EMPTY_ARRAY","inFlightFocusRange","inFlightWakeable","lastFetchDidFailTooManyPoints","lastFetchedFocusRange","lastFetchedExceptions","lastFilteredExceptions","lastFilteredFocusRange","tooManyPointsListeners","Set","getStatus","subscribeForStatus","callback","add","delete","notifyStatusSubscribers","getExceptionsSuspense","focusRange","begin","point","end","isRangeEqual","shouldFetch","isRangeSubset","results","exceptionPoints","EXCEPTIONS_MAPPER","range","undefined","result","isCommandError","ProtocolError","console","fetchExceptions","exception","FIREFOX_INTERNAL_REGEX","isFirefoxInternalMessage","message","match","messageToNodeModuleCache","WeakMap","isInNodeModules","has","topFrame","stack","frames","find","frame","frameId","returnValue","getSourceIfAlreadyLoaded","url","includes","lastFetchDidOverflow","lastFetchError","lastFetchedMessages","lastFilteredCategoryCounts","lastFilteredCountAfter","lastFilteredCountBefore","lastFilteredMessages","getMessagesSuspense","countAfter","countBefore","didOverflow","messages","categoryCounts","errors","logs","warnings","overflow","findMessages","protocolMessage","time","printPointRange","reject","fetchMessages","beginPoint","endPoint","isExecutionPointsLessThan","isExecutionPointsGreaterThan","level","isEventLog","loggable","isPointInstance","isProtocolMessage","isTerminalExpression","isUncaughtException","getLoggableExecutionPoint","timeStampedHitPoint","Error","getLoggableTime","loggableSort","a","b","aPoint","bPoint","aIsTerminalExpression","bIsTerminalExpression","compareExecutionPoints","LoggablesContext","LoggablesContextRoot","messageListRef","pointsForAnalysis","points","PointsContext","FocusContext","eventTypesToLoad","filteredEventHandlerTypes","entries","suspendInParallel","preFilteredMessages","exceptions","focusedEventLogs","eventLog","isExecutionPointsWithinRange","pointInstances","shouldLog","hitPoints","getHitPointsForLocationSuspense","condition","hitPoint","terminalExpressions","TerminalContext","sortedTerminalExpressions","terminalExpression","sortedLoggables","sort","filterByLowerCaseText","toLocaleLowerCase","list","childNodes","node","element","hasAttribute","textContent","matches","NagHat","mainText","subText","nagType","nags","hooks","shouldShowNag","boxShadow","background","MaterialIcon","iconSize","EditorNag","Nag","ConsoleNag","TimeTooltip","date","Date","seconds","getSeconds","toString","padStart","minutes","getMinutes","PortalTooltip","tooltip","followX","hoveredCoordinates","setHoveredCoordinates","containerRef","onMouseMove","clientX","clientY","onMouseLeave","createPortal","PortalChild","containerRect","getBoundingClientRect","hoveredX","targetX","UnloadedRegions","loadedRegions","getLoadedRegions","zoomRegion","getZoomRegion","focusRegion","getFocusRegion","loaded","beginTime","endTime","userVisibleTimeStampedPointRange","overlappingRegions","overlap","loading","focusedAndLoaded","recordingEndTime","loadedRegionStart","getVisiblePosition","zoom","loadedRegionEnd","width","clamp","toBigInt","num","BigInt","hasPrimaryHighlight","hoveredItem","connector","connect","executionPoint","getExecutionPoint","selectors","seek","actions","setHoveredItem","clearHoveredItem","BreakpointTimelinePoint","breakpoint","index","leftPercentOffset","pointInt","executionInt","classnames","past","future","pause","pointWidth","onMouseEnter","inBreakpointPanel","C","MemoizedBreakpointTimelinePoint","prevProps","nextProps","hasChanged","selector","displayName","Points","duration","displayedPoints","previousDisplayed","p","currentTime","UIActions","hitPointStatus","hoveredTime","setHoveredTime","timelineRef","hoverPercent","percent","currentTarget","clickLeft","clickPosition","Math","max","ceil","mostRecentPaintOrMouseEvent","height","Picker","_ref","backgroundColor","props","previousId","transitioning","isActive","setIsActive","isOpen","setIsOpen","transition","opacity","_jsxs","motion","styles","initial","animate","variants","opened","staggerChildren","closed","layout","borderRadius","Children","child","isValidElement","name","isToggle","showToggle","isChildActive","wasChildActive","childVariants","cloneElement","scale","gridColumn","gridRow","nextIsOpen","nextActiveId","badges","PrefixBadgePicker","initialValue","onSelect","activeBadge","setActiveBadge","React","prefixBadgeName","ToggleButton","badge","active","PrefixBadgeButton","editPoint","newBadge","getPrefixBadgeBackgroundColorClassName","prefixBadge","numberStatus","total","maxStatusLength","numberLength","PanelStatus","getCurrentTime","hitPointsLength","previousTimeIndex","sortedLastIndex","BreakpointNavigationCommands","prev","next","navigateToPoint","prevDisabled","nextDisabled","transform","ConnectedBreakpointNavigation","editing","setShowCondition","showCondition","isEmpty","findLast","compareNumericStrings","hits","empty","Loader","SuspendingBreakpointNavigation","fallback","TEXT","editPrompt","savePrompt","success","FirstEditNag","step","setStep","PROPERTY_PLACEHOLDER","normalizeString","str","toLowerCase","replace","fuzzyFilter","candidates","query","isMemberExpression","expression","_isMemberExpression","parseExpression","tryToAutocompleteComputedProperty","ending","OBJECT_PROTOTYPE_PROPERTIES","getOwnPropertyNames","prototype","ARRAY_PROTOTYPE_PROPERTIES","Array","getPropertiesForObject","objectId","fetchObjectWithPreview","maxDepth","Infinity","properties","preview","objectProperties","unshift","prototypeId","prototypeProperties","shouldVariableAutocomplete","input","_isIdentifier","isIdentifier","getPropertyExpression","isDotNotation","parsed","property","generate","code","right","slice","computed","isBracketNotation","placeholderStr","_isStringLiteral","getCursorIndex","isArgument","propertyExpression","getLastExpression","insertAutocompleteMatch","autocompletedExpression","newLastArg","partialLastArg","RegExp","string","autocompleteLastArgument","getAutocompleteMatches","scopes","currentScope","matchingBinding","bindings","bindingNames","globalVariables","fetchObject","lastScope","globalScopeObjectId","getGlobalVariables","variableNames","getRemainingCompletedTextAfterCursor","exp","_isCallExpression","isCallExpression","lastArgNode","start","AppContainerPortal","containerNode","Match","isSelected","buttonNode","scrollIntoView","block","inline","textOverflow","AutocompleteMatches","leftOffset","selectedIndex","onMatchClick","options","itemData","listRef","lastSelectedIndexRef","scrollToItem","fontSize","marginLeft","minLeft","itemCount","itemSize","MatchRow","DEFAULT_OPTIONS","autofocus","onKeyPress","setValue","onSelection","onEditorMount","codemirrorOptions","enableCodeFolding","lineNumbers","lineWrapping","mode","globalVars","theme","styleActiveLine","tabIndex","readOnly","viewportMargin","disableSearchAddon","onKeyPressRef","setValueRef","onSelectionRef","onEditorMountRef","editorDidMount","editor","onBeforeChange","_","__","onKeyDown","obj","useEagerEvaluateExpression","returned","ThreadFront","pure","err","msg","eagerEvaluateExpression","useGetAsyncMatches","getMatches","setMatches","expressionRef","updateMatches","useGetScopeMatches","getPauseId","preferredGeneratedSources","getPreferredGeneratedSources","replayClient","getScopeMatchesForFrameScope","getFramesAsync","frameScopes","pickScopes","getScopesAsync","frameScope","getScopeMatches","getObjectWithPreviewHelper","getEvalMatches","pauseAndFrameId","evaluatedProperties","getEvaluatedProperties","useGetMatches","actualExpression","scopeMatches","evalMatches","getEvalMatchesForSelectedFrame","useGetEvalMatches","uniq","getShouldShowAutocomplete","hideAutocomplete","matchCount","Keys","DISMISS_KEYS","BACKSPACE","ENTER","TAB","ESCAPE","ARROW_RIGHT","ARROW_LEFT","EditorWithAutocomplete","onRegularKeyPress","onPreviewAvailable","opts","disableAutocomplete","autocompleteIndex","shouldShowAutocomplete","applyMatch","applySelectedMatch","moveAutocompleteCursor","resetAutocompleteIndex","setHideAutocomplete","isHidden","setIsHidden","setSelectedIndex","difference","matchesCount","useAutocomplete","origin","showAutocomplete","isTest","show","shiftKey","preventDefault","ARROW_DOWN","ARROW_UP","onAutocompleteKeyPress","PanelInput","onEnter","onEscape","PanelEditor","inputToFocus","toggleEditingOff","content","setContent","setCondition","logSyntaxError","setLogSyntaxError","conditionSyntaxError","setConditionSyntaxError","hasError","savePoint","conditional","parser","onConditionChange","onContentChange","viewBox","fill","iconSprite","AddCommentButton","forwardRef","isPausedOnHit","localRef","mergedRefs","mergeRefs","isHovered","setIsHovered","hoverRef","buttonClassnames","TextFade","visible","states","entering","entered","exiting","exited","unmounted","Transition","in","timeout","Popup","trigger","position","mouseEnterDelay","mouseLeaveDelay","getCodeMirror","require","getSyntaxHighlightedMarkup","markup","runMode","escapeHtml","Expression","dangerouslySetInnerHTML","__html","SummaryExpression","isEditable","isTeamDeveloper","MAX_POINTS_FOR_FULL_ANALYSIS","SummaryRow","Condition","rest","Log","hasCondition","PanelSummary","isHot","pausedOnHit","setInputToFocus","toggleEditingOn","conditionValue","logValue","isLoaded","focusInput","hitsCount","addComment","createFrameComment","enterFocusMode","Widget","insertAt","setNode","setLoading","_node","createElement","lineIndex","_widget","addLineWidget","above","prefs","clear","ConnectedPanel","setEditing","dismissNag","breakpointForSuspense","useDeferredValue","focusRegionForSuspense","isPending","filteredHitPoints","some","maxWidth","ToggleWidgetButtonSuspenseWrapper","columnBreakpoints","features","pointButton","ColumnBreakpoint","deletePoints","getDocument","widget","onContextMenu","bp","cloneNode","setAttribute","addEventListener","makeBookmark","bookmark","setBookmark","ColumnBreakpoints","focusedSourceId","visibleLines","SourcesContext","hitCountsMode","useStringPref","updateWidth","editorElement","getWrapperElement","gutterWidth","getGutterElement","newWidth","window","innerWidth","clientWidth","root","documentElement","setProperty","pointsByLine","reduce","lineNumber","from","breakpointPositionsByLine","getBreakpointPositionsSuspense","PointsForRow","breakpoints","breakpointsForLine","columns","getIndentation","lineMatch","innerHTML","lineClass","DebugLineRenderer","PureComponent","componentDidMount","this","setDebugLine","componentWillUnmount","clearDebugLine","componentDidUpdate","startOperation","endOperation","addLineClass","lineText","getLine","toEditorColumn","columnEnd","cm","getTokenEnd","markTextClass","debugExpression","markText","removeLineClass","render","DebugLine","getDebugLineLocationSuspense","DebugLineSuspenseWrapper","EditorLoadingBar","portalNode","LoadingProgressBar","initialProgress","random","editorMenuItems","cx","editorActions","items","accesskey","click","copyToTheClipboard","getRawSourceURL","copySourceUri2Item","showSource","showSourceMenuItem","open","sourceMapItem","editorItemActions","bindActionCreators","flashLineRange","getThreadContext","EditorMenu","Component","UNSAFE_componentWillUpdate","clearContextMenu","showMenu","EmptyLines","memoizedDrawnLinesRef","drawnLinesSet","animationFrameId","memoizedDrawnLines","disableEmptyLinesRaf","cancelAnimationFrame","requestAnimationFrame","getBreakpointPositionsAsync","lower","upper","operation","eachLine","lineHandle","getLineNumber","disableEmptyLines","StaticTooltip","targetNode","enableLargeText","useFeature","AWESOME_BACKGROUND","Wrapper","showWarning","showNag","LineNumberTooltipSuspends","keyModifiers","isMetaActive","meta","hoveredLineIndex","hoveredLineNode","hitCountsForAllLines","getSourceHitCountsSuspense","hitsForHoveredLine","hoveredLineNumber","lineHits","Loading","LineNumberTooltip","Popover","showTail","arrowRef","popoverRef","arrow","container","popover","ignoreMouseLeaveEventTimeout","onMouseLeaveWrapper","reposition","popoverRect","targetRect","arrowUp","popoverTop","popoverLeftMin","popoverLeftMax","popoverLeftPreferred","popoverLeft","min","arrowRect","arrowLeftMin","arrowLeftMax","arrowLeftPreferred","arrowLeft","observer","ResizeObserver","observe","removeEventListener","unobserve","disconnect","blockEvent","onMouseDown","onMouseUp","preserveAspectRatio","protocolValue","useClientValue","ObjectWrapper","Inspector","context","expandByDefault","clientValue","objectWithPreview","getObjectWithPreviewSuspense","header","lengthValue","getterValues","nodeName","sizeValue","regexpString","_Fragment","PropertiesRenderer","NewObjectInspector","SourcePreviewInspector","previewId","previewCleared","PreviewHighlight","classList","addHighlightToToken","remove","removeHighlightFromToken","tokenType","item","previewExpression","nextElementSibling","previousElementSibling","addHighlightToTargetSiblings","nextSibling","previousSibling","removeHighlightForTargetSiblings","getPreview","updatePreview","Preview","selecting","hoveredTarget","tokenPos","isPaused","startPreview","debounce","setState","cancel","updateListeners","codeMirrorWrapper","onTokenEnter","onTokenLeave","onScroll","SearchModBtn","modifiers","modVal","svgName","toggleFileSearchModifier","doSearch","preppedClass","AccessibleImage","getContext","searchOn","getActiveSearch","selectedContentLoaded","isFulfilled","getSourceContent","getFileSearchQuery","getFileSearchModifiers","searchResults","getFileSearchResults","setFileSearchQuery","setActiveSearch","closeFileSearch","traverseResults","SearchBar","constructor","super","closeSearch","ed","ctx","removeOverlay","clearSearch","inputFocused","getSelection","reverse","commonProps","selectedResultIndex","shortcuts","searchShortcut","searchAgainShortcut","shiftSearchAgainShortcut","toggleSearch","refs","resultList","scrollList","buildSummaryMsg","matchIndex","trim","shouldShowErrorEmoji","showClose","SearchInput","placeholder","summaryMsg","isLoading","onFocus","onBlur","showErrorEmoji","onHistoryScroll","handleNext","handlePrev","shouldFocus","renderSearchModifiers","handleClick","buttonClass","ShortcutsContext","getSourceFileName","appendIndex","fileName","split","pop","getSourceFileNameFromUrl","isIndexedSource","contentHashIndex","doesContentHashChange","QuickActionButton","dataTestId","ContinueToPrevious","ContinueToNext","ToggleLogPoint","icon","QuickActions","columnIndex","setHeight","isShiftActive","shift","addPoint","getSource","getSymbols","onToggleLogPoint","shouldBreak","closestFunction","findClosestFunction","onContinueToNext","onContinueToPrevious","button","ToggleWidgetButton","firstBreakableColumnIndex","hitCountsForLine","KeyModifiers","codeFolding","useEditorBreakpoints","sourceEditor","renderedLines","marker","BREAKPOINT","makeMarker","ctrlKey","setGutterMarker","resizeBreakpointGutter","useHighlightedLines","selectedFrame","getSelectedFrameSuspense","selectedLocation","getSelectedLocation","getSelectedSourceWithContent","highlightedLineRange","getHighlightedLineRange","prevPropsRef","prevLineIndex","isDocumentReady","prevSourceId","shouldSetHighlightLine","isDebugLine","editorWrapper","parseInt","getComputedStyle","getPropertyValue","resetHighlightLine","prevHighlightedLineRange","alignLine","hasDocument","useEditor","setContextMenu","selectedSourceContent","setHoveredLocation","setVisibleLines","instancePropsRef","lastClientX","lastClientY","setEditor","getEditor","_initShortcuts","HTMLElement","editorMount","firstChild","removeChild","appendToLocalElement","destroy","clearDocuments","instanceProps","prevSelectedSource","prevSelectedSourceContent","prevSymbols","LoadingStatus","showErrorMessage","showSourceText","showLoading","clearEditor","setTextHelper","prevSelectedLocation","shouldScrollToLocation","locationChanged","symbolsChanged","scrollToColumn","scrollToLocationHelper","updateViewport","resizeToggleButton","openMenuHelper","lineAtHeight","getAttribute","onCodeMirrorClick","updateCursorPosition","getSourceLocationFromMouseEvent","onCodeMirrorContextMenu","___","onCodeMirrorGutterClick","gutter","clickEvent","contains","existingPoint","onCodeMirrorKeyDown","codeWrapper","textArea","focus","onCodeMirrorScrollDebounced","onMouseScroll","viewFrom","viewTo","onDocumentMouseMove","onCodeMirrorLineMouseEnter","lineNumberNode","onCodeMirrorLineMouseLeaveDebounced","onCodeMirrorMouseOverToken","onTokenMouseOver","onCodeMirrorMouseOverLine","onLineMouseOver","onCodeMirrorGutterContextMenu","isFirefox","disableUnHitLines","hitCountsEnabled","updateHitCountsMode","hitCounts","minHitCount","maxHitCount","getCachedMinMaxSourceHitCounts","previousFocusRegion","previousHitCounts","isCollapsed","isCurrentLineNumberValid","numCharsToFit","toFixed","isCollapsedRef","setOption","gutterElement","parentElement","warn","drawLines","currentCMLineNumber","oneIndexedLineNumber","lineHitCounts","NUM_GRADIENT_COLORS","round","info","lineInfo","markerNode","gutterMarkers","onclick","hitsLabel","drawLinesRaf","useLineHitCounts","EditorOuter","gutterContextMenu","getContextMenu","KeyShortcuts","onClosePress","closeTab","listSelections","execCommand","showLineHits","EditorInner","getValueSuspense","createGenericCache","incrementalParser","parseChunk","parsedLines","identity","parseStreaming","getValueAsync","parseStreamingAsync","maxCharacters","DEFAULT_MAX_CHARACTERS","maxTime","subscribers","streamingParser","parsedProgress","rawLines","rawProgress","subscribe","subscriber","sourceIndex","processChunk","contents","concat","lastLine","newLines","substring","codeUnitCount","contentType","complete","isComplete","lineCount","cachedElement","inProgressHTMLString","parsedCharacterIndex","isCodeComplete","codeToParse","charAt","language","javascriptLanguage","htmlLanguage","contentTypeToLanguage","extension","jsxLanguage","typescriptLanguage","tsxLanguage","jsonLanguage","urlToLanguage","EditorState","extensions","tree","ensureSyntaxTree","characterIndex","highlightTree","classHighlighter","to","classes","processSection","maxPosition","nextIndex","indexOf","any","section","subsection","outerHTML","dataTestName","dismiss","dismissOnMouseLeave","dismissStateRef","dismissState","ignoreMouseLeaveEvents","clearMouseLeaveTimeout","scrollTargets","PreviewPopup","SuspendingPreviewPopup","popupRef","selectedPauseAndFrameId","SelectedFrameContext","evaluateSuspense","popupElement","REGULAR_SIZE","conditionalPointPanelHeight","pointPanelHeight","lineHeight","lineHeightWithPoint","lineHeightWithConditionalPoint","LARGE_SIZE","useFontBasedListMeasurents","sizes","setSizes","htmlElement","callbackRef","MutationObserver","mutations","mutation","attributeName","attributes","useClassListObserver","prefersLargeFontSize","resetAfterIndex","NEW_LINE_REGEX","reducer","action","by","currentScopeId","newIndex","cachedScopes","pendingUpdateForScope","scopeId","cachedScope","queryData","useSearch","stableSearch","useReducer","deferredQuery","deferredQueryData","prevResults","itemsChanged","queryChanged","queryDataChanged","scopeIdChanged","prevIndex","prevItem","disable","enable","markUpdateProcessed","goToNext","goToPrevious","search","lines","caseSensitive","regex","wholeWord","flags","escapeRegExp","regExp","SourceSearchContext","SourceSearchContextRoot","scope","setScope","setModifiers","memoizedActions","newModifiers","isEqual","useSourceSearch","resolver","getStreamingSourceContentsHelper","updateSourceContents","CurrentLineHighlightSuspends","sourceSearchState","pauseData","getPauseDataSuspense","correspondingSourceIds","getCorrespondingSourceIds","getCorrespondingLocations","findIndex","correspondingLocation","searchLineIndex","KeyboardModifiersContext","KeyboardModifiersContextRoot","isMetaKeyActive","setIsMetaKeyActive","isShiftKeyActive","setIsShiftKeyActive","onKeyUp","nextMetaKeyActive","metaKey","nextShiftKeyActive","HoverButton","buttonClassName","iconClassName","TimelineContext","findClosestFunctionName","TOO_MANY_POINTS_TO_FIND","targetPoint","findLastHitPoint","findHitPoint","addLogPoint","closestFunctionName","togglePoint","graphqlUrl","URL","searchParams","GraphQLClientContext","accessToken","response","fetch","method","headers","Authorization","json","graphQLClient","config","send","operationName","variables","validate","Function","AutoCompleteListRow","onSubmit","expressionHead","expressionTail","findMatches","binding","findIndexString","insertString","flatten","needle","startsWith","AutoCompleteListOuter","inputRef","onCancel","useLoadedRegions","isPointInRegions","getPauseForExecutionPointSuspense","useCurrentPause","AutoCompleteListInner","pieces","join","maybeResultId","maybeGlobalObjectId","List","AutoComplete","autoFocus","onCancelProp","onChangeProp","onSubmitProp","setExpression","newValue","cursorIndex","selectionStart","currentIndex","character","parseFloat","getExpressionFromString","AutoCompleteList","substr","getBadgeStyleVars","badgeName","BadgePicker","toggle","isInitial","BadgePickerButtonIcon","BadgePickerButton","currentBadge","targetBadge","badgeStyle","CommentButton","isPausedAtPoint","nullTuple","findClosestHitPoint","binarySearch","findPointForLocation","PointPanelTimeline","currentExecutionPoint","hoverCoordinates","setHoverCoordinates","hoverTime","setHoverTime","optimisticTime","setOptimisticTime","progressBarTime","currentHitPoint","currentHitPointIndex","hitPointIndex","firstHitPoint","lastHitPoint","previousButtonEnabled","nextButtonEnabled","tooManyPointsToFind","prevHitPoint","findHitPointBefore","nextHitPoint","findHitPointAfter","rect","relativeX","percentage","imperativelyGetClosestPointForTime","formatTimestamp","SyntaxHighlightedLine","editable","SyntaxHighlightedLineSuspends","fileExtension","htmlLines","contentEditable","SourcePanelWrapper","PointPanel","showCommentsPanel","InspectorContext","curentTime","invalidateCache","useCacheRefresh","isEditing","setIsEditing","editableCondition","setEditableCondition","editableContent","setEditableContent","isContentValid","isConditionValid","onEditableContentChange","newContent","onEditableConditionChange","newCondition","onAddConditionClick","showTooManyPointsMessage","startEditing","addCommentGraphQL","hasFrames","isPublished","sourceLocation","SourceLineLoadingPlaceholder","formatHitCount","SourceListRow","loadingPlaceholderWidth","setShowHitCounts","showColumnBreakpoints","showHitCounts","useSyncExternalStore","html","hitCount","lineHasHits","hitCountBarClassName","hitCountLabelClassName","hitCountIndex","lineSegments","div","htmlAfter","htmlBefore","plainText","CurrentLineHighlight","areEqual","getScrollbarWidth","appendChild","scrollBarWidth","offsetWidth","SourceList","streamingSourceContents","scrollbarWidth","innerRef","focusedLineNumber","markPendingFocusUpdateProcessed","pendingFocusUpdate","sourceSearchActions","prevPointsRef","prevPoints","prevPointsIndex","Number","MAX_SAFE_INTEGER","nextPointsIndex","getItemSize","longestLineWidthRef","onItemsRendered","visibleStartIndex","visibleStopIndex","longestLineWidth","maxLineNumberStringLength","estimatedItemSize","StreamingSourceLoadingProgressHeader","loadedProgressBarWidth","parsedProgressBarWidth","Source","SourceLoader","getStreamingSourceContentsSuspense","SourceRenderer","hoveredState","setHoveredState","sourceRef","setHoverStateDebounced","AutoSizer","rowElement","tokenElement","tagName","currentTokenElement","getExpressionForTokenElement","queryIndex","queryCharacter","characterIndices","weight","sortedIndexBy","splice","SourceFileNameSearchContext","SourceFileNameSearchContextRoot","openSource","focusedSourceIdRef","setSources","goToLineState","setGoToLineState","goToLineMode","goToLineNumber","externalActions","isNaN","useSourceFileNameSearch","getSourcesHelper","updateSources","SourceSearch","searchState","searchActions","NewSourceAdapterRoot","NewSourceAdapter","openSourceIds","sourceSearchInputRef","setViewport","LazyOffscreen","CommandPaletteButton","deselectSource","tabSources","getSourcesForTabs","activeSearch","hasSiblingOfSameName","getHasSiblingOfSameName","selectSource","copyToClipboard","closeTabs","ensureSourcesIsVisible","Tab","tab","showContextMenu","tabCount","otherTabs","t","sourceTab","tabURLs","otherTabURLs","tabMenuItems","getTabMenuItems","closeOtherTabs","closeTabsToEnd","closeAllTabs","copySourceUri2","buildMenu","isSourceSearchEnabled","onDragOver","onDragStart","onDragEnd","isPrettyCode","isPretty","pretty","getSourceQueryString","Redacted","draggable","getTruncatedFileName","onTabContextMenu","getFileURL","SourceIcon","shouldHide","toolboxLayout","getToolboxLayout","moveTabBySourceId","openQuickOpen","openQuickOpenAction","Tabs","draggedSource","draggedSourceIndex","hoveredTabIndex","tabDOMRect","pageX","mouseCursorX","targetTab","selectedSourceNode","sourceTabs","isSelectedSourceNodeVisible","getIsSelectedSourceNodeVisible","containerX","containerWidth","childX","childWidth","_draggedSource","_draggedSourceIndex","getIconClass","renderTabs","onTabDragStart","onTabDragOver","onTabDragEnd","EditorPane","loadingEditor","setLoadingEditor","panelEl","enableNewSourceViewer","nodeWidth","setWidth","useWidthObserver","waitForEditor","setUnexpectedError","ReplayUpdatedError","narrow","FilterLayout","setFilterValue","table","toggleType","types","filterOpen","setFilterOpen","outlined","RequestTypeOptions","canonicalType","ToggleRow","selected","Checkbox","PanelTabs","activeTab","setActiveTab","tabs","role","AddNetworkRequestCommentButton","request","createNetworkRequestComment","raw","downloaded","setDownloaded","dataURL","createObjectURL","Blob","buffer","revokeObjectURL","download","Displayable","TEXTISH_CONTENT_TYPES","Base64ToUInt8Array","base64","binaryString","atob","len","bytes","Uint8Array","charCodeAt","RawToUTF8","as","Raw","withoutCharset","Text","TextDecoder","decode","TextBodyComponent","copied","setCopied","asString","blob","navigator","clipboard","write","ClipboardItem","ImageBodyComponent","bodyParts","getTheme","combined","acc","part","offset","BodyPartsToUInt8Array","displayable","StringToObjectMaybe","decodeURI","URLEncodedToPlaintext","Image","Buffer","shouldCollapse","displayDataTypes","displayObjectSize","requestBody","getSelectedRequestBody","findHeader","requestHeaders","_ResponseBody","responseBodyParts","responseHeaders","getSelectedResponseBody","StackTrace","getPauseIdForPointSuspense","panel","StackTraceSuspenseWrapper","RequestDetailsUnavailable","RequestDetailsTabs","CloseButton","hideRequestDetails","FormattedUrl","parsedUrl","params","pathname","DetailTable","details","h","TriangleToggle","expanded","marginInlineEnd","Cookies","v","decodeURIComponent","Timing","firstByte","HeadersPanel","requestExpanded","setRequestExpanded","requestHeadersExpanded","setRequestHeadersExpanded","responseHeadersExpanded","setResponseHeadersExpanded","queryParametersExpanded","setQueryParametersExpanded","String","documentType","cause","sortBy","r","queryParams","DEFAULT_TAB","previousRequestId","nextRequestId","onDocumentKeyDown","selectAndFetchRequest","Boolean","hasRequestBody","hasResponseBody","triggerPoint","activeTabs","ColumnsDropdown","ColumnItem","attrs","getToggleHiddenProps","HeaderGroups","headerGroups","menuLocation","setMenuLocation","ev","pageY","headerGroup","getHeaderGroupProps","headerProps","getHeaderProps","columnProps","isLastColumn","getResizerProps","isResizing","RequestRow","isFirstInFuture","isInLoadedRegion","isInPast","onSeek","row","showContentMenuAt","prevIsSelectedRef","original","getRowProps","cells","cell","getCellProps","cellProps","filteredAfterCount","filteredBeforeCount","onRowSelect","selectedRequest","getTableProps","getTableBodyProps","rows","prepareRow","contextMenuData","setContextMenuData","inPast","firstInFuture","isTimeInRegions","every","setFocusRegionBeginTime","setFocusRegionEndTime","Table","requests","Header","accessor","req","partialRequestsToCompleteSummaries","defaultColumn","minWidth","useTable","autoResetGlobalFilter","initialState","hiddenColumns","useBlockLayout","useGlobalFilter","useResizeColumns","requestsBeforeFilterCount","requestsAfterFilterCount","getFocusedRequests","getFocusedEvents","network","selectedRequestId","getSelectedRequestId","setTypes","vert","setVert","newTypes","resizeObserver","splitBoxContainer","timeMixpanelEvent","setGlobalFilter","SplitBox","initialSize","minSize","maxSize","startPanel","endPanel","splitterSize","NodePicker","pos","mouseEventCanvasPosition","pickerPosition","nodeBounds","onCheckNodeBounds","enabledNodeIds","onHighlightNode","hoveredNodeId","onHovering","onUnhighlightNode","onPicked","onMouseClick","canvas","getElementById","bounds","bottom","pixelRatio","getDevicePixelRatio","nodePickerInstance","NodePickerClass","globalNodePickerActive","setGlobalNodePickerActive","nodePickerRemoveTime","clickNodePickerButton","now","setIsNodePickerActive","loadMouseTargets","setSelectedPanel","handleNodeSelected","nodeId","highlightNode","selectNode","nodePickerMouseClickInCanvas","boundingRects","fetchMouseTargetsForPause","getMouseTarget","unhighlightNode","setMouseTargetsLoading","nodeIds","gNodePicker","hasSlice","LoadingScreen","fallbackMessage","recordingCapabilitiesPromise","recordingCapabilities","getRecordingCapabilitiesSuspense","Promise","ConsoleContextMenuContext","ConsoleContextMenuContextRoot","setLoggable","mouseCoordinates","setMouseCoordinates","hide","loggables","INVISIBLE_STATE","useConsoleSearchDOM","searchInputRef","defaultVisible","useSearchDOM","setVisible","searchInput","ConsoleSearchContext","ConsoleSearchContextRoot","showSearchInputByDefault","ConsoleSearch","hideOnEscape","BADGES","rangeForDisplay","modalRef","dismissCallback","dismissOnClickOutside","handleDocumentKeyDown","handleDocumentClick","ownerDocument","timeoutID","setBadge","ContextMenuWrapper","FilterText","getRecordingCapabilities","addon","generatedId","parsedId","checkboxProps","htmlFor","Badge","EventType","categoryLabel","EventCategory","eventCategory","eventsWithHits","totalHitCount","categoryName","filteredEvents","filterByTextLowerCase","eventsList","Expandable","headerClassName","EventsList","setFilterByDisplayText","EventsListCategories","commonEventCategories","otherEventCategories","FilterToggles","exceptionsBadge","afterContent","ToggleCategoryCount","supportsEventTypes","NodeModulesCount","camelCase","CurrentTimeIndicator","behavior","EmailSubscription","GRAPHQL_URL","useDismissNag","currentUserInfo","refetchUser","nag","MessageHoverButton","locations","showAddCommentButton","inspectFunctionDefinition","isCurrentlyPausedAt","getPreferredLocation","addCommentTransition","FIRST_CONSOLE_NAVIGATE","sourceString","EventLogRenderer","isFocused","Fragment","primaryContent","InspectableTimestampedPointContext","locationAndTimeToValueMap","runAnalysisSuspense","getKey","tokens","jsTokens","token","canRunLocalAnalysis","analysisResults","escapedCode","objectURL","worker","Worker","timeStampedPoint","isRemote","postMessage","terminate","STATUS_REJECTED","runLocalAnalysis","createMapperForAnalysis","resultsMap","runRemoteAnalysis","createMapperForCondition","LogPointRenderer","logPointInstance","showNewBadgeFlash","createdAtTime","BadgeRenderer","AnalyzedContent","entry","ClientValueValueRenderer","primitiveToClientValue","StackRenderer","StackFrameRenderer","functionName","MessageRenderer","showExpandable","testMessageType","argumentValues","argumentValue","logContents","useBlockLayoutWhenExpanded","SyntaxHighlightedExpression","TerminalExpressionRenderer","EvaluatedContent","UncaughtExceptionRenderer","uncaughtException","isArray","MessagesList","forwardedRef","isFocusTransitionPending","currentTimeIndicatorPlacement","currentSearchResult","currentTimeIndicator","listItems","loggableExecutionPoint","MessagesListRefForwarder","Console","nagHeader","showFiltersByDefault","terminalInput","clearMessages","clearConsoleEvaluations","consoleEvaluations","isMenuOpen","setIsMenuOpen","menuValueHasBeenToggled","setMenuValueHasBeenToggled","renderFilters","Offscreen","fallbackClassName","previewValue","debouncedUpdateValue","rv","useEagerEvalPreview","EagerEvalFooterSuspends","completedExpression","supportsEagerEvaluation","padding","borderTop","borderBottom","minHeight","marginInlineStart","EagerEvalFooter","JSTerm","addTerminalExpression","terminalExpressionHistory","getIsInLoadedRegion","playback","getPlayback","historyIndex","setHistoryIndex","autocompletePreview","setAutocompletePreview","execute","trimmedValue","jsterm","recording","useGetRecording","canEval","userRole","setKey","inaccessibleReason","prevKey","InaccessibleEditor","reason","setValueCallback","setCursor","getJsTermApi","reasonStrings","disabledPlayback","other","NewConsoleRoot","consoleFilterDrawerDefaultsToOpen","JSTermWrapper","addMessage","setTerminalExpressionHistory","maxHistoryLength","command","prevHistory","useTerminalHistory","Pause","getJSON","visitedObjectIds","clientObject","protocolValueToClientValue","propertyPromises","prop","all","loadObjectProperties","getObjectThrows","actualPropValues","val","isInteger","fromEntries","getDOMNodes","ReplayWall","enablePicker","initializePicker","disablePicker","onShutdown","listen","listener","_listener","sendAnnotation","annotation","payload","inspectedElements","path","responseID","requestID","sendRequest","setProtocolCheckFailed","rendererID","highlightedElementId","nodeToElementId","mapNodesToElements","elementId","rootID","store","_roots","_rootIDToRendererID","expr","collectElementIDs","containerEntries","elementID","elementIDs","_idToElement","childID","ReactDevtoolsPanel","annotations","getAnnotations","currentPoint","getCurrentPoint","protocolCheckFailed","getProtocolCheckFailed","reactInitPoint","getReactInitPoint","reactDevToolsInlineModule","setReactDevToolsInlineModule","stateUpdaterCallback","responseDataObject","getObjectPropertyHelper","versionData","version","loadReactDevToolsInlineModuleFromProtocol","dispatchFetchMouseTargets","isReactDevToolsReady","ReactDevTools","createBridge","createStore","initialize","wall","bridge","checkBridgeProtocolCompatibility","supportsNativeInspection","createReactDevTools","setIsNodePickerInitializing","actualOpts","sendTelemetryEvent","setHasReactComponents","browserTheme","enabledInspectedElementContextMenu","overrideTab","showTabBar","hideSettings","hideToggleErrorAction","hideToggleSuspenseAction","hideLogAction","hideViewSourceAction","replayThemesToRDTThemes","light","dark","system","ReduxDevToolsPanel","ReduxDevToolsAppRoot","setRoot","rootRef","reduxAnnotations","ReduxAnnotationsContext","appTheme","app","currentRDTTheme","setCurrentRDTTheme","TabSpotlight","isShown","setIsShown","selectedPanel","getSelectedPanel","timeoutKey","transitionDuration","ToolboxButton","ShowVideoButton","getShowVideoPanel","setShowVideoPanel","LAYOUT_ICONS","full","ide","ToolboxOption","LayoutOption","collapseDropdown","setToolboxLayout","ToolboxOptions","setExpanded","layoutOptions","supportsRepaintingGraphics","PortalDropdown","buttonContent","buttonStyle","distance","InspectorApp","PanelButton","PanelButtons","hasReactComponents","hasReduxAnnotations","supportsNetworkRequests","chromiumNetMonitorEnabled","ConsolePanel","InspectorPanel","ReplayLogo","wide","PanelButtonsScrollOverflowGradient","SecondaryToolboxSuspenseWrapper","SecondaryToolbox","Panel","A11yIntention","keyboard","handleKeyDown","handleMouseDown","refreshCodeMirror","Debugger","wrapper","triggerEditorPaneResize","editorPane","dispatchEvent","Event","wrapperNode","loadingSettings","useGetUserSettings","Toolbox","useGetShowVideo","recordingTarget","getRecordingTarget","Vertical","showVideo","onResizeEnd","Video","endPanelControl","Horizontal","sidePanelCollapsed","Viewer","getPaneCollapse","onMove","displayedProgress","setDisplayedProgress","increment","inspector","module","exports"],"sourceRoot":""}
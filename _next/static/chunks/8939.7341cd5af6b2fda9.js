"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8939],{25494:function(e,t,r){r.r(t),r.d(t,{default:function(){return S}});var n=r(59499),s=r(94184),a=r.n(s),o=r(67294),i=r(2664),c=r(29675),l=r(43586),d=r(53368),u=r(98369),m=r(37496),f=r(11877),x=r(30573),p=r(36865),h=r(28714),b=r(91637),g=r(85893);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w({children:e,onClick:t=(()=>{}),disabled:r=!1}){return(0,g.jsx)("button",{type:"button",onClick:t,disabled:r,className:"max-w-max items-center rounded-md border border-transparent bg-primaryAccent px-4 py-2 font-medium text-white shadow-sm hover:bg-primaryAccentHover focus:outline-none focus:ring-2 focus:ring-primaryAccent focus:ring-offset-2",children:e})}function y({headerText:e,children:t}){return(0,g.jsxs)("div",{className:"flex flex-grow flex-col space-y-3 overflow-hidden",children:[(0,g.jsx)("h2",{className:"text-2xl ",children:e}),(0,g.jsx)("div",{className:"flex flex-grow flex-col space-y-3 overflow-hidden text-gray-500",children:t})]})}function k(){return(0,g.jsx)("button",{disabled:!0,type:"button",className:a()("items-center rounded-md border border-transparent px-3 py-1.5 font-medium shadow-sm focus:outline-none","bg-gray-300 text-gray-600"),children:"Next"})}function N({current:e,total:t,setCurrent:r,onNext:n,didUserConfirm:s,allowNext:i}){const{0:c,1:l}=(0,o.useState)(!1);(0,o.useEffect)((()=>{i&&c&&r((e=>e+1))}),[i,c,r]);const d=c&&!i?"Loading":"Next";return(0,g.jsx)("button",{onClick:()=>{s().then((e=>{e&&(n&&n(),l(!0))}))},disabled:e==t,type:"button",className:a()("items-center rounded-md border border-transparent px-3 py-1.5 font-medium shadow-sm focus:outline-none focus:ring-2 focus:ring-primaryAccent focus:ring-offset-2",{"bg-primaryAccent text-white hover:bg-primaryAccentHover":e<t}),children:d})}function C({hideModal:e,setNewWorkspace:t,setCurrent:r,total:n,current:s}){const{0:a,1:i}=(0,o.useState)(""),{0:c,1:l}=(0,o.useState)(null),{0:u,1:f}=(0,o.useState)(!1),p=(0,o.useRef)(null),h=d.Z.useCreateNewWorkspace((function(e){t(e),b({variables:{workspaceId:e.id}}),f(!0)})),b=d.Z.useUpdateDefaultWorkspace();return(0,o.useEffect)((()=>{p.current?.focus()}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(y,{headerText:"Team name",children:(0,g.jsxs)("div",{className:"flex flex-col py-3 px-0.5",children:[(0,g.jsx)(x.oi,{value:a,onChange:e=>{(0,m.Xq)(e.target.value)&&l(null),i(e.target.value)},ref:p}),c?(0,g.jsx)("div",{className:"text-red-500",children:c}):null]})}),(0,g.jsx)("div",{className:"grid",children:(0,m.Xq)(a)?(0,g.jsx)(N,{onNext:()=>{(0,m.Xq)(a)?h({variables:{name:a,planKey:"team-v1"}}):l("The team name cannot be blank")},didUserConfirm:()=>Promise.resolve(!0),current:s,total:n,setCurrent:r,hideModal:e,allowNext:u}):(0,g.jsx)(k,{})})]})}function O({hideModal:e,setCurrent:t,newWorkspace:r,total:n,current:s}){const{0:a,1:i}=(0,o.useState)(""),{0:c,1:l}=(0,o.useState)(!1),{0:u,1:p}=(0,o.useState)(null),{members:j,loading:v}=d.Z.useGetWorkspaceMembers(r.id),k=d.Z.useInviteNewWorkspaceMember((()=>{i(""),l(!1)})),C=(0,o.useRef)(null),{confirmDestructive:O}=(0,f.N4)(),A=j?.filter((e=>e.email))||[],S=A.sort(((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())),M=e=>{e.preventDefault(),(0,m.oH)(a)?A.map((e=>e.email)).includes(a)?p("Address has already been invited"):(p(null),l(!0),k({variables:{workspaceId:r.id,email:a}})):p("Invalid email address")};return(0,o.useEffect)((()=>{C.current?.focus()}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(y,{headerText:"Invite team members",children:[(0,g.jsxs)("form",{className:"flex flex-col",onSubmit:M,children:[(0,g.jsxs)("div",{className:"flex flex-grow flex-row space-x-3 px-0.5",children:[(0,g.jsx)(x.oi,{placeholder:"Email address",value:a,onChange:e=>{i(e.target.value)},ref:C}),(0,g.jsx)(w,{onClick:M,disabled:c,children:c?"Loading":"Invite"})]}),u?(0,g.jsx)("div",{children:u}):null]}),(0,g.jsx)("div",{className:"flex-grow overflow-auto",children:!v&&S?(0,g.jsx)(h.I,{members:S,isAdmin:!0}):null}),(0,g.jsx)(b.Z,{workspaceId:r.id})]}),(0,g.jsx)("div",{className:"grid",children:(0,g.jsx)(N,{allowNext:!0,current:s,total:n,setCurrent:t,hideModal:e,didUserConfirm:()=>a?O({message:"Continue without sending invitations?",description:"You started to invite someone, but didn't press the invite button. Are you sure you want to proceed?",acceptLabel:"Continue anyways"}):Promise.resolve(!0)})})]})}function A({hideModal:e,newWorkspace:t}){const r=d.Z.useUpdateDefaultWorkspace(),n=(0,l.t5)(!0);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(y,{headerText:"Team setup complete",children:(0,g.jsx)("div",{children:"Your new team is ready."})}),(0,g.jsx)("div",{className:"grid",children:(0,g.jsx)("button",{onClick:()=>{(0,u.$f)(),r({variables:{workspaceId:t.id}}),n(`${t.id}`),e()},className:a()("items-center rounded-md border border-transparent px-3 py-1.5 font-medium shadow-sm focus:outline-none focus:ring-2 focus:ring-primaryAccent focus:ring-offset-2","bg-primaryAccent text-white hover:bg-primaryAccentHover"),children:"Take me to my team"})})]})}var S=(0,i.$j)((()=>({})),{hideModal:c.hideModal})((function(e){const{0:t,1:r}=(0,o.useState)(1),{0:n,1:s}=(0,o.useState)(null);let a;const i=v(v({},e),{},{setCurrent:r,setNewWorkspace:s,newWorkspace:n,current:t,total:4});return a=1===t?(0,g.jsx)(C,v({},i)):2===t?(0,g.jsx)(O,v({},i)):(0,g.jsx)(A,v({},v(v({},i),{},{newWorkspace:n}))),(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(p.ZP,{options:{maskTransparency:"translucent"},onMaskClick:e.hideModal,children:(0,g.jsx)("div",{className:"text-modalColor relative flex flex-col justify-between space-y-2 rounded-lg bg-modalBgcolor p-4 text-sm shadow-xl backdrop-blur-sm",style:{width:"480px"},children:a})})})}))}}]);
//# sourceMappingURL=8939.7341cd5af6b2fda9.js.map
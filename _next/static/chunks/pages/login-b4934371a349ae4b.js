(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{44019:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDomainLocale=function(e,t,n,r){return!1};("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7942:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(67294))&&r.__esModule?r:{default:r},s=n(64957),l=n(57995),c=n(30647),a=n(51992),i=n(90639),u=n(44019),f=n(70227);const d="undefined"!==typeof o.default.useTransition,p={};function h(e,t,n,r){if(!e)return;if(!s.isLocalURL(t))return;e.prefetch(t,n,r).catch((e=>{0}));const o=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;p[t+"%"+n+(o?"%"+o:"")]=!0}var x=o.default.forwardRef((function(e,t){let n;const{href:r,as:x,children:y,prefetch:g,passHref:m,replace:v,shallow:j,scroll:b,locale:w,onClick:_,onMouseEnter:N,legacyBehavior:k=!0!==Boolean(!1)}=e,C=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["href","as","children","prefetch","passHref","replace","shallow","scroll","locale","onClick","onMouseEnter","legacyBehavior"]);n=y,!k||"string"!==typeof n&&"number"!==typeof n||(n=o.default.createElement("a",null,n));const L=!1!==g,[,E]=d?o.default.useTransition():[];let O=o.default.useContext(c.RouterContext);const S=o.default.useContext(a.AppRouterContext);S&&(O=S);const{href:M,as:R}=o.default.useMemo((()=>{const[e,t]=s.resolveHref(O,r,!0);return{href:e,as:x?s.resolveHref(O,x):t||e}}),[O,r,x]),P=o.default.useRef(M),I=o.default.useRef(R);let A;k&&(A=o.default.Children.only(n));const T=k?A&&"object"===typeof A&&A.ref:t,[D,W,$]=i.useIntersection({rootMargin:"200px"}),q=o.default.useCallback((e=>{I.current===R&&P.current===M||($(),I.current=R,P.current=M),D(e),T&&("function"===typeof T?T(e):"object"===typeof T&&(T.current=e))}),[R,T,M,$,D]);o.default.useEffect((()=>{const e=W&&L&&s.isLocalURL(M),t="undefined"!==typeof w?w:O&&O.locale,n=p[M+"%"+R+(t?"%"+t:"")];e&&!n&&h(O,M,R,{locale:t})}),[R,M,W,w,L,O]);const B={ref:q,onClick:e=>{k||"function"!==typeof _||_(e),k&&A.props&&"function"===typeof A.props.onClick&&A.props.onClick(e),e.defaultPrevented||function(e,t,n,r,o,l,c,a,i){const{nodeName:u}=e.currentTarget;if("A"===u.toUpperCase()&&(function(e){const{target:t}=e.currentTarget;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!s.isLocalURL(n)))return;e.preventDefault();const f=()=>{t[o?"replace":"push"](n,r,{shallow:l,locale:a,scroll:c})};i?i(f):f()}(e,O,M,R,v,j,b,w,S?E:void 0)},onMouseEnter:e=>{k||"function"!==typeof N||N(e),k&&A.props&&"function"===typeof A.props.onMouseEnter&&A.props.onMouseEnter(e),s.isLocalURL(M)&&h(O,M,R,{priority:!0})}};if(!k||m||"a"===A.type&&!("href"in A.props)){const e="undefined"!==typeof w?w:O&&O.locale,t=O&&O.isLocaleDomain&&u.getDomainLocale(R,e,O.locales,O.domainLocales);B.href=t||f.addBasePath(l.addLocale(R,e,O&&O.defaultLocale))}return k?o.default.cloneElement(A,B):o.default.createElement("a",Object.assign({},C,B),n)}));t.default=x,("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},90639:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useIntersection=function({rootRef:e,rootMargin:t,disabled:n}){const a=n||!s,i=r.useRef(),[u,f]=r.useState(!1),[d,p]=r.useState(null);r.useEffect((()=>{if(s){if(i.current&&(i.current(),i.current=void 0),a||u)return;return d&&d.tagName&&(i.current=function(e,t,n){const{id:r,observer:o,elements:s}=function(e){const t={root:e.root||null,margin:e.rootMargin||""},n=c.find((e=>e.root===t.root&&e.margin===t.margin));let r;if(n&&(r=l.get(n),r))return r;const o=new Map,s=new IntersectionObserver((e=>{e.forEach((e=>{const t=o.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return r={id:t,observer:s,elements:o},c.push(t),l.set(t,r),r}(n);return s.set(e,t),o.observe(e),function(){if(s.delete(e),o.unobserve(e),0===s.size){o.disconnect(),l.delete(r);const e=c.findIndex((e=>e.root===r.root&&e.margin===r.margin));e>-1&&c.splice(e,1)}}}(d,(e=>e&&f(e)),{root:null==e?void 0:e.current,rootMargin:t})),()=>{null==i.current||i.current(),i.current=void 0}}if(!u){const e=o.requestIdleCallback((()=>f(!0)));return()=>o.cancelIdleCallback(e)}}),[d,a,t,e,u]);const h=r.useCallback((()=>{f(!1)}),[]);return[p,u,h]};var r=n(67294),o=n(26286);const s="function"===typeof IntersectionObserver;const l=new Map,c=[];("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},51992:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AppRouterContext=void 0;const o=((r=n(67294))&&r.__esModule?r:{default:r}).default.createContext(null);t.AppRouterContext=o},55210:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(11163),o=n(67294),s=n(31402),l=n(9834),c=n(6992),a=n(15243),i=n(85893);function u(){const e=(0,r.useRouter)(),{user:t}=(0,a.Z)(),n=(0,c.TL)(),u=Array.isArray(e.query.challenge)?e.query.challenge[0]:e.query.challenge,f=Array.isArray(e.query.state)?e.query.state[0]:e.query.state;return!t||"string"!==typeof e.query.returnTo||u||f||e.push(e.query.returnTo),(0,o.useEffect)((()=>{n((0,l.clearExpectedError)())}),[n]),(0,i.jsx)(s.Z,{returnToPath:String(e.query.returnTo||"/"),state:f,challenge:u})}},31402:function(e,t,n){"use strict";n.d(t,{V:function(){return E},Z:function(){return O}});var r=n(19989),o=n(58771),s=n(41664),l=n.n(s),c=n(67294),a=n(14530),i=n.n(a),u=n(36037),f=n(32105),d=n(75046),p=n(98369),h=n(23800),x=n(97138),y=n(15243),g=n(89289),m=n(91275),v=n(85893);const j="Darwin"===i().appinfo.OS;var b;!function(e){e.default="default",e.firstBrowserOpen="first-browser-open"}(b||(b={}));const w=r.Ps`
  query GetConnection($email: String!) {
    auth {
      connection(email: $email)
    }
  }
`;function _({onLogin:e}){const{0:t,1:n}=(0,c.useState)(""),{0:r,1:o}=(0,c.useState)(!1),s=async()=>{const n=await(0,u.IO)({query:w,variables:{email:t}});n.data?.auth?.connection?e(n.data.auth.connection):o(n.errors?.find((e=>e.message))?.message||!0)};return(0,v.jsxs)("div",{className:"space-y-6",children:[(0,v.jsx)("p",{className:"text-center text-base",children:"Enter your email to be redirected to your SSO provider."}),r?(0,v.jsx)("p",{className:"text-center text-base text-red-500",children:"string"===typeof r?"We were unable to find your SSO provider right now. Please try again later.":"We couldn't find an SSO provider for your email."}):null,(0,v.jsxs)("div",{className:"flex flex-row space-x-3",children:[(0,v.jsx)("input",{type:"email",className:"w-48 flex-grow rounded-md text-black",placeholder:"user@company.com",value:t,onKeyPress:e=>"Enter"===e.key?s():null,onChange:e=>n(e.currentTarget.value)}),(0,v.jsx)(g.yI,{color:"blue",onClick:s,className:"justify-center",children:"Sign in"})]}),(0,v.jsx)("button",{className:"w-full justify-center text-sm font-bold text-primaryAccent underline",onClick:()=>e("google-oauth2"),children:"Sign in with Google"})]})}function N(){return(0,p.IB)()===b.firstBrowserOpen?(0,v.jsxs)("div",{className:"text-center text-base",children:[(0,v.jsx)("p",{children:"Replay captures everything you need for the perfect bug report, all in one link!"}),(0,v.jsx)("a",{href:"https://replay.io",className:"pointer-hand underline",children:"Learn more"})]}):(0,v.jsxs)(v.Fragment,{children:[(0,h.WN)()?(0,v.jsx)("h1",{className:"text-2xl font-extrabold",children:"Almost there!"}):null,(0,v.jsx)("div",{className:"space-y-4 self-start text-base",children:(0,h.WN)()?(0,v.jsx)("p",{children:"In order to join your team, we first need you to sign in."}):(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("p",{children:"Replay captures everything you need for the perfect bug report, all in one link"}),(0,v.jsx)("a",{href:"https://replay.io",className:"pointer-hand underline",children:"Learn more"})]})})})]})}function k({onShowSSOLogin:e,onLogin:t}){return(0,v.jsxs)("div",{className:"space-y-6",children:[(0,v.jsx)(N,{}),(0,v.jsx)(g.yI,{color:"blue",onClick:()=>t("google-oauth2"),className:"w-full justify-center",children:"Sign in with Google"}),(0,v.jsx)("button",{className:"w-full justify-center text-sm font-bold text-primaryAccent underline",onClick:e,children:"Enterprise Users: Sign in with SSO"})]})}function C(){return(0,v.jsxs)("div",{className:"space-y-6",children:[(0,v.jsx)(N,{}),(0,v.jsx)(g.yI,{color:"blue",onClick:()=>{(0,d.$E)()},className:"w-full justify-center",children:"Sign in"})]})}function L({error:e}){let t=e&&"message"in e?e.message:null;return t?("Invalid state"===t?t="Your login session expired. Please try logging in again.":((0,x.ve)("devtools-auth-error-login",{errorMessage:t}),"Unable to authenticate user"===t&&(t="We're sorry but we had a problem authenticating you. We're looking into it now!")),(0,v.jsx)(m.D$,{overlay:!0,noLogo:!0,children:(0,v.jsxs)("div",{className:"flex flex-row items-center space-x-4",children:[(0,v.jsx)(o.Z,{className:"h-12 w-12 flex-shrink-0 text-red-500"}),(0,v.jsx)("span",{className:"align-left text-base font-bold",children:t})]})})):null}function E({children:e,referrer:t}){const n="/"+(t?`?login-referrer=${t}`:"");return(0,v.jsx)(l(),{href:n,children:e})}function O({returnToPath:e="",challenge:t,state:r}){const{loginWithRedirect:o,error:s}=(0,y.Z)(),{0:l,1:a}=(0,c.useState)(!1);e.startsWith("/login")&&(e="/");const i=async n=>{if(t&&r){const o=(0,f.p)(),s=(0,f.K)();window.location.href=`https://${o}/authorize?response_type=code&code_challenge_method=S256&code_challenge=${t}&client_id=${s}&redirect_uri=${e}&scope=openid profile offline_access&state=${r}&audience=https://api.replay.io&connection=${n}`}else await o({appState:{returnTo:e},connection:n})};return(0,c.useEffect)((()=>{(0,d.Ox)(null)}),[]),(0,v.jsxs)(m.fH,{theme:"light",children:[(0,v.jsx)(m.D$,{overlay:!0,children:n.g.__IS_RECORD_REPLAY_RUNTIME__&&j?(0,v.jsx)(C,{}):l?(0,v.jsx)(_,{onLogin:i}):(0,v.jsx)(k,{onShowSSOLogin:()=>a(!0),onLogin:i})}),(0,v.jsx)(L,{error:s})]})}},91275:function(e,t,n){"use strict";n.d(t,{D$:function(){return f},M7:function(){return d},Q8:function(){return h},aW:function(){return y},fH:function(){return m},tn:function(){return p},x7:function(){return x},yP:function(){return g}});var r=n(94184),o=n.n(r),s=n(67294),l=n(89289),c=n(36865),a=n(36576),i=n(85893);const u=s.createContext({theme:"dark"});function f({children:e,overlay:t,noLogo:n}){(0,s.useContext)(u);return(0,i.jsxs)("div",{className:o()("relative m-4 flex flex-col items-center rounded-xl bg-loadingBoxes p-9 text-xl text-bodyColor shadow-md",t?"max-w-sm space-y-8":"max-w-2xl space-y-12",{"rounded-lg bg-opacity-80":t}),children:[n?null:(0,i.jsx)("img",{src:"/images/logo.svg",className:"h-24 w-full"}),e]})}function d({children:e}){return(0,i.jsx)("div",{className:"relative flex flex-col items-center space-y-4 text-bodyColor",children:e})}function p({children:e}){return(0,i.jsx)("div",{className:"text-3xl font-extrabold",children:e})}function h({children:e}){return(0,i.jsx)("div",{className:"mx-10 text-center",children:e})}function x({children:e}){return(0,i.jsx)("div",{className:"space-x-6",children:e})}function y({current:e,text:t,setCurrent:n,onNext:r,allowNext:o}){const{0:c,1:a}=(0,s.useState)(!1);(0,s.useEffect)((()=>{o&&c&&n((e=>e+1))}),[o,c,n]);const u=c&&!o?"Loading":t||"Next";return(0,i.jsx)(l.yI,{color:"blue",onClick:()=>{r&&r(),a(!0)},children:u})}function g({children:e,onClick:t=(()=>{}),className:n,disabled:r=!1}){return(0,i.jsx)("button",{type:"button",onClick:t,disabled:r,className:o()(n,"max-w-max items-center rounded-md border border-transparent bg-primaryAccent px-3 py-1.5 font-medium text-white shadow-sm hover:bg-primaryAccentHover focus:outline-none focus:ring-2 focus:ring-primaryAccent focus:ring-offset-2"),children:e})}function m({children:e,theme:t="dark"}){return(0,i.jsx)(u.Provider,{value:{theme:t},children:(0,i.jsxs)("div",{className:o()("fixed z-50 grid h-full w-full bg-black text-white"),children:[(0,i.jsx)(a.Z,{}),(0,i.jsx)(c.ZP,{options:{maskTransparency:"transparent"},blurMask:!1,children:e})]})})}},23800:function(e,t,n){"use strict";n.d(t,{SS:function(){return c},WN:function(){return l},cM:function(){return a},y1:function(){return i}});var r=n(66220),o=n(98369),s=n(81834);const l=()=>new URL(window.location.href).searchParams.get("teaminvite"),c=(e,t)=>1===e&&0===t;function a(e){return(0,s.I)(e,r.Nag.FIRST_REPLAY_2)&&(0,o.sP)()}function i(e,t){return(0,o.sP)()?(t(r.Nag.DOWNLOAD_REPLAY),!1):(0,s.I)(e,r.Nag.DOWNLOAD_REPLAY)}},83236:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(55210)}])},41664:function(e,t,n){e.exports=n(7942)},58771:function(e,t,n){"use strict";var r=n(67294);const o=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}))}));t.Z=o}},function(e){e.O(0,[9774,2888,179],(function(){return t=83236,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=login-b4934371a349ae4b.js.map